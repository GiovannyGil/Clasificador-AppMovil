function Dge(){import.meta.url,import("_").catch(()=>1);async function*t(){}}function CL(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(o,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IL(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}),n}var u2={exports:{}},Fp={},d2={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=Symbol.for("react.element"),SL=Symbol.for("react.portal"),EL=Symbol.for("react.fragment"),TL=Symbol.for("react.strict_mode"),NL=Symbol.for("react.profiler"),RL=Symbol.for("react.provider"),AL=Symbol.for("react.context"),DL=Symbol.for("react.forward_ref"),_L=Symbol.for("react.suspense"),OL=Symbol.for("react.memo"),FL=Symbol.for("react.lazy"),U$=Symbol.iterator;function PL(t){return t===null||typeof t!="object"?null:(t=U$&&t[U$]||t["@@iterator"],typeof t=="function"?t:null)}var h2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f2=Object.assign,p2={};function jl(t,e,n){this.props=t,this.context=e,this.refs=p2,this.updater=n||h2}jl.prototype.isReactComponent={};jl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m2(){}m2.prototype=jl.prototype;function iv(t,e,n){this.props=t,this.context=e,this.refs=p2,this.updater=n||h2}var av=iv.prototype=new m2;av.constructor=iv;f2(av,jl.prototype);av.isPureReactComponent=!0;var H$=Array.isArray,g2=Object.prototype.hasOwnProperty,lv={current:null},b2={key:!0,ref:!0,__self:!0,__source:!0};function x2(t,e,n){var o,s={},r=null,i=null;if(e!=null)for(o in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(r=""+e.key),e)g2.call(e,o)&&!b2.hasOwnProperty(o)&&(s[o]=e[o]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(o in a=t.defaultProps,a)s[o]===void 0&&(s[o]=a[o]);return{$$typeof:Pu,type:t,key:r,ref:i,props:s,_owner:lv.current}}function LL(t,e){return{$$typeof:Pu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pu}function ML(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G$=/\/+/g;function nb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ML(""+t.key):e.toString(36)}function Xh(t,e,n,o,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Pu:case SL:i=!0}}if(i)return i=t,s=s(i),t=o===""?"."+nb(i,0):o,H$(s)?(n="",t!=null&&(n=t.replace(G$,"$&/")+"/"),Xh(s,e,n,"",function(c){return c})):s!=null&&(cv(s)&&(s=LL(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(G$,"$&/")+"/")+t)),e.push(s)),1;if(i=0,o=o===""?".":o+":",H$(t))for(var a=0;a<t.length;a++){r=t[a];var l=o+nb(r,a);i+=Xh(r,e,n,l,s)}else if(l=PL(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=o+nb(r,a++),i+=Xh(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function hh(t,e,n){if(t==null)return t;var o=[],s=0;return Xh(t,o,"","",function(r){return e.call(n,r,s++)}),o}function zL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gn={current:null},Yh={transition:null},BL={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:lv};De.Children={map:hh,forEach:function(t,e,n){hh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hh(t,function(){e++}),e},toArray:function(t){return hh(t,function(e){return e})||[]},only:function(t){if(!cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=jl;De.Fragment=EL;De.Profiler=NL;De.PureComponent=iv;De.StrictMode=TL;De.Suspense=_L;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BL;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=f2({},t.props),s=t.key,r=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,i=lv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)g2.call(e,l)&&!b2.hasOwnProperty(l)&&(o[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];o.children=a}return{$$typeof:Pu,type:t.type,key:s,ref:r,props:o,_owner:i}};De.createContext=function(t){return t={$$typeof:AL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RL,_context:t},t.Consumer=t};De.createElement=x2;De.createFactory=function(t){var e=x2.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:DL,render:t}};De.isValidElement=cv;De.lazy=function(t){return{$$typeof:FL,_payload:{_status:-1,_result:t},_init:zL}};De.memo=function(t,e){return{$$typeof:OL,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Yh.transition;Yh.transition={};try{t()}finally{Yh.transition=e}};De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};De.useCallback=function(t,e){return Gn.current.useCallback(t,e)};De.useContext=function(t){return Gn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Gn.current.useDeferredValue(t)};De.useEffect=function(t,e){return Gn.current.useEffect(t,e)};De.useId=function(){return Gn.current.useId()};De.useImperativeHandle=function(t,e,n){return Gn.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return Gn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Gn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Gn.current.useMemo(t,e)};De.useReducer=function(t,e,n){return Gn.current.useReducer(t,e,n)};De.useRef=function(t){return Gn.current.useRef(t)};De.useState=function(t){return Gn.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return Gn.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return Gn.current.useTransition()};De.version="18.2.0";d2.exports=De;var pt=d2.exports;const Z=Gl(pt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL=pt,WL=Symbol.for("react.element"),UL=Symbol.for("react.fragment"),HL=Object.prototype.hasOwnProperty,GL=VL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jL={key:!0,ref:!0,__self:!0,__source:!0};function v2(t,e,n){var o,s={},r=null,i=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(i=e.ref);for(o in e)HL.call(e,o)&&!jL.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:WL,type:t,key:r,ref:i,props:s,_owner:GL.current}}Fp.Fragment=UL;Fp.jsx=v2;Fp.jsxs=v2;u2.exports=Fp;var le=u2.exports,y2={exports:{}},Io={},w2={exports:{}},$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,A){var D=R.length;R.push(A);e:for(;0<D;){var V=D-1>>>1,H=R[V];if(0<s(H,A))R[V]=A,R[D]=H,D=V;else break e}}function n(R){return R.length===0?null:R[0]}function o(R){if(R.length===0)return null;var A=R[0],D=R.pop();if(D!==A){R[0]=D;e:for(var V=0,H=R.length,K=H>>>1;V<K;){var ee=2*(V+1)-1,J=R[ee],ne=ee+1,re=R[ne];if(0>s(J,D))ne<H&&0>s(re,J)?(R[V]=re,R[ne]=D,V=ne):(R[V]=J,R[ee]=D,V=ee);else if(ne<H&&0>s(re,D))R[V]=re,R[ne]=D,V=ne;else break e}}return A}function s(R,A){var D=R.sortIndex-A.sortIndex;return D!==0?D:R.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var A=n(c);A!==null;){if(A.callback===null)o(c);else if(A.startTime<=R)o(c),A.sortIndex=A.expirationTime,e(l,A);else break;A=n(c)}}function y(R){if(m=!1,v(R),!p)if(n(l)!==null)p=!0,B(w);else{var A=n(c);A!==null&&q(y,A.startTime-R)}}function w(R,A){p=!1,m&&(m=!1,g(C),C=-1),f=!0;var D=h;try{for(v(A),d=n(l);d!==null&&(!(d.expirationTime>A)||R&&!T());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var H=V(d.expirationTime<=A);A=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&o(l),v(A)}else o(l);d=n(l)}if(d!==null)var K=!0;else{var ee=n(c);ee!==null&&q(y,ee.startTime-A),K=!1}return K}finally{d=null,h=D,f=!1}}var $=!1,k=null,C=-1,E=5,S=-1;function T(){return!(t.unstable_now()-S<E)}function P(){if(k!==null){var R=t.unstable_now();S=R;var A=!0;try{A=k(!0,R)}finally{A?U():($=!1,k=null)}}else $=!1}var U;if(typeof x=="function")U=function(){x(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,z=W.port2;W.port1.onmessage=P,U=function(){z.postMessage(null)}}else U=function(){b(P,0)};function B(R){k=R,$||($=!0,U())}function q(R,A){C=b(function(){R(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,B(w))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var D=h;h=A;try{return R()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,A){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=h;h=R;try{return A()}finally{h=D}},t.unstable_scheduleCallback=function(R,A,D){var V=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?V+D:V):D=V,R){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=D+H,R={id:u++,callback:A,priorityLevel:R,startTime:D,expirationTime:H,sortIndex:-1},D>V?(R.sortIndex=D,e(c,R),n(l)===null&&R===n(c)&&(m?(g(C),C=-1):m=!0,q(y,D-V))):(R.sortIndex=H,e(l,R),p||f||(p=!0,B(w))),R},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(R){var A=h;return function(){var D=h;h=A;try{return R.apply(this,arguments)}finally{h=D}}}})($2);w2.exports=$2;var qL=w2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2=pt,ko=qL;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C2=new Set,tu={};function ya(t,e){Cl(t,e),Cl(t+"Capture",e)}function Cl(t,e){for(tu[t]=e,t=0;t<e.length;t++)C2.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c0=Object.prototype.hasOwnProperty,KL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j$={},q$={};function XL(t){return c0.call(q$,t)?!0:c0.call(j$,t)?!1:KL.test(t)?q$[t]=!0:(j$[t]=!0,!1)}function YL(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QL(t,e,n,o){if(e===null||typeof e>"u"||YL(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jn(t,e,n,o,s,r,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=i}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new jn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new jn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new jn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new jn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new jn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new jn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new jn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new jn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new jn(t,5,!1,t.toLowerCase(),null,!1,!1)});var uv=/[\-:]([a-z])/g;function dv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uv,dv);mn[e]=new jn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uv,dv);mn[e]=new jn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uv,dv);mn[e]=new jn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new jn(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new jn(t,1,!1,t.toLowerCase(),null,!0,!0)});function hv(t,e,n,o){var s=mn.hasOwnProperty(e)?mn[e]:null;(s!==null?s.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QL(e,n,s,o)&&(n=null),o||s===null?XL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,o=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var Er=k2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=Symbol.for("react.element"),Qa=Symbol.for("react.portal"),Za=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),u0=Symbol.for("react.profiler"),I2=Symbol.for("react.provider"),S2=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),d0=Symbol.for("react.suspense"),h0=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),E2=Symbol.for("react.offscreen"),K$=Symbol.iterator;function mc(t){return t===null||typeof t!="object"?null:(t=K$&&t[K$]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,ob;function Tc(t){if(ob===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ob=e&&e[1]||""}return"\n"+ob+t}var sb=!1;function rb(t,e){if(!t||sb)return"";sb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var o=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){o=c}t.call(e.prototype)}else{try{throw Error()}catch(c){o=c}t()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var s=c.stack.split("\n"),r=o.stack.split("\n"),i=s.length-1,a=r.length-1;1<=i&&0<=a&&s[i]!==r[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==r[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==r[a]){var l="\n"+s[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{sb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tc(t):""}function ZL(t){switch(t.tag){case 5:return Tc(t.type);case 16:return Tc("Lazy");case 13:return Tc("Suspense");case 19:return Tc("SuspenseList");case 0:case 2:case 15:return t=rb(t.type,!1),t;case 11:return t=rb(t.type.render,!1),t;case 1:return t=rb(t.type,!0),t;default:return""}}function f0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Za:return"Fragment";case Qa:return"Portal";case u0:return"Profiler";case fv:return"StrictMode";case d0:return"Suspense";case h0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S2:return(t.displayName||"Context")+".Consumer";case I2:return(t._context.displayName||"Context")+".Provider";case pv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mv:return e=t.displayName||null,e!==null?e:f0(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return f0(t(e))}catch(n){}}return null}function JL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f0(e);case 8:return e===fv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e3(t){var e=T2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){o=""+i,r.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(i){o=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ph(t){t._valueTracker||(t._valueTracker=e3(t))}function N2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=T2(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function p0(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function X$(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R2(t,e){e=e.checked,e!=null&&hv(t,"checked",e,!1)}function m0(t,e){R2(t,e);var n=ni(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?g0(t,e.type,n):e.hasOwnProperty("defaultValue")&&g0(t,e.type,ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function g0(t,e,n){(e!=="number"||pf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nc=Array.isArray;function ul(t,e,n,o){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&o&&(t[n].defaultSelected=!0)}else{for(n=""+ni(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,o&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function b0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Nc(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ni(n)}}function A2(t,e){var n=ni(e.value),o=ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function Z$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function x0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mh,_2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mh=mh||document.createElement("div"),mh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t3=["Webkit","ms","Moz","O"];Object.keys(Vc).forEach(function(t){t3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vc[e]=Vc[t]})});function O2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vc.hasOwnProperty(t)&&Vc[t]?(""+e).trim():e+"px"}function F2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,s=O2(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,s):t[n]=s}}var n3=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v0(t,e){if(e){if(n3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function y0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w0=null;function gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $0=null,dl=null,hl=null;function J$(t){if(t=zu(t)){if(typeof $0!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Bp(e),$0(t.stateNode,t.type,e))}}function P2(t){dl?hl?hl.push(t):hl=[t]:dl=t}function L2(){if(dl){var t=dl,e=hl;if(hl=dl=null,J$(t),e)for(t=0;t<e.length;t++)J$(e[t])}}function M2(t,e){return t(e)}function z2(){}var ib=!1;function B2(t,e,n){if(ib)return t(e,n);ib=!0;try{return M2(t,e,n)}finally{ib=!1,(dl!==null||hl!==null)&&(z2(),L2())}}function ou(t,e){var n=t.stateNode;if(n===null)return null;var o=Bp(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var k0=!1;if(xr)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){k0=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch(t){k0=!1}function o3(t,e,n,o,s,r,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Wc=!1,mf=null,gf=!1,C0=null,s3={onError:function(t){Wc=!0,mf=t}};function r3(t,e,n,o,s,r,i,a,l){Wc=!1,mf=null,o3.apply(s3,arguments)}function i3(t,e,n,o,s,r,i,a,l){if(r3.apply(this,arguments),Wc){if(Wc){var c=mf;Wc=!1,mf=null}else throw Error(se(198));gf||(gf=!0,C0=c)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ek(t){if(wa(t)!==t)throw Error(se(188))}function a3(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,o=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(o=s.return,o!==null){n=o;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return ek(s),t;if(r===o)return ek(s),e;r=r.sibling}throw Error(se(188))}if(n.return!==o.return)n=s,o=r;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,o=r;break}if(a===o){i=!0,o=s,n=r;break}a=a.sibling}if(!i){for(a=r.child;a;){if(a===n){i=!0,n=r,o=s;break}if(a===o){i=!0,o=r,n=s;break}a=a.sibling}if(!i)throw Error(se(189))}}if(n.alternate!==o)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function W2(t){return t=a3(t),t!==null?U2(t):null}function U2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U2(t);if(e!==null)return e;t=t.sibling}return null}var H2=ko.unstable_scheduleCallback,tk=ko.unstable_cancelCallback,l3=ko.unstable_shouldYield,c3=ko.unstable_requestPaint,At=ko.unstable_now,u3=ko.unstable_getCurrentPriorityLevel,bv=ko.unstable_ImmediatePriority,G2=ko.unstable_UserBlockingPriority,bf=ko.unstable_NormalPriority,d3=ko.unstable_LowPriority,j2=ko.unstable_IdlePriority,Pp=null,Gs=null;function h3(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Pp,t,void 0,(t.current.flags&128)===128)}catch(e){}}var xs=Math.clz32?Math.clz32:m3,f3=Math.log,p3=Math.LN2;function m3(t){return t>>>=0,t===0?32:31-(f3(t)/p3|0)|0}var gh=64,bh=4194304;function Rc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xf(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,s=t.suspendedLanes,r=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?o=Rc(a):(r&=i,r!==0&&(o=Rc(r)))}else i=n&~s,i!==0?o=Rc(i):r!==0&&(o=Rc(r));if(o===0)return 0;if(e!==0&&e!==o&&!(e&s)&&(s=o&-o,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-xs(e),s=1<<n,o|=t[n],e&=~s;return o}function g3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b3(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var i=31-xs(r),a=1<<i,l=s[i];l===-1?(!(a&n)||a&o)&&(s[i]=g3(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function I0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q2(){var t=gh;return gh<<=1,!(gh&4194240)&&(gh=64),t}function ab(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xs(e),t[e]=n}function x3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xs(n),r=1<<s;e[s]=0,o[s]=-1,t[s]=-1,n&=~r}}function xv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-xs(n),s=1<<o;s&e|t[o]&e&&(t[o]|=e),n&=~s}}var je=0;function K2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X2,vv,Y2,Q2,Z2,S0=!1,xh=[],Ur=null,Hr=null,Gr=null,su=new Map,ru=new Map,Pr=[],v3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nk(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function bc(t,e,n,o,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[s]},e!==null&&(e=zu(e),e!==null&&vv(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function y3(t,e,n,o,s){switch(e){case"focusin":return Ur=bc(Ur,t,e,n,o,s),!0;case"dragenter":return Hr=bc(Hr,t,e,n,o,s),!0;case"mouseover":return Gr=bc(Gr,t,e,n,o,s),!0;case"pointerover":var r=s.pointerId;return su.set(r,bc(su.get(r)||null,t,e,n,o,s)),!0;case"gotpointercapture":return r=s.pointerId,ru.set(r,bc(ru.get(r)||null,t,e,n,o,s)),!0}return!1}function J2(t){var e=Li(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=V2(n),e!==null){t.blockedOn=e,Z2(t.priority,function(){Y2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=E0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);w0=o,n.target.dispatchEvent(o),w0=null}else return e=zu(n),e!==null&&vv(e),t.blockedOn=n,!1;e.shift()}return!0}function ok(t,e,n){Qh(t)&&n.delete(e)}function w3(){S0=!1,Ur!==null&&Qh(Ur)&&(Ur=null),Hr!==null&&Qh(Hr)&&(Hr=null),Gr!==null&&Qh(Gr)&&(Gr=null),su.forEach(ok),ru.forEach(ok)}function xc(t,e){t.blockedOn===e&&(t.blockedOn=null,S0||(S0=!0,ko.unstable_scheduleCallback(ko.unstable_NormalPriority,w3)))}function iu(t){function e(s){return xc(s,t)}if(0<xh.length){xc(xh[0],t);for(var n=1;n<xh.length;n++){var o=xh[n];o.blockedOn===t&&(o.blockedOn=null)}}for(Ur!==null&&xc(Ur,t),Hr!==null&&xc(Hr,t),Gr!==null&&xc(Gr,t),su.forEach(e),ru.forEach(e),n=0;n<Pr.length;n++)o=Pr[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)J2(n),n.blockedOn===null&&Pr.shift()}var fl=Er.ReactCurrentBatchConfig,vf=!0;function $3(t,e,n,o){var s=je,r=fl.transition;fl.transition=null;try{je=1,yv(t,e,n,o)}finally{je=s,fl.transition=r}}function k3(t,e,n,o){var s=je,r=fl.transition;fl.transition=null;try{je=4,yv(t,e,n,o)}finally{je=s,fl.transition=r}}function yv(t,e,n,o){if(vf){var s=E0(t,e,n,o);if(s===null)bb(t,e,o,yf,n),nk(t,o);else if(y3(s,t,e,n,o))o.stopPropagation();else if(nk(t,o),e&4&&-1<v3.indexOf(t)){for(;s!==null;){var r=zu(s);if(r!==null&&X2(r),r=E0(t,e,n,o),r===null&&bb(t,e,o,yf,n),r===s)break;s=r}s!==null&&o.stopPropagation()}else bb(t,e,o,null,n)}}var yf=null;function E0(t,e,n,o){if(yf=null,t=gv(o),t=Li(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yf=t,null}function eE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u3()){case bv:return 1;case G2:return 4;case bf:case d3:return 16;case j2:return 536870912;default:return 16}default:return 16}}var Mr=null,wv=null,Zh=null;function tE(){if(Zh)return Zh;var t,e=wv,n=e.length,o,s="value"in Mr?Mr.value:Mr.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(o=1;o<=i&&e[n-o]===s[r-o];o++);return Zh=s.slice(t,1<o?1-o:void 0)}function Jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vh(){return!0}function sk(){return!1}function So(t){function e(n,o,s,r,i){this._reactName=n,this._targetInst=s,this.type=o,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?vh:sk,this.isPropagationStopped=sk,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),e}var ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$v=So(ql),Mu=yt({},ql,{view:0,detail:0}),C3=So(Mu),lb,cb,vc,Lp=yt({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vc&&(vc&&t.type==="mousemove"?(lb=t.screenX-vc.screenX,cb=t.screenY-vc.screenY):cb=lb=0,vc=t),lb)},movementY:function(t){return"movementY"in t?t.movementY:cb}}),rk=So(Lp),I3=yt({},Lp,{dataTransfer:0}),S3=So(I3),E3=yt({},Mu,{relatedTarget:0}),ub=So(E3),T3=yt({},ql,{animationName:0,elapsedTime:0,pseudoElement:0}),N3=So(T3),R3=yt({},ql,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A3=So(R3),D3=yt({},ql,{data:0}),ik=So(D3),_3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F3[t])?!!e[t]:!1}function kv(){return P3}var L3=yt({},Mu,{key:function(t){if(t.key){var e=_3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?O3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kv,charCode:function(t){return t.type==="keypress"?Jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M3=So(L3),z3=yt({},Lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ak=So(z3),B3=yt({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kv}),V3=So(B3),W3=yt({},ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),U3=So(W3),H3=yt({},Lp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G3=So(H3),j3=[9,13,27,32],Cv=xr&&"CompositionEvent"in window,Uc=null;xr&&"documentMode"in document&&(Uc=document.documentMode);var q3=xr&&"TextEvent"in window&&!Uc,nE=xr&&(!Cv||Uc&&8<Uc&&11>=Uc),lk=String.fromCharCode(32),ck=!1;function oE(t,e){switch(t){case"keyup":return j3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ja=!1;function K3(t,e){switch(t){case"compositionend":return sE(e);case"keypress":return e.which!==32?null:(ck=!0,lk);case"textInput":return t=e.data,t===lk&&ck?null:t;default:return null}}function X3(t,e){if(Ja)return t==="compositionend"||!Cv&&oE(t,e)?(t=tE(),Zh=wv=Mr=null,Ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nE&&e.locale!=="ko"?null:e.data;default:return null}}var Y3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y3[t.type]:e==="textarea"}function rE(t,e,n,o){P2(o),e=wf(e,"onChange"),0<e.length&&(n=new $v("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var Hc=null,au=null;function Q3(t){gE(t,0)}function Mp(t){var e=nl(t);if(N2(e))return t}function Z3(t,e){if(t==="change")return e}var iE=!1;if(xr){var db;if(xr){var hb="oninput"in document;if(!hb){var dk=document.createElement("div");dk.setAttribute("oninput","return;"),hb=typeof dk.oninput=="function"}db=hb}else db=!1;iE=db&&(!document.documentMode||9<document.documentMode)}function hk(){Hc&&(Hc.detachEvent("onpropertychange",aE),au=Hc=null)}function aE(t){if(t.propertyName==="value"&&Mp(au)){var e=[];rE(e,au,t,gv(t)),B2(Q3,e)}}function J3(t,e,n){t==="focusin"?(hk(),Hc=e,au=n,Hc.attachEvent("onpropertychange",aE)):t==="focusout"&&hk()}function eM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mp(au)}function tM(t,e){if(t==="click")return Mp(e)}function nM(t,e){if(t==="input"||t==="change")return Mp(e)}function oM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Is=typeof Object.is=="function"?Object.is:oM;function lu(t,e){if(Is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var s=n[o];if(!c0.call(e,s)||!Is(t[s],e[s]))return!1}return!0}function fk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pk(t,e){var n=fk(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fk(n)}}function lE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cE(){for(var t=window,e=pf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(o){n=!1}if(n)t=e.contentWindow;else break;e=pf(t.document)}return e}function Iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sM(t){var e=cE(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lE(n.ownerDocument.documentElement,n)){if(o!==null&&Iv(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(o.start,s);o=o.end===void 0?r:Math.min(o.end,s),!t.extend&&r>o&&(s=o,o=r,r=s),s=pk(n,r);var i=pk(n,o);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>o?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rM=xr&&"documentMode"in document&&11>=document.documentMode,el=null,T0=null,Gc=null,N0=!1;function mk(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;N0||el==null||el!==pf(o)||(o=el,"selectionStart"in o&&Iv(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Gc&&lu(Gc,o)||(Gc=o,o=wf(T0,"onSelect"),0<o.length&&(e=new $v("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=el)))}function yh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tl={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},fb={},uE={};xr&&(uE=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function zp(t){if(fb[t])return fb[t];if(!tl[t])return t;var e=tl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uE)return fb[t]=e[n];return t}var dE=zp("animationend"),hE=zp("animationiteration"),fE=zp("animationstart"),pE=zp("transitionend"),mE=new Map,gk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){mE.set(t,e),ya(e,[t])}for(var pb=0;pb<gk.length;pb++){var mb=gk[pb],iM=mb.toLowerCase(),aM=mb[0].toUpperCase()+mb.slice(1);fi(iM,"on"+aM)}fi(dE,"onAnimationEnd");fi(hE,"onAnimationIteration");fi(fE,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(pE,"onTransitionEnd");Cl("onMouseEnter",["mouseout","mouseover"]);Cl("onMouseLeave",["mouseout","mouseover"]);Cl("onPointerEnter",["pointerout","pointerover"]);Cl("onPointerLeave",["pointerout","pointerover"]);ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));function bk(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,i3(o,e,void 0,t),t.currentTarget=null}function gE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],s=o.event;o=o.listeners;e:{var r=void 0;if(e)for(var i=o.length-1;0<=i;i--){var a=o[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;bk(s,a,c),r=l}else for(i=0;i<o.length;i++){if(a=o[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;bk(s,a,c),r=l}}}if(gf)throw t=C0,gf=!1,C0=null,t}function lt(t,e){var n=e[O0];n===void 0&&(n=e[O0]=new Set);var o=t+"__bubble";n.has(o)||(bE(e,t,2,!1),n.add(o))}function gb(t,e,n){var o=0;e&&(o|=4),bE(n,t,o,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function cu(t){if(!t[wh]){t[wh]=!0,C2.forEach(function(n){n!=="selectionchange"&&(lM.has(n)||gb(n,!1,t),gb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wh]||(e[wh]=!0,gb("selectionchange",!1,e))}}function bE(t,e,n,o){switch(eE(e)){case 1:var s=$3;break;case 4:s=k3;break;default:s=yv}n=s.bind(null,e,n,t),s=void 0,!k0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),o?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bb(t,e,n,o,s){var r=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var a=o.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=o.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Li(a),i===null)return;if(l=i.tag,l===5||l===6){o=r=i;continue e}a=a.parentNode}}o=o.return}B2(function(){var c=r,u=gv(n),d=[];e:{var h=mE.get(t);if(h!==void 0){var f=$v,p=t;switch(t){case"keypress":if(Jh(n)===0)break e;case"keydown":case"keyup":f=M3;break;case"focusin":p="focus",f=ub;break;case"focusout":p="blur",f=ub;break;case"beforeblur":case"afterblur":f=ub;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=rk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=S3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=V3;break;case dE:case hE:case fE:f=N3;break;case pE:f=U3;break;case"scroll":f=C3;break;case"wheel":f=G3;break;case"copy":case"cut":case"paste":f=A3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ak}var m=(e&4)!==0,b=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var x=c,v;x!==null;){v=x;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,g!==null&&(y=ou(x,g),y!=null&&m.push(uu(x,y,v)))),b)break;x=x.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==w0&&(p=n.relatedTarget||n.fromElement)&&(Li(p)||p[vr]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Li(p):null,p!==null&&(b=wa(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=rk,y="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=ak,y="onPointerLeave",g="onPointerEnter",x="pointer"),b=f==null?h:nl(f),v=p==null?h:nl(p),h=new m(y,x+"leave",f,n,u),h.target=b,h.relatedTarget=v,y=null,Li(u)===c&&(m=new m(g,x+"enter",p,n,u),m.target=v,m.relatedTarget=b,y=m),b=y,f&&p)t:{for(m=f,g=p,x=0,v=m;v;v=La(v))x++;for(v=0,y=g;y;y=La(y))v++;for(;0<x-v;)m=La(m),x--;for(;0<v-x;)g=La(g),v--;for(;x--;){if(m===g||g!==null&&m===g.alternate)break t;m=La(m),g=La(g)}m=null}else m=null;f!==null&&xk(d,h,f,m,!1),p!==null&&b!==null&&xk(d,b,p,m,!0)}}e:{if(h=c?nl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=Z3;else if(uk(h))if(iE)w=nM;else{w=eM;var $=J3}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=tM);if(w&&(w=w(t,c))){rE(d,w,n,u);break e}$&&$(t,h,c),t==="focusout"&&($=h._wrapperState)&&$.controlled&&h.type==="number"&&g0(h,"number",h.value)}switch($=c?nl(c):window,t){case"focusin":(uk($)||$.contentEditable==="true")&&(el=$,T0=c,Gc=null);break;case"focusout":Gc=T0=el=null;break;case"mousedown":N0=!0;break;case"contextmenu":case"mouseup":case"dragend":N0=!1,mk(d,n,u);break;case"selectionchange":if(rM)break;case"keydown":case"keyup":mk(d,n,u)}var k;if(Cv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ja?oE(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(nE&&n.locale!=="ko"&&(Ja||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ja&&(k=tE()):(Mr=u,wv="value"in Mr?Mr.value:Mr.textContent,Ja=!0)),$=wf(c,C),0<$.length&&(C=new ik(C,t,null,n,u),d.push({event:C,listeners:$}),k?C.data=k:(k=sE(n),k!==null&&(C.data=k)))),(k=q3?K3(t,n):X3(t,n))&&(c=wf(c,"onBeforeInput"),0<c.length&&(u=new ik("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}gE(d,e)})}function uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wf(t,e){for(var n=e+"Capture",o=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=ou(t,n),r!=null&&o.unshift(uu(t,r,s)),r=ou(t,e),r!=null&&o.push(uu(t,r,s))),t=t.return}return o}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xk(t,e,n,o,s){for(var r=e._reactName,i=[];n!==null&&n!==o;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===o)break;a.tag===5&&c!==null&&(a=c,s?(l=ou(n,r),l!=null&&i.unshift(uu(n,l,a))):s||(l=ou(n,r),l!=null&&i.push(uu(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var cM=/\r\n?/g,uM=/\u0000|\uFFFD/g;function vk(t){return(typeof t=="string"?t:""+t).replace(cM,"\n").replace(uM,"")}function $h(t,e,n){if(e=vk(e),vk(t)!==e&&n)throw Error(se(425))}function $f(){}var R0=null,A0=null;function D0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _0=typeof setTimeout=="function"?setTimeout:void 0,dM=typeof clearTimeout=="function"?clearTimeout:void 0,yk=typeof Promise=="function"?Promise:void 0,hM=typeof queueMicrotask=="function"?queueMicrotask:typeof yk<"u"?function(t){return yk.resolve(null).then(t).catch(fM)}:_0;function fM(t){setTimeout(function(){throw t})}function xb(t,e){var n=e,o=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(o===0){t.removeChild(s),iu(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=s}while(n);iu(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Kl,du="__reactProps$"+Kl,vr="__reactContainer$"+Kl,O0="__reactEvents$"+Kl,pM="__reactListeners$"+Kl,mM="__reactHandles$"+Kl;function Li(t){var e=t[Ws];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[Ws]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wk(t);t!==null;){if(n=t[Ws])return n;t=wk(t)}return e}t=n,n=t.parentNode}return null}function zu(t){return t=t[Ws]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Bp(t){return t[du]||null}var F0=[],ol=-1;function pi(t){return{current:t}}function ct(t){0>ol||(t.current=F0[ol],F0[ol]=null,ol--)}function st(t,e){ol++,F0[ol]=t.current,t.current=e}var oi={},Nn=pi(oi),so=pi(!1),Yi=oi;function Il(t,e){var n=t.type.contextTypes;if(!n)return oi;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ro(t){return t=t.childContextTypes,t!=null}function kf(){ct(so),ct(Nn)}function $k(t,e,n){if(Nn.current!==oi)throw Error(se(168));st(Nn,e),st(so,n)}function xE(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var s in o)if(!(s in e))throw Error(se(108,JL(t)||"Unknown",s));return yt({},n,o)}function Cf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,Yi=Nn.current,st(Nn,t),st(so,so.current),!0}function kk(t,e,n){var o=t.stateNode;if(!o)throw Error(se(169));n?(t=xE(t,e,Yi),o.__reactInternalMemoizedMergedChildContext=t,ct(so),ct(Nn),st(Nn,t)):ct(so),st(so,n)}var cr=null,Vp=!1,vb=!1;function vE(t){cr===null?cr=[t]:cr.push(t)}function gM(t){Vp=!0,vE(t)}function mi(){if(!vb&&cr!==null){vb=!0;var t=0,e=je;try{var n=cr;for(je=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}cr=null,Vp=!1}catch(s){throw cr!==null&&(cr=cr.slice(t+1)),H2(bv,mi),s}finally{je=e,vb=!1}}return null}var sl=[],rl=0,If=null,Sf=0,Mo=[],zo=0,Qi=null,fr=1,pr="";function Ai(t,e){sl[rl++]=Sf,sl[rl++]=If,If=t,Sf=e}function yE(t,e,n){Mo[zo++]=fr,Mo[zo++]=pr,Mo[zo++]=Qi,Qi=t;var o=fr;t=pr;var s=32-xs(o)-1;o&=~(1<<s),n+=1;var r=32-xs(e)+s;if(30<r){var i=s-s%5;r=(o&(1<<i)-1).toString(32),o>>=i,s-=i,fr=1<<32-xs(e)+s|n<<s|o,pr=r+t}else fr=1<<r|n<<s|o,pr=t}function Sv(t){t.return!==null&&(Ai(t,1),yE(t,1,0))}function Ev(t){for(;t===If;)If=sl[--rl],sl[rl]=null,Sf=sl[--rl],sl[rl]=null;for(;t===Qi;)Qi=Mo[--zo],Mo[zo]=null,pr=Mo[--zo],Mo[zo]=null,fr=Mo[--zo],Mo[zo]=null}var wo=null,vo=null,mt=!1,us=null;function wE(t,e){var n=Vo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ck(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wo=t,vo=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wo=t,vo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:fr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wo=t,vo=null,!0):!1;default:return!1}}function P0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function L0(t){if(mt){var e=vo;if(e){var n=e;if(!Ck(t,e)){if(P0(t))throw Error(se(418));e=jr(n.nextSibling);var o=wo;e&&Ck(t,e)?wE(o,n):(t.flags=t.flags&-4097|2,mt=!1,wo=t)}}else{if(P0(t))throw Error(se(418));t.flags=t.flags&-4097|2,mt=!1,wo=t}}}function Ik(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wo=t}function kh(t){if(t!==wo)return!1;if(!mt)return Ik(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!D0(t.type,t.memoizedProps)),e&&(e=vo)){if(P0(t))throw $E(),Error(se(418));for(;e;)wE(t,e),e=jr(e.nextSibling)}if(Ik(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vo=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vo=null}}else vo=wo?jr(t.stateNode.nextSibling):null;return!0}function $E(){for(var t=vo;t;)t=jr(t.nextSibling)}function Sl(){vo=wo=null,mt=!1}function Tv(t){us===null?us=[t]:us.push(t)}var bM=Er.ReactCurrentBatchConfig;function ls(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ef=pi(null),Tf=null,il=null,Nv=null;function Rv(){Nv=il=Tf=null}function Av(t){var e=Ef.current;ct(Ef),t._currentValue=e}function M0(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function pl(t,e){Tf=t,Nv=il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(eo=!0),t.firstContext=null)}function Ko(t){var e=t._currentValue;if(Nv!==t)if(t={context:t,memoizedValue:e,next:null},il===null){if(Tf===null)throw Error(se(308));il=t,Tf.dependencies={lanes:0,firstContext:t}}else il=il.next=t;return e}var Mi=null;function Dv(t){Mi===null?Mi=[t]:Mi.push(t)}function kE(t,e,n,o){var s=e.interleaved;return s===null?(n.next=n,Dv(e)):(n.next=s.next,s.next=n),e.interleaved=n,yr(t,o)}function yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Or=!1;function _v(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,Me&2){var s=o.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),o.pending=e,yr(t,n)}return s=o.interleaved,s===null?(e.next=e,Dv(o)):(e.next=s.next,s.next=e),o.interleaved=e,yr(t,n)}function ef(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,xv(t,n)}}function Sk(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=i:r=r.next=i,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nf(t,e,n,o){var s=t.updateQueue;Or=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?r=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;i=0,u=c=l=null,a=r;do{var h=a.lane,f=a.eventTime;if((o&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=yt({},d,h);break e;case 2:Or=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ji|=i,t.lanes=i,t.memoizedState=d}}function Ek(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],s=o.callback;if(s!==null){if(o.callback=null,o=n,typeof s!="function")throw Error(se(191,s));s.call(o)}}}var IE=new k2.Component().refs;function z0(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wp={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=Vn(),s=Xr(t),r=br(o,s);r.payload=e,n!=null&&(r.callback=n),e=qr(t,r,s),e!==null&&(vs(e,t,s,o),ef(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=Vn(),s=Xr(t),r=br(o,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=qr(t,r,s),e!==null&&(vs(e,t,s,o),ef(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vn(),o=Xr(t),s=br(n,o);s.tag=2,e!=null&&(s.callback=e),e=qr(t,s,o),e!==null&&(vs(e,t,o,n),ef(e,t,o))}};function Tk(t,e,n,o,s,r,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,r,i):e.prototype&&e.prototype.isPureReactComponent?!lu(n,o)||!lu(s,r):!0}function SE(t,e,n){var o=!1,s=oi,r=e.contextType;return typeof r=="object"&&r!==null?r=Ko(r):(s=ro(e)?Yi:Nn.current,o=e.contextTypes,r=(o=o!=null)?Il(t,s):oi),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wp,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function Nk(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&Wp.enqueueReplaceState(e,e.state,null)}function B0(t,e,n,o){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=IE,_v(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Ko(r):(r=ro(e)?Yi:Nn.current,s.context=Il(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(z0(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wp.enqueueReplaceState(s,s.state,null),Nf(t,n,s,o),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var o=n.stateNode}if(!o)throw Error(se(147,t));var s=o,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(i){var a=s.refs;a===IE&&(a=s.refs={}),i===null?delete a[r]:a[r]=i},e._stringRef=r,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Ch(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rk(t){var e=t._init;return e(t._payload)}function EE(t){function e(g,x){if(t){var v=g.deletions;v===null?(g.deletions=[x],g.flags|=16):v.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function o(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=Yr(g,x),g.index=0,g.sibling=null,g}function r(g,x,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<x?(g.flags|=2,x):v):(g.flags|=2,x)):(g.flags|=1048576,x)}function i(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,v,y){return x===null||x.tag!==6?(x=Sb(v,g.mode,y),x.return=g,x):(x=s(x,v),x.return=g,x)}function l(g,x,v,y){var w=v.type;return w===Za?u(g,x,v.props.children,y,v.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_r&&Rk(w)===x.type)?(y=s(x,v.props),y.ref=yc(g,x,v),y.return=g,y):(y=af(v.type,v.key,v.props,null,g.mode,y),y.ref=yc(g,x,v),y.return=g,y)}function c(g,x,v,y){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Eb(v,g.mode,y),x.return=g,x):(x=s(x,v.children||[]),x.return=g,x)}function u(g,x,v,y,w){return x===null||x.tag!==7?(x=Gi(v,g.mode,y,w),x.return=g,x):(x=s(x,v),x.return=g,x)}function d(g,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sb(""+x,g.mode,v),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fh:return v=af(x.type,x.key,x.props,null,g.mode,v),v.ref=yc(g,null,x),v.return=g,v;case Qa:return x=Eb(x,g.mode,v),x.return=g,x;case _r:var y=x._init;return d(g,y(x._payload),v)}if(Nc(x)||mc(x))return x=Gi(x,g.mode,v,null),x.return=g,x;Ch(g,x)}return null}function h(g,x,v,y){var w=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(g,x,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fh:return v.key===w?l(g,x,v,y):null;case Qa:return v.key===w?c(g,x,v,y):null;case _r:return w=v._init,h(g,x,w(v._payload),y)}if(Nc(v)||mc(v))return w!==null?null:u(g,x,v,y,null);Ch(g,v)}return null}function f(g,x,v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return g=g.get(v)||null,a(x,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fh:return g=g.get(y.key===null?v:y.key)||null,l(x,g,y,w);case Qa:return g=g.get(y.key===null?v:y.key)||null,c(x,g,y,w);case _r:var $=y._init;return f(g,x,v,$(y._payload),w)}if(Nc(y)||mc(y))return g=g.get(v)||null,u(x,g,y,w,null);Ch(x,y)}return null}function p(g,x,v,y){for(var w=null,$=null,k=x,C=x=0,E=null;k!==null&&C<v.length;C++){k.index>C?(E=k,k=null):E=k.sibling;var S=h(g,k,v[C],y);if(S===null){k===null&&(k=E);break}t&&k&&S.alternate===null&&e(g,k),x=r(S,x,C),$===null?w=S:$.sibling=S,$=S,k=E}if(C===v.length)return n(g,k),mt&&Ai(g,C),w;if(k===null){for(;C<v.length;C++)k=d(g,v[C],y),k!==null&&(x=r(k,x,C),$===null?w=k:$.sibling=k,$=k);return mt&&Ai(g,C),w}for(k=o(g,k);C<v.length;C++)E=f(k,g,C,v[C],y),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?C:E.key),x=r(E,x,C),$===null?w=E:$.sibling=E,$=E);return t&&k.forEach(function(T){return e(g,T)}),mt&&Ai(g,C),w}function m(g,x,v,y){var w=mc(v);if(typeof w!="function")throw Error(se(150));if(v=w.call(v),v==null)throw Error(se(151));for(var $=w=null,k=x,C=x=0,E=null,S=v.next();k!==null&&!S.done;C++,S=v.next()){k.index>C?(E=k,k=null):E=k.sibling;var T=h(g,k,S.value,y);if(T===null){k===null&&(k=E);break}t&&k&&T.alternate===null&&e(g,k),x=r(T,x,C),$===null?w=T:$.sibling=T,$=T,k=E}if(S.done)return n(g,k),mt&&Ai(g,C),w;if(k===null){for(;!S.done;C++,S=v.next())S=d(g,S.value,y),S!==null&&(x=r(S,x,C),$===null?w=S:$.sibling=S,$=S);return mt&&Ai(g,C),w}for(k=o(g,k);!S.done;C++,S=v.next())S=f(k,g,C,S.value,y),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?C:S.key),x=r(S,x,C),$===null?w=S:$.sibling=S,$=S);return t&&k.forEach(function(P){return e(g,P)}),mt&&Ai(g,C),w}function b(g,x,v,y){if(typeof v=="object"&&v!==null&&v.type===Za&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case fh:e:{for(var w=v.key,$=x;$!==null;){if($.key===w){if(w=v.type,w===Za){if($.tag===7){n(g,$.sibling),x=s($,v.props.children),x.return=g,g=x;break e}}else if($.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_r&&Rk(w)===$.type){n(g,$.sibling),x=s($,v.props),x.ref=yc(g,$,v),x.return=g,g=x;break e}n(g,$);break}else e(g,$);$=$.sibling}v.type===Za?(x=Gi(v.props.children,g.mode,y,v.key),x.return=g,g=x):(y=af(v.type,v.key,v.props,null,g.mode,y),y.ref=yc(g,x,v),y.return=g,g=y)}return i(g);case Qa:e:{for($=v.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(g,x.sibling),x=s(x,v.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=Eb(v,g.mode,y),x.return=g,g=x}return i(g);case _r:return $=v._init,b(g,x,$(v._payload),y)}if(Nc(v))return p(g,x,v,y);if(mc(v))return m(g,x,v,y);Ch(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(g,x.sibling),x=s(x,v),x.return=g,g=x):(n(g,x),x=Sb(v,g.mode,y),x.return=g,g=x),i(g)):n(g,x)}return b}var El=EE(!0),TE=EE(!1),Bu={},js=pi(Bu),hu=pi(Bu),fu=pi(Bu);function zi(t){if(t===Bu)throw Error(se(174));return t}function Ov(t,e){switch(st(fu,e),st(hu,t),st(js,Bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:x0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=x0(e,t)}ct(js),st(js,e)}function Tl(){ct(js),ct(hu),ct(fu)}function NE(t){zi(fu.current);var e=zi(js.current),n=x0(e,t.type);e!==n&&(st(hu,t),st(js,n))}function Fv(t){hu.current===t&&(ct(js),ct(hu))}var xt=pi(0);function Rf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yb=[];function Pv(){for(var t=0;t<yb.length;t++)yb[t]._workInProgressVersionPrimary=null;yb.length=0}var tf=Er.ReactCurrentDispatcher,wb=Er.ReactCurrentBatchConfig,Zi=0,vt=null,qt=null,tn=null,Af=!1,jc=!1,pu=0,xM=0;function wn(){throw Error(se(321))}function Lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Is(t[n],e[n]))return!1;return!0}function Mv(t,e,n,o,s,r){if(Zi=r,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tf.current=t===null||t.memoizedState===null?$M:kM,t=n(o,s),jc){r=0;do{if(jc=!1,pu=0,25<=r)throw Error(se(301));r+=1,tn=qt=null,e.updateQueue=null,tf.current=CM,t=n(o,s)}while(jc)}if(tf.current=Df,e=qt!==null&&qt.next!==null,Zi=0,tn=qt=vt=null,Af=!1,e)throw Error(se(300));return t}function zv(){var t=pu!==0;return pu=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?vt.memoizedState=tn=t:tn=tn.next=t,tn}function Xo(){if(qt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=tn===null?vt.memoizedState:tn.next;if(e!==null)tn=e,qt=t;else{if(t===null)throw Error(se(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},tn===null?vt.memoizedState=tn=t:tn=tn.next=t}return tn}function mu(t,e){return typeof e=="function"?e(t):e}function $b(t){var e=Xo(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var o=qt,s=o.baseQueue,r=n.pending;if(r!==null){if(s!==null){var i=s.next;s.next=r.next,r.next=i}o.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,o=o.baseState;var a=i=null,l=null,c=r;do{var u=c.lane;if((Zi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:t(o,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=o):l=l.next=d,vt.lanes|=u,Ji|=u}c=c.next}while(c!==null&&c!==r);l===null?i=o:l.next=a,Is(o,e.memoizedState)||(eo=!0),e.memoizedState=o,e.baseState=i,e.baseQueue=l,n.lastRenderedState=o}if(t=n.interleaved,t!==null){s=t;do r=s.lane,vt.lanes|=r,Ji|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kb(t){var e=Xo(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var o=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do r=t(r,i.action),i=i.next;while(i!==s);Is(r,e.memoizedState)||(eo=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,o]}function RE(){}function AE(t,e){var n=vt,o=Xo(),s=e(),r=!Is(o.memoizedState,s);if(r&&(o.memoizedState=s,eo=!0),o=o.queue,Bv(OE.bind(null,n,o,t),[t]),o.getSnapshot!==e||r||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,gu(9,_E.bind(null,n,o,s,e),void 0,null),sn===null)throw Error(se(349));Zi&30||DE(n,e,s)}return s}function DE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _E(t,e,n,o){e.value=n,e.getSnapshot=o,FE(e)&&PE(t)}function OE(t,e,n){return n(function(){FE(e)&&PE(t)})}function FE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Is(t,n)}catch(o){return!0}}function PE(t){var e=yr(t,1);e!==null&&vs(e,t,1,-1)}function Ak(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:t},e.queue=t,t=t.dispatch=wM.bind(null,vt,t),[e.memoizedState,t]}function gu(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function LE(){return Xo().memoizedState}function nf(t,e,n,o){var s=Ps();vt.flags|=t,s.memoizedState=gu(1|e,n,void 0,o===void 0?null:o)}function Up(t,e,n,o){var s=Xo();o=o===void 0?null:o;var r=void 0;if(qt!==null){var i=qt.memoizedState;if(r=i.destroy,o!==null&&Lv(o,i.deps)){s.memoizedState=gu(e,n,r,o);return}}vt.flags|=t,s.memoizedState=gu(1|e,n,r,o)}function Dk(t,e){return nf(8390656,8,t,e)}function Bv(t,e){return Up(2048,8,t,e)}function ME(t,e){return Up(4,2,t,e)}function zE(t,e){return Up(4,4,t,e)}function BE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VE(t,e,n){return n=n!=null?n.concat([t]):null,Up(4,4,BE.bind(null,e,t),n)}function Vv(){}function WE(t,e){var n=Xo();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Lv(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function UE(t,e){var n=Xo();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Lv(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function HE(t,e,n){return Zi&21?(Is(n,e)||(n=q2(),vt.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,eo=!0),t.memoizedState=n)}function vM(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var o=wb.transition;wb.transition={};try{t(!1),e()}finally{je=n,wb.transition=o}}function GE(){return Xo().memoizedState}function yM(t,e,n){var o=Xr(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},jE(t))qE(e,n);else if(n=kE(t,e,n,o),n!==null){var s=Vn();vs(n,t,o,s),KE(n,e,o)}}function wM(t,e,n){var o=Xr(t),s={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(jE(t))qE(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var i=e.lastRenderedState,a=r(i,n);if(s.hasEagerState=!0,s.eagerState=a,Is(a,i)){var l=e.interleaved;l===null?(s.next=s,Dv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch(c){}finally{}n=kE(t,e,s,o),n!==null&&(s=Vn(),vs(n,t,o,s),KE(n,e,o))}}function jE(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function qE(t,e){jc=Af=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KE(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,xv(t,n)}}var Df={readContext:Ko,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},$M={readContext:Ko,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:Ko,useEffect:Dk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nf(4194308,4,BE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nf(4194308,4,t,e)},useInsertionEffect:function(t,e){return nf(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=Ps();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=yM.bind(null,vt,t),[o.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:Ak,useDebugValue:Vv,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=Ak(!1),e=t[0];return t=vM.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=vt,s=Ps();if(mt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),sn===null)throw Error(se(349));Zi&30||DE(o,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Dk(OE.bind(null,o,r,t),[t]),o.flags|=2048,gu(9,_E.bind(null,o,r,n,e),void 0,null),n},useId:function(){var t=Ps(),e=sn.identifierPrefix;if(mt){var n=pr,o=fr;n=(o&~(1<<32-xs(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kM={readContext:Ko,useCallback:WE,useContext:Ko,useEffect:Bv,useImperativeHandle:VE,useInsertionEffect:ME,useLayoutEffect:zE,useMemo:UE,useReducer:$b,useRef:LE,useState:function(){return $b(mu)},useDebugValue:Vv,useDeferredValue:function(t){var e=Xo();return HE(e,qt.memoizedState,t)},useTransition:function(){var t=$b(mu)[0],e=Xo().memoizedState;return[t,e]},useMutableSource:RE,useSyncExternalStore:AE,useId:GE,unstable_isNewReconciler:!1},CM={readContext:Ko,useCallback:WE,useContext:Ko,useEffect:Bv,useImperativeHandle:VE,useInsertionEffect:ME,useLayoutEffect:zE,useMemo:UE,useReducer:kb,useRef:LE,useState:function(){return kb(mu)},useDebugValue:Vv,useDeferredValue:function(t){var e=Xo();return qt===null?e.memoizedState=t:HE(e,qt.memoizedState,t)},useTransition:function(){var t=kb(mu)[0],e=Xo().memoizedState;return[t,e]},useMutableSource:RE,useSyncExternalStore:AE,useId:GE,unstable_isNewReconciler:!1};function Nl(t,e){try{var n="",o=e;do n+=ZL(o),o=o.return;while(o);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:t,source:e,stack:s,digest:null}}function Cb(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function V0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IM=typeof WeakMap=="function"?WeakMap:Map;function XE(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Of||(Of=!0,Q0=o),V0(t,e)},n}function YE(t,e,n){n=br(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var s=e.value;n.payload=function(){return o(s)},n.callback=function(){V0(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){V0(t,e),typeof o!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function _k(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new IM;var s=new Set;o.set(e,s)}else s=o.get(e),s===void 0&&(s=new Set,o.set(e,s));s.has(n)||(s.add(n),t=zM.bind(null,t,e,n),e.then(t,t))}function Ok(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fk(t,e,n,o,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var SM=Er.ReactCurrentOwner,eo=!1;function Ln(t,e,n,o){e.child=t===null?TE(e,null,n,o):El(e,t.child,n,o)}function Pk(t,e,n,o,s){n=n.render;var r=e.ref;return pl(e,s),o=Mv(t,e,n,o,r,s),n=zv(),t!==null&&!eo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wr(t,e,s)):(mt&&n&&Sv(e),e.flags|=1,Ln(t,e,o,s),e.child)}function Lk(t,e,n,o,s){if(t===null){var r=n.type;return typeof r=="function"&&!Xv(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,QE(t,e,r,o,s)):(t=af(n.type,null,o,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var i=r.memoizedProps;if(n=n.compare,n=n!==null?n:lu,n(i,o)&&t.ref===e.ref)return wr(t,e,s)}return e.flags|=1,t=Yr(r,o),t.ref=e.ref,t.return=e,e.child=t}function QE(t,e,n,o,s){if(t!==null){var r=t.memoizedProps;if(lu(r,o)&&t.ref===e.ref)if(eo=!1,e.pendingProps=o=r,(t.lanes&s)!==0)t.flags&131072&&(eo=!0);else return e.lanes=t.lanes,wr(t,e,s)}return W0(t,e,n,o,s)}function ZE(t,e,n){var o=e.pendingProps,s=o.children,r=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(ll,po),po|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(ll,po),po|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:n,st(ll,po),po|=o}else r!==null?(o=r.baseLanes|n,e.memoizedState=null):o=n,st(ll,po),po|=o;return Ln(t,e,s,n),e.child}function JE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function W0(t,e,n,o,s){var r=ro(n)?Yi:Nn.current;return r=Il(e,r),pl(e,s),n=Mv(t,e,n,o,r,s),o=zv(),t!==null&&!eo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wr(t,e,s)):(mt&&o&&Sv(e),e.flags|=1,Ln(t,e,n,s),e.child)}function Mk(t,e,n,o,s){if(ro(n)){var r=!0;Cf(e)}else r=!1;if(pl(e,s),e.stateNode===null)of(t,e),SE(e,n,o),B0(e,n,o,s),o=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ko(c):(c=ro(n)?Yi:Nn.current,c=Il(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==o||l!==c)&&Nk(e,i,o,c),Or=!1;var h=e.memoizedState;i.state=h,Nf(e,o,i,s),l=e.memoizedState,a!==o||h!==l||so.current||Or?(typeof u=="function"&&(z0(e,n,u,o),l=e.memoizedState),(a=Or||Tk(e,n,a,o,h,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=l),i.props=o,i.state=l,i.context=c,o=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{i=e.stateNode,CE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ls(e.type,a),i.props=c,d=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ko(l):(l=ro(n)?Yi:Nn.current,l=Il(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Nk(e,i,o,l),Or=!1,h=e.memoizedState,i.state=h,Nf(e,o,i,s);var p=e.memoizedState;a!==d||h!==p||so.current||Or?(typeof f=="function"&&(z0(e,n,f,o),p=e.memoizedState),(c=Or||Tk(e,n,c,o,h,p,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(o,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(o,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=p),i.props=o,i.state=p,i.context=l,o=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),o=!1)}return U0(t,e,n,o,r,s)}function U0(t,e,n,o,s,r){JE(t,e);var i=(e.flags&128)!==0;if(!o&&!i)return s&&kk(e,n,!1),wr(t,e,r);o=e.stateNode,SM.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&i?(e.child=El(e,t.child,null,r),e.child=El(e,null,a,r)):Ln(t,e,a,r),e.memoizedState=o.state,s&&kk(e,n,!0),e.child}function eT(t){var e=t.stateNode;e.pendingContext?$k(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$k(t,e.context,!1),Ov(t,e.containerInfo)}function zk(t,e,n,o,s){return Sl(),Tv(s),e.flags|=256,Ln(t,e,n,o),e.child}var H0={dehydrated:null,treeContext:null,retryLane:0};function G0(t){return{baseLanes:t,cachePool:null,transitions:null}}function tT(t,e,n){var o=e.pendingProps,s=xt.current,r=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),st(xt,s&1),t===null)return L0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=o.children,t=o.fallback,r?(o=e.mode,r=e.child,i={mode:"hidden",children:i},!(o&1)&&r!==null?(r.childLanes=0,r.pendingProps=i):r=jp(i,o,0,null),t=Gi(t,o,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=G0(n),e.memoizedState=H0,t):Wv(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return EM(t,e,i,o,a,s,n);if(r){r=o.fallback,i=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:o.children};return!(i&1)&&e.child!==s?(o=e.child,o.childLanes=0,o.pendingProps=l,e.deletions=null):(o=Yr(s,l),o.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Yr(a,r):(r=Gi(r,i,n,null),r.flags|=2),r.return=e,o.return=e,o.sibling=r,e.child=o,o=r,r=e.child,i=t.child.memoizedState,i=i===null?G0(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=t.childLanes&~n,e.memoizedState=H0,o}return r=t.child,t=r.sibling,o=Yr(r,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Wv(t,e){return e=jp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,n,o){return o!==null&&Tv(o),El(e,t.child,null,n),t=Wv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EM(t,e,n,o,s,r,i){if(n)return e.flags&256?(e.flags&=-257,o=Cb(Error(se(422))),Ih(t,e,i,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=o.fallback,s=e.mode,o=jp({mode:"visible",children:o.children},s,0,null),r=Gi(r,s,i,null),r.flags|=2,o.return=e,r.return=e,o.sibling=r,e.child=o,e.mode&1&&El(e,t.child,null,i),e.child.memoizedState=G0(i),e.memoizedState=H0,r);if(!(e.mode&1))return Ih(t,e,i,null);if(s.data==="$!"){if(o=s.nextSibling&&s.nextSibling.dataset,o)var a=o.dgst;return o=a,r=Error(se(419)),o=Cb(r,o,void 0),Ih(t,e,i,o)}if(a=(i&t.childLanes)!==0,eo||a){if(o=sn,o!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(o.suspendedLanes|i)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,yr(t,s),vs(o,t,s,-1))}return Kv(),o=Cb(Error(se(421))),Ih(t,e,i,o)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=BM.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,vo=jr(s.nextSibling),wo=e,mt=!0,us=null,t!==null&&(Mo[zo++]=fr,Mo[zo++]=pr,Mo[zo++]=Qi,fr=t.id,pr=t.overflow,Qi=e),e=Wv(e,o.children),e.flags|=4096,e)}function Bk(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),M0(t.return,e,n)}function Ib(t,e,n,o,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=s)}function nT(t,e,n){var o=e.pendingProps,s=o.revealOrder,r=o.tail;if(Ln(t,e,o.children,n),o=xt.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bk(t,n,e);else if(t.tag===19)Bk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(st(xt,o),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ib(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ib(e,!0,n,null,r);break;case"together":Ib(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function of(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TM(t,e,n){switch(e.tag){case 3:eT(e),Sl();break;case 5:NE(e);break;case 1:ro(e.type)&&Cf(e);break;case 4:Ov(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,s=e.memoizedProps.value;st(Ef,o._currentValue),o._currentValue=s;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(st(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?tT(t,e,n):(st(xt,xt.current&1),t=wr(t,e,n),t!==null?t.sibling:null);st(xt,xt.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return nT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),st(xt,xt.current),o)break;return null;case 22:case 23:return e.lanes=0,ZE(t,e,n)}return wr(t,e,n)}var oT,j0,sT,rT;oT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j0=function(){};sT=function(t,e,n,o){var s=t.memoizedProps;if(s!==o){t=e.stateNode,zi(js.current);var r=null;switch(n){case"input":s=p0(t,s),o=p0(t,o),r=[];break;case"select":s=yt({},s,{value:void 0}),o=yt({},o,{value:void 0}),r=[];break;case"textarea":s=b0(t,s),o=b0(t,o),r=[];break;default:typeof s.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=$f)}v0(n,o);var i;n=null;for(c in s)if(!o.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tu.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in o){var l=o[c];if(a=s!=null?s[c]:void 0,o.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&lt("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};rT=function(t,e,n,o){n!==o&&(e.flags|=4)};function wc(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function $n(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,o|=s.subtreeFlags&14680064,o|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function NM(t,e,n){var o=e.pendingProps;switch(Ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(e),null;case 1:return ro(e.type)&&kf(),$n(e),null;case 3:return o=e.stateNode,Tl(),ct(so),ct(Nn),Pv(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(kh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(ex(us),us=null))),j0(t,e),$n(e),null;case 5:Fv(e);var s=zi(fu.current);if(n=e.type,t!==null&&e.stateNode!=null)sT(t,e,n,o,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(se(166));return $n(e),null}if(t=zi(js.current),kh(e)){o=e.stateNode,n=e.type;var r=e.memoizedProps;switch(o[Ws]=e,o[du]=r,t=(e.mode&1)!==0,n){case"dialog":lt("cancel",o),lt("close",o);break;case"iframe":case"object":case"embed":lt("load",o);break;case"video":case"audio":for(s=0;s<Ac.length;s++)lt(Ac[s],o);break;case"source":lt("error",o);break;case"img":case"image":case"link":lt("error",o),lt("load",o);break;case"details":lt("toggle",o);break;case"input":X$(o,r),lt("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},lt("invalid",o);break;case"textarea":Q$(o,r),lt("invalid",o)}v0(n,r),s=null;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];i==="children"?typeof a=="string"?o.textContent!==a&&(r.suppressHydrationWarning!==!0&&$h(o.textContent,a,t),s=["children",a]):typeof a=="number"&&o.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&$h(o.textContent,a,t),s=["children",""+a]):tu.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&lt("scroll",o)}switch(n){case"input":ph(o),Y$(o,r,!0);break;case"textarea":ph(o),Z$(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=$f)}o=s,e.updateQueue=o,o!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=i.createElement(n,{is:o.is}):(t=i.createElement(n),n==="select"&&(i=t,o.multiple?i.multiple=!0:o.size&&(i.size=o.size))):t=i.createElementNS(t,n),t[Ws]=e,t[du]=o,oT(t,e,!1,!1),e.stateNode=t;e:{switch(i=y0(n,o),n){case"dialog":lt("cancel",t),lt("close",t),s=o;break;case"iframe":case"object":case"embed":lt("load",t),s=o;break;case"video":case"audio":for(s=0;s<Ac.length;s++)lt(Ac[s],t);s=o;break;case"source":lt("error",t),s=o;break;case"img":case"image":case"link":lt("error",t),lt("load",t),s=o;break;case"details":lt("toggle",t),s=o;break;case"input":X$(t,o),s=p0(t,o),lt("invalid",t);break;case"option":s=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},s=yt({},o,{value:void 0}),lt("invalid",t);break;case"textarea":Q$(t,o),s=b0(t,o),lt("invalid",t);break;default:s=o}v0(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?F2(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_2(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nu(t,l):typeof l=="number"&&nu(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(tu.hasOwnProperty(r)?l!=null&&r==="onScroll"&&lt("scroll",t):l!=null&&hv(t,r,l,i))}switch(n){case"input":ph(t),Y$(t,o,!1);break;case"textarea":ph(t),Z$(t);break;case"option":o.value!=null&&t.setAttribute("value",""+ni(o.value));break;case"select":t.multiple=!!o.multiple,r=o.value,r!=null?ul(t,!!o.multiple,r,!1):o.defaultValue!=null&&ul(t,!!o.multiple,o.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$f)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $n(e),null;case 6:if(t&&e.stateNode!=null)rT(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(se(166));if(n=zi(fu.current),zi(js.current),kh(e)){if(o=e.stateNode,n=e.memoizedProps,o[Ws]=e,(r=o.nodeValue!==n)&&(t=wo,t!==null))switch(t.tag){case 3:$h(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$h(o.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Ws]=e,e.stateNode=o}return $n(e),null;case 13:if(ct(xt),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&vo!==null&&e.mode&1&&!(e.flags&128))$E(),Sl(),e.flags|=98560,r=!1;else if(r=kh(e),o!==null&&o.dehydrated!==null){if(t===null){if(!r)throw Error(se(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(se(317));r[Ws]=e}else Sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$n(e),r=!1}else us!==null&&(ex(us),us=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Qt===0&&(Qt=3):Kv())),e.updateQueue!==null&&(e.flags|=4),$n(e),null);case 4:return Tl(),j0(t,e),t===null&&cu(e.stateNode.containerInfo),$n(e),null;case 10:return Av(e.type._context),$n(e),null;case 17:return ro(e.type)&&kf(),$n(e),null;case 19:if(ct(xt),r=e.memoizedState,r===null)return $n(e),null;if(o=(e.flags&128)!==0,i=r.rendering,i===null)if(o)wc(r,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Rf(t),i!==null){for(e.flags|=128,wc(r,!1),o=i.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)r=n,t=o,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,t=i.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(xt,xt.current&1|2),e.child}t=t.sibling}r.tail!==null&&At()>Rl&&(e.flags|=128,o=!0,wc(r,!1),e.lanes=4194304)}else{if(!o)if(t=Rf(i),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!mt)return $n(e),null}else 2*At()-r.renderingStartTime>Rl&&n!==1073741824&&(e.flags|=128,o=!0,wc(r,!1),e.lanes=4194304);r.isBackwards?(i.sibling=e.child,e.child=i):(n=r.last,n!==null?n.sibling=i:e.child=i,r.last=i)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=At(),e.sibling=null,n=xt.current,st(xt,o?n&1|2:n&1),e):($n(e),null);case 22:case 23:return qv(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?po&1073741824&&($n(e),e.subtreeFlags&6&&(e.flags|=8192)):$n(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function RM(t,e){switch(Ev(e),e.tag){case 1:return ro(e.type)&&kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tl(),ct(so),ct(Nn),Pv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fv(e),null;case 13:if(ct(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(xt),null;case 4:return Tl(),null;case 10:return Av(e.type._context),null;case 22:case 23:return qv(),null;case 24:return null;default:return null}}var Sh=!1,In=!1,AM=typeof WeakSet=="function"?WeakSet:Set,fe=null;function al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){wt(t,e,o)}else n.current=null}function q0(t,e,n){try{n()}catch(o){wt(t,e,o)}}var Vk=!1;function DM(t,e){if(R0=vf,t=cE(),Iv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var s=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{n.nodeType,r.nodeType}catch(y){n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=i+s),d!==r||o!==0&&d.nodeType!==3||(l=i+o),d.nodeType===3&&(i+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===s&&(a=i),h===r&&++u===o&&(l=i),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(A0={focusedElem:t,selectionRange:n},vf=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,b=p.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:ls(e.type,m),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(y){wt(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return p=Vk,Vk=!1,p}function qc(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&q0(e,n,r)}s=s.next}while(s!==o)}}function Hp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function K0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ws],delete e[du],delete e[O0],delete e[pM],delete e[mM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aT(t){return t.tag===5||t.tag===3||t.tag===4}function Wk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function X0(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$f));else if(o!==4&&(t=t.child,t!==null))for(X0(t,e,n),t=t.sibling;t!==null;)X0(t,e,n),t=t.sibling}function Y0(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Y0(t,e,n),t=t.sibling;t!==null;)Y0(t,e,n),t=t.sibling}var fn=null,cs=!1;function Dr(t,e,n){for(n=n.child;n!==null;)lT(t,e,n),n=n.sibling}function lT(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Pp,n)}catch(a){}switch(n.tag){case 5:In||al(n,e);case 6:var o=fn,s=cs;fn=null,Dr(t,e,n),fn=o,cs=s,fn!==null&&(cs?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(cs?(t=fn,n=n.stateNode,t.nodeType===8?xb(t.parentNode,n):t.nodeType===1&&xb(t,n),iu(t)):xb(fn,n.stateNode));break;case 4:o=fn,s=cs,fn=n.stateNode.containerInfo,cs=!0,Dr(t,e,n),fn=o,cs=s;break;case 0:case 11:case 14:case 15:if(!In&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){s=o=o.next;do{var r=s,i=r.destroy;r=r.tag,i!==void 0&&(r&2||r&4)&&q0(n,e,i),s=s.next}while(s!==o)}Dr(t,e,n);break;case 1:if(!In&&(al(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(a){wt(n,e,a)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(In=(o=In)||n.memoizedState!==null,Dr(t,e,n),In=o):Dr(t,e,n);break;default:Dr(t,e,n)}}function Uk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AM),e.forEach(function(o){var s=VM.bind(null,t,o);n.has(o)||(n.add(o),o.then(s,s))})}}function ss(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var s=n[o];try{var r=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:fn=a.stateNode,cs=!1;break e;case 3:fn=a.stateNode.containerInfo,cs=!0;break e;case 4:fn=a.stateNode.containerInfo,cs=!0;break e}a=a.return}if(fn===null)throw Error(se(160));lT(r,i,s),fn=null,cs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){wt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cT(e,t),e=e.sibling}function cT(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ss(e,t),Fs(t),o&4){try{qc(3,t,t.return),Hp(3,t)}catch(m){wt(t,t.return,m)}try{qc(5,t,t.return)}catch(m){wt(t,t.return,m)}}break;case 1:ss(e,t),Fs(t),o&512&&n!==null&&al(n,n.return);break;case 5:if(ss(e,t),Fs(t),o&512&&n!==null&&al(n,n.return),t.flags&32){var s=t.stateNode;try{nu(s,"")}catch(m){wt(t,t.return,m)}}if(o&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,i=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&R2(s,r),y0(a,i);var c=y0(a,r);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?F2(s,d):u==="dangerouslySetInnerHTML"?_2(s,d):u==="children"?nu(s,d):hv(s,u,d,c)}switch(a){case"input":m0(s,r);break;case"textarea":A2(s,r);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?ul(s,!!r.multiple,f,!1):h!==!!r.multiple&&(r.defaultValue!=null?ul(s,!!r.multiple,r.defaultValue,!0):ul(s,!!r.multiple,r.multiple?[]:"",!1))}s[du]=r}catch(m){wt(t,t.return,m)}}break;case 6:if(ss(e,t),Fs(t),o&4){if(t.stateNode===null)throw Error(se(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(m){wt(t,t.return,m)}}break;case 3:if(ss(e,t),Fs(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(m){wt(t,t.return,m)}break;case 4:ss(e,t),Fs(t);break;case 13:ss(e,t),Fs(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Gv=At())),o&4&&Uk(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(In=(c=In)||u,ss(e,t),In=c):ss(e,t),Fs(t),o&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(fe=t,u=t.child;u!==null;){for(d=fe=u;fe!==null;){switch(h=fe,f=h.child,h.tag){case 0:case 11:case 14:case 15:qc(4,h,h.return);break;case 1:al(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){o=h,n=h.return;try{e=o,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){wt(o,n,m)}}break;case 5:al(h,h.return);break;case 22:if(h.memoizedState!==null){Gk(d);continue}}f!==null?(f.return=h,fe=f):Gk(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O2("display",i))}catch(m){wt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){wt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ss(e,t),Fs(t),o&4&&Uk(t);break;case 21:break;default:ss(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aT(n)){var o=n;break e}n=n.return}throw Error(se(160))}switch(o.tag){case 5:var s=o.stateNode;o.flags&32&&(nu(s,""),o.flags&=-33);var r=Wk(t);Y0(t,r,s);break;case 3:case 4:var i=o.stateNode.containerInfo,a=Wk(t);X0(t,a,i);break;default:throw Error(se(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _M(t,e,n){fe=t,uT(t)}function uT(t,e,n){for(var o=(t.mode&1)!==0;fe!==null;){var s=fe,r=s.child;if(s.tag===22&&o){var i=s.memoizedState!==null||Sh;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||In;a=Sh;var c=In;if(Sh=i,(In=l)&&!c)for(fe=s;fe!==null;)i=fe,l=i.child,i.tag===22&&i.memoizedState!==null?jk(s):l!==null?(l.return=i,fe=l):jk(s);for(;r!==null;)fe=r,uT(r),r=r.sibling;fe=s,Sh=a,In=c}Hk(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,fe=r):Hk(t)}}function Hk(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:In||Hp(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!In)if(n===null)o.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ls(e.type,n.memoizedProps);o.componentDidUpdate(s,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Ek(e,r,o);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ek(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&iu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}In||e.flags&512&&K0(e)}catch(h){wt(e,e.return,h)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function Gk(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function jk(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hp(4,e)}catch(l){wt(e,n,l)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var s=e.return;try{o.componentDidMount()}catch(l){wt(e,s,l)}}var r=e.return;try{K0(e)}catch(l){wt(e,r,l)}break;case 5:var i=e.return;try{K0(e)}catch(l){wt(e,i,l)}}}catch(l){wt(e,e.return,l)}if(e===t){fe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,fe=a;break}fe=e.return}}var OM=Math.ceil,_f=Er.ReactCurrentDispatcher,Uv=Er.ReactCurrentOwner,qo=Er.ReactCurrentBatchConfig,Me=0,sn=null,Mt=null,pn=0,po=0,ll=pi(0),Qt=0,bu=null,Ji=0,Gp=0,Hv=0,Kc=null,Zn=null,Gv=0,Rl=1/0,ar=null,Of=!1,Q0=null,Kr=null,Eh=!1,zr=null,Ff=0,Xc=0,Z0=null,sf=-1,rf=0;function Vn(){return Me&6?At():sf!==-1?sf:sf=At()}function Xr(t){return t.mode&1?Me&2&&pn!==0?pn&-pn:bM.transition!==null?(rf===0&&(rf=q2()),rf):(t=je,t!==0||(t=window.event,t=t===void 0?16:eE(t.type)),t):1}function vs(t,e,n,o){if(50<Xc)throw Xc=0,Z0=null,Error(se(185));Lu(t,n,o),(!(Me&2)||t!==sn)&&(t===sn&&(!(Me&2)&&(Gp|=n),Qt===4&&Lr(t,pn)),io(t,o),n===1&&Me===0&&!(e.mode&1)&&(Rl=At()+500,Vp&&mi()))}function io(t,e){var n=t.callbackNode;b3(t,e);var o=xf(t,t===sn?pn:0);if(o===0)n!==null&&tk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&tk(n),e===1)t.tag===0?gM(qk.bind(null,t)):vE(qk.bind(null,t)),hM(function(){!(Me&6)&&mi()}),n=null;else{switch(K2(o)){case 1:n=bv;break;case 4:n=G2;break;case 16:n=bf;break;case 536870912:n=j2;break;default:n=bf}n=xT(n,dT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dT(t,e){if(sf=-1,rf=0,Me&6)throw Error(se(327));var n=t.callbackNode;if(ml()&&t.callbackNode!==n)return null;var o=xf(t,t===sn?pn:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Pf(t,o);else{e=o;var s=Me;Me|=2;var r=fT();(sn!==t||pn!==e)&&(ar=null,Rl=At()+500,Hi(t,e));do try{LM();break}catch(a){hT(t,a)}while(1);Rv(),_f.current=r,Me=s,Mt!==null?e=0:(sn=null,pn=0,e=Qt)}if(e!==0){if(e===2&&(s=I0(t),s!==0&&(o=s,e=J0(t,s))),e===1)throw n=bu,Hi(t,0),Lr(t,o),io(t,At()),n;if(e===6)Lr(t,o);else{if(s=t.current.alternate,!(o&30)&&!FM(s)&&(e=Pf(t,o),e===2&&(r=I0(t),r!==0&&(o=r,e=J0(t,r))),e===1))throw n=bu,Hi(t,0),Lr(t,o),io(t,At()),n;switch(t.finishedWork=s,t.finishedLanes=o,e){case 0:case 1:throw Error(se(345));case 2:Di(t,Zn,ar);break;case 3:if(Lr(t,o),(o&130023424)===o&&(e=Gv+500-At(),10<e)){if(xf(t,0)!==0)break;if(s=t.suspendedLanes,(s&o)!==o){Vn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_0(Di.bind(null,t,Zn,ar),e);break}Di(t,Zn,ar);break;case 4:if(Lr(t,o),(o&4194240)===o)break;for(e=t.eventTimes,s=-1;0<o;){var i=31-xs(o);r=1<<i,i=e[i],i>s&&(s=i),o&=~r}if(o=s,o=At()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*OM(o/1960))-o,10<o){t.timeoutHandle=_0(Di.bind(null,t,Zn,ar),o);break}Di(t,Zn,ar);break;case 5:Di(t,Zn,ar);break;default:throw Error(se(329))}}}return io(t,At()),t.callbackNode===n?dT.bind(null,t):null}function J0(t,e){var n=Kc;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=Pf(t,e),t!==2&&(e=Zn,Zn=n,e!==null&&ex(e)),t}function ex(t){Zn===null?Zn=t:Zn.push.apply(Zn,t)}function FM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var s=n[o],r=s.getSnapshot;s=s.value;try{if(!Is(r(),s))return!1}catch(i){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~Hv,e&=~Gp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xs(e),o=1<<n;t[n]=-1,e&=~o}}function qk(t){if(Me&6)throw Error(se(327));ml();var e=xf(t,0);if(!(e&1))return io(t,At()),null;var n=Pf(t,e);if(t.tag!==0&&n===2){var o=I0(t);o!==0&&(e=o,n=J0(t,o))}if(n===1)throw n=bu,Hi(t,0),Lr(t,e),io(t,At()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t,Zn,ar),io(t,At()),null}function jv(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Rl=At()+500,Vp&&mi())}}function ea(t){zr!==null&&zr.tag===0&&!(Me&6)&&ml();var e=Me;Me|=1;var n=qo.transition,o=je;try{if(qo.transition=null,je=1,t)return t()}finally{je=o,qo.transition=n,Me=e,!(Me&6)&&mi()}}function qv(){po=ll.current,ct(ll)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dM(n)),Mt!==null)for(n=Mt.return;n!==null;){var o=n;switch(Ev(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&kf();break;case 3:Tl(),ct(so),ct(Nn),Pv();break;case 5:Fv(o);break;case 4:Tl();break;case 13:ct(xt);break;case 19:ct(xt);break;case 10:Av(o.type._context);break;case 22:case 23:qv()}n=n.return}if(sn=t,Mt=t=Yr(t.current,null),pn=po=e,Qt=0,bu=null,Hv=Gp=Ji=0,Zn=Kc=null,Mi!==null){for(e=0;e<Mi.length;e++)if(n=Mi[e],o=n.interleaved,o!==null){n.interleaved=null;var s=o.next,r=n.pending;if(r!==null){var i=r.next;r.next=s,o.next=i}n.pending=o}Mi=null}return t}function hT(t,e){do{var n=Mt;try{if(Rv(),tf.current=Df,Af){for(var o=vt.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Af=!1}if(Zi=0,tn=qt=vt=null,jc=!1,pu=0,Uv.current=null,n===null||n.return===null){Qt=1,bu=e,Mt=null;break}e:{var r=t,i=n.return,a=n,l=e;if(e=pn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Ok(i);if(f!==null){f.flags&=-257,Fk(f,i,a,r,e),f.mode&1&&_k(r,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){_k(r,c,e),Kv();break e}l=Error(se(426))}}else if(mt&&a.mode&1){var b=Ok(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Fk(b,i,a,r,e),Tv(Nl(l,a));break e}}r=l=Nl(l,a),Qt!==4&&(Qt=2),Kc===null?Kc=[r]:Kc.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=XE(r,l,e);Sk(r,g);break e;case 1:a=l;var x=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Kr===null||!Kr.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var y=YE(r,a,e);Sk(r,y);break e}}r=r.return}while(r!==null)}mT(n)}catch(w){e=w,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(1)}function fT(){var t=_f.current;return _f.current=Df,t===null?Df:t}function Kv(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),sn===null||!(Ji&268435455)&&!(Gp&268435455)||Lr(sn,pn)}function Pf(t,e){var n=Me;Me|=2;var o=fT();(sn!==t||pn!==e)&&(ar=null,Hi(t,e));do try{PM();break}catch(s){hT(t,s)}while(1);if(Rv(),Me=n,_f.current=o,Mt!==null)throw Error(se(261));return sn=null,pn=0,Qt}function PM(){for(;Mt!==null;)pT(Mt)}function LM(){for(;Mt!==null&&!l3();)pT(Mt)}function pT(t){var e=bT(t.alternate,t,po);t.memoizedProps=t.pendingProps,e===null?mT(t):Mt=e,Uv.current=null}function mT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RM(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Mt=null;return}}else if(n=NM(n,e,po),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Di(t,e,n){var o=je,s=qo.transition;try{qo.transition=null,je=1,MM(t,e,n,o)}finally{qo.transition=s,je=o}return null}function MM(t,e,n,o){do ml();while(zr!==null);if(Me&6)throw Error(se(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(x3(t,r),t===sn&&(Mt=sn=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eh||(Eh=!0,xT(bf,function(){return ml(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=qo.transition,qo.transition=null;var i=je;je=1;var a=Me;Me|=4,Uv.current=null,DM(t,n),cT(n,t),sM(A0),vf=!!R0,A0=R0=null,t.current=n,_M(n),c3(),Me=a,je=i,qo.transition=r}else t.current=n;if(Eh&&(Eh=!1,zr=t,Ff=s),r=t.pendingLanes,r===0&&(Kr=null),h3(n.stateNode),io(t,At()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],o(s.value,{componentStack:s.stack,digest:s.digest});if(Of)throw Of=!1,t=Q0,Q0=null,t;return Ff&1&&t.tag!==0&&ml(),r=t.pendingLanes,r&1?t===Z0?Xc++:(Xc=0,Z0=t):Xc=0,mi(),null}function ml(){if(zr!==null){var t=K2(Ff),e=qo.transition,n=je;try{if(qo.transition=null,je=16>t?16:t,zr===null)var o=!1;else{if(t=zr,zr=null,Ff=0,Me&6)throw Error(se(331));var s=Me;for(Me|=4,fe=t.current;fe!==null;){var r=fe,i=r.child;if(fe.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(fe=c;fe!==null;){var u=fe;switch(u.tag){case 0:case 11:case 15:qc(8,u,r)}var d=u.child;if(d!==null)d.return=u,fe=d;else for(;fe!==null;){u=fe;var h=u.sibling,f=u.return;if(iT(u),u===c){fe=null;break}if(h!==null){h.return=f,fe=h;break}fe=f}}}var p=r.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}fe=r}}if(r.subtreeFlags&2064&&i!==null)i.return=r,fe=i;else e:for(;fe!==null;){if(r=fe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:qc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,fe=g;break e}fe=r.return}}var x=t.current;for(fe=x;fe!==null;){i=fe;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,fe=v;else e:for(i=x;fe!==null;){if(a=fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hp(9,a)}}catch(w){wt(a,a.return,w)}if(a===i){fe=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,fe=y;break e}fe=a.return}}if(Me=s,mi(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Pp,t)}catch(w){}o=!0}return o}finally{je=n,qo.transition=e}}return!1}function Kk(t,e,n){e=Nl(n,e),e=XE(t,e,1),t=qr(t,e,1),e=Vn(),t!==null&&(Lu(t,1,e),io(t,e))}function wt(t,e,n){if(t.tag===3)Kk(t,t,n);else for(;e!==null;){if(e.tag===3){Kk(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Kr===null||!Kr.has(o))){t=Nl(n,t),t=YE(e,t,1),e=qr(e,t,1),t=Vn(),e!==null&&(Lu(e,1,t),io(e,t));break}}e=e.return}}function zM(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=Vn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(pn&n)===n&&(Qt===4||Qt===3&&(pn&130023424)===pn&&500>At()-Gv?Hi(t,0):Hv|=n),io(t,e)}function gT(t,e){e===0&&(t.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var n=Vn();t=yr(t,e),t!==null&&(Lu(t,e,n),io(t,n))}function BM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gT(t,n)}function VM(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(se(314))}o!==null&&o.delete(e),gT(t,n)}var bT;bT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||so.current)eo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return eo=!1,TM(t,e,n);eo=!!(t.flags&131072)}else eo=!1,mt&&e.flags&1048576&&yE(e,Sf,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;of(t,e),t=e.pendingProps;var s=Il(e,Nn.current);pl(e,n),s=Mv(null,e,o,t,s,n);var r=zv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ro(o)?(r=!0,Cf(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_v(e),s.updater=Wp,e.stateNode=s,s._reactInternals=e,B0(e,o,t,n),e=U0(null,e,o,!0,r,n)):(e.tag=0,mt&&r&&Sv(e),Ln(null,e,s,n),e=e.child),e;case 16:o=e.elementType;e:{switch(of(t,e),t=e.pendingProps,s=o._init,o=s(o._payload),e.type=o,s=e.tag=UM(o),t=ls(o,t),s){case 0:e=W0(null,e,o,t,n);break e;case 1:e=Mk(null,e,o,t,n);break e;case 11:e=Pk(null,e,o,t,n);break e;case 14:e=Lk(null,e,o,ls(o.type,t),n);break e}throw Error(se(306,o,""))}return e;case 0:return o=e.type,s=e.pendingProps,s=e.elementType===o?s:ls(o,s),W0(t,e,o,s,n);case 1:return o=e.type,s=e.pendingProps,s=e.elementType===o?s:ls(o,s),Mk(t,e,o,s,n);case 3:e:{if(eT(e),t===null)throw Error(se(387));o=e.pendingProps,r=e.memoizedState,s=r.element,CE(t,e),Nf(e,o,null,n);var i=e.memoizedState;if(o=i.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Nl(Error(se(423)),e),e=zk(t,e,o,n,s);break e}else if(o!==s){s=Nl(Error(se(424)),e),e=zk(t,e,o,n,s);break e}else for(vo=jr(e.stateNode.containerInfo.firstChild),wo=e,mt=!0,us=null,n=TE(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sl(),o===s){e=wr(t,e,n);break e}Ln(t,e,o,n)}e=e.child}return e;case 5:return NE(e),t===null&&L0(e),o=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,i=s.children,D0(o,s)?i=null:r!==null&&D0(o,r)&&(e.flags|=32),JE(t,e),Ln(t,e,i,n),e.child;case 6:return t===null&&L0(e),null;case 13:return tT(t,e,n);case 4:return Ov(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=El(e,null,o,n):Ln(t,e,o,n),e.child;case 11:return o=e.type,s=e.pendingProps,s=e.elementType===o?s:ls(o,s),Pk(t,e,o,s,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,s=e.pendingProps,r=e.memoizedProps,i=s.value,st(Ef,o._currentValue),o._currentValue=i,r!==null)if(Is(r.value,i)){if(r.children===s.children&&!so.current){e=wr(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){i=r.child;for(var l=a.firstContext;l!==null;){if(l.context===o){if(r.tag===1){l=br(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),M0(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)i=r.type===e.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(se(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),M0(i,n,e),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===e){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}Ln(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,o=e.pendingProps.children,pl(e,n),s=Ko(s),o=o(s),e.flags|=1,Ln(t,e,o,n),e.child;case 14:return o=e.type,s=ls(o,e.pendingProps),s=ls(o.type,s),Lk(t,e,o,s,n);case 15:return QE(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,s=e.pendingProps,s=e.elementType===o?s:ls(o,s),of(t,e),e.tag=1,ro(o)?(t=!0,Cf(e)):t=!1,pl(e,n),SE(e,o,s),B0(e,o,s,n),U0(null,e,o,!0,t,n);case 19:return nT(t,e,n);case 22:return ZE(t,e,n)}throw Error(se(156,e.tag))};function xT(t,e){return H2(t,e)}function WM(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(t,e,n,o){return new WM(t,e,n,o)}function Xv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UM(t){if(typeof t=="function")return Xv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pv)return 11;if(t===mv)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=Vo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function af(t,e,n,o,s,r){var i=2;if(o=t,typeof t=="function")Xv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Za:return Gi(n.children,s,r,e);case fv:i=8,s|=8;break;case u0:return t=Vo(12,n,e,s|2),t.elementType=u0,t.lanes=r,t;case d0:return t=Vo(13,n,e,s),t.elementType=d0,t.lanes=r,t;case h0:return t=Vo(19,n,e,s),t.elementType=h0,t.lanes=r,t;case E2:return jp(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I2:i=10;break e;case S2:i=9;break e;case pv:i=11;break e;case mv:i=14;break e;case _r:i=16,o=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Vo(i,n,e,s),e.elementType=t,e.type=o,e.lanes=r,e}function Gi(t,e,n,o){return t=Vo(7,t,o,e),t.lanes=n,t}function jp(t,e,n,o){return t=Vo(22,t,o,e),t.elementType=E2,t.lanes=n,t.stateNode={isHidden:!1},t}function Sb(t,e,n){return t=Vo(6,t,null,e),t.lanes=n,t}function Eb(t,e,n){return e=Vo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HM(t,e,n,o,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ab(0),this.expirationTimes=ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ab(0),this.identifierPrefix=o,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yv(t,e,n,o,s,r,i,a,l){return t=new HM(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Vo(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(r),t}function GM(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qa,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function vT(t){if(!t)return oi;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ro(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(ro(n))return xE(t,n,e)}return e}function yT(t,e,n,o,s,r,i,a,l){return t=Yv(n,o,!0,t,s,r,i,a,l),t.context=vT(null),n=t.current,o=Vn(),s=Xr(n),r=br(o,s),r.callback=e!=null?e:null,qr(n,r,s),t.current.lanes=s,Lu(t,s,o),io(t,o),t}function qp(t,e,n,o){var s=e.current,r=Vn(),i=Xr(s);return n=vT(n),e.context===null?e.context=n:e.pendingContext=n,e=br(r,i),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=qr(s,e,i),t!==null&&(vs(t,s,i,r),ef(t,s,i)),i}function Lf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qv(t,e){Xk(t,e),(t=t.alternate)&&Xk(t,e)}function jM(){return null}var wT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zv(t){this._internalRoot=t}Kp.prototype.render=Zv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));qp(t,e,null,null)};Kp.prototype.unmount=Zv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ea(function(){qp(null,t,null,null)}),e[vr]=null}};function Kp(t){this._internalRoot=t}Kp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&J2(t)}};function Jv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yk(){}function qM(t,e,n,o,s){if(s){if(typeof o=="function"){var r=o;o=function(){var c=Lf(i);r.call(c)}}var i=yT(e,o,t,0,null,!1,!1,"",Yk);return t._reactRootContainer=i,t[vr]=i.current,cu(t.nodeType===8?t.parentNode:t),ea(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof o=="function"){var a=o;o=function(){var c=Lf(l);a.call(c)}}var l=Yv(t,0,!1,null,null,!1,!1,"",Yk);return t._reactRootContainer=l,t[vr]=l.current,cu(t.nodeType===8?t.parentNode:t),ea(function(){qp(e,l,n,o)}),l}function Yp(t,e,n,o,s){var r=n._reactRootContainer;if(r){var i=r;if(typeof s=="function"){var a=s;s=function(){var l=Lf(i);a.call(l)}}qp(e,i,t,s)}else i=qM(n,e,t,s,o);return Lf(i)}X2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rc(e.pendingLanes);n!==0&&(xv(e,n|1),io(e,At()),!(Me&6)&&(Rl=At()+500,mi()))}break;case 13:ea(function(){var o=yr(t,1);if(o!==null){var s=Vn();vs(o,t,1,s)}}),Qv(t,1)}};vv=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var n=Vn();vs(e,t,134217728,n)}Qv(t,134217728)}};Y2=function(t){if(t.tag===13){var e=Xr(t),n=yr(t,e);if(n!==null){var o=Vn();vs(n,t,e,o)}Qv(t,e)}};Q2=function(){return je};Z2=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};$0=function(t,e,n){switch(e){case"input":if(m0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var s=Bp(o);if(!s)throw Error(se(90));N2(o),m0(o,s)}}}break;case"textarea":A2(t,n);break;case"select":e=n.value,e!=null&&ul(t,!!n.multiple,e,!1)}};M2=jv;z2=ea;var KM={usingClientEntryPoint:!1,Events:[zu,nl,Bp,P2,L2,jv]},$c={findFiberByHostInstance:Li,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},XM={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W2(t),t===null?null:t.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||jM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Pp=Th.inject(XM),Gs=Th}catch(t){}}Io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KM;Io.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(e))throw Error(se(200));return GM(t,e,null,n)};Io.createRoot=function(t,e){if(!Jv(t))throw Error(se(299));var n=!1,o="",s=wT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yv(t,1,!1,null,null,n,!1,o,s),t[vr]=e.current,cu(t.nodeType===8?t.parentNode:t),new Zv(e)};Io.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=W2(e),t=t===null?null:t.stateNode,t};Io.flushSync=function(t){return ea(t)};Io.hydrate=function(t,e,n){if(!Xp(e))throw Error(se(200));return Yp(null,t,e,!0,n)};Io.hydrateRoot=function(t,e,n){if(!Jv(t))throw Error(se(405));var o=n!=null&&n.hydratedSources||null,s=!1,r="",i=wT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=yT(e,null,t,1,n!=null?n:null,s,!1,r,i),t[vr]=e.current,cu(t),o)for(t=0;t<o.length;t++)n=o[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kp(e)};Io.render=function(t,e,n){if(!Xp(e))throw Error(se(200));return Yp(null,t,e,!1,n)};Io.unmountComponentAtNode=function(t){if(!Xp(t))throw Error(se(40));return t._reactRootContainer?(ea(function(){Yp(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};Io.unstable_batchedUpdates=jv;Io.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!Xp(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Yp(t,e,n,!1,o)};Io.version="18.2.0-next-9e3b772b8-20220608";function $T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($T)}catch(t){console.error(t)}}$T(),y2.exports=Io;var ey=y2.exports;const YM=Gl(ey);var kT,Qk=ey;kT=Qk.createRoot,Qk.hydrateRoot;function tx(t,e){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},tx(t,e)}function si(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tx(t,e)}var CT={exports:{}},QM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZM=QM,JM=ZM;function IT(){}function ST(){}ST.resetWarningCache=IT;var ez=function(){function t(o,s,r,i,a,l){if(l!==JM){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ST,resetWarningCache:IT};return n.PropTypes=n,n};CT.exports=ez();var tz=CT.exports;const Zk=Gl(tz);function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ao.apply(this,arguments)}function Nh(t){return t.charAt(0)==="/"}function Tb(t,e){for(var n=e,o=n+1,s=t.length;o<s;n+=1,o+=1)t[n]=t[o];t.pop()}function nz(t,e){e===void 0&&(e="");var n=t&&t.split("/")||[],o=e&&e.split("/")||[],s=t&&Nh(t),r=e&&Nh(e),i=s||r;if(t&&Nh(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var a;if(o.length){var l=o[o.length-1];a=l==="."||l===".."||l===""}else a=!1;for(var c=0,u=o.length;u>=0;u--){var d=o[u];d==="."?Tb(o,u):d===".."?(Tb(o,u),c++):c&&(Tb(o,u),c--)}if(!i)for(;c--;c)o.unshift("..");i&&o[0]!==""&&(!o[0]||!Nh(o[0]))&&o.unshift("");var h=o.join("/");return a&&h.substr(-1)!=="/"&&(h+="/"),h}function Jk(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function lf(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(s,r){return lf(s,e[r])});if(typeof t=="object"||typeof e=="object"){var n=Jk(t),o=Jk(e);return n!==t||o!==e?lf(n,o):Object.keys(Object.assign({},t,e)).every(function(s){return lf(t[s],e[s])})}return!1}var oz=!0,Nb="Invariant failed";function $a(t,e){if(!t){if(oz)throw new Error(Nb);var n=typeof e=="function"?e():e,o=n?"".concat(Nb,": ").concat(n):Nb;throw new Error(o)}}function Yc(t){return t.charAt(0)==="/"?t:"/"+t}function eC(t){return t.charAt(0)==="/"?t.substr(1):t}function sz(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function ET(t,e){return sz(t,e)?t.substr(e.length):t}function TT(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function rz(t){var e=t||"/",n="",o="",s=e.indexOf("#");s!==-1&&(o=e.substr(s),e=e.substr(0,s));var r=e.indexOf("?");return r!==-1&&(n=e.substr(r),e=e.substr(0,r)),{pathname:e,search:n==="?"?"":n,hash:o==="#"?"":o}}function Po(t){var e=t.pathname,n=t.search,o=t.hash,s=e||"/";return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(s+=o.charAt(0)==="#"?o:"#"+o),s}function to(t,e,n,o){var s;typeof t=="string"?(s=rz(t),s.state=e):(s=ao({},t),s.pathname===void 0&&(s.pathname=""),s.search?s.search.charAt(0)!=="?"&&(s.search="?"+s.search):s.search="",s.hash?s.hash.charAt(0)!=="#"&&(s.hash="#"+s.hash):s.hash="",e!==void 0&&s.state===void 0&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(r){throw r instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):r}return n&&(s.key=n),o?s.pathname?s.pathname.charAt(0)!=="/"&&(s.pathname=nz(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s}function iz(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&lf(t.state,e.state)}function ty(){var t=null;function e(i){return t=i,function(){t===i&&(t=null)}}function n(i,a,l,c){if(t!=null){var u=typeof t=="function"?t(i,a):t;typeof u=="string"?typeof l=="function"?l(u,c):c(!0):c(u!==!1)}else c(!0)}var o=[];function s(i){var a=!0;function l(){a&&i.apply(void 0,arguments)}return o.push(l),function(){a=!1,o=o.filter(function(c){return c!==l})}}function r(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];o.forEach(function(c){return c.apply(void 0,a)})}return{setPrompt:e,confirmTransitionTo:n,appendListener:s,notifyListeners:r}}var NT=!!(typeof window<"u"&&window.document&&window.document.createElement);function RT(t,e){e(window.confirm(t))}function az(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function lz(){return window.navigator.userAgent.indexOf("Trident")===-1}function cz(){return window.navigator.userAgent.indexOf("Firefox")===-1}function uz(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var tC="popstate",nC="hashchange";function oC(){try{return window.history.state||{}}catch(t){return{}}}function dz(t){t===void 0&&(t={}),NT||$a(!1);var e=window.history,n=az(),o=!lz(),s=t,r=s.forceRefresh,i=r===void 0?!1:r,a=s.getUserConfirmation,l=a===void 0?RT:a,c=s.keyLength,u=c===void 0?6:c,d=t.basename?TT(Yc(t.basename)):"";function h(A){var D=A||{},V=D.key,H=D.state,K=window.location,ee=K.pathname,J=K.search,ne=K.hash,re=ee+J+ne;return d&&(re=ET(re,d)),to(re,H,V)}function f(){return Math.random().toString(36).substr(2,u)}var p=ty();function m(A){ao(R,A),R.length=e.length,p.notifyListeners(R.location,R.action)}function b(A){uz(A)||v(h(A.state))}function g(){v(h(oC()))}var x=!1;function v(A){if(x)x=!1,m();else{var D="POP";p.confirmTransitionTo(A,D,l,function(V){V?m({action:D,location:A}):y(A)})}}function y(A){var D=R.location,V=$.indexOf(D.key);V===-1&&(V=0);var H=$.indexOf(A.key);H===-1&&(H=0);var K=V-H;K&&(x=!0,S(K))}var w=h(oC()),$=[w.key];function k(A){return d+Po(A)}function C(A,D){var V="PUSH",H=to(A,D,f(),R.location);p.confirmTransitionTo(H,V,l,function(K){if(K){var ee=k(H),J=H.key,ne=H.state;if(n)if(e.pushState({key:J,state:ne},null,ee),i)window.location.href=ee;else{var re=$.indexOf(R.location.key),ge=$.slice(0,re+1);ge.push(H.key),$=ge,m({action:V,location:H})}else window.location.href=ee}})}function E(A,D){var V="REPLACE",H=to(A,D,f(),R.location);p.confirmTransitionTo(H,V,l,function(K){if(K){var ee=k(H),J=H.key,ne=H.state;if(n)if(e.replaceState({key:J,state:ne},null,ee),i)window.location.replace(ee);else{var re=$.indexOf(R.location.key);re!==-1&&($[re]=H.key),m({action:V,location:H})}else window.location.replace(ee)}})}function S(A){e.go(A)}function T(){S(-1)}function P(){S(1)}var U=0;function W(A){U+=A,U===1&&A===1?(window.addEventListener(tC,b),o&&window.addEventListener(nC,g)):U===0&&(window.removeEventListener(tC,b),o&&window.removeEventListener(nC,g))}var z=!1;function B(A){A===void 0&&(A=!1);var D=p.setPrompt(A);return z||(W(1),z=!0),function(){return z&&(z=!1,W(-1)),D()}}function q(A){var D=p.appendListener(A);return W(1),function(){W(-1),D()}}var R={length:e.length,action:"POP",location:w,createHref:k,push:C,replace:E,go:S,goBack:T,goForward:P,block:B,listen:q};return R}var sC="hashchange",hz={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+eC(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:eC,decodePath:Yc},slash:{encodePath:Yc,decodePath:Yc}};function AT(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function kc(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function fz(t){window.location.hash=t}function Rb(t){window.location.replace(AT(window.location.href)+"#"+t)}function pz(t){t===void 0&&(t={}),NT||$a(!1);var e=window.history;cz();var n=t,o=n.getUserConfirmation,s=o===void 0?RT:o,r=n.hashType,i=r===void 0?"slash":r,a=t.basename?TT(Yc(t.basename)):"",l=hz[i],c=l.encodePath,u=l.decodePath;function d(){var D=u(kc());return a&&(D=ET(D,a)),to(D)}var h=ty();function f(D){ao(A,D),A.length=e.length,h.notifyListeners(A.location,A.action)}var p=!1,m=null;function b(D,V){return D.pathname===V.pathname&&D.search===V.search&&D.hash===V.hash}function g(){var D=kc(),V=c(D);if(D!==V)Rb(V);else{var H=d(),K=A.location;if(!p&&b(K,H)||m===Po(H))return;m=null,x(H)}}function x(D){if(p)p=!1,f();else{var V="POP";h.confirmTransitionTo(D,V,s,function(H){H?f({action:V,location:D}):v(D)})}}function v(D){var V=A.location,H=k.lastIndexOf(Po(V));H===-1&&(H=0);var K=k.lastIndexOf(Po(D));K===-1&&(K=0);var ee=H-K;ee&&(p=!0,T(ee))}var y=kc(),w=c(y);y!==w&&Rb(w);var $=d(),k=[Po($)];function C(D){var V=document.querySelector("base"),H="";return V&&V.getAttribute("href")&&(H=AT(window.location.href)),H+"#"+c(a+Po(D))}function E(D,V){var H="PUSH",K=to(D,void 0,void 0,A.location);h.confirmTransitionTo(K,H,s,function(ee){if(ee){var J=Po(K),ne=c(a+J),re=kc()!==ne;if(re){m=J,fz(ne);var ge=k.lastIndexOf(Po(A.location)),xe=k.slice(0,ge+1);xe.push(J),k=xe,f({action:H,location:K})}else f()}})}function S(D,V){var H="REPLACE",K=to(D,void 0,void 0,A.location);h.confirmTransitionTo(K,H,s,function(ee){if(ee){var J=Po(K),ne=c(a+J),re=kc()!==ne;re&&(m=J,Rb(ne));var ge=k.indexOf(Po(A.location));ge!==-1&&(k[ge]=J),f({action:H,location:K})}})}function T(D){e.go(D)}function P(){T(-1)}function U(){T(1)}var W=0;function z(D){W+=D,W===1&&D===1?window.addEventListener(sC,g):W===0&&window.removeEventListener(sC,g)}var B=!1;function q(D){D===void 0&&(D=!1);var V=h.setPrompt(D);return B||(z(1),B=!0),function(){return B&&(B=!1,z(-1)),V()}}function R(D){var V=h.appendListener(D);return z(1),function(){z(-1),V()}}var A={length:e.length,action:"POP",location:$,createHref:C,push:E,replace:S,go:T,goBack:P,goForward:U,block:q,listen:R};return A}function rC(t,e,n){return Math.min(Math.max(t,e),n)}function mz(t){t===void 0&&(t={});var e=t,n=e.getUserConfirmation,o=e.initialEntries,s=o===void 0?["/"]:o,r=e.initialIndex,i=r===void 0?0:r,a=e.keyLength,l=a===void 0?6:a,c=ty();function u(C){ao(k,C),k.length=k.entries.length,c.notifyListeners(k.location,k.action)}function d(){return Math.random().toString(36).substr(2,l)}var h=rC(i,0,s.length-1),f=s.map(function(C){return typeof C=="string"?to(C,void 0,d()):to(C,void 0,C.key||d())}),p=Po;function m(C,E){var S="PUSH",T=to(C,E,d(),k.location);c.confirmTransitionTo(T,S,n,function(P){if(P){var U=k.index,W=U+1,z=k.entries.slice(0);z.length>W?z.splice(W,z.length-W,T):z.push(T),u({action:S,location:T,index:W,entries:z})}})}function b(C,E){var S="REPLACE",T=to(C,E,d(),k.location);c.confirmTransitionTo(T,S,n,function(P){P&&(k.entries[k.index]=T,u({action:S,location:T}))})}function g(C){var E=rC(k.index+C,0,k.entries.length-1),S="POP",T=k.entries[E];c.confirmTransitionTo(T,S,n,function(P){P?u({action:S,location:T,index:E}):u()})}function x(){g(-1)}function v(){g(1)}function y(C){var E=k.index+C;return E>=0&&E<k.entries.length}function w(C){return C===void 0&&(C=!1),c.setPrompt(C)}function $(C){return c.appendListener(C)}var k={length:f.length,action:"POP",location:f[h],index:h,entries:f,createHref:p,push:m,replace:b,go:g,goBack:x,goForward:v,canGo:y,block:w,listen:$};return k}var Xl={exports:{}},gz=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},Mf=gz;Xl.exports=OT;Xl.exports.parse=ny;Xl.exports.compile=xz;Xl.exports.tokensToFunction=DT;Xl.exports.tokensToRegExp=_T;var bz=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ny(t,e){for(var n=[],o=0,s=0,r="",i=e&&e.delimiter||"/",a;(a=bz.exec(t))!=null;){var l=a[0],c=a[1],u=a.index;if(r+=t.slice(s,u),s=u+l.length,c){r+=c[1];continue}var d=t[s],h=a[2],f=a[3],p=a[4],m=a[5],b=a[6],g=a[7];r&&(n.push(r),r="");var x=h!=null&&d!=null&&d!==h,v=b==="+"||b==="*",y=b==="?"||b==="*",w=a[2]||i,$=p||m;n.push({name:f||o++,prefix:h||"",delimiter:w,optional:y,repeat:v,partial:x,asterisk:!!g,pattern:$?wz($):g?".*":"[^"+cf(w)+"]+?"})}return s<t.length&&(r+=t.substr(s)),r&&n.push(r),n}function xz(t,e){return DT(ny(t,e),e)}function vz(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function yz(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function DT(t,e){for(var n=new Array(t.length),o=0;o<t.length;o++)typeof t[o]=="object"&&(n[o]=new RegExp("^(?:"+t[o].pattern+")$",sy(e)));return function(s,r){for(var i="",a=s||{},l=r||{},c=l.pretty?vz:encodeURIComponent,u=0;u<t.length;u++){var d=t[u];if(typeof d=="string"){i+=d;continue}var h=a[d.name],f;if(h==null)if(d.optional){d.partial&&(i+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(Mf(h)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var p=0;p<h.length;p++){if(f=c(h[p]),!n[u].test(f))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(p===0?d.prefix:d.delimiter)+f}continue}if(f=d.asterisk?yz(h):c(h),!n[u].test(f))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+f+'"');i+=d.prefix+f}return i}}function cf(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function wz(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function oy(t,e){return t.keys=e,t}function sy(t){return t&&t.sensitive?"":"i"}function $z(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return oy(t,e)}function kz(t,e,n){for(var o=[],s=0;s<t.length;s++)o.push(OT(t[s],e,n).source);var r=new RegExp("(?:"+o.join("|")+")",sy(n));return oy(r,e)}function Cz(t,e,n){return _T(ny(t,n),e,n)}function _T(t,e,n){Mf(e)||(n=e||n,e=[]),n=n||{};for(var o=n.strict,s=n.end!==!1,r="",i=0;i<t.length;i++){var a=t[i];if(typeof a=="string")r+=cf(a);else{var l=cf(a.prefix),c="(?:"+a.pattern+")";e.push(a),a.repeat&&(c+="(?:"+l+c+")*"),a.optional?a.partial?c=l+"("+c+")?":c="(?:"+l+"("+c+"))?":c=l+"("+c+")",r+=c}}var u=cf(n.delimiter||"/"),d=r.slice(-u.length)===u;return o||(r=(d?r.slice(0,-u.length):r)+"(?:"+u+"(?=$))?"),s?r+="$":r+=o&&d?"":"(?="+u+"|$)",oy(new RegExp("^"+r,sy(n)),e)}function OT(t,e,n){return Mf(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?$z(t,e):Mf(t)?kz(t,e,n):Cz(t,e,n)}var Iz=Xl.exports;const FT=Gl(Iz);var Ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=typeof Symbol=="function"&&Symbol.for,ry=an?Symbol.for("react.element"):60103,iy=an?Symbol.for("react.portal"):60106,Qp=an?Symbol.for("react.fragment"):60107,Zp=an?Symbol.for("react.strict_mode"):60108,Jp=an?Symbol.for("react.profiler"):60114,em=an?Symbol.for("react.provider"):60109,tm=an?Symbol.for("react.context"):60110,ay=an?Symbol.for("react.async_mode"):60111,nm=an?Symbol.for("react.concurrent_mode"):60111,om=an?Symbol.for("react.forward_ref"):60112,sm=an?Symbol.for("react.suspense"):60113,Sz=an?Symbol.for("react.suspense_list"):60120,rm=an?Symbol.for("react.memo"):60115,im=an?Symbol.for("react.lazy"):60116,Ez=an?Symbol.for("react.block"):60121,Tz=an?Symbol.for("react.fundamental"):60117,Nz=an?Symbol.for("react.responder"):60118,Rz=an?Symbol.for("react.scope"):60119;function Eo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ry:switch(t=t.type,t){case ay:case nm:case Qp:case Jp:case Zp:case sm:return t;default:switch(t=t&&t.$$typeof,t){case tm:case om:case im:case rm:case em:return t;default:return e}}case iy:return e}}}function PT(t){return Eo(t)===nm}Ye.AsyncMode=ay;Ye.ConcurrentMode=nm;Ye.ContextConsumer=tm;Ye.ContextProvider=em;Ye.Element=ry;Ye.ForwardRef=om;Ye.Fragment=Qp;Ye.Lazy=im;Ye.Memo=rm;Ye.Portal=iy;Ye.Profiler=Jp;Ye.StrictMode=Zp;Ye.Suspense=sm;Ye.isAsyncMode=function(t){return PT(t)||Eo(t)===ay};Ye.isConcurrentMode=PT;Ye.isContextConsumer=function(t){return Eo(t)===tm};Ye.isContextProvider=function(t){return Eo(t)===em};Ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ry};Ye.isForwardRef=function(t){return Eo(t)===om};Ye.isFragment=function(t){return Eo(t)===Qp};Ye.isLazy=function(t){return Eo(t)===im};Ye.isMemo=function(t){return Eo(t)===rm};Ye.isPortal=function(t){return Eo(t)===iy};Ye.isProfiler=function(t){return Eo(t)===Jp};Ye.isStrictMode=function(t){return Eo(t)===Zp};Ye.isSuspense=function(t){return Eo(t)===sm};Ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qp||t===nm||t===Jp||t===Zp||t===sm||t===Sz||typeof t=="object"&&t!==null&&(t.$$typeof===im||t.$$typeof===rm||t.$$typeof===em||t.$$typeof===tm||t.$$typeof===om||t.$$typeof===Tz||t.$$typeof===Nz||t.$$typeof===Rz||t.$$typeof===Ez)};Ye.typeOf=Eo;function LT(t,e){if(t==null)return{};var n={},o=Object.keys(t),s,r;for(r=0;r<o.length;r++)s=o[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var MT={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ln=typeof Symbol=="function"&&Symbol.for,ly=ln?Symbol.for("react.element"):60103,cy=ln?Symbol.for("react.portal"):60106,am=ln?Symbol.for("react.fragment"):60107,lm=ln?Symbol.for("react.strict_mode"):60108,cm=ln?Symbol.for("react.profiler"):60114,um=ln?Symbol.for("react.provider"):60109,dm=ln?Symbol.for("react.context"):60110,uy=ln?Symbol.for("react.async_mode"):60111,hm=ln?Symbol.for("react.concurrent_mode"):60111,fm=ln?Symbol.for("react.forward_ref"):60112,pm=ln?Symbol.for("react.suspense"):60113,Az=ln?Symbol.for("react.suspense_list"):60120,mm=ln?Symbol.for("react.memo"):60115,gm=ln?Symbol.for("react.lazy"):60116,Dz=ln?Symbol.for("react.block"):60121,_z=ln?Symbol.for("react.fundamental"):60117,Oz=ln?Symbol.for("react.responder"):60118,Fz=ln?Symbol.for("react.scope"):60119;function To(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ly:switch(t=t.type,t){case uy:case hm:case am:case cm:case lm:case pm:return t;default:switch(t=t&&t.$$typeof,t){case dm:case fm:case gm:case mm:case um:return t;default:return e}}case cy:return e}}}function zT(t){return To(t)===hm}Ke.AsyncMode=uy;Ke.ConcurrentMode=hm;Ke.ContextConsumer=dm;Ke.ContextProvider=um;Ke.Element=ly;Ke.ForwardRef=fm;Ke.Fragment=am;Ke.Lazy=gm;Ke.Memo=mm;Ke.Portal=cy;Ke.Profiler=cm;Ke.StrictMode=lm;Ke.Suspense=pm;Ke.isAsyncMode=function(t){return zT(t)||To(t)===uy};Ke.isConcurrentMode=zT;Ke.isContextConsumer=function(t){return To(t)===dm};Ke.isContextProvider=function(t){return To(t)===um};Ke.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ly};Ke.isForwardRef=function(t){return To(t)===fm};Ke.isFragment=function(t){return To(t)===am};Ke.isLazy=function(t){return To(t)===gm};Ke.isMemo=function(t){return To(t)===mm};Ke.isPortal=function(t){return To(t)===cy};Ke.isProfiler=function(t){return To(t)===cm};Ke.isStrictMode=function(t){return To(t)===lm};Ke.isSuspense=function(t){return To(t)===pm};Ke.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===am||t===hm||t===cm||t===lm||t===pm||t===Az||typeof t=="object"&&t!==null&&(t.$$typeof===gm||t.$$typeof===mm||t.$$typeof===um||t.$$typeof===dm||t.$$typeof===fm||t.$$typeof===_z||t.$$typeof===Oz||t.$$typeof===Fz||t.$$typeof===Dz)};Ke.typeOf=To;MT.exports=Ke;var Pz=MT.exports,dy=Pz,Lz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hy={};hy[dy.ForwardRef]=zz;hy[dy.Memo]=BT;function iC(t){return dy.isMemo(t)?BT:hy[t.$$typeof]||Lz}var Bz=Object.defineProperty,Vz=Object.getOwnPropertyNames,aC=Object.getOwnPropertySymbols,Wz=Object.getOwnPropertyDescriptor,Uz=Object.getPrototypeOf,lC=Object.prototype;function VT(t,e,n){if(typeof e!="string"){if(lC){var o=Uz(e);o&&o!==lC&&VT(t,o,n)}var s=Vz(e);aC&&(s=s.concat(aC(e)));for(var r=iC(t),i=iC(e),a=0;a<s.length;++a){var l=s[a];if(!Mz[l]&&!(n&&n[l])&&!(i&&i[l])&&!(r&&r[l])){var c=Wz(e,l);try{Bz(t,l,c)}catch(u){}}}}return t}var Hz=VT;const Gz=Gl(Hz);var Ab=1073741823,cC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function jz(){var t="__global_unique_id__";return cC[t]=(cC[t]||0)+1}function qz(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Kz(t){var e=[];return{on:function(o){e.push(o)},off:function(o){e=e.filter(function(s){return s!==o})},get:function(){return t},set:function(o,s){t=o,e.forEach(function(r){return r(t,s)})}}}function Xz(t){return Array.isArray(t)?t[0]:t}function Yz(t,e){var n,o,s="__create-react-context-"+jz()+"__",r=function(a){si(l,a);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=a.call.apply(a,[this].concat(h))||this,u.emitter=Kz(u.props.value),u}var c=l.prototype;return c.getChildContext=function(){var d;return d={},d[s]=this.emitter,d},c.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var h=this.props.value,f=d.value,p;qz(h,f)?p=0:(p=typeof e=="function"?e(h,f):Ab,p|=0,p!==0&&this.emitter.set(d.value,p))}},c.render=function(){return this.props.children},l}(Z.Component);r.childContextTypes=(n={},n[s]=Zk.object.isRequired,n);var i=function(a){si(l,a);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=a.call.apply(a,[this].concat(h))||this,u.observedBits=void 0,u.state={value:u.getValue()},u.onUpdate=function(p,m){var b=u.observedBits|0;b&m&&u.setState({value:u.getValue()})},u}var c=l.prototype;return c.componentWillReceiveProps=function(d){var h=d.observedBits;this.observedBits=h==null?Ab:h},c.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d==null?Ab:d},c.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},c.getValue=function(){return this.context[s]?this.context[s].get():t},c.render=function(){return Xz(this.props.children)(this.state.value)},l}(Z.Component);return i.contextTypes=(o={},o[s]=Zk.object,o),{Provider:r,Consumer:i}}var Qz=Z.createContext||Yz,WT=function(e){var n=Qz();return n.displayName=e,n},Zz=WT("Router-History"),Al=WT("Router"),Vu=function(t){si(e,t),e.computeRootMatch=function(s){return{path:"/",url:"/",params:{},isExact:s==="/"}};function e(o){var s;return s=t.call(this,o)||this,s.state={location:o.history.location},s._isMounted=!1,s._pendingLocation=null,o.staticContext||(s.unlisten=o.history.listen(function(r){s._pendingLocation=r})),s}var n=e.prototype;return n.componentDidMount=function(){var s=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(r){s._isMounted&&s.setState({location:r})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return Z.createElement(Al.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Z.createElement(Zz.Provider,{children:this.props.children||null,value:this.props.history}))},e}(Z.Component);Z.Component;var Jz=function(t){si(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(s){this.props.onUpdate&&this.props.onUpdate.call(this,this,s)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(Z.Component),Db={},e4=1e4,uC=0;function t4(t){if(Db[t])return Db[t];var e=FT.compile(t);return uC<e4&&(Db[t]=e,uC++),e}function dC(t,e){return t===void 0&&(t="/"),e===void 0&&(e={}),t==="/"?t:t4(t)(e,{pretty:!0})}function n4(t){var e=t.computedMatch,n=t.to,o=t.push,s=o===void 0?!1:o;return Z.createElement(Al.Consumer,null,function(r){r||$a(!1);var i=r.history,a=r.staticContext,l=s?i.push:i.replace,c=to(e?typeof n=="string"?dC(n,e.params):ao({},n,{pathname:dC(n.pathname,e.params)}):n);return a?(l(c),null):Z.createElement(Jz,{onMount:function(){l(c)},onUpdate:function(d,h){var f=to(h.to);iz(f,ao({},c,{key:f.key}))||l(c)},to:n})})}var hC={},o4=1e4,fC=0;function s4(t,e){var n=""+e.end+e.strict+e.sensitive,o=hC[n]||(hC[n]={});if(o[t])return o[t];var s=[],r=FT(t,s,e),i={regexp:r,keys:s};return fC<o4&&(o[t]=i,fC++),i}function ta(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var n=e,o=n.path,s=n.exact,r=s===void 0?!1:s,i=n.strict,a=i===void 0?!1:i,l=n.sensitive,c=l===void 0?!1:l,u=[].concat(o);return u.reduce(function(d,h){if(!h&&h!=="")return null;if(d)return d;var f=s4(h,{end:r,strict:a,sensitive:c}),p=f.regexp,m=f.keys,b=p.exec(t);if(!b)return null;var g=b[0],x=b.slice(1),v=t===g;return r&&!v?null:{path:h,url:h==="/"&&g===""?"/":g,isExact:v,params:m.reduce(function(y,w,$){return y[w.name]=x[$],y},{})}},null)}function r4(t){return Z.Children.count(t)===0}var Dc=function(t){si(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var s=this;return Z.createElement(Al.Consumer,null,function(r){r||$a(!1);var i=s.props.location||r.location,a=s.props.computedMatch?s.props.computedMatch:s.props.path?ta(i.pathname,s.props):r.match,l=ao({},r,{location:i,match:a}),c=s.props,u=c.children,d=c.component,h=c.render;return Array.isArray(u)&&r4(u)&&(u=null),Z.createElement(Al.Provider,{value:l},l.match?u?typeof u=="function"?u(l):u:d?Z.createElement(d,l):h?h(l):null:typeof u=="function"?u(l):null)})},e}(Z.Component);function fy(t){return t.charAt(0)==="/"?t:"/"+t}function i4(t,e){return t?ao({},e,{pathname:fy(t)+e.pathname}):e}function a4(t,e){if(!t)return e;var n=fy(t);return e.pathname.indexOf(n)!==0?e:ao({},e,{pathname:e.pathname.substr(n.length)})}function pC(t){return typeof t=="string"?t:Po(t)}function _b(t){return function(){$a(!1)}}function mC(){}Z.Component;Z.Component;function l4(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(s){var r=s.wrappedComponentRef,i=LT(s,["wrappedComponentRef"]);return Z.createElement(Al.Consumer,null,function(a){return a||$a(!1),Z.createElement(t,ao({},i,a,{ref:r}))})};return n.displayName=e,n.WrappedComponent=t,Gz(n,t)}Z.useContext;const c4="modulepreload",u4=function(t){return"/"+t},gC={},Kt=function(e,n,o){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=u4(r),r in gC)return;gC[r]=!0;const i=r.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!o)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===r&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(r,'"]').concat(a)))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":c4,i||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),i)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(r))))})})).then(()=>e()).catch(r=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r})},Va={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Wa,UT,bm,HT=!1,zf=!1,py=!1,mo=!1,bC=null,nx=!1;const d4={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},na=(t,e="")=>()=>{},xC="http://www.w3.org/1999/xlink",vC={},h4="http://www.w3.org/2000/svg",f4="http://www.w3.org/1999/xhtml",p4=t=>t!=null,my=t=>(t=typeof t,t==="object"||t==="function");function m4(t){var e,n,o;return(o=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&o!==void 0?o:void 0}const he=(t,e,...n)=>{let o=null,s=null,r=null,i=!1,a=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)o=d[h],Array.isArray(o)?c(o):o!=null&&typeof o!="boolean"&&((i=typeof t!="function"&&!my(o))&&(o=String(o)),i&&a?l[l.length-1].$text$+=o:l.push(i?Bf(null,o):o),a=i)};if(c(n),e){e.key&&(s=e.key),e.name&&(r=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,b4);const u=Bf(t,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=s,u.$name$=r,u},Bf=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},Pt={},g4=t=>t&&t.$tag$===Pt,b4={forEach:(t,e)=>t.map(yC).forEach(e),map:(t,e)=>t.map(yC).map(e).map(x4)},yC=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),x4=t=>{if(typeof t.vtag=="function"){const n=Object.assign({},t.vattrs);return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),he(t.vtag,n,...t.vchildren||[])}const e=Bf(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},v4=t=>tN.map(e=>e(t)).find(e=>!!e),y4=t=>tN.push(t),w4=t=>Yl(t).$modeName$,$4=(t,e)=>t!=null&&!my(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,k4=t=>t,Ot=(t,e,n)=>{const o=k4(t);return{emit:s=>C4(o,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:s})}},C4=(t,e,n)=>{const o=gn.ce(e,n);return t.dispatchEvent(o),o},wC=new WeakMap,I4=(t,e,n)=>{let o=Uf.get(t);Q4&&n?(o=o||new CSSStyleSheet,typeof o=="string"?o=e:o.replaceSync(e)):o=e,Uf.set(t,o)},S4=(t,e,n)=>{var o;const s=GT(e,n),r=Uf.get(s);if(t=t.nodeType===11?t:ys,r)if(typeof r=="string"){t=t.head||t;let i=wC.get(t),a;if(i||wC.set(t,i=new Set),!i.has(s)){{a=ys.createElement("style"),a.innerHTML=r;const l=(o=gn.$nonce$)!==null&&o!==void 0?o:m4(ys);l!=null&&a.setAttribute("nonce",l),t.insertBefore(a,t.querySelector("link"))}i&&i.add(s)}}else t.adoptedStyleSheets.includes(r)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return s},E4=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,o=e.$flags$,s=na("attachStyles",e.$tagName$),r=S4(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);o&10&&(n["s-sc"]=r,n.classList.add(r+"-h"),o&2&&n.classList.add(r+"-s")),s()},GT=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),$C=(t,e,n,o,s,r)=>{if(n!==o){let i=EC(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=kC(n),u=kC(o);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in n)(!o||o[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in o)(!n||o[l]!==n[l])&&(l.includes("-")?t.style.setProperty(l,o[l]):t.style[l]=o[l])}else if(e!=="key")if(e==="ref")o&&o(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):EC(xm,a)?e=a.slice(2):e=a[2]+e.slice(3),n&&gn.rel(t,e,n,!1),o&&gn.ael(t,e,o,!1);else{const l=my(o);if((i||l&&o!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=o;else{const u=o==null?"":o;e==="list"?i=!1:(n==null||t[e]!=u)&&(t[e]=u)}}catch(u){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,c=!0),o==null||o===!1?(o!==!1||t.getAttribute(e)==="")&&(c?t.removeAttributeNS(xC,e):t.removeAttribute(e)):(!i||r&4||s)&&!l&&(o=o===!0?"":o,c?t.setAttributeNS(xC,e,o):t.setAttribute(e,o))}}},T4=/\s/,kC=t=>t?t.split(T4):[],jT=(t,e,n,o)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||vC,i=e.$attrs$||vC;for(o in r)o in i||$C(s,o,r[o],void 0,n,e.$flags$);for(o in i)$C(s,o,r[o],i[o],n,e.$flags$)},Vf=(t,e,n,o)=>{const s=e.$children$[n];let r=0,i,a,l;if(HT||(py=!0,s.$tag$==="slot"&&(Wa&&o.classList.add(Wa+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)i=s.$elm$=ys.createTextNode(s.$text$);else if(s.$flags$&1)i=s.$elm$=ys.createTextNode("");else{if(mo||(mo=s.$tag$==="svg"),i=s.$elm$=ys.createElementNS(mo?h4:f4,s.$flags$&2?"slot-fb":s.$tag$),mo&&s.$tag$==="foreignObject"&&(mo=!1),jT(null,s,mo),p4(Wa)&&i["s-si"]!==Wa&&i.classList.add(i["s-si"]=Wa),s.$children$)for(r=0;r<s.$children$.length;++r)a=Vf(t,s,r,i),a&&i.appendChild(a);s.$tag$==="svg"?mo=!1:i.tagName==="foreignObject"&&(mo=!0)}return i["s-hn"]=bm,s.$flags$&3&&(i["s-sr"]=!0,i["s-cr"]=UT,i["s-sn"]=s.$name$||"",l=t&&t.$children$&&t.$children$[n],l&&l.$tag$===s.$tag$&&t.$elm$&&xu(t.$elm$,!1)),i},xu=(t,e)=>{gn.$flags$|=1;const n=t.childNodes;for(let o=n.length-1;o>=0;o--){const s=n[o];s["s-hn"]!==bm&&s["s-ol"]&&(XT(s).insertBefore(s,gy(s)),s["s-ol"].remove(),s["s-ol"]=void 0,py=!0),e&&xu(s,e)}gn.$flags$&=-2},qT=(t,e,n,o,s,r)=>{let i=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(i.shadowRoot&&i.tagName===bm&&(i=i.shadowRoot);s<=r;++s)o[s]&&(a=Vf(null,n,s,t),a&&(o[s].$elm$=a,i.insertBefore(a,gy(e))))},KT=(t,e,n)=>{for(let o=e;o<=n;++o){const s=t[o];if(s){const r=s.$elm$;ZT(s),r&&(zf=!0,r["s-ol"]?r["s-ol"].remove():xu(r,!0),r.remove())}}},N4=(t,e,n,o)=>{let s=0,r=0,i=0,a=0,l=e.length-1,c=e[0],u=e[l],d=o.length-1,h=o[0],f=o[d],p,m;for(;s<=l&&r<=d;)if(c==null)c=e[++s];else if(u==null)u=e[--l];else if(h==null)h=o[++r];else if(f==null)f=o[--d];else if(Rh(c,h))Ua(c,h),c=e[++s],h=o[++r];else if(Rh(u,f))Ua(u,f),u=e[--l],f=o[--d];else if(Rh(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&xu(c.$elm$.parentNode,!1),Ua(c,f),t.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++s],f=o[--d];else if(Rh(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&xu(u.$elm$.parentNode,!1),Ua(u,h),t.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=o[++r];else{for(i=-1,a=s;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===h.$key$){i=a;break}i>=0?(m=e[i],m.$tag$!==h.$tag$?p=Vf(e&&e[r],n,i,t):(Ua(m,h),e[i]=void 0,p=m.$elm$),h=o[++r]):(p=Vf(e&&e[r],n,r,t),h=o[++r]),p&&XT(c.$elm$).insertBefore(p,gy(c.$elm$))}s>l?qT(t,o[d+1]==null?null:o[d+1].$elm$,n,o,r,d):r>d&&KT(e,s,l)},Rh=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,gy=t=>t&&t["s-ol"]||t,XT=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ua=(t,e)=>{const n=e.$elm$=t.$elm$,o=t.$children$,s=e.$children$,r=e.$tag$,i=e.$text$;let a;i===null?(mo=r==="svg"?!0:r==="foreignObject"?!1:mo,r==="slot"||jT(t,e,mo),o!==null&&s!==null?N4(n,o,e,s):s!==null?(t.$text$!==null&&(n.textContent=""),qT(n,null,e,s,0,s.length-1)):o!==null&&KT(o,0,o.length-1),mo&&r==="svg"&&(mo=!1)):(a=n["s-cr"])?a.parentNode.textContent=i:t.$text$!==i&&(n.data=i)},YT=t=>{const e=t.childNodes;let n,o,s,r,i,a;for(o=0,s=e.length;o<s;o++)if(n=e[o],n.nodeType===1){if(n["s-sr"]){for(i=n["s-sn"],n.hidden=!1,r=0;r<s;r++)if(a=e[r].nodeType,e[r]["s-hn"]!==n["s-hn"]||i!==""){if(a===1&&i===e[r].getAttribute("slot")){n.hidden=!0;break}}else if(a===1||a===3&&e[r].textContent.trim()!==""){n.hidden=!0;break}}YT(n)}},ds=[],QT=t=>{let e,n,o,s,r,i,a=0;const l=t.childNodes,c=l.length;for(;a<c;a++){if(e=l[a],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(o=n.parentNode.childNodes,s=e["s-sn"],i=o.length-1;i>=0;i--)n=o[i],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==e["s-hn"]&&(CC(n,s)?(r=ds.find(u=>u.$nodeToRelocate$===n),zf=!0,n["s-sn"]=n["s-sn"]||s,r?r.$slotRefNode$=e:ds.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&ds.map(u=>{CC(u.$nodeToRelocate$,n["s-sn"])&&(r=ds.find(d=>d.$nodeToRelocate$===n),r&&!u.$slotRefNode$&&(u.$slotRefNode$=r.$slotRefNode$))})):ds.some(u=>u.$nodeToRelocate$===n)||ds.push({$nodeToRelocate$:n}));e.nodeType===1&&QT(e)}},CC=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",ZT=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(ZT)},R4=(t,e,n=!1)=>{const o=t.$hostElement$,s=t.$cmpMeta$,r=t.$vnode$||Bf(null,null),i=g4(e)?e:he(null,null,e);if(bm=o.tagName,s.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},s.$attrsToReflect$.map(([a,l])=>i.$attrs$[l]=o[a])),n&&i.$attrs$)for(const a of Object.keys(i.$attrs$))o.hasAttribute(a)&&!["key","ref","style","class"].includes(a)&&(i.$attrs$[a]=o[a]);i.$tag$=null,i.$flags$|=4,t.$vnode$=i,i.$elm$=r.$elm$=o.shadowRoot||o,Wa=o["s-sc"],UT=o["s-cr"],HT=(s.$flags$&1)!==0,zf=!1,Ua(r,i);{if(gn.$flags$|=1,py){QT(i.$elm$);let a,l,c,u,d,h,f=0;for(;f<ds.length;f++)a=ds[f],l=a.$nodeToRelocate$,l["s-ol"]||(c=ys.createTextNode(""),c["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=c,l));for(f=0;f<ds.length;f++)if(a=ds[f],l=a.$nodeToRelocate$,a.$slotRefNode$){for(u=a.$slotRefNode$.parentNode,d=a.$slotRefNode$.nextSibling,c=l["s-ol"];c=c.previousSibling;)if(h=c["s-nr"],h&&h["s-sn"]===l["s-sn"]&&u===h.parentNode&&(h=h.nextSibling,!h||!h["s-nr"])){d=h;break}(!d&&u!==l.parentNode||l.nextSibling!==d)&&l!==d&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),u.insertBefore(l,d))}else l.nodeType===1&&(l.hidden=!0)}zf&&YT(i.$elm$),gn.$flags$&=-2,ds.length=0}},A4=(t,e)=>{},by=(t,e)=>(t.$flags$|=16,A4(t,t.$ancestorComponent$),ri(()=>D4(t,e))),D4=(t,e)=>{const n=t.$hostElement$,o=na("scheduleUpdate",t.$cmpMeta$.$tagName$),s=n;let r;return e?r=gl(s,"componentWillLoad"):r=gl(s,"componentWillUpdate"),r=IC(r,()=>gl(s,"componentWillRender")),o(),IC(r,()=>O4(t,s,e))},IC=(t,e)=>_4(t)?t.then(e):e(),_4=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",O4=async(t,e,n)=>{const o=t.$hostElement$,s=na("update",t.$cmpMeta$.$tagName$);o["s-rc"],n&&E4(t);const r=na("render",t.$cmpMeta$.$tagName$);F4(t,e,o,n),r(),s(),P4(t)},F4=(t,e,n,o)=>{try{bC=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Va.hasRenderFn||Va.reflect)&&(Va.vdomRender||Va.reflect)&&(Va.hydrateServerSide||R4(t,e,o))}catch(l){Wu(l,t.$hostElement$)}return bC=null,null},P4=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,o=na("postUpdate",e),s=n;t.$ancestorComponent$,gl(s,"componentDidRender"),t.$flags$&64?(gl(s,"componentDidUpdate"),o()):(t.$flags$|=64,gl(s,"componentDidLoad"),o())},Wf=t=>{{const e=Yl(t),n=e.$hostElement$.isConnected;return n&&(e.$flags$&18)===2&&by(e,!1),n}},gl=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(o){Wu(o)}},L4=(t,e)=>Yl(t).$instanceValues$.get(e),M4=(t,e,n,o)=>{const s=Yl(t),r=t,i=s.$instanceValues$.get(e),a=s.$flags$,l=r;n=$4(n,o.$members$[e][0]);const c=Number.isNaN(i)&&Number.isNaN(n);if(n!==i&&!c){s.$instanceValues$.set(e,n);{if(o.$watchers$&&a&128){const d=o.$watchers$[e];d&&d.map(h=>{try{l[h](n,i,e)}catch(f){Wu(f,r)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,i,e)===!1)return;by(s,!1)}}}},z4=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const o=Object.entries(e.$members$),s=t.prototype;o.map(([r,[i]])=>{(i&31||i&32)&&Object.defineProperty(s,r,{get(){return L4(this,r)},set(a){M4(this,r,a,e)},configurable:!0,enumerable:!0})});{const r=new Map;s.attributeChangedCallback=function(i,a,l){gn.jmp(()=>{const c=r.get(i);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(s.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},t.observedAttributes=o.filter(([i,a])=>a[0]&15).map(([i,a])=>{const l=a[1]||i;return r.set(l,i),a[0]&512&&e.$attrsToReflect$.push([i,l]),l})}}return t},B4=async(t,e,n,o,s)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,s=t.constructor,customElements.whenDefined(n.$tagName$).then(()=>e.$flags$|=128),s.style)){let i=s.style;typeof i!="string"&&(i=i[e.$modeName$=v4(t)]);const a=GT(n,e.$modeName$);if(!Uf.has(a)){const l=na("registerStyles",n.$tagName$);I4(a,i,!!(n.$flags$&1)),l()}}e.$ancestorComponent$,(()=>by(e,!0))()},SC=t=>{},V4=t=>{if(!(gn.$flags$&1)){const e=Yl(t),n=e.$cmpMeta$,o=na("connectedCallback",n.$tagName$);e.$flags$&1?(JT(t,e,n.$listeners$),e!=null&&e.$lazyInstance$?SC(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>SC(e.$lazyInstance$))):(e.$flags$|=1,n.$flags$&12&&W4(t),n.$members$&&Object.entries(n.$members$).map(([s,[r]])=>{if(r&31&&t.hasOwnProperty(s)){const i=t[s];delete t[s],t[s]=i}}),B4(t,e,n)),o()}},W4=t=>{const e=t["s-cr"]=ys.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},U4=async t=>{if(!(gn.$flags$&1)){const e=Yl(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},It=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const o=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){q4(this,n)},connectedCallback(){V4(this),o&&o.call(this)},disconnectedCallback(){U4(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),t.is=n.$tagName$,z4(t,n)},JT=(t,e,n,o)=>{n&&n.map(([s,r,i])=>{const a=G4(t,s),l=H4(e,i),c=j4(s);gn.ael(a,r,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>gn.rel(a,r,l,c))})},H4=(t,e)=>n=>{try{Va.lazyLoad||t.$hostElement$[e](n)}catch(o){Wu(o)}},G4=(t,e)=>e&4?ys:e&8?xm:e&16?ys.body:t,j4=t=>X4?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,eN=new WeakMap,Yl=t=>eN.get(t),q4=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return JT(t,n,e.$listeners$),eN.set(t,n)},EC=(t,e)=>e in t,Wu=(t,e)=>(0,console.error)(t,e),Uf=new Map,tN=[],xm=typeof window<"u"?window:{},ys=xm.document||{head:{}},St=xm.HTMLElement||class{},gn={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,o)=>t.addEventListener(e,n,o),rel:(t,e,n,o)=>t.removeEventListener(e,n,o),ce:(t,e)=>new CustomEvent(t,e)},K4=t=>{Object.assign(gn,t)},X4=(()=>{let t=!1;try{ys.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),Y4=t=>Promise.resolve(t),Q4=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1})(),ox=[],nN=[],oN=(t,e)=>n=>{t.push(n),nx||(nx=!0,e&&gn.$flags$&4?Z4(sx):gn.raf(sx))},TC=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Wu(n)}t.length=0},sx=()=>{TC(ox),TC(nN),(nx=ox.length>0)&&gn.raf(sx)},Z4=t=>Y4().then(t),vu=oN(ox,!1),ri=oN(nN,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const kn=typeof window<"u"?window:void 0,Ob=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yu=(t,e)=>{t.componentOnReady?t.componentOnReady().then(n=>e(n)):lr(()=>e(t))},J4=t=>t.componentOnReady!==void 0,vm=(t,e=[])=>{const n={};return e.forEach(o=>{t.hasAttribute(o)&&(t.getAttribute(o)!==null&&(n[o]=t.getAttribute(o)),t.removeAttribute(o))}),n},eB=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],xy=(t,e)=>{let n=eB;return e&&e.length>0&&(n=n.filter(o=>!e.includes(o))),vm(t,n)},_ge=(t,e,n,o)=>{var s;if(typeof window<"u"){const r=window,i=(s=r==null?void 0:r.Ionic)===null||s===void 0?void 0:s.config;if(i){const a=i.get("_ael");if(a)return a(t,e,n,o);if(i._ael)return i._ael(t,e,n,o)}}return t.addEventListener(e,n,o)},Oge=(t,e,n,o)=>{var s;if(typeof window<"u"){const r=window,i=(s=r==null?void 0:r.Ionic)===null||s===void 0?void 0:s.config;if(i){const a=i.get("_rel");if(a)return a(t,e,n,o);if(i._rel)return i._rel(t,e,n,o)}}return t.removeEventListener(e,n,o)},lr=t=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(t):typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t),tB=t=>!!t.shadowRoot&&!!t.attachShadow,sN=(t,e,n)=>Math.max(t,Math.min(e,n)),Qn=(t,e)=>{if(!t){const n="ASSERT: "+e;console.error(n);debugger;throw new Error(n)}},Fge=t=>t.timeStamp||Date.now(),Pge=t=>{if(t){const e=t.changedTouches;if(e&&e.length>0){const n=e[0];return{x:n.clientX,y:n.clientY}}if(t.pageX!==void 0)return{x:t.pageX,y:t.pageY}}return{x:0,y:0}},rN=(t,e)=>{if(t!=null||(t={}),e!=null||(e={}),t===e)return!0;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const o of n)if(!(o in e)||t[o]!==e[o])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Fb;const nB=t=>(t.forEach(e=>{for(const n in e)if(e.hasOwnProperty(n)){const o=e[n];if(n==="easing"){const s="animation-timing-function";e[s]=o,delete e[n]}else{const s=oB(n);s!==n&&(e[s]=o,delete e[n])}}}),t),oB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vy=t=>{if(Fb===void 0){const e=t.style.animationName!==void 0,n=t.style.webkitAnimationName!==void 0;Fb=!e&&n?"-webkit-":""}return Fb},ft=(t,e,n)=>{const o=e.startsWith("animation")?vy(t):"";t.style.setProperty(o+e,n)},rs=(t,e)=>{const n=e.startsWith("animation")?vy(t):"";t.style.removeProperty(n+e)},sB=(t,e)=>{let n;const o={passive:!0},s=()=>{n&&n()},r=i=>{t===i.target&&(s(),e(i))};return t&&(t.addEventListener("webkitAnimationEnd",r,o),t.addEventListener("animationend",r,o),n=()=>{t.removeEventListener("webkitAnimationEnd",r,o),t.removeEventListener("animationend",r,o)}),s},rB=(t=[])=>t.map(e=>{const n=e.offset,o=[];for(const s in e)e.hasOwnProperty(s)&&s!=="offset"&&o.push("".concat(s,": ").concat(e[s],";"));return"".concat(n*100,"% { ").concat(o.join(" ")," }")}).join(" "),NC=[],iB=t=>{let e=NC.indexOf(t);return e<0&&(e=NC.push(t)-1),"ion-animation-".concat(e)},aB=t=>{const e=t.getRootNode!==void 0?t.getRootNode():t;return e.head||e},lB=(t,e,n)=>{var o;const s=aB(n),r=vy(n),i=s.querySelector("#"+t);if(i)return i;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createElement("style");return a.id=t,a.textContent="@".concat(r,"keyframes ").concat(t," { ").concat(e," } @").concat(r,"keyframes ").concat(t,"-alt { ").concat(e," }"),s.appendChild(a),a},Ah=(t=[],e)=>{if(e!==void 0){const n=Array.isArray(e)?e:[e];return[...t,...n]}return t},cB=t=>{let e,n,o,s,r,i,a=[],l=[],c=[],u=!1,d,h={},f=[],p=[],m={},b=0,g=!1,x=!1,v,y,w,$,k=!0,C=!1,E=!0,S,T,P=!1;const U=t,W=[],z=[],B=[],q=[],R=[],A=[],D=[],V=[],H=[],K=[],ee=typeof AnimationEffect=="function"||kn!==void 0&&typeof kn.AnimationEffect=="function",J=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&ee,ne=100,re=()=>K,ge=X=>(q.forEach(ie=>{ie.destroy(X)}),xe(X),B.length=0,q.length=0,a.length=0,Ge(),u=!1,E=!0,T),xe=X=>{tt(),X&&Ue()},Ce=()=>{g=!1,x=!1,E=!0,y=void 0,w=void 0,$=void 0,b=0,C=!1,k=!0,P=!1},Se=()=>b!==0&&!P,_e=(X,ie)=>((ie!=null&&ie.oneTimeCallback?z:W).push({c:X,o:ie}),T),Ge=()=>(W.length=0,z.length=0,T),tt=()=>{if(J)K.forEach(X=>{X.cancel()}),K.length=0;else{const X=B.slice();lr(()=>{X.forEach(ie=>{rs(ie,"animation-name"),rs(ie,"animation-duration"),rs(ie,"animation-timing-function"),rs(ie,"animation-iteration-count"),rs(ie,"animation-delay"),rs(ie,"animation-play-state"),rs(ie,"animation-fill-mode"),rs(ie,"animation-direction")})})}},Ue=()=>{R.forEach(X=>{X!=null&&X.parentNode&&X.parentNode.removeChild(X)}),R.length=0},We=X=>(A.push(X),T),nt=X=>(D.push(X),T),Qe=X=>(V.push(X),T),ts=X=>(H.push(X),T),Lt=X=>(l=Ah(l,X),T),As=X=>(c=Ah(c,X),T),Fn=(X={})=>(h=X,T),rr=(X=[])=>{for(const ie of X)h[ie]="";return T},fo=X=>(f=Ah(f,X),T),ns=X=>(p=Ah(p,X),T),Ds=(X={})=>(m=X,T),_s=(X=[])=>{for(const ie of X)m[ie]="";return T},Xn=()=>r!==void 0?r:d?d.getFill():"both",Ao=()=>y!==void 0?y:i!==void 0?i:d?d.getDirection():"normal",ir=()=>g?"linear":o!==void 0?o:d?d.getEasing():"linear",Pn=()=>x?0:w!==void 0?w:n!==void 0?n:d?d.getDuration():0,Os=()=>s!==void 0?s:d?d.getIterations():1,os=()=>$!==void 0?$:e!==void 0?e:d?d.getDelay():0,Jg=()=>a,eb=X=>(i=X,Do(!0),T),tL=X=>(r=X,Do(!0),T),nL=X=>(e=X,Do(!0),T),oL=X=>(o=X,Do(!0),T),sL=X=>(!J&&X===0&&(X=1),n=X,Do(!0),T),rL=X=>(s=X,Do(!0),T),iL=X=>(d=X,T),aL=X=>{if(X!=null)if(X.nodeType===1)B.push(X);else if(X.length>=0)for(let ie=0;ie<X.length;ie++)B.push(X[ie]);else console.error("Invalid addElement value");return T},lL=X=>{if(X!=null)if(Array.isArray(X))for(const ie of X)ie.parent(T),q.push(ie);else X.parent(T),q.push(X);return T},cL=X=>{const ie=a!==X;return a=X,ie&&uL(a),T},uL=X=>{J?re().forEach(ie=>{if(ie.effect.setKeyframes)ie.effect.setKeyframes(X);else{const be=new KeyframeEffect(ie.effect.target,X,ie.effect.getTiming());ie.effect=be}}):P$()},dL=()=>{A.forEach(Gt=>Gt()),D.forEach(Gt=>Gt());const X=l,ie=c,be=h;B.forEach(Gt=>{const hn=Gt.classList;X.forEach(_o=>hn.add(_o)),ie.forEach(_o=>hn.remove(_o));for(const _o in be)be.hasOwnProperty(_o)&&ft(Gt,_o,be[_o])})},hL=()=>{tb(),V.forEach(hn=>hn()),H.forEach(hn=>hn());const X=k?1:0,ie=f,be=p,Gt=m;B.forEach(hn=>{const _o=hn.classList;ie.forEach(Ei=>_o.add(Ei)),be.forEach(Ei=>_o.remove(Ei));for(const Ei in Gt)Gt.hasOwnProperty(Ei)&&ft(hn,Ei,Gt[Ei])}),W.forEach(hn=>hn.c(X,T)),z.forEach(hn=>hn.c(X,T)),z.length=0,E=!0,k&&(C=!0),k=!0},Pa=()=>{b!==0&&(b--,b===0&&(hL(),d&&d.animationFinish()))},P$=(X=!0)=>{Ue();const ie=nB(a);B.forEach(be=>{if(ie.length>0){const Gt=rB(ie);S=t!==void 0?t:iB(Gt);const hn=lB(S,Gt,be);R.push(hn),ft(be,"animation-duration","".concat(Pn(),"ms")),ft(be,"animation-timing-function",ir()),ft(be,"animation-delay","".concat(os(),"ms")),ft(be,"animation-fill-mode",Xn()),ft(be,"animation-direction",Ao());const _o=Os()===1/0?"infinite":Os().toString();ft(be,"animation-iteration-count",_o),ft(be,"animation-play-state","paused"),X&&ft(be,"animation-name","".concat(hn.id,"-alt")),lr(()=>{ft(be,"animation-name",hn.id||null)})}})},fL=()=>{B.forEach(X=>{const ie=X.animate(a,{id:U,delay:os(),duration:Pn(),easing:ir(),iterations:Os(),fill:Xn(),direction:Ao()});ie.pause(),K.push(ie)}),K.length>0&&(K[0].onfinish=()=>{Pa()})},L$=(X=!0)=>{dL(),a.length>0&&(J?fL():P$(X)),u=!0},pc=X=>{if(X=Math.min(Math.max(X,0),.9999),J)K.forEach(ie=>{ie.currentTime=ie.effect.getComputedTiming().delay+Pn()*X,ie.pause()});else{const ie="-".concat(Pn()*X,"ms");B.forEach(be=>{a.length>0&&(ft(be,"animation-delay",ie),ft(be,"animation-play-state","paused"))})}},M$=X=>{K.forEach(ie=>{ie.effect.updateTiming({delay:os(),duration:Pn(),easing:ir(),iterations:Os(),fill:Xn(),direction:Ao()})}),X!==void 0&&pc(X)},z$=(X=!0,ie)=>{lr(()=>{B.forEach(be=>{ft(be,"animation-name",S||null),ft(be,"animation-duration","".concat(Pn(),"ms")),ft(be,"animation-timing-function",ir()),ft(be,"animation-delay",ie!==void 0?"-".concat(ie*Pn(),"ms"):"".concat(os(),"ms")),ft(be,"animation-fill-mode",Xn()||null),ft(be,"animation-direction",Ao()||null);const Gt=Os()===1/0?"infinite":Os().toString();ft(be,"animation-iteration-count",Gt),X&&ft(be,"animation-name","".concat(S,"-alt")),lr(()=>{ft(be,"animation-name",S||null)})})})},Do=(X=!1,ie=!0,be)=>(X&&q.forEach(Gt=>{Gt.update(X,ie,be)}),J?M$(be):z$(ie,be),T),pL=(X=!1,ie)=>(q.forEach(be=>{be.progressStart(X,ie)}),B$(),g=X,u||L$(),Do(!1,!0,ie),T),mL=X=>(q.forEach(ie=>{ie.progressStep(X)}),pc(X),T),gL=(X,ie,be)=>(g=!1,q.forEach(Gt=>{Gt.progressEnd(X,ie,be)}),be!==void 0&&(w=be),C=!1,k=!0,X===0?(y=Ao()==="reverse"?"normal":"reverse",y==="reverse"&&(k=!1),J?(Do(),pc(1-ie)):($=(1-ie)*Pn()*-1,Do(!1,!1))):X===1&&(J?(Do(),pc(ie)):($=ie*Pn()*-1,Do(!1,!1))),X!==void 0&&(_e(()=>{w=void 0,y=void 0,$=void 0},{oneTimeCallback:!0}),d||V$()),T),B$=()=>{u&&(J?K.forEach(X=>{X.pause()}):B.forEach(X=>{ft(X,"animation-play-state","paused")}),P=!0)},bL=()=>(q.forEach(X=>{X.pause()}),B$(),T),xL=()=>{v=void 0,Pa()},tb=()=>{v&&clearTimeout(v)},vL=()=>{if(tb(),lr(()=>{B.forEach(X=>{a.length>0&&ft(X,"animation-play-state","running")})}),a.length===0||B.length===0)Pa();else{const X=os()||0,ie=Pn()||0,be=Os()||1;isFinite(be)&&(v=setTimeout(xL,X+ie*be+ne)),sB(B[0],()=>{tb(),lr(()=>{yL(),lr(Pa)})})}},yL=()=>{B.forEach(X=>{rs(X,"animation-duration"),rs(X,"animation-delay"),rs(X,"animation-play-state")})},wL=()=>{K.forEach(X=>{X.play()}),(a.length===0||B.length===0)&&Pa()},$L=()=>{J?(pc(0),M$()):z$()},V$=X=>new Promise(ie=>{X!=null&&X.sync&&(x=!0,_e(()=>x=!1,{oneTimeCallback:!0})),u||L$(),C&&($L(),C=!1),E&&(b=q.length+1,E=!1),_e(()=>ie(),{oneTimeCallback:!0}),q.forEach(be=>{be.play()}),J?wL():vL(),P=!1}),kL=()=>{q.forEach(X=>{X.stop()}),u&&(tt(),u=!1),Ce()},W$=(X,ie)=>{const be=a[0];return be!==void 0&&(be.offset===void 0||be.offset===0)?be[X]=ie:a=[{offset:0,[X]:ie},...a],T};return T={parentAnimation:d,elements:B,childAnimations:q,id:U,animationFinish:Pa,from:W$,to:(X,ie)=>{const be=a[a.length-1];return be!==void 0&&(be.offset===void 0||be.offset===1)?be[X]=ie:a=[...a,{offset:1,[X]:ie}],T},fromTo:(X,ie,be)=>W$(X,ie).to(X,be),parent:iL,play:V$,pause:bL,stop:kL,destroy:ge,keyframes:cL,addAnimation:lL,addElement:aL,update:Do,fill:tL,direction:eb,iterations:rL,duration:sL,easing:oL,delay:nL,getWebAnimations:re,getKeyframes:Jg,getFill:Xn,getDirection:Ao,getDelay:os,getIterations:Os,getEasing:ir,getDuration:Pn,afterAddRead:Qe,afterAddWrite:ts,afterClearStyles:_s,afterStyles:Ds,afterRemoveClass:ns,afterAddClass:fo,beforeAddRead:We,beforeAddWrite:nt,beforeClearStyles:rr,beforeStyles:Fn,beforeRemoveClass:As,beforeAddClass:Lt,onFinish:_e,isRunning:Se,progressStart:pL,progressStep:mL,progressEnd:gL}},uB="ionViewWillEnter",dB="ionViewDidEnter",iN="ionViewWillLeave",aN="ionViewDidLeave",Pb="ionViewWillUnload",hB=()=>Kt(()=>import("./ios.transition-6ba85eb3.js"),[]),fB=()=>Kt(()=>import("./md.transition-dc6636d1.js"),[]),lN=t=>new Promise((e,n)=>{ri(()=>{pB(t),mB(t).then(o=>{o.animation&&o.animation.destroy(),RC(t),e(o)},o=>{RC(t),n(o)})})}),pB=t=>{const e=t.enteringEl,n=t.leavingEl;wB(e,n,t.direction),t.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),ix(e,!1),e.style.setProperty("pointer-events","none"),n&&(ix(n,!1),n.style.setProperty("pointer-events","none"))},mB=async t=>{const e=await gB(t);return e&&d4.isBrowser?bB(e,t):xB(t)},RC=t=>{const e=t.enteringEl,n=t.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},gB=async t=>!t.leavingEl||!t.animated||t.duration===0?void 0:t.animationBuilder?t.animationBuilder:t.mode==="ios"?(await hB()).iosTransitionAnimation:(await fB()).mdTransitionAnimation,bB=async(t,e)=>{await cN(e,!0);const n=t(e.baseEl,e);uN(e.enteringEl,e.leavingEl);const o=await yB(n,e);return e.progressCallback&&e.progressCallback(void 0),o&&dN(e.enteringEl,e.leavingEl),{hasCompleted:o,animation:n}},xB=async t=>{const e=t.enteringEl,n=t.leavingEl;return await cN(t,!1),uN(e,n),dN(e,n),{hasCompleted:!0}},cN=async(t,e)=>{(t.deepWait!==void 0?t.deepWait:e)&&await Promise.all([rx(t.enteringEl),rx(t.leavingEl)]),await vB(t.viewIsReady,t.enteringEl)},vB=async(t,e)=>{t&&await t(e)},yB=(t,e)=>{const n=e.progressCallback,o=new Promise(s=>{t.onFinish(r=>s(r===1))});return n?(t.progressStart(!0),n(t)):t.play(),o},uN=(t,e)=>{dr(e,iN),dr(t,uB)},dN=(t,e)=>{dr(t,dB),dr(e,aN)},dr=(t,e)=>{if(t){const n=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(n)}},rx=async t=>{const e=t;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(o=>lr(o));return}await Promise.all(Array.from(e.children).map(rx))}},ix=(t,e)=>{e?(t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden")):(t.hidden=!1,t.removeAttribute("aria-hidden"),t.classList.remove("ion-page-hidden"))},wB=(t,e,n)=>{t!==void 0&&(t.style.zIndex=n==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},Lge=t=>{if(t.classList.contains("ion-page"))return t;const e=t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||t};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Hf=(t,e,n,o,s)=>kB(t[1],e[1],n[1],o[1],s).map(r=>$B(t[0],e[0],n[0],o[0],r)),$B=(t,e,n,o,s)=>{const r=3*e*Math.pow(s-1,2),i=-3*n*s+3*n+o*s,a=t*Math.pow(s-1,3);return s*(r+s*i)-a},kB=(t,e,n,o,s)=>(t-=s,e-=s,n-=s,o-=s,IB(o-3*n+3*e-t,3*n-6*e+3*t,3*e-3*t,t).filter(i=>i>=0&&i<=1)),CB=(t,e,n)=>{const o=e*e-4*t*n;return o<0?[]:[(-e+Math.sqrt(o))/(2*t),(-e-Math.sqrt(o))/(2*t)]},IB=(t,e,n,o)=>{if(t===0)return CB(e,n,o);e/=t,n/=t,o/=t;const s=(3*n-e*e)/3,r=(2*e*e*e-9*e*n+27*o)/27;if(s===0)return[Math.pow(-r,1/3)];if(r===0)return[Math.sqrt(-s),-Math.sqrt(-s)];const i=Math.pow(r/2,2)+Math.pow(s/3,3);if(i===0)return[Math.pow(r/2,1/2)-e/3];if(i>0)return[Math.pow(-(r/2)+Math.sqrt(i),1/3)-Math.pow(r/2+Math.sqrt(i),1/3)-e/3];const a=Math.sqrt(Math.pow(-(s/3),3)),l=Math.acos(-(r/(2*Math.sqrt(Math.pow(-(s/3),3))))),c=2*Math.pow(a,1/3);return[c*Math.cos(l/3)-e/3,c*Math.cos((l+2*Math.PI)/3)-e/3,c*Math.cos((l+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class SB{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const o=this.m.get(e);return o!==void 0?o:n}getBoolean(e,n=!1){const o=this.m.get(e);return o===void 0?n:typeof o=="string"?o==="true":!!o}getNumber(e,n){const o=parseFloat(this.m.get(e));return isNaN(o)?n!==void 0?n:NaN:o}set(e,n){this.m.set(e,n)}}const Rt=new SB,EB=t=>{try{const e=t.sessionStorage.getItem(hN);return e!==null?JSON.parse(e):{}}catch(e){return{}}},TB=(t,e)=>{try{t.sessionStorage.setItem(hN,JSON.stringify(e))}catch(n){return}},NB=t=>{const e={};return t.location.search.slice(1).split("&").map(n=>n.split("=")).map(([n,o])=>[decodeURIComponent(n),decodeURIComponent(o)]).filter(([n])=>RB(n,AC)).map(([n,o])=>[n.slice(AC.length),o]).forEach(([n,o])=>{e[n]=o}),e},RB=(t,e)=>t.substr(0,e.length)===e,AC="ionic:",hN="ionic-persist-config",AB=t=>fN(t),mr=(t,e)=>(typeof t=="string"&&(e=t,t=void 0),AB(t).includes(e)),fN=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return e==null&&(e=t.Ionic.platforms=DB(t),e.forEach(n=>t.document.documentElement.classList.add("plt-".concat(n)))),e},DB=t=>{const e=Rt.get("platform");return Object.keys(DC).filter(n=>{const o=e==null?void 0:e[n];return typeof o=="function"?o(t):DC[n](t)})},_B=t=>ym(t)&&!mN(t),yy=t=>!!(oa(t,/iPad/i)||oa(t,/Macintosh/i)&&ym(t)),OB=t=>oa(t,/iPhone/i),FB=t=>oa(t,/iPhone|iPod/i)||yy(t),pN=t=>oa(t,/android|sink/i),PB=t=>pN(t)&&!oa(t,/mobile/i),LB=t=>{const e=t.innerWidth,n=t.innerHeight,o=Math.min(e,n),s=Math.max(e,n);return o>390&&o<520&&s>620&&s<800},MB=t=>{const e=t.innerWidth,n=t.innerHeight,o=Math.min(e,n),s=Math.max(e,n);return yy(t)||PB(t)||o>460&&o<820&&s>780&&s<1400},ym=t=>WB(t,"(any-pointer:coarse)"),zB=t=>!ym(t),mN=t=>gN(t)||bN(t),gN=t=>!!(t.cordova||t.phonegap||t.PhoneGap),bN=t=>{const e=t.Capacitor;return!!(e!=null&&e.isNative)},BB=t=>oa(t,/electron/i),VB=t=>{var e;return!!(!((e=t.matchMedia)===null||e===void 0)&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},oa=(t,e)=>e.test(t.navigator.userAgent),WB=(t,e)=>{var n;return(n=t.matchMedia)===null||n===void 0?void 0:n.call(t,e).matches},DC={ipad:yy,iphone:OB,ios:FB,android:pN,phablet:LB,tablet:MB,cordova:gN,capacitor:bN,electron:BB,pwa:VB,mobile:ym,mobileweb:_B,desktop:zB,hybrid:mN};let Ha;const ht=t=>t&&w4(t)||Ha,UB=(t={})=>{if(typeof window>"u")return;const e=window.document,n=window,o=n.Ionic=n.Ionic||{},s={};t._ael&&(s.ael=t._ael),t._rel&&(s.rel=t._rel),t._ce&&(s.ce=t._ce),K4(s);const r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},EB(n)),{persistConfig:!1}),o.config),NB(n)),t);Rt.reset(r),Rt.getBoolean("persistConfig")&&TB(n,r),fN(n),o.config=Rt,o.mode=Ha=Rt.get("mode",e.documentElement.getAttribute("mode")||(mr(n,"ios")?"ios":"md")),Rt.set("mode",Ha),e.documentElement.setAttribute("mode",Ha),e.documentElement.classList.add(Ha),Rt.getBoolean("_testing")&&Rt.set("animated",!1);const i=l=>{var c;return(c=l.tagName)===null||c===void 0?void 0:c.startsWith("ION-")},a=l=>["ios","md"].includes(l);y4(l=>{for(;l;){const c=l.mode||l.getAttribute("mode");if(c){if(a(c))return c;i(l)&&console.warn('Invalid ionic mode: "'+c+'", expected: "ios" or "md"')}l=l.parentElement}return Ha})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xN=async(t,e,n,o,s,r)=>{var i;if(t)return t.attachViewToDom(e,n,s,o);if(!r&&typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const a=typeof n=="string"?(i=e.ownerDocument)===null||i===void 0?void 0:i.createElement(n):n;return o&&o.forEach(l=>a.classList.add(l)),s&&Object.assign(a,s),e.appendChild(a),await new Promise(l=>yu(a,l)),a},HB=(t,e)=>{if(e){if(t){const n=e.parentElement;return t.removeViewFromDom(n,e)}e.remove()}return Promise.resolve()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Lb=(t,...e)=>console.warn("[Ionic Warning]: ".concat(t),...e),GB=(t,...e)=>console.error("<".concat(t.tagName.toLowerCase(),"> must be used inside ").concat(e.join(" or "),"."));function Rn(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Qr=(t,e)=>e.closest(t)!==null,nr=(t,e)=>typeof t=="string"&&t.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(t)]:!0},e):e,qB=/^[a-z][a-z0-9+\-.]*:/,wy=async(t,e,n,o)=>{if(t!=null&&t[0]!=="#"&&!qB.test(t)){const s=document.querySelector("ion-router");if(s)return e!=null&&e.preventDefault(),s.push(t,n,o)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const KB="ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:16px;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px}ion-card-header+.card-content-ios{padding-top:0}",XB="ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:14px;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}",YB=It(class extends St{constructor(){super(),this.__registerHost()}render(){const e=ht(this);return he(Pt,{class:{[e]:!0,["card-content-".concat(e)]:!0}})}static get style(){return{ios:KB,md:XB}}},[32,"ion-card-content"]);function QB(){if(typeof customElements>"u")return;["ion-card-content"].forEach(e=>{switch(e){case"ion-card-content":customElements.get(e)||customElements.define(e,YB);break}})}const ZB=QB;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const JB=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:16px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",eV=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}",tV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.translucent=!1}render(){const e=ht(this);return he(Pt,{class:nr(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[e]:!0})},he("slot",null))}static get style(){return{ios:JB,md:eV}}},[33,"ion-card-header",{color:[513],translucent:[4]}]);function nV(){if(typeof customElements>"u")return;["ion-card-header"].forEach(e=>{switch(e){case"ion-card-header":customElements.get(e)||customElements.define(e,tV);break}})}const oV=nV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const sV=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:28px;font-weight:700;line-height:1.2}",rV=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, #262626);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;line-height:1.2}",iV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=ht(this);return he(Pt,{role:"heading","aria-level":"2",class:nr(this.color,{"ion-inherit-color":!0,[e]:!0})},he("slot",null))}static get style(){return{ios:sV,md:rV}}},[33,"ion-card-title",{color:[513]}]);function aV(){if(typeof customElements>"u")return;["ion-card-title"].forEach(e=>{switch(e){case"ion-card-title":customElements.get(e)||customElements.define(e,iV);break}})}const lV=aV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cV=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",uV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,n){return new Promise(o=>{vu(()=>{const s=this.el.getBoundingClientRect(),r=s.width,i=s.height,a=Math.sqrt(r*r+i*i),l=Math.max(i,r),c=this.unbounded?l:a+hV,u=Math.floor(l*fV),d=c/u;let h=e-s.left,f=n-s.top;this.unbounded&&(h=r*.5,f=i*.5);const p=h-u*.5,m=f-u*.5,b=r*.5-h,g=i*.5-f;ri(()=>{const x=document.createElement("div");x.classList.add("ripple-effect");const v=x.style;v.top=m+"px",v.left=p+"px",v.width=v.height=u+"px",v.setProperty("--final-scale","".concat(d)),v.setProperty("--translate-end","".concat(b,"px, ").concat(g,"px")),(this.el.shadowRoot||this.el).appendChild(x),setTimeout(()=>{o(()=>{dV(x)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=ht(this);return he(Pt,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return cV}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),dV=t=>{t.classList.add("fade-out"),setTimeout(()=>{t.remove()},200)},hV=10,fV=.5;function pV(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,uV);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mV={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},gV=t=>{if(t===void 0||t==="")return!0;if(window.matchMedia){const e=mV[t];return window.matchMedia(e).matches}return!1},bV=":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}",Dh=typeof window<"u"?window:void 0,_C=Dh&&!!(Dh.CSS&&Dh.CSS.supports&&Dh.CSS.supports("--a: 0")),xV=["","xs","sm","md","lg","xl"],vV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){Wf(this)}getColumns(e){let n;for(const o of xV){const s=gV(o),r=this[e+o.charAt(0).toUpperCase()+o.slice(1)];s&&r!==void 0&&(n=r)}return n}calculateSize(){const e=this.getColumns("size");if(!e||e==="")return;const n=e==="auto"?"auto":_C?"calc(calc(".concat(e," / var(--ion-grid-columns, 12)) * 100%)"):e/12*100+"%";return{flex:"0 0 ".concat(n),width:"".concat(n),"max-width":"".concat(n)}}calculatePosition(e,n){const o=this.getColumns(e);if(!o)return;const s=_C?"calc(calc(".concat(o," / var(--ion-grid-columns, 12)) * 100%)"):o>0&&o<12?o/12*100+"%":"auto";return{[n]:s}}calculateOffset(e){return this.calculatePosition("offset",e?"margin-right":"margin-left")}calculatePull(e){return this.calculatePosition("pull",e?"left":"right")}calculatePush(e){return this.calculatePosition("push",e?"right":"left")}render(){const e=document.dir==="rtl",n=ht(this);return he(Pt,{class:{[n]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(e)),this.calculatePull(e)),this.calculatePush(e)),this.calculateSize())},he("slot",null))}static get style(){return bV}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function yV(){if(typeof customElements>"u")return;["ion-col"].forEach(e=>{switch(e){case"ion-col":customElements.get(e)||customElements.define(e,vV);break}})}const wV=yV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $V=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const kV=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',CV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Ot(this,"ionScrollStart",7),this.ionScroll=Ot(this,"ionScroll",7),this.ionScrollEnd=Ot(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,n=ht(this);return e===void 0?n==="ios"&&mr("ios"):e}resize(){this.fullscreen?vu(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Wf(this))}readDimensions(){const e=SV(this.el),n=Math.max(this.el.offsetTop,0),o=Math.max(e.offsetHeight-n-this.el.offsetHeight,0);(n!==this.cTop||o!==this.cBottom)&&(this.cTop=n,this.cBottom=o,Wf(this))}onScroll(e){const n=Date.now(),o=!this.isScrolling;this.lastScroll=n,o&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,vu(s=>{this.queued=!1,this.detail.event=e,EV(this.detail,this.scrollEl,s,o),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>yu(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>yu(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const n=await this.getScrollElement(),o=n.scrollHeight-n.clientHeight;return this.scrollToPoint(void 0,o,e)}async scrollByPoint(e,n,o){const s=await this.getScrollElement();return this.scrollToPoint(e+s.scrollLeft,n+s.scrollTop,o)}async scrollToPoint(e,n,o=0){const s=await this.getScrollElement();if(o<32){n!=null&&(s.scrollTop=n),e!=null&&(s.scrollLeft=e);return}let r,i=0;const a=new Promise(f=>r=f),l=s.scrollTop,c=s.scrollLeft,u=n!=null?n-l:0,d=e!=null?e-c:0,h=f=>{const p=Math.min(1,(f-i)/o)-1,m=Math.pow(p,3)+1;u!==0&&(s.scrollTop=Math.floor(m*u+l)),d!==0&&(s.scrollLeft=Math.floor(m*d+c)),m<1?requestAnimationFrame(h):r()};return requestAnimationFrame(f=>{i=f,h(f)}),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:n,scrollY:o,el:s}=this,r=$V(s)?"rtl":"ltr",i=ht(this),a=this.shouldForceOverscroll(),l=i==="ios",c=e?"main":"div";return this.resize(),he(Pt,{class:nr(this.color,{[i]:!0,"content-sizing":Qr("ion-popover",this.el),overscroll:a,["content-".concat(r)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},he("div",{ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),he(c,{class:{"inner-scroll":!0,"scroll-x":n,"scroll-y":o,overscroll:(n||o)&&a},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},he("slot",null)),l?he("div",{class:"transition-effect"},he("div",{class:"transition-cover"}),he("div",{class:"transition-shadow"})):null,he("slot",{name:"fixed"}))}get el(){return this}static get style(){return kV}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),IV=t=>{var e;return t.parentElement?t.parentElement:!((e=t.parentNode)===null||e===void 0)&&e.host?t.parentNode.host:null},SV=t=>{const e=t.closest("ion-tabs");if(e)return e;const n=t.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||IV(t)},EV=(t,e,n,o)=>{const s=t.currentX,r=t.currentY,i=t.currentTime,a=e.scrollLeft,l=e.scrollTop,c=n-i;if(o&&(t.startTime=n,t.startX=a,t.startY=l,t.velocityX=t.velocityY=0),t.currentTime=n,t.currentX=t.scrollLeft=a,t.currentY=t.scrollTop=l,t.deltaX=a-t.startX,t.deltaY=l-t.startY,c>0&&c<100){const u=(a-s)/c,d=(l-r)/c;t.velocityX=u*.7+t.velocityX*.3,t.velocityY=d*.7+t.velocityY*.3}};function TV(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,CV);break}})}const NV=TV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const RV=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',AV=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:20px}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',DV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Ot(this,"ionFocus",7),this.ionBlur=Ot(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:n}=this;this.type==="button"?wy(this.href,e,this.routerDirection,this.routerAnimation):tB(n)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:n}=this;if(n!==null&&e.contains(n))return;const o=this.formButtonEl=document.createElement("button");o.type=this.type,o.style.display="none",o.disabled=this.disabled,e.appendChild(o)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=xy(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const n=document.getElementById(e);return n?n instanceof HTMLFormElement?n:(Lb('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is attached to a <form> element.'),this.el),null):(Lb('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),this.el),null)}return e!==void 0?(Lb('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=ht(this),{buttonType:n,type:o,disabled:s,rel:r,target:i,size:a,href:l,color:c,expand:u,hasIconOnly:d,shape:h,strong:f,inheritedAttributes:p}=this,m=a===void 0&&this.inItem?"small":a,b=l===void 0?"button":"a",g=b==="button"?{type:o}:{download:this.download,href:l,rel:r,target:i};let x=this.fill;return x==null&&(x=this.inToolbar||this.inListHeader?"clear":"solid"),o!=="button"&&this.renderHiddenButton(),he(Pt,{onClick:this.handleClick,"aria-disabled":s?"true":null,class:nr(c,{[e]:!0,[n]:!0,["".concat(n,"-").concat(u)]:u!==void 0,["".concat(n,"-").concat(m)]:m!==void 0,["".concat(n,"-").concat(h)]:h!==void 0,["".concat(n,"-").concat(x)]:!0,["".concat(n,"-strong")]:f,"in-toolbar":Qr("ion-toolbar",this.el),"in-toolbar-color":Qr("ion-toolbar[color]",this.el),"in-buttons":Qr("ion-buttons",this.el),"button-has-icon-only":d,"button-disabled":s,"ion-activatable":!0,"ion-focusable":!0})},he(b,Object.assign({},g,{class:"button-native",part:"native",disabled:s,onFocus:this.onFocus,onBlur:this.onBlur},p),he("span",{class:"button-inner"},he("slot",{name:"icon-only"}),he("slot",{name:"start"}),he("slot",null),he("slot",{name:"end"})),e==="md"&&he("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:RV,md:AV}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _V=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",OV='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',FV=It(class extends St{constructor(){super(),this.__registerHost(),this.ionColor=Ot(this,"ionColor",7),this.ionStyle=Ot(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":e!==void 0,["ion-color-".concat(e)]:e!==void 0})}emitStyle(){const{inRange:e,position:n}=this;e||this.ionStyle.emit({label:!0,["label-".concat(n)]:n!==void 0})}render(){const e=this.position,n=ht(this);return he(Pt,{class:nr(this.color,{[n]:!0,"in-item-color":Qr("ion-item.ion-color",this.el),["label-".concat(e)]:e!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:_V,md:OV}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function PV(){if(typeof customElements>"u")return;["ion-label"].forEach(e=>{switch(e){case"ion-label":customElements.get(e)||customElements.define(e,FV);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const LV=()=>{if(kn!==void 0)return kn.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const MV=":host{position:absolute;z-index:999}:host(.fab-horizontal-center){-webkit-margin-start:-28px;margin-inline-start:-28px}@supports (inset-inline-start: 0){:host(.fab-horizontal-center){inset-inline-start:50%}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-center){left:50%}:host-context([dir=rtl]):host(.fab-horizontal-center),:host-context([dir=rtl]).fab-horizontal-center{left:unset;right:unset;right:50%}@supports selector(:dir(rtl)){:host(.fab-horizontal-center):dir(rtl){left:unset;right:unset;right:50%}}}@supports (inset-inline-start: 0){:host(.fab-horizontal-start){inset-inline-start:calc(10px + var(--ion-safe-area-left, 0px))}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-start){left:calc(10px + var(--ion-safe-area-left, 0px))}:host-context([dir=rtl]):host(.fab-horizontal-start),:host-context([dir=rtl]).fab-horizontal-start{left:unset;right:unset;right:calc(10px + var(--ion-safe-area-left, 0px))}@supports selector(:dir(rtl)){:host(.fab-horizontal-start):dir(rtl){left:unset;right:unset;right:calc(10px + var(--ion-safe-area-left, 0px))}}}@supports (inset-inline-start: 0){:host(.fab-horizontal-end){inset-inline-end:calc(10px + var(--ion-safe-area-right, 0px))}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-end){right:calc(10px + var(--ion-safe-area-right, 0px))}:host-context([dir=rtl]):host(.fab-horizontal-end),:host-context([dir=rtl]).fab-horizontal-end{left:unset;right:unset;left:calc(10px + var(--ion-safe-area-right, 0px))}@supports selector(:dir(rtl)){:host(.fab-horizontal-end):dir(rtl){left:unset;right:unset;left:calc(10px + var(--ion-safe-area-right, 0px))}}}:host(.fab-vertical-top){top:10px}:host(.fab-vertical-top.fab-edge){top:-28px}:host(.fab-vertical-bottom){bottom:10px}:host(.fab-vertical-bottom.fab-edge){bottom:-28px}:host(.fab-vertical-center){margin-top:-28px;top:50%}",zV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.horizontal=void 0,this.vertical=void 0,this.edge=!1,this.activated=!1}activatedChanged(){const e=this.activated,n=this.getFab();n&&(n.activated=e),Array.from(this.el.querySelectorAll("ion-fab-list")).forEach(o=>{o.activated=e})}componentDidLoad(){this.activated&&this.activatedChanged()}async close(){this.activated=!1}getFab(){return this.el.querySelector("ion-fab-button")}async toggle(){!!this.el.querySelector("ion-fab-list")&&(this.activated=!this.activated)}render(){const{horizontal:e,vertical:n,edge:o}=this,s=ht(this);return he(Pt,{class:{[s]:!0,["fab-horizontal-".concat(e)]:e!==void 0,["fab-vertical-".concat(n)]:n!==void 0,"fab-edge":o}},he("slot",null))}get el(){return this}static get watchers(){return{activated:["activatedChanged"]}}static get style(){return MV}},[1,"ion-fab",{horizontal:[1],vertical:[1],edge:[4],activated:[1028],close:[64],toggle:[64]}]);function BV(){if(typeof customElements>"u")return;["ion-fab"].forEach(e=>{switch(e){case"ion-fab":customElements.get(e)||customElements.define(e,zV);break}})}const VV=BV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const WV="ION-CONTENT",vN="ion-content",yN=".ion-content-scroll-host",wN="".concat(vN,", ").concat(yN),$y=t=>t.tagName===WV,OC=async t=>$y(t)?(await new Promise(e=>yu(t,e)),t.getScrollElement()):t,FC=t=>{const e=t.querySelector(yN);return e||t.querySelector(wN)},qge=t=>t.closest(wN),Kge=(t,e)=>$y(t)?t.scrollToTop(e):Promise.resolve(t.scrollTo({top:0,left:0,behavior:e>0?"smooth":"auto"})),Xge=(t,e,n,o)=>$y(t)?t.scrollByPoint(e,n,o):Promise.resolve(t.scrollBy({top:n,left:e,behavior:o>0?"smooth":"auto"})),PC=t=>GB(t,vN);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var ax;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ax||(ax={}));var lx;(function(t){t.Body="body",t.Ionic="ionic",t.Native="native",t.None="none"})(lx||(lx={}));const UV={getEngine(){const t=LV();if(t!=null&&t.isPluginAvailable("Keyboard"))return t.Plugins.Keyboard},getResizeMode(){const t=this.getEngine();return t!=null&&t.getResizeMode?t.getResizeMode().catch(e=>{if(e.code!==ax.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $N=t=>{if(Ob===void 0||t===lx.None||t===void 0)return null;const e=Ob.querySelector("ion-app");return e!=null?e:Ob.body},LC=t=>{const e=$N(t);return e===null?0:e.clientHeight},HV=async t=>{let e,n,o,s;const r=async()=>{const u=await UV.getResizeMode(),d=u===void 0?void 0:u.mode;e=()=>{s===void 0&&(s=LC(d)),o=!0,i(o,d)},n=()=>{o=!1,i(o,d)},kn==null||kn.addEventListener("keyboardWillShow",e),kn==null||kn.addEventListener("keyboardWillHide",n)},i=(u,d)=>{t&&t(u,a(d))},a=u=>{if(s===0||s===LC(u))return;const d=$N(u);if(d!==null)return new Promise(h=>{const f=()=>{d.clientHeight===s&&(p.disconnect(),h())},p=new ResizeObserver(f);p.observe(d)})},l=()=>{kn==null||kn.removeEventListener("keyboardWillShow",e),kn==null||kn.removeEventListener("keyboardWillHide",n),e=n=void 0},c=()=>o;return await r(),{init:r,destroy:l,isKeyboardVisible:c}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const GV=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",jV=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=ht(this);return he(Pt,{class:{[e]:!0,"grid-fixed":this.fixed}},he("slot",null))}static get style(){return GV}},[1,"ion-grid",{fixed:[4]}]);function qV(){if(typeof customElements>"u")return;["ion-grid"].forEach(e=>{switch(e){case"ion-grid":customElements.get(e)||customElements.define(e,jV);break}})}const KV=qV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const XV="all 0.2s ease-in-out",MC=t=>{const e=document.querySelector("".concat(t,".ion-cloned-element"));if(e!==null)return e;const n=document.createElement(t);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},zC=t=>{if(!t)return;const e=t.querySelectorAll("ion-toolbar");return{el:t,toolbars:Array.from(e).map(n=>{const o=n.querySelector("ion-title");return{el:n,background:n.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:o,innerTitleEl:o?o.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(n.querySelectorAll("ion-buttons"))}})}},YV=(t,e,n)=>{vu(()=>{const o=t.scrollTop,s=sN(1,1+-o/500,1.1);n.querySelector("ion-refresher.refresher-native")===null&&ri(()=>{JV(e.toolbars,s)})})},ky=(t,e)=>{t.collapse!=="fade"&&(e===void 0?t.style.removeProperty("--opacity-scale"):t.style.setProperty("--opacity-scale",e.toString()))},QV=(t,e,n)=>{if(!t[0].isIntersecting)return;const o=t[0].intersectionRatio>.9||n<=0?0:(1-t[0].intersectionRatio)*100/75;ky(e.el,o===1?void 0:o)},ZV=(t,e,n,o)=>{ri(()=>{const s=o.scrollTop;QV(t,e,s);const r=t[0],i=r.intersectionRect,a=i.width*i.height,l=r.rootBounds.width*r.rootBounds.height,c=a===0&&l===0,u=Math.abs(i.left-r.boundingClientRect.left),d=Math.abs(i.right-r.boundingClientRect.right),h=a>0&&(u>=5||d>=5);c||h||(r.isIntersecting?(_c(e,!1),_c(n)):(i.x===0&&i.y===0||i.width!==0&&i.height!==0)&&s>0&&(_c(e),_c(n,!1),ky(e.el)))})},_c=(t,e=!0)=>{const n=t.el;e?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},JV=(t=[],e=1,n=!1)=>{t.forEach(o=>{const s=o.ionTitleEl,r=o.innerTitleEl;!s||s.size!=="large"||(r.style.transition=n?XV:"",r.style.transform="scale3d(".concat(e,", ").concat(e,", 1)"))})},BC=(t,e,n)=>{vu(()=>{const o=t.scrollTop,s=e.clientHeight,r=n?n.clientHeight:0;if(n!==null&&o<r){e.style.setProperty("--opacity-scale","0"),t.style.setProperty("clip-path","inset(".concat(s,"px 0px 0px 0px)"));return}const i=o-r,l=sN(0,i/10,1);ri(()=>{t.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",l.toString())})})},eW="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:1px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",tW="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",nW=It(class extends St{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,n)=>{const o=this.scrollEl=await OC(e);this.contentScrollCallback=()=>{BC(this.scrollEl,this.el,n)},o.addEventListener("scroll",this.contentScrollCallback),BC(this.scrollEl,this.el,n)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=xy(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(ht(this)!=="ios")return;const{collapse:n}=this,o=n==="condense",s=n==="fade";if(this.destroyCollapsibleHeader(),o){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),i=r?FC(r):null;ri(()=>{const a=MC("ion-title");a.size="large",MC("ion-back-button")}),await this.setupCondenseHeader(i,r)}else if(s){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),i=r?FC(r):null;if(!i){PC(this.el);return}const a=i.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(i,a)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,n){if(!e||!n){PC(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await OC(e);const o=n.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(o).find(a=>a.collapse!=="condense"),!this.collapsibleMainHeader)return;const s=zC(this.collapsibleMainHeader),r=zC(this.el);if(!s||!r)return;_c(s,!1),ky(s.el,0);const i=a=>{ZV(a,s,r,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(i,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{YV(this.scrollEl,r,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),ri(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:n}=this,o=ht(this),s=this.collapse||"none",r=Qr("ion-menu",this.el)?"none":"banner";return he(Pt,Object.assign({role:r,class:{[o]:!0,["header-".concat(o)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(s)]:!0,["header-translucent-".concat(o)]:this.translucent}},n),o==="ios"&&e&&he("div",{class:"header-background"}),he("slot",null))}get el(){return this}static get style(){return{ios:eW,md:tW}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function oW(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,nW);break}})}const sW=oW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rW=":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}",iW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=Ot(this,"ionImgWillLoad",7),this.ionImgDidLoad=Ot(this,"ionImgDidLoad",7),this.ionError=Ot(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=vm(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){this.src!==void 0&&(typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver(e=>{e[e.length-1].isIntersecting&&(this.load(),this.removeIO())}),this.io.observe(this.el)):setTimeout(()=>this.load(),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:e,alt:n,onLoad:o,loadError:s,inheritedAttributes:r}=this,{draggable:i}=r;return he(Pt,{class:ht(this)},he("img",{decoding:"async",src:e,alt:n,onLoad:o,onError:s,part:"image",draggable:aW(i)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return rW}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]}]),aW=t=>{switch(t){case"true":return!0;case"false":return!1;default:return}};function lW(){if(typeof customElements>"u")return;["ion-img"].forEach(e=>{switch(e){case"ion-img":customElements.get(e)||customElements.define(e,iW);break}})}const cW=lW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const uW=PV,kN=1,CN=2,Gf=3;class cx{constructor(e,n){this.component=e,this.params=n,this.state=kN}async init(e){if(this.state=CN,!this.element){const n=this.component;this.element=await xN(this.delegate,e,n,["ion-page","ion-page-invisible"],this.params)}}_destroy(){Qn(this.state!==Gf,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=Gf}}const VC=(t,e,n)=>!t||t.component!==e?!1:rN(t.params,n),WC=(t,e)=>t?t instanceof cx?t:new cx(t,e):null,dW=t=>t.map(e=>e instanceof cx?e:"component"in e?WC(e.component,e.componentProps===null?void 0:e.componentProps):WC(e,void 0)).filter(e=>e!==null),hW=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",fW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ot(this,"ionNavWillLoad",7),this.ionNavWillChange=Ot(this,"ionNavWillChange",3),this.ionNavDidChange=Ot(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=ht(this);this.swipeGesture=Rt.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Kt(()=>import("./swipe-back-efe3650b.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)dr(e.element,Pb),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,n,o,s){return this.insert(-1,e,n,o,s)}insert(e,n,o,s,r){return this.insertPages(e,[{component:n,componentProps:o}],s,r)}insertPages(e,n,o,s){return this.queueTrns({insertStart:e,insertViews:n,opts:o},s)}pop(e,n){return this.removeIndex(-1,1,e,n)}popTo(e,n,o){const s={removeStart:-1,removeCount:-1,opts:n};return typeof e=="object"&&e.component?(s.removeView=e,s.removeStart=1):typeof e=="number"&&(s.removeStart=e+1),this.queueTrns(s,o)}popToRoot(e,n){return this.removeIndex(1,-1,e,n)}removeIndex(e,n=1,o,s){return this.queueTrns({removeStart:e,removeCount:n,opts:o},s)}setRoot(e,n,o,s){return this.setPages([{component:e,componentProps:n}],o,s)}setPages(e,n,o){return n!=null||(n={}),n.animated!==!0&&(n.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:n},o)}setRouteId(e,n,o,s){const r=this.getActiveSync();if(VC(r,e,n))return Promise.resolve({changed:!1,element:r.element});let i;const a=new Promise(u=>i=u);let l;const c={updateURL:!1,viewIsReady:u=>{let d;const h=new Promise(f=>d=f);return i({changed:!0,element:u,markVisible:async()=>{d(),await l}}),h}};if(o==="root")l=this.setRoot(e,n,c);else{const u=this.views.find(d=>VC(d,e,n));u?l=this.popTo(u,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:s})):o==="forward"?l=this.push(e,n,Object.assign(Object.assign({},c),{animationBuilder:s})):o==="back"&&(l=this.setRoot(e,n,Object.assign(Object.assign({},c),{direction:"back",animated:!0,animationBuilder:s})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const n=this.views,o=n.indexOf(e);return o>0?n[o-1]:void 0}async queueTrns(e,n){var o,s;if(this.isTransitioning&&(!((o=e.opts)===null||o===void 0)&&o.skipIfBusy))return!1;const r=new Promise((i,a)=>{e.resolve=i,e.reject=a});if(e.done=n,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const i=document.querySelector("ion-router");if(i){const a=await i.canTransition();if(a===!1)return!1;if(typeof a=="string")return i.push(a,e.opts.direction||"back"),!1}}return((s=e.insertViews)===null||s===void 0?void 0:s.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}if(n.done&&n.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),n.resolve(e.hasCompleted),n.opts.updateURL!==!1&&this.useRouter){const o=document.querySelector("ion-router");if(o){const s=e.direction==="back"?"back":"forward";o.navChanged(s)}}}failed(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}this.transInstr.length=0,this.fireError(e,n)}fireError(e,n){n.done&&n.done(!1,!1,e),n.reject&&!this.destroyed?n.reject(e):n.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const n=this.getActiveSync(),o=this.getEnteringView(e,n);if(!n&&!o)throw new Error("no views in the stack to be removed");o&&o.state===kN&&await o.init(this.el),this.postViewInit(o,n,e);const s=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&o!==n;s&&e.opts&&n&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(o==null?void 0:o.animationBuilder)),n.animationBuilder=e.opts.animationBuilder);let r;s?r=await this.transition(o,n,e):r={hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(n){this.failed(n,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var n,o,s;const r=this.views.length;if((n=e.opts)!==null&&n!==void 0||(e.opts={}),(o=(s=e.opts).delegate)!==null&&o!==void 0||(s.delegate=this.delegate),e.removeView!==void 0){Qn(e.removeStart!==void 0,"removeView needs removeStart"),Qn(e.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(e.removeView);if(l<0)throw new Error("removeView was not found");e.removeStart+=l}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const i=e.insertViews;if(!i)return;Qn(i.length>0,"length can not be zero");const a=dW(i);if(a.length===0)throw new Error("invalid views to insert");for(const l of a){l.delegate=e.opts.delegate;const c=l.nav;if(c&&c!==this)throw new Error("inserted view was already inserted");if(l.state===Gf)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,n){const o=e.insertViews;if(o!==void 0)return o[o.length-1];const s=e.removeStart;if(s!==void 0){const r=this.views,i=s+e.removeCount;for(let a=r.length-1;a>=0;a--){const l=r[a];if((a<s||a>=i)&&l!==n)return l}}}postViewInit(e,n,o){var s,r,i;Qn(n||e,"Both leavingView and enteringView are null"),Qn(o.resolve,"resolve must be valid"),Qn(o.reject,"reject must be valid");const a=o.opts,{insertViews:l,removeStart:c,removeCount:u}=o;let d;if(c!==void 0&&u!==void 0){Qn(c>=0,"removeStart can not be negative"),Qn(u>=0,"removeCount can not be negative"),d=[];for(let f=c;f<c+u;f++){const p=this.views[f];p!==void 0&&p!==e&&p!==n&&d.push(p)}(s=a.direction)!==null&&s!==void 0||(a.direction="back")}const h=this.views.length+((r=l==null?void 0:l.length)!==null&&r!==void 0?r:0)-(u!=null?u:0);if(Qn(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let f=o.insertStart;for(const p of l)this.insertViewAt(p,f),f++;o.enteringRequiresTransition&&((i=a.direction)!==null&&i!==void 0||(a.direction="forward"))}if(d&&d.length>0){for(const f of d)dr(f.element,iN),dr(f.element,aN),dr(f.element,Pb);for(const f of d)this.destroyView(f)}}async transition(e,n,o){const s=o.opts,r=s.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.sbAni=d}:void 0,i=ht(this),a=e.element,l=n&&n.element,c=Object.assign(Object.assign({mode:i,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&Rt.getBoolean("animated",!0),enteringEl:a,leavingEl:l},s),{animationBuilder:s.animationBuilder||this.animation||Rt.get("navAnimation")}),{hasCompleted:u}=await lN(c);return this.transitionFinish(u,e,n,s)}transitionFinish(e,n,o,s){const r=e?n:o;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:n,leavingView:o,direction:s.direction}}insertViewAt(e,n){const o=this.views,s=o.indexOf(e);s>-1?(Qn(e.nav===this,"view is not part of the nav"),o.splice(s,1),o.splice(n,0,e)):(Qn(!e.nav,"nav is used"),e.nav=this,o.splice(n,0,e))}removeView(e){Qn(e.state===CN||e.state===Gf,"view state should be loaded or destroyed");const n=this.views,o=n.indexOf(e);Qn(o>-1,"view must be part of the stack"),o>=0&&n.splice(o,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const n=this.views,o=n.indexOf(e);for(let s=n.length-1;s>=0;s--){const r=n[s],i=r.element;i&&(s>o?(dr(i,Pb),this.destroyView(r)):s<o&&ix(i,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,n,o){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let s=e?-.001:.001;e?s+=Hf([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=Hf([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.sbAni.progressEnd(e?1:0,s,o)}else this.gestureOrAnimationInProgress=!1}render(){return he("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return hW}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function pW(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,fW);break}})}const mW=pW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gW=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",bW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return he(Pt,{class:ht(this)},he("slot",null))}static get style(){return gW}},[1,"ion-row"]);function xW(){if(typeof customElements>"u")return;["ion-row"].forEach(e=>{switch(e){case"ion-row":customElements.get(e)||customElements.define(e,bW);break}})}const vW=xW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yW=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",wW=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",$W=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=Ot(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({["title-".concat(e)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=ht(this),n=this.getSize();return he(Pt,{class:nr(this.color,{[e]:!0,["title-".concat(n)]:!0,"title-rtl":document.dir==="rtl"})},he("div",{class:"toolbar-title"},he("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:yW,md:wW}}},[33,"ion-title",{color:[513],size:[1]}]);function kW(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,$W);break}})}const CW=kW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const IW=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large){padding-bottom:7px}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",SW=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",EW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),n=e.find(r=>r.slot==="start");n&&n.classList.add("buttons-first-slot");const o=e.reverse(),s=o.find(r=>r.slot==="end")||o.find(r=>r.slot==="primary")||o.find(r=>r.slot==="secondary");s&&s.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const n=e.target.tagName,o=e.detail,s={},r=this.childrenStyles.get(n)||{};let i=!1;Object.keys(o).forEach(a=>{const l="toolbar-".concat(a),c=o[a];c!==r[l]&&(i=!0),c&&(s[l]=!0)}),i&&(this.childrenStyles.set(n,s),Wf(this))}render(){const e=ht(this),n={};return this.childrenStyles.forEach(o=>{Object.assign(n,o)}),he(Pt,{class:Object.assign(Object.assign({},n),nr(this.color,{[e]:!0,"in-toolbar":Qr("ion-toolbar",this.el)}))},he("div",{class:"toolbar-background"}),he("div",{class:"toolbar-container"},he("slot",{name:"start"}),he("slot",{name:"secondary"}),he("div",{class:"toolbar-content"},he("slot",null)),he("slot",{name:"primary"}),he("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:IW,md:SW}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function TW(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,EW);break}})}const NW=TW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const RW=DV;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const AW=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:14px;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",DW=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}",_W=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=vm(this.el,["aria-label"])}isClickable(){return this.href!==void 0||this.button}renderCard(e){const n=this.isClickable();if(!n)return[he("slot",null)];const{href:o,routerAnimation:s,routerDirection:r,inheritedAriaAttributes:i}=this,a=n?o===void 0?"button":"a":"div",l=a==="button"?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return he(a,Object.assign({},l,i,{class:"card-native",part:"native",disabled:this.disabled,onClick:c=>wy(o,c,r,s)}),he("slot",null),n&&e==="md"&&he("ion-ripple-effect",null))}render(){const e=ht(this);return he(Pt,{class:nr(this.color,{[e]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(e))}get el(){return this}static get style(){return{ios:AW,md:DW}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),OW=_W;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const FW=':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #3880ff);--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transition:0.2s transform cubic-bezier(0.25, 1.11, 0.78, 1.59);--close-icon-font-size:28px}:host(.ion-activated){--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transform:scale(1.1);--transition:0.2s transform ease-out}::slotted(ion-icon){font-size:28px}:host(.fab-button-in-list){--background:var(--ion-color-light, #f4f5f8);--background-activated:var(--ion-color-light-shade, #d7d8da);--background-focused:var(--background-activated);--background-hover:var(--ion-color-light-tint, #f5f6f9);--color:var(--ion-color-light-contrast, #000);--color-activated:var(--ion-color-light-contrast, #000);--color-focused:var(--color-activated);--transition:transform 200ms ease 10ms, opacity 200ms ease 10ms}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}:host(.ion-color.ion-focused) .button-native,:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after,:host(.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent){--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.9);--background-hover:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.8);--background-focused:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.82);--backdrop-filter:saturate(180%) blur(20px)}:host(.fab-button-translucent-in-list){--background:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.9);--background-hover:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.8);--background-focused:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.82)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){@media (any-hover: hover){:host(.fab-button-translucent.ion-color:hover) .button-native{background:rgba(var(--ion-color-base-rgb), 0.8)}}:host(.ion-color.fab-button-translucent) .button-native{background:rgba(var(--ion-color-base-rgb), 0.9)}:host(.ion-color.ion-focused.fab-button-translucent) .button-native,:host(.ion-color.ion-activated.fab-button-translucent) .button-native{background:var(--ion-color-base)}}',PW=':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #3880ff);--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1), background-color 280ms cubic-bezier(0.4, 0, 0.2, 1), color 280ms cubic-bezier(0.4, 0, 0.2, 1), opacity 15ms linear 30ms, transform 270ms cubic-bezier(0, 0, 0.2, 1) 0ms;--close-icon-font-size:24px}:host(.ion-activated){--box-shadow:0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 12px 17px 2px rgba(0, 0, 0, 0.14), 0 5px 22px 4px rgba(0, 0, 0, 0.12)}::slotted(ion-icon){font-size:24px}:host(.fab-button-in-list){--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-activated:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-focused:var(--color-activated);--background:var(--ion-color-light, #f4f5f8);--background-activated:transparent;--background-focused:var(--ion-color-light-shade, #d7d8da);--background-hover:var(--ion-color-light-tint, #f5f6f9)}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native::after{background:transparent}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}}',LW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Ot(this,"ionFocus",7),this.ionBlur=Ot(this,"ionBlur",7),this.fab=null,this.inheritedAttributes={},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=()=>{const{fab:e}=this;e&&e.toggle()},this.color=void 0,this.activated=!1,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0,this.show=!1,this.translucent=!1,this.type="button",this.size=void 0,this.closeIcon=jB}connectedCallback(){this.fab=this.el.closest("ion-fab")}componentWillLoad(){this.inheritedAttributes=xy(this.el)}render(){const{el:e,disabled:n,color:o,href:s,activated:r,show:i,translucent:a,size:l,inheritedAttributes:c}=this,u=Qr("ion-fab-list",e),d=ht(this),h=s===void 0?"button":"a",f=h==="button"?{type:this.type}:{download:this.download,href:s,rel:this.rel,target:this.target};return he(Pt,{onClick:this.onClick,"aria-disabled":n?"true":null,class:nr(o,{[d]:!0,"fab-button-in-list":u,"fab-button-translucent-in-list":u&&a,"fab-button-close-active":r,"fab-button-show":i,"fab-button-disabled":n,"fab-button-translucent":a,"ion-activatable":!0,"ion-focusable":!0,["fab-button-".concat(l)]:l!==void 0})},he(h,Object.assign({},f,{class:"button-native",part:"native",disabled:n,onFocus:this.onFocus,onBlur:this.onBlur,onClick:p=>wy(s,p,this.routerDirection,this.routerAnimation)},c),he("ion-icon",{"aria-hidden":"true",icon:this.closeIcon,part:"close-icon",class:"close-icon",lazy:!1}),he("span",{class:"button-inner"},he("slot",null)),d==="md"&&he("ion-ripple-effect",null)))}get el(){return this}static get style(){return{ios:FW,md:PW}}},[33,"ion-fab-button",{color:[513],activated:[4],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1],show:[4],translucent:[4],type:[1],size:[1],closeIcon:[1,"close-icon"]}]),MW=LW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var UC;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(UC||(UC={}));const zW="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",BW=It(class extends St{constructor(){super(),this.__registerHost()}componentDidLoad(){WW(async()=>{const e=mr(window,"hybrid");if(Rt.getBoolean("_testing")||Kt(()=>import("./index9-c0a313eb.js"),[]).then(o=>o.startTapClick(Rt)),Rt.getBoolean("statusTap",e)&&Kt(()=>import("./status-tap-db24095d.js"),[]).then(o=>o.startStatusTap()),Rt.getBoolean("inputShims",VW())){const o=mr(window,"ios")?"ios":"android";Kt(()=>import("./input-shims-f75b0871.js"),[]).then(s=>s.startInputShims(Rt,o))}const n=await Kt(()=>import("./hardware-back-button-77fd2980.js"),[]);Rt.getBoolean("hardwareBackButton",e)?n.startHardwareBackButton():n.blockHardwareBackButton(),typeof window<"u"&&Kt(()=>import("./keyboard2-9df45deb.js"),[]).then(o=>o.startKeyboardAssist(window)),Kt(()=>import("./focus-visible-9c13edeb.js"),[]).then(o=>this.focusVisible=o.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=ht(this);return he(Pt,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Rt.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return zW}},[0,"ion-app",{setFocus:[64]}]),VW=()=>!!(mr(window,"ios")&&mr(window,"mobile")||mr(window,"android")&&mr(window,"mobileweb")),WW=t=>{"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32)};function UW(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,BW);break}})}const HW=UW,GW=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",jW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ot(this,"ionNavWillLoad",7),this.ionNavWillChange=Ot(this,"ionNavWillChange",3),this.ionNavDidChange=Ot(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=ht(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Kt(()=>import("./swipe-back-efe3650b.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),n=>{var o;return(o=this.ani)===null||o===void 0?void 0:o.progressStep(n)},(n,o,s)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let r=n?-.001:.001;n?r+=Hf([0,0],[.32,.72],[0,1],[1,1],o)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Hf([0,0],[1,0],[.68,.28],[1,1],o)[0]),this.ani.progressEnd(n?1:0,r,s)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,n,o){const s=await this.lock();let r=!1;try{r=await this.transition(e,n,o)}catch(i){console.error(i)}return s(),r}async setRouteId(e,n,o,s){return{changed:await this.setRoot(e,n,{duration:o==="root"?0:void 0,direction:o==="back"?"back":"forward",animationBuilder:s}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,n,o){if(this.activeComponent===e&&rN(n,this.activeParams))return!1;const s=this.activeEl,r=await xN(this.delegate,this.el,e,["ion-page","ion-page-invisible"],n);return this.activeComponent=e,this.activeEl=r,this.activeParams=n,await this.commit(r,s,o),await HB(this.delegate,s),!0}async transition(e,n,o={}){if(n===e)return!1;this.ionNavWillChange.emit();const{el:s,mode:r}=this,i=this.animated&&Rt.getBoolean("animated",!0),a=o.animationBuilder||this.animation||Rt.get("navAnimation");return await lN(Object.assign(Object.assign({mode:r,animated:i,enteringEl:e,leavingEl:n,baseEl:s,deepWait:J4(s),progressCallback:o.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},o),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let n;return this.waitPromise=new Promise(o=>n=o),e!==void 0&&await e,n}render(){return he("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return GW}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function qW(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,jW);break}})}const KW=qW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const XW=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",YW=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",QW=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Ot(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await HV(async(e,n)=>{e===!1&&n!==void 0&&await n,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:n,keyboardVisible:o}=this,s=ht(this),r=o&&this.el.getAttribute("slot")!=="top";return he(Pt,{role:"tablist","aria-hidden":r?"true":null,class:nr(e,{[s]:!0,"tab-bar-translucent":n,"tab-bar-hidden":r})},he("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:XW,md:YW}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function ZW(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,QW);break}})}const JW=ZW;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const eU=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',tU=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',nU=It(class extends St{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Ot(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const n=e.target,o=this.el.parentElement;(e.composedPath().includes(o)||n!=null&&n.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},vm(this.el,["aria-label"])),this.layout===void 0&&(this.layout=Rt.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:n,hasLabel:o,href:s,rel:r,target:i,layout:a,selected:l,tab:c,inheritedAttributes:u}=this,d=ht(this),h={download:this.download,href:s,rel:r,target:i};return he(Pt,{onClick:this.onClick,onKeyup:this.onKeyUp,id:c!==void 0?"tab-button-".concat(c):null,class:{[d]:!0,"tab-selected":l,"tab-disabled":e,"tab-has-label":o,"tab-has-icon":n,"tab-has-label-only":o&&!n,"tab-has-icon-only":n&&!o,["tab-layout-".concat(a)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},he("a",Object.assign({},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},u),he("span",{class:"button-inner"},he("slot",null)),d==="md"&&he("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:eU,md:tU}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function oU(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,nU);break;case"ion-ripple-effect":customElements.get(e)||pV();break}})}const sU=oU,Ga={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ja,IN,wm,SN=!1,jf=!1,Cy=!1,go=!1,HC=null,ux=!1;const rU=t=>{const e=new URL(t,An.$resourcesUrl$);return e.origin!==Hu.location.origin?e.href:e.pathname},sa=(t,e="")=>()=>{},GC="http://www.w3.org/1999/xlink",jC={},iU="http://www.w3.org/2000/svg",aU="http://www.w3.org/1999/xhtml",lU=t=>t!=null,Iy=t=>(t=typeof t,t==="object"||t==="function");function cU(t){var e,n,o;return(o=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&o!==void 0?o:void 0}const Qc=(t,e,...n)=>{let o=null,s=null,r=null,i=!1,a=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)o=d[h],Array.isArray(o)?c(o):o!=null&&typeof o!="boolean"&&((i=typeof t!="function"&&!Iy(o))&&(o=String(o)),i&&a?l[l.length-1].$text$+=o:l.push(i?qf(null,o):o),a=i)};if(c(n),e){e.key&&(s=e.key),e.name&&(r=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,dU);const u=qf(t,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=s,u.$name$=r,u},qf=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},EN={},uU=t=>t&&t.$tag$===EN,dU={forEach:(t,e)=>t.map(qC).forEach(e),map:(t,e)=>t.map(qC).map(e).map(hU)},qC=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),hU=t=>{if(typeof t.vtag=="function"){const n=Object.assign({},t.vattrs);return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),Qc(t.vtag,n,...t.vchildren||[])}const e=qf(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},fU=t=>zU.map(e=>e(t)).find(e=>!!e),pU=(t,e)=>t!=null&&!Iy(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,KC=new WeakMap,mU=(t,e,n)=>{let o=Xf.get(t);UU&&n?(o=o||new CSSStyleSheet,typeof o=="string"?o=e:o.replaceSync(e)):o=e,Xf.set(t,o)},gU=(t,e,n,o)=>{var s;let r=TN(e,n);const i=Xf.get(r);if(t=t.nodeType===11?t:ws,i)if(typeof i=="string"){t=t.head||t;let a=KC.get(t),l;if(a||KC.set(t,a=new Set),!a.has(r)){{l=ws.createElement("style"),l.innerHTML=i;const c=(s=An.$nonce$)!==null&&s!==void 0?s:cU(ws);c!=null&&l.setAttribute("nonce",c),t.insertBefore(l,t.querySelector("link"))}a&&a.add(r)}}else t.adoptedStyleSheets.includes(i)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,i]);return r},bU=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,o=e.$flags$,s=sa("attachStyles",e.$tagName$),r=gU(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);o&10&&(n["s-sc"]=r,n.classList.add(r+"-h"),o&2&&n.classList.add(r+"-s")),s()},TN=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),XC=(t,e,n,o,s,r)=>{if(n!==o){let i=JC(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=YC(n),u=YC(o);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in n)(!o||o[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in o)(!n||o[l]!==n[l])&&(l.includes("-")?t.style.setProperty(l,o[l]):t.style[l]=o[l])}else if(e!=="key")if(e==="ref")o&&o(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):JC(Hu,a)?e=a.slice(2):e=a[2]+e.slice(3),n&&An.rel(t,e,n,!1),o&&An.ael(t,e,o,!1);else{const l=Iy(o);if((i||l&&o!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=o;else{const u=o==null?"":o;e==="list"?i=!1:(n==null||t[e]!=u)&&(t[e]=u)}}catch(u){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,c=!0),o==null||o===!1?(o!==!1||t.getAttribute(e)==="")&&(c?t.removeAttributeNS(GC,e):t.removeAttribute(e)):(!i||r&4||s)&&!l&&(o=o===!0?"":o,c?t.setAttributeNS(GC,e,o):t.setAttribute(e,o))}}},xU=/\s/,YC=t=>t?t.split(xU):[],NN=(t,e,n,o)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||jC,i=e.$attrs$||jC;for(o in r)o in i||XC(s,o,r[o],void 0,n,e.$flags$);for(o in i)XC(s,o,r[o],i[o],n,e.$flags$)},Kf=(t,e,n,o)=>{const s=e.$children$[n];let r=0,i,a,l;if(SN||(Cy=!0,s.$tag$==="slot"&&(ja&&o.classList.add(ja+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)i=s.$elm$=ws.createTextNode(s.$text$);else if(s.$flags$&1)i=s.$elm$=ws.createTextNode("");else{if(go||(go=s.$tag$==="svg"),i=s.$elm$=ws.createElementNS(go?iU:aU,s.$flags$&2?"slot-fb":s.$tag$),go&&s.$tag$==="foreignObject"&&(go=!1),NN(null,s,go),lU(ja)&&i["s-si"]!==ja&&i.classList.add(i["s-si"]=ja),s.$children$)for(r=0;r<s.$children$.length;++r)a=Kf(t,s,r,i),a&&i.appendChild(a);s.$tag$==="svg"?go=!1:i.tagName==="foreignObject"&&(go=!0)}return i["s-hn"]=wm,s.$flags$&3&&(i["s-sr"]=!0,i["s-cr"]=IN,i["s-sn"]=s.$name$||"",l=t&&t.$children$&&t.$children$[n],l&&l.$tag$===s.$tag$&&t.$elm$&&wu(t.$elm$,!1)),i},wu=(t,e)=>{An.$flags$|=1;const n=t.childNodes;for(let o=n.length-1;o>=0;o--){const s=n[o];s["s-hn"]!==wm&&s["s-ol"]&&(DN(s).insertBefore(s,Sy(s)),s["s-ol"].remove(),s["s-ol"]=void 0,Cy=!0),e&&wu(s,e)}An.$flags$&=-2},RN=(t,e,n,o,s,r)=>{let i=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(i.shadowRoot&&i.tagName===wm&&(i=i.shadowRoot);s<=r;++s)o[s]&&(a=Kf(null,n,s,t),a&&(o[s].$elm$=a,i.insertBefore(a,Sy(e))))},AN=(t,e,n,o,s)=>{for(;e<=n;++e)(o=t[e])&&(s=o.$elm$,FN(o),jf=!0,s["s-ol"]?s["s-ol"].remove():wu(s,!0),s.remove())},vU=(t,e,n,o)=>{let s=0,r=0,i=0,a=0,l=e.length-1,c=e[0],u=e[l],d=o.length-1,h=o[0],f=o[d],p,m;for(;s<=l&&r<=d;)if(c==null)c=e[++s];else if(u==null)u=e[--l];else if(h==null)h=o[++r];else if(f==null)f=o[--d];else if(_h(c,h))qa(c,h),c=e[++s],h=o[++r];else if(_h(u,f))qa(u,f),u=e[--l],f=o[--d];else if(_h(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&wu(c.$elm$.parentNode,!1),qa(c,f),t.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++s],f=o[--d];else if(_h(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&wu(u.$elm$.parentNode,!1),qa(u,h),t.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=o[++r];else{for(i=-1,a=s;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===h.$key$){i=a;break}i>=0?(m=e[i],m.$tag$!==h.$tag$?p=Kf(e&&e[r],n,i,t):(qa(m,h),e[i]=void 0,p=m.$elm$),h=o[++r]):(p=Kf(e&&e[r],n,r,t),h=o[++r]),p&&DN(c.$elm$).insertBefore(p,Sy(c.$elm$))}s>l?RN(t,o[d+1]==null?null:o[d+1].$elm$,n,o,r,d):r>d&&AN(e,s,l)},_h=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Sy=t=>t&&t["s-ol"]||t,DN=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,qa=(t,e)=>{const n=e.$elm$=t.$elm$,o=t.$children$,s=e.$children$,r=e.$tag$,i=e.$text$;let a;i===null?(go=r==="svg"?!0:r==="foreignObject"?!1:go,r==="slot"||NN(t,e,go),o!==null&&s!==null?vU(n,o,e,s):s!==null?(t.$text$!==null&&(n.textContent=""),RN(n,null,e,s,0,s.length-1)):o!==null&&AN(o,0,o.length-1),go&&r==="svg"&&(go=!1)):(a=n["s-cr"])?a.parentNode.textContent=i:t.$text$!==i&&(n.data=i)},_N=t=>{const e=t.childNodes;let n,o,s,r,i,a;for(o=0,s=e.length;o<s;o++)if(n=e[o],n.nodeType===1){if(n["s-sr"]){for(i=n["s-sn"],n.hidden=!1,r=0;r<s;r++)if(a=e[r].nodeType,e[r]["s-hn"]!==n["s-hn"]||i!==""){if(a===1&&i===e[r].getAttribute("slot")){n.hidden=!0;break}}else if(a===1||a===3&&e[r].textContent.trim()!==""){n.hidden=!0;break}}_N(n)}},hs=[],ON=t=>{let e,n,o,s,r,i,a=0;const l=t.childNodes,c=l.length;for(;a<c;a++){if(e=l[a],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(o=n.parentNode.childNodes,s=e["s-sn"],i=o.length-1;i>=0;i--)n=o[i],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==e["s-hn"]&&(QC(n,s)?(r=hs.find(u=>u.$nodeToRelocate$===n),jf=!0,n["s-sn"]=n["s-sn"]||s,r?r.$slotRefNode$=e:hs.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&hs.map(u=>{QC(u.$nodeToRelocate$,n["s-sn"])&&(r=hs.find(d=>d.$nodeToRelocate$===n),r&&!u.$slotRefNode$&&(u.$slotRefNode$=r.$slotRefNode$))})):hs.some(u=>u.$nodeToRelocate$===n)||hs.push({$nodeToRelocate$:n}));e.nodeType===1&&ON(e)}},QC=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",FN=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(FN)},yU=(t,e)=>{const n=t.$hostElement$,o=t.$cmpMeta$,s=t.$vnode$||qf(null,null),r=uU(e)?e:Qc(null,null,e);wm=n.tagName,o.$attrsToReflect$&&(r.$attrs$=r.$attrs$||{},o.$attrsToReflect$.map(([i,a])=>r.$attrs$[a]=n[i])),r.$tag$=null,r.$flags$|=4,t.$vnode$=r,r.$elm$=s.$elm$=n.shadowRoot||n,ja=n["s-sc"],IN=n["s-cr"],SN=(o.$flags$&1)!==0,jf=!1,qa(s,r);{if(An.$flags$|=1,Cy){ON(r.$elm$);let i,a,l,c,u,d,h=0;for(;h<hs.length;h++)i=hs[h],a=i.$nodeToRelocate$,a["s-ol"]||(l=ws.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(h=0;h<hs.length;h++)if(i=hs[h],a=i.$nodeToRelocate$,i.$slotRefNode$){for(c=i.$slotRefNode$.parentNode,u=i.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===a["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==a.parentNode||a.nextSibling!==u)&&a!==u&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,u))}else a.nodeType===1&&(a.hidden=!0)}jf&&_N(r.$elm$),An.$flags$&=-2,hs.length=0}},wU=(t,e)=>{},PN=(t,e)=>(t.$flags$|=16,wU(t,t.$ancestorComponent$),jU(()=>$U(t,e))),$U=(t,e)=>{const n=t.$hostElement$,o=sa("scheduleUpdate",t.$cmpMeta$.$tagName$),s=n;let r;return e?r=bl(s,"componentWillLoad"):r=bl(s,"componentWillUpdate"),r=ZC(r,()=>bl(s,"componentWillRender")),o(),ZC(r,()=>kU(t,s,e))},kU=async(t,e,n)=>{const o=t.$hostElement$,s=sa("update",t.$cmpMeta$.$tagName$);o["s-rc"],n&&bU(t);const r=sa("render",t.$cmpMeta$.$tagName$);CU(t,e,o),r(),s(),IU(t)},CU=(t,e,n)=>{try{HC=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Ga.hasRenderFn||Ga.reflect)&&(Ga.vdomRender||Ga.reflect)&&(Ga.hydrateServerSide||yU(t,e))}catch(a){Uu(a,t.$hostElement$)}return HC=null,null},IU=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,o=sa("postUpdate",e),s=n;t.$ancestorComponent$,bl(s,"componentDidRender"),t.$flags$&64?(bl(s,"componentDidUpdate"),o()):(t.$flags$|=64,bl(s,"componentDidLoad"),o())},bl=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(o){Uu(o)}},ZC=(t,e)=>t&&t.then?t.then(e):e(),SU=(t,e)=>$m(t).$instanceValues$.get(e),EU=(t,e,n,o)=>{const s=$m(t),r=t,i=s.$instanceValues$.get(e),a=s.$flags$,l=r;n=pU(n,o.$members$[e][0]);const c=Number.isNaN(i)&&Number.isNaN(n);if(n!==i&&!c){s.$instanceValues$.set(e,n);{if(o.$watchers$&&a&128){const d=o.$watchers$[e];d&&d.map(h=>{try{l[h](n,i,e)}catch(f){Uu(f,r)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,i,e)===!1)return;PN(s,!1)}}}},TU=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const o=Object.entries(e.$members$),s=t.prototype;o.map(([r,[i]])=>{(i&31||i&32)&&Object.defineProperty(s,r,{get(){return SU(this,r)},set(a){EU(this,r,a,e)},configurable:!0,enumerable:!0})});{const r=new Map;s.attributeChangedCallback=function(i,a,l){An.jmp(()=>{const c=r.get(i);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(s.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},t.observedAttributes=o.filter(([i,a])=>a[0]&15).map(([i,a])=>{const l=a[1]||i;return r.set(l,i),a[0]&512&&e.$attrsToReflect$.push([i,l]),l})}}return t},NU=async(t,e,n,o,s)=>{if(!(e.$flags$&32)&&(s=t.constructor,e.$flags$|=32,customElements.whenDefined(n.$tagName$).then(()=>e.$flags$|=128),s.style)){let i=s.style;typeof i!="string"&&(i=i[e.$modeName$=fU(t)]);const a=TN(n,e.$modeName$);if(!Xf.has(a)){const l=sa("registerStyles",n.$tagName$);mU(a,i,!!(n.$flags$&1)),l()}}e.$ancestorComponent$,(()=>PN(e,!0))()},RU=t=>{},AU=t=>{if(!(An.$flags$&1)){const e=$m(t),n=e.$cmpMeta$,o=sa("connectedCallback",n.$tagName$);e.$flags$&1?(LN(t,e,n.$listeners$),RU(e.$lazyInstance$)):(e.$flags$|=1,n.$flags$&12&&DU(t),n.$members$&&Object.entries(n.$members$).map(([s,[r]])=>{if(r&31&&t.hasOwnProperty(s)){const i=t[s];delete t[s],t[s]=i}}),NU(t,e,n)),o()}},DU=t=>{const e=t["s-cr"]=ws.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},_U=t=>{if(!(An.$flags$&1)){const e=$m(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},OU=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const o=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){MU(this,n)},connectedCallback(){AU(this),o&&o.call(this)},disconnectedCallback(){_U(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),t.is=n.$tagName$,TU(t,n)},LN=(t,e,n,o)=>{n&&n.map(([s,r,i])=>{const a=PU(t,s),l=FU(e,i),c=LU(s);An.ael(a,r,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>An.rel(a,r,l,c))})},FU=(t,e)=>n=>{try{Ga.lazyLoad||t.$hostElement$[e](n)}catch(o){Uu(o)}},PU=(t,e)=>e&4?ws:e&8?Hu:e&16?ws.body:t,LU=t=>VU?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,MN=new WeakMap,$m=t=>MN.get(t),MU=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return LN(t,n,e.$listeners$),MN.set(t,n)},JC=(t,e)=>e in t,Uu=(t,e)=>(0,console.error)(t,e),Xf=new Map,zU=[],Hu=typeof window<"u"?window:{},ws=Hu.document||{head:{}},BU=Hu.HTMLElement||class{},An={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,o)=>t.addEventListener(e,n,o),rel:(t,e,n,o)=>t.removeEventListener(e,n,o),ce:(t,e)=>new CustomEvent(t,e)},VU=(()=>{let t=!1;try{ws.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),WU=t=>Promise.resolve(t),UU=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1})(),eI=[],zN=[],HU=(t,e)=>n=>{t.push(n),ux||(ux=!0,e&&An.$flags$&4?GU(dx):An.raf(dx))},tI=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Uu(n)}t.length=0},dx=()=>{tI(eI),tI(zN),(ux=eI.length>0)&&An.raf(dx)},GU=t=>WU().then(t),jU=HU(zN,!0);let Mb;const qU=()=>{if(typeof window>"u")return new Map;if(!Mb){const t=window;t.Ionicons=t.Ionicons||{},Mb=t.Ionicons.map=t.Ionicons.map||new Map}return Mb},KU=t=>{let e=zb(t.src);return e||(e=BN(t.name,t.icon,t.mode,t.ios,t.md),e?XU(e):t.icon&&(e=zb(t.icon),e||(e=zb(t.icon[t.mode]),e))?e:null)},XU=t=>{const e=qU().get(t);return e||rU("svg/".concat(t,".svg"))},BN=(t,e,n,o,s)=>(n=(n&&Oh(n))==="ios"?"ios":"md",o&&n==="ios"?t=Oh(o):s&&n==="md"?t=Oh(s):(!t&&e&&!VN(e)&&(t=e),Yf(t)&&(t=Oh(t))),!Yf(t)||t.trim()===""||t.replace(/[a-z]|-|\d/gi,"")!==""?null:t),zb=t=>Yf(t)&&(t=t.trim(),VN(t))?t:null,VN=t=>t.length>0&&/(\/|\.)/.test(t),Yf=t=>typeof t=="string",Oh=t=>t.toLowerCase(),YU=(t,e=[])=>{const n={};return e.forEach(o=>{t.hasAttribute(o)&&(t.getAttribute(o)!==null&&(n[o]=t.getAttribute(o)),t.removeAttribute(o))}),n},QU=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",ZU=t=>{const e=document.createElement("div");e.innerHTML=t;for(let o=e.childNodes.length-1;o>=0;o--)e.childNodes[o].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[o]);const n=e.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const o=n.getAttribute("class")||"";if(n.setAttribute("class",(o+" s-ion-icon").trim()),WN(n))return e.innerHTML}return""},WN=t=>{if(t.nodeType===1){if(t.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;if(Yf(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<t.childNodes.length;e++)if(!WN(t.childNodes[e]))return!1}return!0},JU=t=>t.startsWith("data:image/svg+xml"),eH=t=>t.indexOf(";utf8,")!==-1,Bi=new Map,nI=new Map;let Bb;const tH=(t,e)=>{let n=nI.get(t);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(JU(t)&&eH(t)){Bb||(Bb=new DOMParser);const s=Bb.parseFromString(t,"text/html").querySelector("svg");return s&&Bi.set(t,s.outerHTML),Promise.resolve()}else n=fetch(t).then(o=>{if(o.ok)return o.text().then(s=>{s&&e!==!1&&(s=ZU(s)),Bi.set(t,s||"")});Bi.set(t,"")}),nI.set(t,n);else return Bi.set(t,""),Promise.resolve();return n},nH=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",oH=OU(class extends BU{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=sH(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=YU(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(t,e,n){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const o=this.io=new window.IntersectionObserver(s=>{s[0].isIntersecting&&(o.disconnect(),this.io=void 0,n())},{rootMargin:e});o.observe(t)}else n()}loadIcon(){if(this.isVisible){const t=KU(this);t&&(Bi.has(t)?this.svgContent=Bi.get(t):tH(t,this.sanitize).then(()=>this.svgContent=Bi.get(t)))}this.iconName=BN(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:t,iconName:e,inheritedAttributes:n,el:o}=this,s=this.mode||"md",r=e?(e.includes("arrow")||e.includes("chevron"))&&t!==!1:!1,i=t||r;return Qc(EN,Object.assign({role:"img",class:Object.assign(Object.assign({[s]:!0},rH(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":i,"icon-rtl":i&&QU(o)})},n),this.svgContent?Qc("div",{class:"icon-inner",innerHTML:this.svgContent}):Qc("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return nH}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),sH=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",rH=t=>t?{"ion-color":!0,["ion-color-".concat(t)]:!0}:null;function iH(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,oH);break}})}const aH=iH,Ey=Z.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),lH=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(t){if(t.id){const e=this.ionViewWillEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillEnterCallbacks[e]=t:this.ionViewWillEnterCallbacks.push(t)}else this.ionViewWillEnterCallbacks.push(t)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(t=>t())}onIonViewDidEnter(t){if(t.id){const e=this.ionViewDidEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidEnterCallbacks[e]=t:this.ionViewDidEnterCallbacks.push(t)}else this.ionViewDidEnterCallbacks.push(t)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(t=>t())}onIonViewWillLeave(t){if(t.id){const e=this.ionViewWillLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillLeaveCallbacks[e]=t:this.ionViewWillLeaveCallbacks.push(t)}else this.ionViewWillLeaveCallbacks.push(t)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(t=>t())}onIonViewDidLeave(t){if(t.id){const e=this.ionViewDidLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidLeaveCallbacks[e]=t:this.ionViewDidLeaveCallbacks.push(t)}else this.ionViewDidLeaveCallbacks.push(t)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(t=>t()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(t){this.componentCanBeDestroyedCallback=t}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},or=Z.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:t=>{typeof window<"u"&&(typeof t=="string"?window.location.pathname=t:window.history.back())},navigate:t=>{typeof window<"u"&&(window.location.pathname=t)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),UN=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),Ty=t=>t.replace(/([A-Z])/g,e=>"-".concat(e[0].toLowerCase())),HN=(t,e,n={})=>{if(t instanceof Element){const o=cH(t.classList,e,n);o!==""&&(t.className=o),Object.keys(e).forEach(s=>{if(!(s==="children"||s==="style"||s==="ref"||s==="class"||s==="className"||s==="forwardedRef"))if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const r=s.substring(2),i=r[0].toLowerCase()+r.substring(1);Ny(i)||dH(t,i,e[s])}else t[s]=e[s],typeof e[s]==="string"&&t.setAttribute(Ty(s),e[s])})}},cH=(t,e,n)=>{const o=e.className||e.class,s=n.className||n.class,r=Vb(t),i=Vb(o?o.split(" "):[]),a=Vb(s?s.split(" "):[]),l=[];return r.forEach(c=>{i.has(c)?(l.push(c),i.delete(c)):a.has(c)||l.push(c)}),i.forEach(c=>l.push(c)),l.join(" ")},uH=t=>{switch(t){case"doubleclick":return"dblclick"}return t};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Ny=t=>{if(typeof document>"u")return!0;{const e="on"+uH(t);let n=e in document;if(!n){const o=document.createElement("div");o.setAttribute(e,"return;"),n=typeof o[e]=="function"}return n}},dH=(t,e,n)=>{const o=t.__events||(t.__events={}),s=o[e];s&&t.removeEventListener(e,s),t.addEventListener(e,o[e]=function(i){n&&n.call(this,i)})},Vb=t=>{const e=new Map;return t.forEach(n=>e.set(n,n)),e},hH=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},Ry=(...t)=>e=>{t.forEach(n=>{hH(n,e)})},fH=(t,e)=>{const n=(o,s)=>Z.createElement(t,Object.assign({},o,{forwardedRef:s}));return n.displayName=e,Z.forwardRef(n)},pH=(t,e)=>{e!==void 0&&typeof customElements<"u"&&!customElements.get(t)&&customElements.define(t,e)},Jt=(t,e,n,o)=>{o!==void 0&&o();const s=UN(t),r=class extends Z.Component{constructor(i){super(i),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(i){HN(this.componentEl,this.props,i)}render(){const i=this.props,{children:a,forwardedRef:l,style:c,className:u,ref:d}=i,h=Rn(i,["children","forwardedRef","style","className","ref"]);let f=Object.keys(h).reduce((m,b)=>{const g=h[b];if(b.indexOf("on")===0&&b[2]===b[2].toUpperCase()){const x=b.substring(2).toLowerCase();typeof document<"u"&&Ny(x)&&(m[b]=g)}else{const x=typeof g;(x==="string"||x==="boolean"||x==="number")&&(m[Ty(b)]=g)}return m},{});n&&(f=n(this.props,f));const p=Object.assign(Object.assign({},f),{ref:Ry(l,this.setComponentElRef),style:c});return pt.createElement(t,p,a)}static get displayName(){return s}};return e&&(r.contextType=e),fH(r,s)},GN=Jt("ion-card-content",void 0,void 0,ZB),jN=Jt("ion-card-header",void 0,void 0,oV),qN=Jt("ion-card-title",void 0,void 0,lV),mH=Jt("ion-col",void 0,void 0,wV),Ay=Jt("ion-content",void 0,void 0,NV),hx=Jt("ion-fab",void 0,void 0,VV),gH=Jt("ion-grid",void 0,void 0,KV),Qf=Jt("ion-header",void 0,void 0,sW),bH=Jt("ion-img",void 0,void 0,cW),Wb=Jt("ion-label",void 0,void 0,uW),xH=Jt("ion-row",void 0,void 0,vW),Zf=Jt("ion-title",void 0,void 0,CW),Jf=Jt("ion-toolbar",void 0,void 0,NW),Ql=(t,e)=>{const n=(o,s)=>Z.createElement(t,Object.assign({},o,{forwardedRef:s}));return n.displayName=e,Z.forwardRef(n)},oI=t=>mr(window,t),Dy=()=>{if(typeof window<"u"){const t=window.Ionic;if(t&&t.config)return t.config}return null},_y=(t,e)=>{pH(t,e);const n=UN(t),o=class extends Z.Component{constructor(s){super(s),this.handleClick=r=>{const{routerLink:i,routerDirection:a,routerOptions:l,routerAnimation:c}=this.props;i!==void 0&&(r.preventDefault(),this.context.navigate(i,a,void 0,c,l))},this.ref=Z.createRef(),this.stableMergedRefs=Ry(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(s){const r=this.ref.current;HN(r,this.props,s)}render(){const s=this.props,{children:r,forwardedRef:i,style:a,className:l,ref:c}=s,u=Rn(s,["children","forwardedRef","style","className","ref"]),d=Object.keys(u).reduce((f,p)=>{if(p.indexOf("on")===0&&p[2]===p[2].toUpperCase()){const m=p.substring(2).toLowerCase();Ny(m)&&(f[p]=u[p])}else["string","boolean","number"].includes(typeof u[p])&&(f[Ty(p)]=u[p]);return f},{}),h=Object.assign(Object.assign({},d),{ref:this.stableMergedRefs,style:a});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const f=h.onClick;h.onClick=p=>{f(p),p.defaultPrevented||this.handleClick(p)}}else h.onClick=this.handleClick;return pt.createElement(t,h,r)}static get displayName(){return n}static get contextType(){return or}};return Ql(o,n)},vH=_y("ion-button",RW),KN=_y("ion-card",OW),uf=_y("ion-fab-button",MW),yH=Z.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),wH=({onAddOverlay:t,onRemoveOverlay:e})=>{const[n,o]=pt.useState({}),s=pt.useRef({});s.current=n,pt.useEffect(()=>{t(r),e(i)},[]);const r=(l,c,u)=>{const d=Object.assign({},s.current);d[l]={component:c,containerElement:u},o(d)},i=l=>{const c=Object.assign({},s.current);delete c[l],o(c)},a=Object.keys(n);return Z.createElement(Z.Fragment,null,a.map(l=>{const c=n[l];return YM.createPortal(c.component,c.containerElement,"overlay-".concat(l))}))},$H=Jt("ion-tab-button",void 0,void 0,sU),kH=Jt("ion-tab-bar",void 0,void 0,JW),fx=Jt("ion-router-outlet",void 0,void 0,KW),CH=Jt("ion-app",void 0,void 0,HW),IH=Jt("ion-icon",void 0,void 0,aH),SH=(()=>class extends Z.Component{constructor(t){super(t),this.ionContext={addOverlay:(e,n,o)=>{this.addOverlayCallback&&this.addOverlayCallback(e,n,o)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return Z.createElement(yH.Provider,{value:this.ionContext},Z.createElement(CH,Object.assign({},this.props),this.props.children),Z.createElement(wH,{onAddOverlay:t=>{this.addOverlayCallback=t},onRemoveOverlay:t=>{this.removeOverlayCallback=t}}))}static get displayName(){return"IonApp"}})(),Oy=Z.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class Fy extends Z.PureComponent{constructor(e){super(e),this.ionPageElementRef=Z.createRef(),this.stableMergedRefs=Ry(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:n,children:o,routeInfo:s,forwardedRef:r}=e,i=Rn(e,["className","children","routeInfo","forwardedRef"]);return Z.createElement(Ey.Consumer,null,a=>(this.ionLifeCycleContext=a,Z.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:this.stableMergedRefs},i),o)))}static get contextType(){return Oy}}class EH extends Z.Component{constructor(e){super(e)}render(){const e=this.props,{className:n,children:o,forwardedRef:s}=e,r=Rn(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?Z.createElement(Fy,Object.assign({className:n?"".concat(n):"",routeInfo:this.context.routeInfo,forwardedRef:s},r),o):Z.createElement("div",Object.assign({className:n?"ion-page ".concat(n):"ion-page",ref:s},r),o)}static get displayName(){return"IonPage"}static get contextType(){return or}}const Py=Ql(EH,"IonPage"),TH=(t,e)=>{const n=new WeakMap;return{attachViewToDom:async(r,i,a,l)=>{const c=document.createElement("div");l&&c.classList.add(...l),r.appendChild(c);const u=i(a),d=ey.createPortal(u,c);return n.set(c,d),t(d),Promise.resolve(c)},removeViewFromDom:(r,i)=>{const a=n.get(i);return a&&e(a),i.remove(),Promise.resolve()}}},NH=Jt("ion-nav",void 0,void 0,mW),RH=t=>{var{children:e,forwardedRef:n}=t,o=Rn(t,["children","forwardedRef"]);const[s,r]=pt.useState([]),i=c=>r(u=>[...u,c]),a=c=>r(u=>u.filter(d=>d!==c)),l=pt.useMemo(()=>TH(i,a),[]);return Z.createElement(NH,Object.assign({delegate:l,ref:n},o),s)};Ql(RH,"IonNav");const AH=Z.createContext({activeTab:void 0,selectTab:()=>!1}),DH=typeof HTMLElement<"u"?HTMLElement:class{};class _H extends Z.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||yu(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:n,children:o,routeInfo:s}=e,r=Rn(e,["StackManager","children","routeInfo"]);return Z.createElement(Ey.Consumer,null,i=>(this.ionLifeCycleContext=i,Z.createElement(n,{routeInfo:s},Z.createElement(fx,Object.assign({setRef:a=>this.ionRouterOutlet=a},r),o))))}static get contextType(){return Oy}}class OH extends Z.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),n=this.props,{children:o,forwardedRef:s}=n,r=Rn(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?r.ionPage?Z.createElement(_H,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},r),o):Z.createElement(e,{routeInfo:this.context.routeInfo},Z.createElement(fx,Object.assign({},r,{forwardedRef:s}),o)):Z.createElement(fx,Object.assign({ref:s},this.props),this.props.children)}static get contextType(){return or}}const px=Ql(OH,"IonRouterOutlet"),xl=(()=>class extends Z.Component{constructor(t){super(t),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const t=this.props,e=Rn(t,["onClick"]);return Z.createElement($H,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class FH extends Z.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=o=>{};const n={};Z.Children.forEach(e.children,o=>{var s,r,i,a;o!=null&&typeof o=="object"&&o.props&&(o.type===xl||o.type.isTabButton)&&(n[o.props.tab]={originalHref:o.props.href,currentHref:o.props.href,originalRouteOptions:o.props.href===((s=e.routeInfo)===null||s===void 0?void 0:s.pathname)?(r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions:void 0,currentRouteOptions:o.props.href===((i=e.routeInfo)===null||i===void 0?void 0:i.pathname)?(a=e.routeInfo)===null||a===void 0?void 0:a.routeOptions:void 0})}),this.state={tabs:n},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,o=Object.keys(e).find(s=>{const r=e[s].originalHref;return this.props.routeInfo.pathname.startsWith(r)});o&&this.setState({activeTab:o})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const n=this.state.tabs[e];return n?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:n.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,n){var o,s,r;const i=Object.assign({},n.tabs),l=Object.keys(n.tabs).find(u=>{const d=n.tabs[u].originalHref;return e.routeInfo.pathname.startsWith(d)});Z.Children.forEach(e.children,u=>{if(u!=null&&typeof u=="object"&&u.props&&(u.type===xl||u.type.isTabButton)){const d=i[u.props.tab];(!d||d.originalHref!==u.props.href)&&(i[u.props.tab]={originalHref:u.props.href,currentHref:u.props.href,originalRouteOptions:u.props.routeOptions,currentRouteOptions:u.props.routeOptions})}});const{activeTab:c}=n;if(l&&c){const u=n.tabs[c].currentHref,d=n.tabs[c].currentRouteOptions;(l!==c||u!==((o=e.routeInfo)===null||o===void 0?void 0:o.pathname)||d!==((s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions))&&(i[l]={originalHref:i[l].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:i[l].originalRouteOptions,currentRouteOptions:(r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions},e.routeInfo.routeAction==="pop"&&l!==c&&(i[c]={originalHref:i[c].originalHref,currentHref:i[c].originalHref,originalRouteOptions:i[c].originalRouteOptions,currentRouteOptions:i[c].currentRouteOptions}))}return l&&e.onSetCurrentTab(l,e.routeInfo),{activeTab:l,tabs:i}}onTabButtonClick(e,n){const o=this.state.tabs[e.detail.tab],s=o.originalHref,r=e.detail.href,{activeTab:i}=this.state;n&&n(e),i===e.detail.tab?s!==r&&this.context.resetTab(e.detail.tab,s,o.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,r,e.detail.routeOptions))}renderTabButton(e){return n=>{var o,s;if(n!=null&&n.props&&(n.type===xl||n.type.isTabButton)){const r=n.props.tab===e?(o=this.props.routeInfo)===null||o===void 0?void 0:o.pathname:this.state.tabs[n.props.tab].currentHref,i=n.props.tab===e?(s=this.props.routeInfo)===null||s===void 0?void 0:s.routeOptions:this.state.tabs[n.props.tab].currentRouteOptions;return Z.cloneElement(n,{href:r,routeOptions:i,onClick:a=>this.onTabButtonClick(a,n.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return Z.createElement(kH,Object.assign({},this.props,{selectedTab:e}),Z.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return or}}const PH=Z.memo(t=>{var{forwardedRef:e}=t,n=Rn(t,["forwardedRef"]);const o=pt.useContext(or);return Z.createElement(FH,Object.assign({ref:e},n,{routeInfo:n.routeInfo||o.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:o.setCurrentTab}),n.children)}),mx=Ql(PH,"IonTabBar");class LH extends DH{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",LH));const sI={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},rI={position:"relative",flex:1,contain:"layout size style"},MH=(()=>class extends Z.Component{constructor(t){super(t),this.routerOutletRef=Z.createRef(),this.tabBarRef=Z.createRef(),this.ionTabContextState={activeTab:void 0,selectTab:()=>!1}}componentDidMount(){this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=t=>{this.ionTabContextState.activeTab=t},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}render(){let t,e;const n=this.props,{className:o,onIonTabsDidChange:s,onIonTabsWillChange:r}=n,i=Rn(n,["className","onIonTabsDidChange","onIonTabsWillChange"]),a=typeof this.props.children=="function"?this.props.children(this.ionTabContextState):this.props.children;if(Z.Children.forEach(a,l=>{if(l==null||typeof l!="object"||!l.hasOwnProperty("type"))return;l.type===px||l.type.isRouterOutlet?t=Z.cloneElement(l):l.type===pt.Fragment&&l.props.children[0].type===px&&(t=l.props.children[0]);let c={ref:this.tabBarRef};s!==void 0&&(c=Object.assign(Object.assign({},c),{onIonTabsDidChange:s})),r!==void 0&&(c=Object.assign(Object.assign({},c),{onIonTabsWillChange:r})),l.type===mx||l.type.isTabBar?e=Z.cloneElement(l,c):l.type===pt.Fragment&&(l.props.children[1].type===mx||l.props.children[1].type.isTabBar)&&(e=Z.cloneElement(l.props.children[1],c))}),!t)throw new Error("IonTabs must contain an IonRouterOutlet");if(!e)throw new Error("IonTabs needs a IonTabBar");return Z.createElement(AH.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?Z.createElement(Fy,Object.assign({className:o?"".concat(o):"",routeInfo:this.context.routeInfo},i),Z.createElement("ion-tabs",{className:"ion-tabs",style:sI},e.props.slot==="top"?e:null,Z.createElement("div",{style:rI,className:"tabs-inner"},t),e.props.slot==="bottom"?e:null)):Z.createElement("div",Object.assign({className:o?"".concat(o):"ion-tabs"},i,{style:sI}),e.props.slot==="top"?e:null,Z.createElement("div",{style:rI,className:"tabs-inner"},t),e.props.slot==="bottom"?e:null))}static get contextType(){return or}})();class zH extends Z.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,n;const o=this.props,{icon:s,ios:r,md:i,mode:a}=o,l=Rn(o,["icon","ios","md","mode"]);let c;const u=Dy(),d=a||(u==null?void 0:u.get("mode"));return r||i?d==="ios"?c=(e=r!=null?r:i)!==null&&e!==void 0?e:s:c=(n=i!=null?i:r)!==null&&n!==void 0?n:s:c=s,Z.createElement(IH,Object.assign({ref:this.props.forwardedRef,icon:c},l),this.props.children)}static get contextType(){return or}}const ji=Ql(zH,"IonIcon");class Ly extends Z.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!Ly?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):Z.createElement(e,Object.assign({},this.props))}static get contextType(){return or}}class XN extends Z.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!XN?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):Z.createElement(e,Object.assign({},this.props))}static get contextType(){return or}}const BH=Z.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class cbe extends Z.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=cB(e.id)}setupAnimation(e){const n=this.animation;this.nodes.size>0&&n.addElement(Array.from(this.nodes.values())),iI(n,e),aI(n,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const n=this.animation,o=this.props;iI(n,o,e),VH(n,o,e),aI(n,o,e)}render(){const{children:e}=this.props;return Z.createElement(Z.Fragment,null,Z.Children.map(e,(n,o)=>Z.cloneElement(n,{ref:s=>this.nodes.set(o,s)})))}}const iI=(t,e={},n={})=>{const o=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in e)e.hasOwnProperty(l)&&!o.includes(l)&&e[l]!==n[l]&&t[l](e[l]);const s=e.from;s&&s!==n.from&&(Array.isArray(s)?s:[s]).forEach(c=>t.from(c.property,c.value));const r=e.to;r&&r!==n.to&&(Array.isArray(r)?r:[r]).forEach(c=>t.to(c.property,c.value));const i=e.fromTo;i&&i!==n.fromTo&&(Array.isArray(i)?i:[i]).forEach(c=>t.fromTo(c.property,c.fromValue,c.toValue));const a=e.onFinish;a&&a!==n.onFinish&&(Array.isArray(a)?a:[a]).forEach(c=>t.onFinish(c.callback,c.opts))},VH=(t,e={},n={})=>{var o,s,r,i,a;const{progressStart:l,progressStep:c,progressEnd:u}=e;l&&(((o=n.progressStart)===null||o===void 0?void 0:o.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((s=n.progressStart)===null||s===void 0?void 0:s.step)!==(l==null?void 0:l.step))&&t.progressStart(l.forceLinearEasing,l.step),c&&((r=n.progressStep)===null||r===void 0?void 0:r.step)!==(c==null?void 0:c.step)&&t.progressStep(c.step),u&&(((i=n.progressEnd)===null||i===void 0?void 0:i.playTo)!==(u==null?void 0:u.playTo)||((a=n.progressEnd)===null||a===void 0?void 0:a.step)!==(u==null?void 0:u.step)||(n==null?void 0:n.dur)!==(u==null?void 0:u.dur))&&t.progressEnd(u.playTo,u.step,u.dur)},aI=(t,e={},n={})=>{!n.play&&e.play&&t.play(),!n.pause&&e.pause&&t.pause(),!n.stop&&e.stop&&t.stop(),!n.destroy&&e.destroy&&t.destroy()},lI={main:0},ep=(t="main")=>{var e;const n=((e=lI[t])!==null&&e!==void 0?e:0)+1;return lI[t]=n,n.toString()},WH=(t={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),UB(Object.assign({},t))},YN=Z.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class cI extends Z.Component{constructor(e){super(e),this.ionLifeCycleContext=new lH,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return Z.createElement(Ey.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class UH{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const n=this._getRouteInfosByKey(e);n&&(n.forEach(o=>{this.locationHistory=this.locationHistory.filter(s=>s.id!==o.id)}),this.tabHistory[e]=[])}update(e){const n=this.locationHistory.findIndex(s=>s.id===e.id);n>-1&&this.locationHistory.splice(n,1,e);const o=this.tabHistory[e.tab||""];if(o){const s=o.findIndex(r=>r.id===e.id);s>-1?o.splice(s,1,e):o.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const n=this._getRouteInfosByKey(e.tab);n&&(this._areRoutesEqual(n[n.length-1],e)&&n.pop(),n.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,n){return!e||!n?!1:e.pathname===n.pathname&&e.search===n.search}_pop(e){const n=this._getRouteInfosByKey(e.tab);n&&(n.pop(),n.pop(),n.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const n=this._getRouteInfosByKey(e.tab);n&&n.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(n=>this.tabHistory[n]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let n;return e&&(n=this.tabHistory[e],n||(n=this.tabHistory[e]=[])),n}getFirstRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[0]}getCurrentRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[n.length-1]}findLastLocation(e){const n=this._getRouteInfosByKey(e.tab);if(n)for(let o=n.length-2;o>=0;o--){const s=n[o];if(s&&s.pathname===e.pushedByRoute)return s}for(let o=this.locationHistory.length-2;o>=0;o--){const s=this.locationHistory[o];if(s&&s.pathname===e.pushedByRoute)return s}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class HH extends Z.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(n,o,s,r,i)=>{this.navigate(n,o,s,i,r)},back:n=>{this.goBack(void 0,n)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,n=>{this.nativeGoBack(),n()})}goBack(e,n){this.props.onNavigateBack(e,n)}nativeGoBack(){this.props.onNativeBack()}navigate(e,n="forward",o="push",s,r,i){this.props.onNavigate(e,o,n,s,r,i)}getPageManager(){return Fy}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return Z.createElement(or.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},Z.createElement(BH.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class GH{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:n}=e;this.viewStacks[n]?this.viewStacks[n].push(e):this.viewStacks[n]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:n}=e,o=this.viewStacks[n];if(o){const s=o.find(r=>r.id===e.id);s&&(s.mount=!1,this.viewStacks[n]=o.filter(r=>r.id!==s.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),n=[];return e.forEach(o=>{n.push(...this.viewStacks[o])}),n}}class jH extends Z.PureComponent{render(){return Z.createElement(Dc,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class qH extends GH{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,n,o,s){const r={id:ep("viewItem"),outletId:e,ionPageElement:s,reactElement:n,mount:!0,ionRoute:!1},i={exact:n.props.exact,path:n.props.path||n.props.from,component:n.props.component},a=ta(o.pathname,i);return n.type===Ly&&(r.ionRoute=!0,r.disableIonPageManagement=n.props.disableIonPageManagement),r.routeData={match:a,childProps:n.props},r}getChildrenToRender(e,n,o){const s=this.getViewItemsForOutlet(e);return Z.Children.forEach(n.props.children,i=>{const a=s.find(l=>uI(i,l.routeData.childProps.path||l.routeData.childProps.from));a&&(a.reactElement=i)}),s.map(i=>{let a;if(i.ionRoute&&!i.disableIonPageManagement)a=Z.createElement(cI,{key:"view-".concat(i.id),mount:i.mount,removeView:()=>this.remove(i)},Z.cloneElement(i.reactElement,{computedMatch:i.routeData.match}));else{const l=uI(i.reactElement,o.pathname);a=Z.createElement(cI,{key:"view-".concat(i.id),mount:i.mount,removeView:()=>this.remove(i)},Z.cloneElement(i.reactElement,{computedMatch:i.routeData.match})),!l&&i.routeData.match&&(i.routeData.match=void 0,i.mount=!1)}return a})}findViewItemByRouteInfo(e,n,o){const{viewItem:s,match:r}=this.findViewItemByPath(e.pathname,n);return(o===void 0||o===!0)&&s&&r&&(s.routeData.match=r),s}findLeavingViewItemByRouteInfo(e,n,o=!0){const{viewItem:s}=this.findViewItemByPath(e.lastPathname,n,!1,o);return s}findViewItemByPathname(e,n){const{viewItem:o}=this.findViewItemByPath(e,n);return o}findViewItemByPath(e,n,o,s){let r,i,a;if(n)a=this.getViewItemsForOutlet(n),a.some(l),r||a.some(c);else{const u=this.getAllViewItems();u.some(l),r||u.some(c)}return{viewItem:r,match:i};function l(u){if(s&&!u.ionRoute)return!1;const d={exact:o?!0:u.routeData.childProps.exact,path:u.routeData.childProps.path||u.routeData.childProps.from,component:u.routeData.childProps.component},h=ta(e,d);return h?(r=u,i=h,!0):!1}function c(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(i={path:e,url:e,isExact:!0,params:{}},r=u,!0):!1}}}function uI(t,e,n){const o={exact:n?!0:t.props.exact,path:t.props.path||t.props.from,component:t.props.component};return ta(e,o)}function KH(t){let e;if(typeof t=="string"?e=t:e=t.outerHTML,document){const n=document.createElement("div");n.innerHTML=e,n.style.zIndex="";const o=n.getElementsByTagName("ion-back-button");return o[0]&&o[0].remove(),n.firstChild}}const dI=t=>!t.classList.contains("ion-page-invisible")&&!t.classList.contains("ion-page-hidden");class XH extends Z.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=ep("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:n}=this.props.routeInfo,{pathname:o}=e.routeInfo;n!==o?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var n,o;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let s=this.context.findViewItemByRouteInfo(e,this.id),r=this.context.findLeavingViewItemByRouteInfo(e,this.id);!r&&e.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),r&&(e.routeAction==="replace"?r.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((n=e.routeOptions)===null||n===void 0)&&n.unmount&&(r.mount=!1):e.routeDirection!=="none"&&s!==r&&(r.mount=!1));const i=YH((o=this.ionRouterOutlet)===null||o===void 0?void 0:o.props.children,e);if(s?s.reactElement=i:i&&(s=this.context.createViewItem(this.id,i,e),this.context.addViewItem(s)),s&&s.ionPageElement){if(s===r&&s.routeData.match.url!==e.pathname||(!r&&this.props.routeInfo.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),dI(s.ionPageElement)&&r!==void 0&&!dI(r.ionPageElement)))return;this.transitionPage(e,s,r)}else r&&!i&&!s&&r.ionPageElement&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,n){const o=this.context.findViewItemByRouteInfo(n,this.id);if(o){const s=o.ionPageElement;if(o.ionPageElement=e,o.ionRoute=!0,s===e)return}this.handlePageTransition(n)}async setupRouterOutlet(e){const n=()=>{const r=Dy();if(!(r&&r.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:a}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},c=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!c&&c.mount&&c.routeData.match.path!==a.pathname},o=async()=>{const{routeInfo:r}=this.props,i=this.prevProps&&this.prevProps.routeInfo.pathname===r.pushedByRoute?this.prevProps.routeInfo:{pathname:r.pushedByRoute||""},a=this.context.findViewItemByRouteInfo(i,this.id,!1),l=this.context.findViewItemByRouteInfo(r,this.id,!1);return a&&l&&await this.transitionPage(r,a,l,"back",!0),Promise.resolve()},s=r=>{if(r)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:i}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===i.pushedByRoute?this.prevProps.routeInfo:{pathname:i.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(a,this.id,!1),c=this.context.findViewItemByRouteInfo(i,this.id,!1);if(l!==c&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:u}=l;u.setAttribute("aria-hidden","true"),u.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:n,onStart:o,onEnd:s}}async transitionPage(e,n,o,s,r=!1){const i=async(u,d)=>{const h=this.skipTransition;h?this.skipTransition=!1:(u.classList.add("ion-page"),u.classList.add("ion-page-invisible")),await a.commit(u,d,{duration:h||c===void 0?0:void 0,direction:c,showGoBack:!!e.pushedByRoute,progressAnimation:r,animationBuilder:e.routeAnimation})},a=this.routerOutletElement,l=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,c=s!=null?s:l;if(n&&n.ionPageElement&&this.routerOutletElement)if(o&&o.ionPageElement&&n===o)if(QH(o.reactElement,e.pathname,!0)){const d=KH(o.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await i(n.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await i(n.ionPageElement,void 0);else await i(n.ionPageElement,o==null?void 0:o.ionPageElement),o&&o.ionPageElement&&!r&&(o.ionPageElement.classList.add("ion-page-hidden"),o.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,n=Z.Children.only(e);this.ionRouterOutlet=n;const o=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return Z.createElement(Oy.Provider,{value:this.stackContextValue},Z.cloneElement(n,{ref:s=>{n.props.setRef&&n.props.setRef(s),n.props.forwardedRef&&(n.props.forwardedRef.current=s),this.routerOutletElement=s;const{ref:r}=n;typeof r=="function"&&r(s)}},o))}static get contextType(){return YN}}function YH(t,e){let n;return Z.Children.forEach(t,o=>{const s={exact:o.props.exact,path:o.props.path||o.props.from,component:o.props.component};ta(e.pathname,s)&&(n=o)}),n||(Z.Children.forEach(t,o=>{o.props.path||o.props.from||(n=o)}),n)}function QH(t,e,n){const o={exact:n?!0:t.props.exact,path:t.props.path||t.props.from,component:t.props.component};return ta(e,o)}class ZH extends Z.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new UH,this.viewStack=new qH,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const n={id:ep("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(n),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:n}}handleChangeTab(e,n,o){if(!n)return;const s=this.locationHistory.getCurrentRouteInfoForTab(e),[r,i]=n.split("?");s?(this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"push",routeDirection:"none"}),s.pathname===r?(this.incomingRouteParams.routeOptions=o,this.props.history.push(s.pathname+(s.search||""))):(this.incomingRouteParams.pathname=r,this.incomingRouteParams.search=i?"?"+i:void 0,this.incomingRouteParams.routeOptions=o,this.props.history.push(r+(i?"?"+i:"")))):this.handleNavigate(r,"push","none",void 0,o,e)}handleHistoryChange(e,n){var o,s,r;let i;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?i=this.locationHistory.previous():i=this.locationHistory.current():i=this.locationHistory.current(),i.pathname+i.search!==e.pathname){if(!this.incomingRouteParams){if(n==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),n==="POP"){const c=this.locationHistory.current();if(c&&c.pushedByRoute){const u=this.locationHistory.findLastLocation(c);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((o=e.state)===null||o===void 0?void 0:o.direction)||"forward",routeOptions:(s=e.state)===null||s===void 0?void 0:s.routerOptions,tab:this.currentTab})}let l;if(!((r=this.incomingRouteParams)===null||r===void 0)&&r.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:i.pathname}),this.locationHistory.add(l);else{const c=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:ep("routeInfo")},this.incomingRouteParams),{lastPathname:i.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:i.lastPathname}),c)l.tab=i.tab,l.pushedByRoute=i.pathname;else if(l.routeAction==="pop"){const u=this.locationHistory.findLastLocation(l);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==i.tab){const u=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="replace"){const u=this.locationHistory.current(),d=u==null?void 0:u.pushedByRoute,h=d!==void 0&&d!==l.pathname?d:l.pushedByRoute;l.lastPathname=(u==null?void 0:u.pathname)||l.lastPathname,l.prevRouteLastPathname=u==null?void 0:u.lastPathname,l.pushedByRoute=h,l.routeDirection=(u==null?void 0:u.routeDirection)||l.routeDirection,l.routeAnimation=(u==null?void 0:u.routeAnimation)||l.routeAnimation}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,n,o,s,r,i){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:n,routeDirection:o,routeOptions:r,routeAnimation:s,tab:i}),n==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",n){const o=Dy();e=e||o&&o.get("backButtonDefaultHref");const s=this.locationHistory.current();if(s&&s.pushedByRoute){const r=this.locationHistory.findLastLocation(s);if(r)if(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"pop",routeDirection:"back",routeAnimation:n||s.routeAnimation}),s.lastPathname===s.pushedByRoute||r.pathname===s.pushedByRoute&&s.tab===""&&r.tab===""){const i=this.props.history;(i.goBack||i.back)()}else this.handleNavigate(r.pathname+(r.search||""),"pop","back",n);else this.handleNavigate(e,"pop","back",n)}else this.handleNavigate(e,"pop","back",n)}handleResetTab(e,n,o){const s=this.locationHistory.getFirstRouteInfoForTab(e);if(s){const r=Object.assign({},s);r.pathname=n,r.routeOptions=o,this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(r.pathname+(r.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const n=Object.assign({},this.locationHistory.current());n.tab!==e&&(n.tab=e,this.locationHistory.update(n))}render(){return Z.createElement(YN.Provider,{value:this.routeMangerContextState},Z.createElement(HH,{ionRoute:jH,ionRedirect:{},stackManager:XH,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const km=l4(ZH);km.displayName="IonRouter";class JH extends Z.Component{constructor(e){super(e);const{history:n}=e,o=Rn(e,["history"]);this.history=n||dz(o),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const o=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(o,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,o=Rn(e,["children"]);return Z.createElement(Vu,Object.assign({history:this.history},o),Z.createElement(km,{registerHistoryListener:this.registerHistoryListener},n))}}class ube extends Z.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const o=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(o,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,o=Rn(e,["children"]);return Z.createElement(Vu,Object.assign({},o),Z.createElement(km,{registerHistoryListener:this.registerHistoryListener},n))}}class dbe extends Z.Component{constructor(e){super(e);const{history:n}=e,o=Rn(e,["history"]);this.history=n||pz(o),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const o=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(o,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,o=Rn(e,["children"]);return Z.createElement(Vu,Object.assign({history:this.history},o),Z.createElement(km,{registerHistoryListener:this.registerHistoryListener},n))}}const e6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",t6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M420 48h-68V28a12 12 0 00-12-12H172a12 12 0 00-12 12v20H92a12 12 0 00-12 12v424a12 12 0 0012 12h328a12 12 0 0012-12V60a12 12 0 00-12-12zm-84.13 64H176.13V80h159.74z'/></svg>",QN="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M473.66 210c-16.56-12.3-37.7-20.75-59.52-24-6.62-39.18-24.21-72.67-51.3-97.45-28.69-26.3-66.63-40.76-106.84-40.76-35.35 0-68 11.08-94.37 32.05a149.61 149.61 0 00-45.32 60.49c-29.94 4.6-57.12 16.68-77.39 34.55C13.46 197.33 0 227.24 0 261.39c0 34.52 14.49 66 40.79 88.76 25.12 21.69 58.94 33.64 95.21 33.64h104V230.42l-48 48-22.63-22.63L256 169.17l86.63 86.62L320 278.42l-48-48v153.37h124c31.34 0 59.91-8.8 80.45-24.77 23.26-18.1 35.55-44 35.55-74.83 0-29.94-13.26-55.61-38.34-74.19zM240 383.79h32v80.41h-32z'/></svg>",n6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M450.29 112H142c-34 0-62 27.51-62 61.33v245.34c0 33.82 28 61.33 62 61.33h308c34 0 62-26.18 62-60V173.33c0-33.82-27.68-61.33-61.71-61.33zm-77.15 61.34a46 46 0 11-46.28 46 46.19 46.19 0 0146.28-46.01zm-231.55 276c-17 0-29.86-13.75-29.86-30.66v-64.83l90.46-80.79a46.54 46.54 0 0163.44 1.83L328.27 337l-113 112.33zM480 418.67a30.67 30.67 0 01-30.71 30.66H259L376.08 333a46.24 46.24 0 0159.44-.16L480 370.59z'/><path d='M384 32H64A64 64 0 000 96v256a64.11 64.11 0 0048 62V152a72 72 0 0172-72h326a64.11 64.11 0 00-62-48z'/></svg>",o6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 464H96a48.05 48.05 0 01-48-48V96a48.05 48.05 0 0148-48h320a48.05 48.05 0 0148 48v320a48.05 48.05 0 01-48 48z'/></svg>",s6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z' class='ionicon-fill-none'/><path d='M292 64h-72a4 4 0 00-4 4v28h80V68a4 4 0 00-4-4z' class='ionicon-fill-none'/><path d='M447.55 96H336V48a16 16 0 00-16-16H192a16 16 0 00-16 16v48H64.45L64 136h33l20.09 314A32 32 0 00149 480h214a32 32 0 0031.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 014-4h72a4 4 0 014 4zm40 320h-33l9-256h33z'/></svg>";/*! Capacitor: https://capacitorjs.com/ - MIT License */const r6=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(r,i)=>{n.platforms.set(r,i)},s=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=o,n.setPlatform=s,n},i6=t=>t.CapacitorPlatforms=r6(t),ZN=i6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});ZN.addPlatform;ZN.setPlatform;var Dl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Dl||(Dl={}));class Ub extends Error{constructor(e,n,o){super(e),this.message=e,this.code=n,this.data=o}}const a6=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},l6=t=>{var e,n,o,s,r;const i=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},l=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,u=()=>i!==null?i.name:a6(t),d=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,h=()=>d()!=="web",f=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||h,p=k=>{const C=y.get(k);return!!(C!=null&&C.platforms.has(d())||g(k))},m=((o=c==null?void 0:c.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||p,b=k=>{var C;return(C=a.PluginHeaders)===null||C===void 0?void 0:C.find(E=>E.name===k)},g=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||b,x=k=>t.console.error(k),v=(k,C,E)=>Promise.reject("".concat(E,' does not have an implementation of "').concat(C,'".')),y=new Map,w=(k,C={})=>{const E=y.get(k);if(E)return console.warn('Capacitor plugin "'.concat(k,'" already registered. Cannot register plugins twice.')),E.proxy;const S=d(),T=g(k);let P;const U=async()=>(!P&&S in C?P=typeof C[S]=="function"?P=await C[S]():P=C[S]:i!==null&&!P&&"web"in C&&(P=typeof C.web=="function"?P=await C.web():P=C.web),P),W=(D,V)=>{var H,K;if(T){const ee=T==null?void 0:T.methods.find(J=>V===J.name);if(ee)return ee.rtype==="promise"?J=>a.nativePromise(k,V.toString(),J):(J,ne)=>a.nativeCallback(k,V.toString(),J,ne);if(D)return(H=D[V])===null||H===void 0?void 0:H.bind(D)}else{if(D)return(K=D[V])===null||K===void 0?void 0:K.bind(D);throw new Ub('"'.concat(k,'" plugin is not implemented on ').concat(S),Dl.Unimplemented)}},z=D=>{let V;const H=(...K)=>{const ee=U().then(J=>{const ne=W(J,D);if(ne){const re=ne(...K);return V=re==null?void 0:re.remove,re}else throw new Ub('"'.concat(k,".").concat(D,'()" is not implemented on ').concat(S),Dl.Unimplemented)});return D==="addListener"&&(ee.remove=async()=>V()),ee};return H.toString=()=>"".concat(D.toString(),"() { [capacitor code] }"),Object.defineProperty(H,"name",{value:D,writable:!1,configurable:!1}),H},B=z("addListener"),q=z("removeListener"),R=(D,V)=>{const H=B({eventName:D},V),K=async()=>{const J=await H;q({eventName:D,callbackId:J},V)},ee=new Promise(J=>H.then(()=>J({remove:K})));return ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await K()},ee},A=new Proxy({},{get(D,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?R:B;case"removeListener":return q;default:return z(V)}}});return l[k]=A,y.set(k,{name:k,proxy:A,platforms:new Set([...Object.keys(C),...T?[S]:[]])}),A},$=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||w;return a.convertFileSrc||(a.convertFileSrc=k=>k),a.getPlatform=d,a.handleError=x,a.isNativePlatform=f,a.isPluginAvailable=m,a.pluginMethodNoop=v,a.registerPlugin=$,a.Exception=Ub,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},c6=t=>t.Capacitor=l6(t),$u=c6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Gu=$u.registerPlugin,u6=$u.Plugins;class JN{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const r=async()=>this.removeListener(e,n),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const o=this.listeners[e];o&&o.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(e="not implemented"){return new $u.Exception(e,Dl.Unimplemented)}unavailable(e="not available"){return new $u.Exception(e,Dl.Unavailable)}async removeListener(e,n){const o=this.listeners[e];if(!o)return;const s=o.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const hI=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),fI=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d6 extends JN{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=fI(s).trim(),r=fI(r).trim(),n[s]=r}),n}async setCookie(e){try{const n=hI(e.key),o=hI(e.value),s="; expires=".concat((e.expires||"").replace("expires=","")),r=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(n,"=").concat(o||"").concat(s,"; path=").concat(r,"; ").concat(i,";")}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Gu("CapacitorCookies",{web:()=>new d6});const h6=async t=>new Promise((e,n)=>{const o=new FileReader;o.onload=()=>{const s=o.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>n(s),o.readAsDataURL(t)}),f6=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,r,i)=>(s[r]=t[e[i]],s),{})},p6=(t,e=!0)=>t?Object.entries(t).reduce((o,s)=>{const[r,i]=s;let a,l;return Array.isArray(i)?(l="",i.forEach(c=>{a=e?encodeURIComponent(c):c,l+="".concat(r,"=").concat(a,"&")}),l.slice(0,-1)):(a=e?encodeURIComponent(i):i,l="".concat(r,"=").concat(a)),"".concat(o,"&").concat(l)},"").substr(1):null,m6=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=f6(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[i,a]of Object.entries(t.data||{}))r.set(i,a);n.body=r.toString()}else if(s.includes("multipart/form-data")){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{r.append(l,a)});else for(const a of Object.keys(t.data))r.append(a,t.data[a]);n.body=r;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class g6 extends JN{async request(e){const n=m6(e,e.webFetchExtra),o=p6(e.params,e.shouldEncodeUrlParams),s=o?"".concat(e.url,"?").concat(o):e.url,r=await fetch(s,n),i=r.headers.get("content-type")||"";let{responseType:a="text"}=r.ok?e:{};i.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await r.blob(),l=await h6(c);break;case"json":l=await r.json();break;case"document":case"text":default:l=await r.text()}const u={};return r.headers.forEach((d,h)=>{u[h]=d}),{data:l,headers:u,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Gu("CapacitorHttp",{web:()=>new g6});var tp;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(tp||(tp={}));var pI;(function(t){t.Rear="REAR",t.Front="FRONT"})(pI||(pI={}));var np;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(np||(np={}));const b6=Gu("Camera",{web:()=>Kt(()=>import("./web-d53a41df.js"),[]).then(t=>new t.CameraWeb)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6=1e-7,v6=1e-4;class eR{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class My{refCount(e){return Yn("refCount")}incRef(e){return Yn("incRef")}timerAvailable(){return!0}time(e){return Yn("time")}read(e){return Yn("read")}readSync(e){return Yn("readSync")}readToGPU(e,n){return Yn("readToGPU")}numDataIds(){return Yn("numDataIds")}disposeData(e,n){return Yn("disposeData")}write(e,n,o){return Yn("write")}move(e,n,o,s,r){return Yn("move")}createTensorFromGPUData(e,n,o){return Yn("createTensorFromGPUData")}memory(){return Yn("memory")}floatPrecision(){return Yn("floatPrecision")}epsilon(){return this.floatPrecision()===32?x6:v6}dispose(){return Yn("dispose")}}function Yn(t){throw new Error("'".concat(t,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Ka(t,e,n)}function ra(t,e,n){return Math.max(t,Math.min(e,n))}function zy(t){return t%2===0?t:t+1}function Ka(t,e,n){const o=t[e];t[e]=t[n],t[n]=o}function w6(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function I(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function By(t,e,n=""){I(Ve(t,e),()=>n+" Shapes ".concat(t," and ").concat(e," must match"))}function Vy(t){I(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Q(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ve(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function _l(t){return t%1===0}function gx(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function vl(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function mI(t,e=s=>0,n,o){return new Promise((s,r)=>{let i=0;const a=()=>{if(t()){s();return}i++;const l=e(i);if(n!=null&&i>=n){r();return}o!=null?o(a,l):setTimeout(a,l)};a()})}function tR(t,e){let n=1,o=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)n*=t[r];else if(t[r]===-1){if(o!==-1)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(o," and dim ").concat(r));o=r}else if(t[r]<0)throw Error("Shapes can not be < 0. Found ".concat(t[r]," at dim ").concat(r));if(o===-1){if(e>0&&e!==n)throw Error("Size(".concat(e,") must match the product of shape ").concat(t));return t}if(n===0)throw Error("Cannot infer the missing size in [".concat(t,"] when ")+"there are 0 elements");if(e%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(e," / ").concat(n));const s=t.slice();return s[o]=e/n,s}function Re(t,e){const n=e.length;return t=t==null?e.map((o,s)=>s):[].concat(t),I(t.every(o=>o>=-n&&o<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)),I(t.every(o=>_l(o)),()=>"All values in axis param must be integers but "+"got axis ".concat(t)),t.map(o=>o<0?n+o:o)}function gi(t,e){const n=[],o=[],s=e!=null&&Array.isArray(e)&&e.length===0,r=e==null||s?null:Re(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(r!=null){if(r[i]===a&&t[a]!==1)throw new Error("Can't squeeze axis ".concat(a," since its dim '").concat(t[a],"' is not 1"));(r[i]==null||r[i]>a)&&t[a]===1&&(n.push(t[a]),o.push(a)),r[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),o.push(a))}return{newShape:n,keptDims:o}}function bn(t,e){return $t(t,e)}function $t(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error("Unknown data type ".concat(t));return n}function $6(t,e){for(let n=0;n<t.length;n++){const o=t[n];if(isNaN(o)||!isFinite(o))throw Error("A tensor of type ".concat(e," being uploaded contains ").concat(o,"."))}}function k6(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function nR(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function op(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype ".concat(t))}function C6(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ju(t){return typeof t=="string"||t instanceof String}function I6(t){return typeof t=="boolean"}function bx(t){return typeof t=="number"}function Zl(t){return Array.isArray(t)?Zl(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":bx(t)?"float32":ju(t)?"string":I6(t)?"bool":"float32"}function xx(t){return!!(t&&t.constructor&&t.call&&t.apply)}function vx(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ve(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let o=e-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}function oR(t,e,n,o=!1){const s=new Array;if(e.length===1){const r=e[0]*(o?2:1);for(let i=0;i<r;i++)s[i]=n[t+i]}else{const r=e[0],i=e.slice(1),a=i.reduce((l,c)=>l*c)*(o?2:1);for(let l=0;l<r;l++)s[l]=oR(t+l*a,i,n,o)}return s}function $s(t,e,n=!1){if(t.length===0)return e[0];const o=t.reduce((s,r)=>s*r)*(n?2:1);if(o===0)return[];if(o!==e.length)throw new Error("[".concat(t,"] does not match the input size ").concat(e.length).concat(n?" for a complex tensor":"","."));return oR(0,t,e,n)}function S6(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error("Unknown dtype ".concat(e))}function Wy(t,e){const n=xn(t,e);for(let o=0;o<n.length;o++)n[o]=1;return n}function xn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type ".concat(e))}function sR(t,e){const n=t.reduce((o,s)=>o*s,1);if(e==null||e==="float32")return $s(t,new Float32Array(n));if(e==="int32")return $s(t,new Int32Array(n));if(e==="bool")return $s(t,new Uint8Array(n));throw new Error("Unknown data type ".concat(e))}function Tr(t){t.forEach(e=>{I(Number.isInteger(e)&&e>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(t,"]."))})}function qs(t,e,n){if(e===0)return 0;if(e===1)return t[0];let o=t[t.length-1];for(let s=0;s<t.length-1;++s)o+=n[s]*t[s];return o}function Jl(t,e,n){if(e===0)return[];if(e===1)return[t];const o=new Array(e);for(let s=0;s<o.length-1;++s)o[s]=Math.floor(t/n[s]),t-=o[s]*n[s];return o[o.length-1]=t,o}function Uy(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gI="tfjsflags";class E6{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=T6,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(j().getBool("IS_TEST")||j().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=n}registerFlag(e,n,o){if(this.flagRegistry[e]={evaluationFn:n,setHook:o},this.urlFlags[e]!=null){const s=this.urlFlags[e];j().getBool("IS_TEST")||j().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(s,".")),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Uy(n))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);gI in e&&e[gI].split(",").forEach(o=>{const[s,r]=o.split(":");this.urlFlags[s]=R6(s,r)})}}function T6(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(N6(e,o[0],o[1]),o.join("="))),e}function N6(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function R6(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:e}function j(){return rR}let rR=null;function A6(t){rR=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Hb;function iR(){if(Hb==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Hb=t}return Hb}function D6(){const t=iR();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Hy(t,e){const n=D6();if(n.has(t))return n.get(t);{const o=e();return n.set(t,o),n.get(t)}}const Cm="Abs",qu="Acos",Ku="Acosh",ec="Add",Gy="AddN",jy="All",qy="Any",Im="ArgMax",Sm="ArgMin",Xu="Asin",Yu="Asinh",Qu="Atan",Zu="Atanh",Ju="Atan2",Em="AvgPool",Ky="AvgPoolGrad",Tm="AvgPool3D",Xy="AvgPool3DGrad",Nm="BatchMatMul",Rm="BatchToSpaceND",Yy="Bincount",Qy="BitwiseAnd",_6="BroadcastTo",aR="BroadcastArgs",ed="Cast",td="Ceil",nd="ClipByValue",Zy="Complex",Am="ComplexAbs",Dm="Concat",_m="Conv2D",Jy="Conv2DBackpropFilter",Om="Conv2DBackpropInput",Fm="Conv3D",e1="Conv3DBackpropFilterV2",t1="Conv3DBackpropInputV2",od="Cos",sd="Cosh",n1="Cumprod",Pm="Cumsum",o1="CropAndResize",s1="DenseBincount",r1="DepthToSpace",Lm="DepthwiseConv2dNative",i1="DepthwiseConv2dNativeBackpropFilter",a1="DepthwiseConv2dNativeBackpropInput",lR="Diag",Mm="Dilation2D",yx="Dilation2DBackpropInput",wx="Dilation2DBackpropFilter",O6="Draw",rd="RealDiv",l1="Einsum",id="Elu",c1="EluGrad",ad="Erf",zm="Equal",ld="Exp",Bm="ExpandDims",cd="Expm1",u1="FFT",d1="Fill",h1="FlipLeftRight",ud="Floor",dd="FloorDiv",Vm="FusedBatchNorm",Wm="GatherV2",cR="GatherNd",Um="Greater",hd="GreaterEqual",fd="Identity",f1="IFFT",p1="Imag",pd="IsFinite",md="IsInf",gd="IsNan",Hm="LeakyRelu",Gm="Less",jm="LessEqual",uR="LinSpace",bd="Log",xd="Log1p",qm="LogicalAnd",Km="LogicalNot",Xm="LogicalOr",F6="LogSoftmax",Ym="LRN",m1="LRNGrad",Qm="Max",vd="Maximum",Zm="MaxPool",g1="MaxPoolGrad",Jm="MaxPool3D",b1="MaxPool3DGrad",dR="MaxPoolWithArgmax",eg="Mean",tg="Min",yd="Minimum",ng="MirrorPad",wd="Mod",hR="Multinomial",$d="Multiply",og="Neg",sg="NotEqual",x1="NonMaxSuppressionV3",v1="NonMaxSuppressionV4",y1="NonMaxSuppressionV5",rg="OnesLike",ig="OneHot",ag="Pack",lg="PadV2",kd="Pow",cg="Prelu",ug="Prod",fR="RaggedGather",pR="RaggedRange",mR="RaggedTensorToTensor",w1="Range",$1="Real",Cd="Reciprocal",Id="Relu",dg="Reshape",hg="ResizeNearestNeighbor",k1="ResizeNearestNeighborGrad",fg="ResizeBilinear",C1="ResizeBilinearGrad",Sd="Relu6",pg="Reverse",Ed="Round",Td="Rsqrt",gR="ScatterNd",bR="TensorScatterUpdate",xR="SearchSorted",mg="Select",Nd="Selu",gg="Slice",Rd="Sin",Ad="Sinh",Dd="Sign",_d="Sigmoid",Od="Softplus",Fd="Sqrt",bg="Sum",xg="SpaceToBatchND",vg="SplitV",yg="Softmax",vR="SparseFillEmptyRows",yR="SparseReshape",wR="SparseSegmentMean",$R="SparseSegmentSum",kR="SparseToDense",Pd="SquaredDifference",I1="Square",S1="StaticRegexReplace",E1="StridedSlice",CR="StringNGrams",IR="StringSplit",SR="StringToHashBucketFast",Ld="Sub",Md="Tan",zd="Tanh",Bd="Tile",T1="TopK",N1="Transform",yl="Transpose",R1="Unique",wg="Unpack",$g="UnsortedSegmentSum",kg="ZerosLike",Vd="Step",$x="FromPixels",A1="RotateWithOffset",sp="_FusedMatMul",rp="FusedConv2D",ER="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xo(...t){j().getBool("IS_TEST")||j().getBool("PROD")||console.warn(...t)}function P6(...t){j().getBool("IS_TEST")||j().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ip=Hy("kernelRegistry",()=>new Map),kx=Hy("gradRegistry",()=>new Map);function Cx(t,e){const n=NR(t,e);return ip.get(n)}function bI(t){return kx.get(t)}function xI(t){const e=ip.entries(),n=[];for(;;){const{done:o,value:s}=e.next();if(o)break;const[r,i]=s,[a]=r.split("_");a===t&&n.push(i)}return n}function TR(t){const{kernelName:e,backendName:n}=t,o=NR(e,n);ip.has(o)&&xo("The kernel '".concat(e,"' for backend ")+"'".concat(n,"' is already registered")),ip.set(o,t)}function L6(t){const{kernelName:e}=t;kx.has(e)&&j().getBool("DEBUG")&&xo("Overriding the gradient for '".concat(e,"'")),kx.set(e,t)}function NR(t,e){return"".concat(e,"_").concat(t)}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RR(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var AR=it,Wo=null;try{Wo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function it(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}it.prototype.__isLong__;Object.defineProperty(it.prototype,"__isLong__",{value:!0});function ho(t){return(t&&t.__isLong__)===!0}it.isLong=ho;var vI={},yI={};function ka(t,e){var n,o,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(o=yI[t],o)?o:(n=at(t,(t|0)<0?-1:0,!0),s&&(yI[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(o=vI[t],o)?o:(n=at(t,t<0?-1:0,!1),s&&(vI[t]=n),n))}it.fromInt=ka;function Uo(t,e){if(isNaN(t))return e?Vi:Ho;if(e){if(t<0)return Vi;if(t>=DR)return FR}else{if(t<=-$I)return no;if(t+1>=$I)return OR}return t<0?Uo(-t,e).neg():at(t%Ol|0,t/Ol|0,e)}it.fromNumber=Uo;function at(t,e,n){return new it(t,e,n)}it.fromBits=at;var ap=Math.pow;function D1(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ho;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return D1(t.substring(1),e,n).neg();for(var s=Uo(ap(n,8)),r=Ho,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var c=Uo(ap(n,a));r=r.mul(c).add(Uo(l))}else r=r.mul(s),r=r.add(Uo(l))}return r.unsigned=e,r}it.fromString=D1;function Ns(t,e){return typeof t=="number"?Uo(t,e):typeof t=="string"?D1(t,e):at(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}it.fromValue=Ns;var wI=65536,M6=1<<24,Ol=wI*wI,DR=Ol*Ol,$I=DR/2,kI=ka(M6),Ho=ka(0);it.ZERO=Ho;var Vi=ka(0,!0);it.UZERO=Vi;var cl=ka(1);it.ONE=cl;var _R=ka(1,!0);it.UONE=_R;var Ix=ka(-1);it.NEG_ONE=Ix;var OR=at(-1,2147483647,!1);it.MAX_VALUE=OR;var FR=at(-1,-1,!0);it.MAX_UNSIGNED_VALUE=FR;var no=at(0,-2147483648,!1);it.MIN_VALUE=no;var ce=it.prototype;ce.toInt=function(){return this.unsigned?this.low>>>0:this.low};ce.toNumber=function(){return this.unsigned?(this.high>>>0)*Ol+(this.low>>>0):this.high*Ol+(this.low>>>0)};ce.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(no)){var n=Uo(e),o=this.div(n),s=o.mul(n).sub(this);return o.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var r=Uo(ap(e,6),this.unsigned),i=this,a="";;){var l=i.div(r),c=i.sub(l.mul(r)).toInt()>>>0,u=c.toString(e);if(i=l,i.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};ce.getHighBits=function(){return this.high};ce.getHighBitsUnsigned=function(){return this.high>>>0};ce.getLowBits=function(){return this.low};ce.getLowBitsUnsigned=function(){return this.low>>>0};ce.getNumBitsAbs=function(){if(this.isNegative())return this.eq(no)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ce.isZero=function(){return this.high===0&&this.low===0};ce.eqz=ce.isZero;ce.isNegative=function(){return!this.unsigned&&this.high<0};ce.isPositive=function(){return this.unsigned||this.high>=0};ce.isOdd=function(){return(this.low&1)===1};ce.isEven=function(){return(this.low&1)===0};ce.equals=function(e){return ho(e)||(e=Ns(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ce.eq=ce.equals;ce.notEquals=function(e){return!this.eq(e)};ce.neq=ce.notEquals;ce.ne=ce.notEquals;ce.lessThan=function(e){return this.comp(e)<0};ce.lt=ce.lessThan;ce.lessThanOrEqual=function(e){return this.comp(e)<=0};ce.lte=ce.lessThanOrEqual;ce.le=ce.lessThanOrEqual;ce.greaterThan=function(e){return this.comp(e)>0};ce.gt=ce.greaterThan;ce.greaterThanOrEqual=function(e){return this.comp(e)>=0};ce.gte=ce.greaterThanOrEqual;ce.ge=ce.greaterThanOrEqual;ce.compare=function(e){if(ho(e)||(e=Ns(e)),this.eq(e))return 0;var n=this.isNegative(),o=e.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ce.comp=ce.compare;ce.negate=function(){return!this.unsigned&&this.eq(no)?no:this.not().add(cl)};ce.neg=ce.negate;ce.add=function(e){ho(e)||(e=Ns(e));var n=this.high>>>16,o=this.high&65535,s=this.low>>>16,r=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,f=0;return f+=r+c,h+=f>>>16,f&=65535,h+=s+l,d+=h>>>16,h&=65535,d+=o+a,u+=d>>>16,d&=65535,u+=n+i,u&=65535,at(h<<16|f,u<<16|d,this.unsigned)};ce.subtract=function(e){return ho(e)||(e=Ns(e)),this.add(e.neg())};ce.sub=ce.subtract;ce.multiply=function(e){if(this.isZero())return Ho;if(ho(e)||(e=Ns(e)),Wo){var n=Wo.mul(this.low,this.high,e.low,e.high);return at(n,Wo.get_high(),this.unsigned)}if(e.isZero())return Ho;if(this.eq(no))return e.isOdd()?no:Ho;if(e.eq(no))return this.isOdd()?no:Ho;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(kI)&&e.lt(kI))return Uo(this.toNumber()*e.toNumber(),this.unsigned);var o=this.high>>>16,s=this.high&65535,r=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,p=0;return p+=i*u,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*c,h+=f>>>16,f&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=r*c,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,d+=o*u+s*c+r*l+i*a,d&=65535,at(f<<16|p,d<<16|h,this.unsigned)};ce.mul=ce.multiply;ce.divide=function(e){if(ho(e)||(e=Ns(e)),e.isZero())throw Error("division by zero");if(Wo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Wo.div_u:Wo.div_s)(this.low,this.high,e.low,e.high);return at(n,Wo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Vi:Ho;var o,s,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Vi;if(e.gt(this.shru(1)))return _R;r=Vi}else{if(this.eq(no)){if(e.eq(cl)||e.eq(Ix))return no;if(e.eq(no))return cl;var i=this.shr(1);return o=i.div(e).shl(1),o.eq(Ho)?e.isNegative()?cl:Ix:(s=this.sub(e.mul(o)),r=o.add(s.div(e)),r)}else if(e.eq(no))return this.unsigned?Vi:Ho;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Ho}for(s=this;s.gte(e);){o=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(o)/Math.LN2),l=a<=48?1:ap(2,a-48),c=Uo(o),u=c.mul(e);u.isNegative()||u.gt(s);)o-=l,c=Uo(o,this.unsigned),u=c.mul(e);c.isZero()&&(c=cl),r=r.add(c),s=s.sub(u)}return r};ce.div=ce.divide;ce.modulo=function(e){if(ho(e)||(e=Ns(e)),Wo){var n=(this.unsigned?Wo.rem_u:Wo.rem_s)(this.low,this.high,e.low,e.high);return at(n,Wo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ce.mod=ce.modulo;ce.rem=ce.modulo;ce.not=function(){return at(~this.low,~this.high,this.unsigned)};ce.and=function(e){return ho(e)||(e=Ns(e)),at(this.low&e.low,this.high&e.high,this.unsigned)};ce.or=function(e){return ho(e)||(e=Ns(e)),at(this.low|e.low,this.high|e.high,this.unsigned)};ce.xor=function(e){return ho(e)||(e=Ns(e)),at(this.low^e.low,this.high^e.high,this.unsigned)};ce.shiftLeft=function(e){return ho(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?at(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):at(0,this.low<<e-32,this.unsigned)};ce.shl=ce.shiftLeft;ce.shiftRight=function(e){return ho(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?at(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):at(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ce.shr=ce.shiftRight;ce.shiftRightUnsigned=function(e){if(ho(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var o=this.low;return at(o>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?at(n,0,this.unsigned):at(n>>>e-32,0,this.unsigned)};ce.shru=ce.shiftRightUnsigned;ce.shr_u=ce.shiftRightUnsigned;ce.toSigned=function(){return this.unsigned?at(this.low,this.high,!1):this};ce.toUnsigned=function(){return this.unsigned?this:at(this.low,this.high,!0)};ce.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ce.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ce.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};it.fromBytes=function(e,n,o){return o?it.fromBytesLE(e,n):it.fromBytesBE(e,n)};it.fromBytesLE=function(e,n){return new it(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};it.fromBytesBE=function(e,n){return new it(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const PR=Gl(AR),z6=CL({__proto__:null,default:PR},[AR]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oi=PR||z6;function Cg(t){return Oi.fromString(t,!0,16)}const LR=Cg("c3a5c85c97cb3127"),_i=Cg("b492b66fbe98f273"),Sn=Cg("9ae16a3b2f90404f");function Sx(t){return t.xor(t.shru(47))}function MR(t,e,n){const o=t.slice(e,e+n);return Oi.fromBytes(Array.from(o),!0,!0)}function Ze(t,e){return MR(t,e,8)}function CI(t,e){return MR(t,e,4)}function Xt(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Zr(t,e,n=Cg("9ddfea08eb382d69")){let o=t.xor(e).mul(n);o=o.xor(o.shru(47));let s=e.xor(o).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function B6(t,e,n,o,s,r){s=s.add(t),r=Xt(r.add(s).add(o),21);const i=s;return s=s.add(e),s=s.add(n),r=r.add(Xt(s,44)),[s.add(o),r.add(i)]}function Fh(t,e,n,o){return B6(Ze(t,e),Ze(t,e+8),Ze(t,e+16),Ze(t,e+24),n,o)}function V6(t,e=t.length){if(e>=8){const n=Sn.add(e*2),o=Ze(t,0).add(Sn),s=Ze(t,e-8),r=Xt(s,37).mul(n).add(o),i=Xt(o,25).add(s).mul(n);return Zr(r,i,n)}if(e>=4){const n=Sn.add(e*2),o=CI(t,0);return Zr(o.shl(3).add(e),CI(t,e-4),n)}if(e>0){const n=t[0],o=t[e>>1],s=t[e-1],r=n+(o<<8),i=e+(s<<2);return Sx(Sn.mul(r).xor(LR.mul(i))).mul(Sn)}return Sn}function W6(t,e=t.length){const n=Sn.add(e*2),o=Ze(t,0).mul(_i),s=Ze(t,8),r=Ze(t,e-8).mul(n),i=Ze(t,e-16).mul(Sn);return Zr(Xt(o.add(s),43).add(Xt(r,30)).add(i),o.add(Xt(s.add(Sn),18)).add(r),n)}function U6(t,e=t.length){const n=Sn.add(e*2),o=Ze(t,0).mul(Sn),s=Ze(t,8),r=Ze(t,e-8).mul(n),i=Ze(t,e-16).mul(Sn),a=Xt(o.add(s),43).add(Xt(r,30)).add(i),l=Zr(a,o.add(Xt(s.add(Sn),18)).add(r),n),c=Ze(t,16).mul(n),u=Ze(t,24),d=a.add(Ze(t,e-32)).mul(n),h=l.add(Ze(t,e-24)).mul(n);return Zr(Xt(c.add(u),43).add(Xt(d,30)).add(h),c.add(Xt(u.add(o),18)).add(d),n)}function H6(t,e=t.length){const n=Oi.fromNumber(81,!0);if(e<=32)return e<=16?V6(t,e):W6(t,e);if(e<=64)return U6(t,e);let o=n,s=n.mul(_i).add(113),r=Sx(s.mul(Sn).add(113)).mul(Sn),i=[Oi.UZERO,Oi.UZERO],a=[Oi.UZERO,Oi.UZERO];o=o.mul(Sn).add(Ze(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do o=Xt(o.add(s).add(i[0]).add(Ze(t,l+8)),37).mul(_i),s=Xt(s.add(i[1]).add(Ze(t,l+48)),42).mul(_i),o=o.xor(a[1]),s=s.add(i[0]).add(Ze(t,l+40)),r=Xt(r.add(a[0]),33).mul(_i),i=Fh(t,l,i[1].mul(_i),o.add(a[0])),a=Fh(t,l+32,r.add(a[1]),s.add(Ze(t,l+16))),[r,o]=[o,r],l+=64;while(l!==c);const d=_i.add(r.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),o=Xt(o.add(s).add(i[0]).add(Ze(t,l+8)),37).mul(d),s=Xt(s.add(i[1]).add(Ze(t,l+48)),42).mul(d),o=o.xor(a[1].mul(9)),s=s.add(i[0].mul(9).add(Ze(t,l+40))),r=Xt(r.add(a[0]),33).mul(d),i=Fh(t,l,i[1].mul(d),o.add(a[0])),a=Fh(t,l+32,r.add(a[1]),s.add(Ze(t,l+16))),[r,o]=[o,r],Zr(Zr(i[0],a[0],d).add(Sx(s).mul(LR)).add(r),Zr(i[1],a[1],d).add(o),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bi(t,e){return e==="string"?Jr(t):Ca([t],e)}function G6(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Ca(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ia(t)),j().getBool("DEBUG")&&$6(t,e),G6(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let o=0;o<n.length;++o)Math.round(t[o])!==0&&(n[o]=1);return n}else throw new Error("Unknown data type ".concat(e))}function Mn(){return j().platform.now()}function Jr(t,e="utf-8"){return e=e||"utf-8",j().platform.encode(t,e)}function ii(t,e="utf-8"){return e=e||"utf-8",j().platform.decode(t,e)}function Yo(t){return j().platform.isTypedArray!=null?j().platform.isTypedArray(t):RR(t)}function ia(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Uy(t)||t==null||Yo(t)&&n)e.push(t);else if(Array.isArray(t)||Yo(t))for(let o=0;o<t.length;++o)ia(t[o],e,n);else{let o=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(o=Math.max(o,Number(s)));for(let s=0;s<=o;s++)ia(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new K6)}profileKernel(e,n,o){let s;const r=()=>{s=o()};let i;const a=Mn();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const c of s)c.dataSync();i=Promise.resolve({kernelMs:Mn()-a})}if(j().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{q6(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:o,timeMs:s,inputs:r,extraInfo:i}=e;o.forEach(a=>{Promise.all([a.data(),s,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function q6(t,e,n){if(e!=="float32")return!1;for(let o=0;o<t.length;o++){const s=t[o];if(isNaN(s)||!isFinite(s))return console.warn("Found ".concat(s," in the result of '").concat(n,"'")),!0}return!1}class K6{logKernelProfile(e,n,o,s,r,i){const a=typeof s=="number"?vl("".concat(s,"ms"),9):s.error,l=vl(e,25),c=n.rank,u=n.size,d=vl(n.shape.toString(),14);let h="";for(const f in r){const p=r[f];if(p!=null){const m=p.shape||n.shape,b=m.length;h+="".concat(f,": ").concat(b,"D ").concat(b>0?m:""," ")}}console.log("%c".concat(l,"	%c").concat(a,"	%c").concat(c,"D ").concat(d,"	%c").concat(u,"	%c").concat(h,"	%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6(t,e,n){const o={},s={};for(let l=0;l<e.length;l++)o[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<e.length;p++)if(o[h.id]){c.outputs.forEach(m=>o[m.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const r={};r[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(r[c.outputs[d].id]){for(const h in u)r[u[h].id]=!0,i[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&i[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];o[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function Y6(t,e,n,o){for(let s=e.length-1;s>=0;s--){const r=e[s],i=[];if(r.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),r.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(r.kernelName,"."));const a=r.gradient(i);for(const l in r.inputs){if(!(l in a))throw new Error("Cannot backprop through input ".concat(l,". ")+"Available gradients found: ".concat(Object.keys(a),"."));const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error("Error in gradient for op ".concat(r.kernelName,". The gradient of input ")+"".concat(l," must have 'float32' dtype, but has '").concat(c.dtype,"'"));const u=r.inputs[l];if(!Ve(c.shape,u.shape))throw new Error("Error in gradient for op ".concat(r.kernelName,". The gradient of input ")+"'".concat(l,"' has shape '").concat(c.shape,"', which does not match ")+"the shape of the input '".concat(u.shape,"'"));if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=o(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const II=20,Cc=3,Gb=7;function Q6(t,e,n,o){const s=ve(e),r=Z6(t,e,n,s),i=e.length,a=df(t,e,n,s,r),l=["Tensor"];return o&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(i)),l.push("  shape: [".concat(e,"]")),l.push("  values:")),l.push(a.map(c=>"    "+c).join("\n")),l.join("\n")}function Z6(t,e,n,o){const s=Q(e),r=o[o.length-1],i=new Array(r).fill(0),a=e.length,l=n==="complex64"?Fc(t):t;if(a>1)for(let c=0;c<s/r;c++){const u=c*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],Oc(l[u+d],0,n).length)}return i}function Oc(t,e,n){let o;return Array.isArray(t)?o="".concat(parseFloat(t[0].toFixed(Gb))," + ")+"".concat(parseFloat(t[1].toFixed(Gb)),"j"):ju(t)?o="'".concat(t,"'"):n==="bool"?o=zR(t):o=parseFloat(t.toFixed(Gb)).toString(),vl(o,e)}function zR(t){return t===0?"false":"true"}function df(t,e,n,o,s,r=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Fc(t);return[Oc(m[0],0,n)]}return n==="bool"?[zR(t[0])]:[t[0].toString()]}if(l===1){if(a>II){const b=Cc*i;let g=Array.from(t.slice(0,b)),x=Array.from(t.slice((a-Cc)*i,a*i));return n==="complex64"&&(g=Fc(g),x=Fc(x)),["["+g.map((v,y)=>Oc(v,s[y],n)).join(", ")+", ..., "+x.map((v,y)=>Oc(v,s[a-Cc+y],n)).join(", ")+"]"]}return["["+(n==="complex64"?Fc(t):Array.from(t)).map((b,g)=>Oc(b,s[g],n)).join(", ")+"]"]}const c=e.slice(1),u=o.slice(1),d=o[0]*i,h=[];if(a>II){for(let m=0;m<Cc;m++){const b=m*d,g=b+d;h.push(...df(t.slice(b,g),c,n,u,s,!1))}h.push("...");for(let m=a-Cc;m<a;m++){const b=m*d,g=b+d;h.push(...df(t.slice(b,g),c,n,u,s,m===a-1))}}else for(let m=0;m<a;m++){const b=m*d,g=b+d;h.push(...df(t.slice(b,g),c,n,u,s,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=",\n";for(let m=2;m<l;m++)p+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(r?"":p),h}function Fc(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rn{constructor(e,n,o){if(this.dtype=n,this.shape=e.slice(),this.size=Q(e),o!=null){const s=o.length;I(s===this.size,()=>"Length of values '".concat(s,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||$t(n,this.size),this.strides=ve(e)}set(e,...n){n.length===0&&(n=[0]),I(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const o=this.locToIndex(n);this.values[o]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const r="Requested out of range element at ".concat(e,". ")+"  Buffer shape=".concat(this.shape);throw new Error(r)}n++}let o=e[e.length-1];for(let s=0;s<e.length-1;++s)o+=this.strides[s]*e[s];return this.values[o]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let o=0;o<e.length-1;++o)n+=this.strides[o]*e[o];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(e/this.strides[o]),e-=n[o]*this.strides[o];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return fs().makeTensor(this.values,this.shape,this.dtype)}}let fs=null,Xa=null;function J6(t){fs=t}function eG(t){Xa=t}class Dt{constructor(e,n,o,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Q(e),this.strides=ve(e),this.dataId=o,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Xa.buffer(this.shape,this.dtype,e)}bufferSync(){return Xa.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return $s(this.shape,e,this.dtype==="complex64")}arraySync(){return $s(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=fs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(o=>ii(o))}catch(o){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),fs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=fs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>ii(n))}catch(n){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await fs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(fs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Xa.print(this,e)}clone(){return this.throwIfDisposed(),Xa.clone(this)}toString(e=!1){const n=this.dataSync();return Q6(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Xa.cast(this,e)}variable(e=!0,n,o){return this.throwIfDisposed(),fs().makeVariable(this,e,n,o)}}Object.defineProperty(Dt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Y(){return Hy("Tensor",()=>Dt)}Y();class lp extends Dt{constructor(e,n,o,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=o}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Ve(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));fs().disposeTensor(this),this.dataId=e.dataId,fs().incRef(this,null)}dispose(){fs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(lp,Symbol.hasInstance,{value:t=>t instanceof Dt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var SI;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(SI||(SI={}));var Ex;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Ex||(Ex={}));var Tx;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Tx||(Tx={}));var Nx;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Nx||(Nx={}));var Rx;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Rx||(Rx={}));const tG={float32:Nx,int32:Ex,bool:Tx,complex64:Rx};function lo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast ".concat(t," with ").concat(e))}return tG[t][e]}function _1(t){return lo(t,"int32")}function BR(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function VR(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t,e){if(t.dtype===e.dtype)return[t,e];const n=lo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function WR(t){const e=[];return UR(t,e,new Set),e}function UR(t,e,n){if(t==null)return;if(t instanceof Dt){e.push(t);return}if(!nG(t))return;const o=t;for(const s in o){const r=o[s];n.has(r)||(n.add(r),UR(r,e,n))}}function nG(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jb(t){return t.kernelName!=null}class EI{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Fl{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new EI}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const o=e[n];if(await this.initializeBackend(o).success){await this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,o=1){return e in this.registryFactory?(xo("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:o},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:o}=this.initializeBackend(e);if(!(o?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new j6(this.backendInstance),!0}setupRegisteredKernels(){xI(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){xI(e).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const o=n.factory();if(o&&!(o instanceof My)&&typeof o.then=="function"){const s=++this.pendingBackendInitId,r=o.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,xo("Initialization of backend ".concat(e," failed")),xo(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(o){return xo("Initialization of backend ".concat(e," failed")),xo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const o=e[n],{success:s,asyncInit:r}=this.initializeBackend(o);if(r||s)return{name:o,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const o=this.state.tensorInfo.get(n),s=o.backend,r=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),o.backend=e,e.move(n,r,o.shape,o.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let o=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}let s;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,o){e();try{const s=o();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Fl.nextTensorId++}nextVariableId(){return Fl.nextVariableId++}clone(e){const n=O.runKernel(fd,{x:e}),o={x:e},s=i=>({x:()=>{const a="float32",l={x:i},c={dtype:a};return O.runKernel(ed,l,c)}}),r=[];return this.addTapeNode(this.state.activeScope.name,o,[n],s,r,{}),n}runKernel(e,n,o){if(this.backendName==null&&this.backend,!(Cx(e,this.backendName)!=null))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:n,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,o){const s=this.backend.numDataIds();let r=0;o.forEach(l=>{r+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-r-i;if(a>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(a," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let n,o=[];const s=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=jb(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(jb(e)){const{kernelName:p,inputs:m,attrs:b}=e;this.backendName==null&&this.backend;const g=Cx(p,this.backendName);I(g!=null,()=>"Cannot find registered kernel '".concat(p,"' for backend '").concat(this.backendName,"'")),a=()=>{const x=this.backend.numDataIds();l=g.kernelFunc({inputs:m,attrs:b,backend:this.backend});const v=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,x,v);const y=v.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,y);o=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=e,m=b=>{s&&(o=b.map(g=>this.keep(this.clone(g))))};a=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,g),g}}const{inputs:u,attrs:d}=e,h=jb(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(c,u,n,h,o,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(e,n,o){const s=bI(e);if(s!=null){const r=s.inputsToSave||[],i=s.outputsToSave||[];let a;s.saveAllInputs?(I(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=r.map(c=>n[c]);const l=o.filter((c,u)=>i[u]);return a.concat(l)}return[]}makeTensor(e,n,o,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",s=s||this.backend;let r=e;o==="string"&&ju(e[0])&&(r=e.map(l=>Jr(l)));const i=s.write(r,n,o),a=new Dt(n,o,i,this.nextTensorId());if(this.trackTensor(a,s),o==="string"){const l=this.state.tensorInfo.get(i),c=C6(r);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,o,s){o=o||"float32";const r={dataId:e,shape:n,dtype:o};return this.makeTensorFromTensorInfo(r,s)}makeTensorFromTensorInfo(e,n){const{dataId:o,shape:s,dtype:r}=e,i=new Dt(s,r,o,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,o,s){o=o||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const r=new lp(e,n,o,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*op(e.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:o})),e instanceof lp||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const o=e.size*op(e.dtype);this.state.numBytes-=o}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,o,s,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:o,saved:r},l=bI(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=o[d],f=xn(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),s(c.length>1?c:c[0],r,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=WR(e),o=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!o.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===s.id&&this.track(r)})}gradients(e,n,o,s=!1){if(I(n.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(o.dtype,"'"));const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));I(r instanceof Dt,()=>"The result y returned by f() must be a tensor.");const i=X6(this.state.activeTape,n,r);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=o==null?oG(r.shape):o,Y6(a,i,c=>this.tidy(c),sG);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(e){return I(xx(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{I(n.every(a=>a instanceof Dt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o;const s={};n.forEach((a,l)=>{s[l]=a});const r=(a,l)=>(o=e(...n,l),I(o.value instanceof Dt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),I(xx(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),i=(a,l)=>{const c=o.gradFunc(a,l),u=Array.isArray(c)?c:[c];I(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),I(u.every(h=>h instanceof Dt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Mn(),o=await this.backend.time(e);return o.wallMs=Mn()-n,o}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new EI;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Fl.nextTensorId=0;Fl.nextVariableId=0;function oG(t){const e=Wy(Q(t),"float32");return O.makeTensor(e,t,"float32")}function HR(){const t=iR();if(t._tfengine==null){const e=new E6(t);t._tfengine=new Fl(e)}return A6(t._tfengine.ENV),J6(()=>t._tfengine),t._tfengine}const O=HR();function sG(t,e){const n={a:t,b:e};return O.runKernel(ec,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rG(){return typeof navigator<"u"&&navigator!=null}function GR(t){if(t||rG()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function jR(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Un=j();Un.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Un.registerFlag("IS_BROWSER",()=>jR());Un.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Un.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Un.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Un.registerFlag("PROD",()=>!1);Un.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Un.getBool("DEBUG"));Un.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Un.registerFlag("IS_TEST",()=>!1);Un.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Un.getBool("DEBUG"));Un.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Un.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Un.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wd(t,e){let n=t;if(Yo(t))return e==="string"?[]:[t.length];if(BR(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(VR(t))return[t.buffer.size/(e==null?4:op(e))];if(!Array.isArray(t))return[];const o=[];for(;Array.isArray(n)||Yo(n)&&e!=="string";)o.push(n.length),n=n[0];return Array.isArray(t)&&j().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&qR(t,o,[]),o}function qR(t,e,n){if(n=n||[],!Array.isArray(t)&&!Yo(t)){I(e.length===0,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(e[0]," elements"));return}I(e.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(t.length," elements")),I(t.length===e[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(e[0]," ")+"elements, but has ".concat(t.length," elements"));const o=e.slice(1);for(let s=0;s<t.length;++s)qR(t[s],o,n.concat(s))}function TI(t,e,n,o){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(o,"' must ")+"be ".concat(t," tensor, but got ").concat(e," tensor"))}}function N(t,e,n,o="numeric"){if(t instanceof Dt)return TI(o,t.dtype,e,n),t;let s=Zl(t);if(s!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(s=o),TI(o,s,e,n),t==null||!Yo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error("Argument '".concat(e,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(l,"'"))}const r=Wd(t,s);!Yo(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Ca(t,s):ia(t,[],!0);return O.makeTensor(a,r,s)}function KR(t,e,n,o="numeric"){if(!Array.isArray(t))throw new Error("Argument ".concat(e," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return t.map((r,i)=>N(r,"".concat(e,"[").concat(i,"]"),n,o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG="__op";function M(t){const e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(e.length," keys."));let n=e[0];const o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+iG;const s=(...r)=>{O.startScope(n);try{const i=o(...r);return Uy(i)&&console.error("Cannot return a Promise inside of tidy."),O.endScope(i),i}catch(i){throw O.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aG(t,e){const n=N(t,"real","complex"),o=N(e,"imag","complex");By(n.shape,o.shape,"real and imag shapes, ".concat(n.shape," and ").concat(o.shape,", ")+"must match in call to tf.complex().");const s={real:n,imag:o};return O.runKernel(Zy,s)}const aa=M({complex_:aG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ud(t,e,n,o){if(o==null)o=Zl(t);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(VR(t)||BR(t)){if(o!=="float32"&&o!=="int32")throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(o,"."));return O.backend.createTensorFromGPUData(t,e||n,o)}if(!Yo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Tr(e);const s=Q(e),r=Q(n);I(s===r,()=>"Based on the provided shape, [".concat(e,"], the tensor should have ")+"".concat(s," values but has ").concat(r));for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==Q(e.slice(i)):!0;I(n[i]===e[i]||!l,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(e,"). "))}}return!Yo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=o!=="string"?Ca(t,o):ia(t,[],!0),O.makeTensor(t,e,o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zc(t,e,n){const o=Wd(t,n);return Ud(t,e,o,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NI={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class xi{static join(e){return new xi(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(o=>Yo(o)?o.buffer:o),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let o=0;o<e.length;o++){const s=e[o];o!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=n+s.byteLength;this.shards.push({buffer:s,start:n,end:r}),n=r}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const o=this.findShardForByte(e);if(o===-1)throw new Error("Could not find start shard for byte ".concat(e));const s=n-e,r=new ArrayBuffer(s),i=new Uint8Array(r);let a=0;for(let l=o;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,h=a,p=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,p-d);if(i.set(m,h),a+=m.length,n<c.end)break}return r}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const o=lG(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}function lG(t,e){let n=0,o=t.length;for(;n<=o;){const s=Math.floor((o-n)/2)+n,r=e(t[s]);if(r===0)return s;r<0?o=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cp=4;async function RI(t,e){const n=[],o=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const a=s[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error("Unsupported dtype in weight '".concat(a,"': ").concat(l.dtype));const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((b,g)=>b+g.length,0)+cp*h.length,p=new Uint8Array(f);let m=0;for(let b=0;b<h.length;b++){const g=h[b],x=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(x,m),m+=cp,p.set(g,m),m+=g.length}d(p)});o.push(u)}else o.push(l.data());e!=null&&(c.group=e),n.push(c)}const r=await Promise.all(o);return{data:uG(r),specs:n}}function cG(t,e){const n=new xi(t),o={};let s,r=0;for(const i of e){const a=i.name,l=i.dtype,c=i.shape,u=Q(c);let d;if("quantization"in i){const h=i.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error("Weight ".concat(i.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else if(h.dtype==="float16"){if(l!=="float32")throw new Error("Weight ".concat(i.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(l,"."))}else throw new Error("Weight ".concat(i.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");const f=NI[h.dtype],p=n.slice(r,r+u*f),m=h.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(l==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){d=new Float32Array(m.length);for(let b=0;b<m.length;b++){const g=m[b];d[b]=g*h.scale+h.min}}else if(h.dtype==="float16")s===void 0&&(s=wG()),d=s(m);else throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");else if(l==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");d=new Int32Array(m.length);for(let b=0;b<m.length;b++){const g=m[b];d[b]=Math.round(g*h.scale+h.min)}}else throw new Error("Unsupported dtype in weight '".concat(a,"': ").concat(l));r+=u*f}else if(l==="string"){const h=Q(i.shape);d=[];for(let f=0;f<h;f++){const p=new Uint32Array(n.slice(r,r+cp))[0];r+=cp;const m=new Uint8Array(n.slice(r,r+p));d.push(m),r+=p}}else{const h=NI[l],f=n.slice(r,r+u*h);if(l==="float32")d=new Float32Array(f);else if(l==="int32")d=new Int32Array(f);else if(l==="bool")d=new Uint8Array(f);else if(l==="complex64"){d=new Float32Array(f);const p=new Float32Array(d.length/2),m=new Float32Array(d.length/2);for(let x=0;x<p.length;x++)p[x]=d[x*2],m[x]=d[x*2+1];const b=Zc(p,c,"float32"),g=Zc(m,c,"float32");o[a]=aa(b,g),b.dispose(),g.dispose()}else throw new Error("Unsupported dtype in weight '".concat(a,"': ").concat(l));r+=u*h}l!=="complex64"&&(o[a]=Zc(d,c,l))}return o}function uG(t){if(t===null)throw new Error("Invalid input value: ".concat(JSON.stringify(t)));let e=0;const n=[];t.forEach(r=>{if(e+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(r.constructor.name))});const o=new Uint8Array(e);let s=0;return n.forEach(r=>{o.set(new Uint8Array(r.buffer),s),s+=r.byteLength}),o.buffer}const O1=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function AI(t){return O1?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function dG(t){if(O1)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let o=0,s=e.length;o<s;o++)n+=String.fromCharCode(e[o]);return btoa(n)}function hG(t){if(O1){const o=Buffer.from(t,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;++o)n.set([e.charCodeAt(o)],o);return n.buffer}function fG(t){return xi.join(t)}function pG(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function mG(t,e,n){const o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(o.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=e,o.weightData=n}return t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(o.initializerSignature=t.initializerSignature),o}async function gG(t,e){let n,o;return t.weightsManifest!=null&&([n,o]=await e(t.weightsManifest)),mG(t,n,o)}function F1(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:AI(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:AI(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new xi(t.weightData).byteLength}}function bG(t){const e=[];for(const n of t)e.push(...n.weights);return e}function xG(){const t=n=>{let o=n<<13,s=0;for(;!(o&8388608);)s-=8388608,o<<=1;return o&=-8388609,s+=947912704,o|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function vG(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function yG(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function wG(){const t=xG(),e=vG(),n=yG();return o=>{const s=new ArrayBuffer(4*o.length),r=new Uint32Array(s);for(let i=0;i<o.length;i++){const a=o[i],l=t[n[a>>10]+(a&1023)]+e[a>>10];r[i]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jt{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return jt.instance==null&&(jt.instance=new jt),jt.instance}static registerSaveRouter(e){jt.getInstance().saveRouters.push(e)}static registerLoadRouter(e){jt.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return jt.getHandlers(e,"save")}static getLoadHandlers(e,n){return jt.getHandlers(e,"load",n)}static getHandlers(e,n,o){const s=[];return(n==="load"?jt.getInstance().loadRouters:jt.getInstance().saveRouters).forEach(i=>{const a=i(e,o);a!==null&&s.push(a)}),s}}const $G=t=>jt.getSaveHandlers(t),kG=(t,e)=>jt.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ax="tensorflowjs",Dx=1,Wi="models_store",Br="model_info_store";function XR(){if(!j().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function _x(t){const e=t.result;e.createObjectStore(Wi,{keyPath:"modelPath"}),e.createObjectStore(Br,{keyPath:"modelPath"})}class la{constructor(e){if(this.indexedDB=XR(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((o,s)=>{const r=this.indexedDB.open(Ax,Dx);r.onupgradeneeded=()=>_x(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(Wi,"readonly"),c=a.objectStore(Wi).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));o(c.result.modelArtifacts)},c.onerror=u=>(i.close(),s(c.error)),a.oncomplete=()=>i.close()}else{n.weightData=xi.join(n.weightData);const a=F1(n),l=i.transaction(Br,"readwrite");let c=l.objectStore(Br),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return s(h)}let d;u.onsuccess=()=>{d=i.transaction(Wi,"readwrite");const h=d.objectStore(Wi);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}f.onsuccess=()=>o({modelArtifactsInfo:a}),f.onerror=p=>{c=l.objectStore(Br);const m=c.delete(this.modelPath);m.onsuccess=()=>(i.close(),s(f.error)),m.onerror=b=>(i.close(),s(f.error))}},u.onerror=h=>(i.close(),s(u.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>s(r.error)})}}la.URL_SCHEME="indexeddb://";const YR=t=>j().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(la.URL_SCHEME)?CG(t.slice(la.URL_SCHEME.length)):null;jt.registerSaveRouter(YR);jt.registerLoadRouter(YR);function CG(t){return new la(t)}function IG(t){return t.startsWith(la.URL_SCHEME)?t.slice(la.URL_SCHEME.length):t}class SG{constructor(){this.indexedDB=XR()}async listModels(){return new Promise((e,n)=>{const o=this.indexedDB.open(Ax,Dx);o.onupgradeneeded=()=>_x(o),o.onsuccess=()=>{const s=o.result,r=s.transaction(Br,"readonly"),a=r.objectStore(Br).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),r.oncomplete=()=>s.close()},o.onerror=s=>n(o.error)})}async removeModel(e){return e=IG(e),new Promise((n,o)=>{const s=this.indexedDB.open(Ax,Dx);s.onupgradeneeded=()=>_x(s),s.onsuccess=()=>{const r=s.result,i=r.transaction(Br,"readwrite"),a=i.objectStore(Br),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return r.close(),o(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const u=a.delete(e),d=()=>{c=r.transaction(Wi,"readwrite");const f=c.objectStore(Wi).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>o(l.error)};u.onsuccess=d,u.onerror=h=>(d(),r.close(),o(l.error))}},l.onerror=u=>(r.close(),o(l.error)),i.oncomplete=()=>{c==null?r.close():c.oncomplete=()=>r.close()}},s.onerror=r=>o(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hr="/",Ya="tensorflowjs_models",QR="info",EG="model_topology",TG="weight_specs",NG="weight_data",RG="model_metadata";function ZR(t){return{info:[Ya,t,QR].join(hr),topology:[Ya,t,EG].join(hr),weightSpecs:[Ya,t,TG].join(hr),weightData:[Ya,t,NG].join(hr),modelMetadata:[Ya,t,RG].join(hr)}}function JR(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function AG(t){const e=t.split(hr);if(e.length<3)throw new Error("Invalid key format: ".concat(t));return e.slice(1,e.length-1).join(hr)}function DG(t){return t.startsWith(ca.URL_SCHEME)?t.slice(ca.URL_SCHEME.length):t}class ca{constructor(e){if(!j().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ZR(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),o=JSON.stringify(e.weightSpecs),s=F1(e),r=xi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,dG(r));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch(i){throw JR(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(s.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(s.weightSpecsBytes,", ")+"weightDataBytes=".concat(s.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");n.modelTopology=o;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");n.weightSpecs=s;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return n.weightData=hG(i),n}}ca.URL_SCHEME="localstorage://";const eA=t=>j().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ca.URL_SCHEME)?_G(t.slice(ca.URL_SCHEME.length)):null;jt.registerSaveRouter(eA);jt.registerLoadRouter(eA);function _G(t){return new ca(t)}class OG{constructor(){I(j().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),I(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ya+hr,o=hr+QR;for(let s=0;s<this.LS.length;++s){const r=this.LS.key(s);if(r.startsWith(n)&&r.endsWith(o)){const i=AG(r);e[i]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){e=DG(e);const n=ZR(e);if(this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '".concat(e,"'"));const o=JSON.parse(this.LS.getItem(n.info));return JR(n),o}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DI="://";class Ms{constructor(){this.managers={}}static getInstance(){return Ms.instance==null&&(Ms.instance=new Ms),Ms.instance}static registerManager(e,n){I(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(DI)&&(e=e.slice(0,e.indexOf(DI))),I(e.length>0,()=>"scheme must not be an empty string.");const o=Ms.getInstance();I(o.managers[e]==null,()=>"A model store manager is already registered for scheme '".concat(e,"'.")),o.managers[e]=n}static getManager(e){const n=Ms.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return n}static getSchemes(){return Object.keys(Ms.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FG{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got ".concat(n));return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!j().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();const s=this.functionRefs[o.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return RR(e)}}if(j().get("IS_BROWSER")){j().setPlatform("browser",new FG);try{Ms.registerManager(ca.URL_SCHEME,new OG)}catch(t){}try{Ms.registerManager(la.URL_SCHEME,new SG)}catch(t){}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PG={importFetch:()=>require("node-fetch")};let qb;class LG{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return j().global.fetch!=null?j().global.fetch(e,n):(qb==null&&(qb=PG.importFetch()),qb(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got ".concat(n));return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}j().get("IS_NODE")&&!j().get("IS_BROWSER")&&j().setPlatform("node",new LG);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ne(t,e="float32",n){return e=e||"float32",Tr(t),new rn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MG(t,e){const n=N(t,"x","cast");if(!k6(e))throw new Error("Failed to cast to unknown dtype ".concat(e));if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const o={x:n},s={dtype:e};return O.runKernel(ed,o,s)}const de=M({cast_:MG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zG(t){const n={x:N(t,"x","clone","string_or_numeric")};return O.runKernel(fd,n)}const qi=M({clone_:zG});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BG(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */HR();const VG={buffer:Ne,cast:de,clone:qi,print:BG};eG(VG);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(){return O}function Ox(){return O.memory()}function G(t,e){return O.tidy(t,e)}function Te(t){WR(t).forEach(n=>n.dispose())}function Ks(t){return O.keep(t)}function tA(t,e,n=1){return O.registerBackend(t,e,n)}function WG(){return O.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UG(t,e){let n=N(t,"a","add"),o=N(e,"b","add");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(ec,s)}const oe=M({add_:UG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t,e){let n=N(t,"a","floorDiv"),o=N(e,"b","floorDiv");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(dd,s)}const nA=M({floorDiv_:HG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GG(t,e){let n=N(t,"a","div"),o=N(e,"b","div");if([n,o]=Ct(n,o),n.dtype==="int32"&&o.dtype==="int32")return nA(n,o);const s={a:n,b:o},r={};return O.runKernel(rd,s,r)}const we=M({div_:GG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jG(t,e){let n=N(t,"a","mul"),o=N(e,"b","mul");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel($d,s)}const F=M({mul_:jG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qG(t){const e=N(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return O.runKernel(Am,n)}else{const n={x:e};return O.runKernel(Cm,n)}}const Cn=M({abs_:qG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KG(t){const n={x:N(t,"x","acos")};return O.runKernel(qu,n)}const XG=M({acos_:KG});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YG(t){const n={x:N(t,"x","acosh")};return O.runKernel(Ku,n)}const QG=M({acosh_:YG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZG(t,e=null,n=!1){const s={x:N(t,"x","all","bool")},r={axis:e,keepDims:n};return O.runKernel(jy,s,r)}const oA=M({all_:ZG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JG(t,e=null,n=!1){const s={x:N(t,"x","any","bool")},r={axis:e,keepDims:n};return O.runKernel(qy,s,r)}const Fx=M({any_:JG});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5(t,e=0){const o={x:N(t,"x","argMax")},s={axis:e};return O.runKernel(Im,o,s)}const ku=M({argMax_:e5});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(t,e=0){const o={x:N(t,"x","argMin")},s={axis:e};return O.runKernel(Sm,o,s)}const n5=M({argMin_:t5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5(t){const n={x:N(t,"x","asin")};return O.runKernel(Xu,n)}const s5=M({asin_:o5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5(t){const n={x:N(t,"x","asinh")};return O.runKernel(Yu,n)}const i5=M({asinh_:r5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5(t){const n={x:N(t,"x","atan")};return O.runKernel(Qu,n)}const l5=M({atan_:a5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5(t,e){let n=N(t,"a","atan2"),o=N(e,"b","atan2");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(Ju,s)}const u5=M({atan2_:c5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(t){const n={x:N(t,"x","atanh")};return O.runKernel(Zu,n)}const h5=M({atanh_:d5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(t,e,n,o,s="NHWC",r){const i=t[3],a=[...e,i],l=Rr(s);return cn(t,a,n,r,o,null,null,l)}function Zo(t,e,n,o,s,r,i="channelsLast"){const[a,l]=Cu(e);let c;if(i==="channelsLast")c=[a,l,t[3],t[3]];else if(i==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error("Unknown dataFormat ".concat(i));return cn(t,c,n,o,s,r,!1,i)}function Nr(t,e,n,o,s,r,i="NDHWC"){const[a,l,c]=Px(e);let u,d;if(i==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error("Unknown dataFormat ".concat(i));return vi(t,u,n,o,s,!1,d,r)}function cn(t,e,n,o,s,r,i=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error("Unknown dataFormat ".concat(a));const[h,f,,p]=e,[m,b]=Cu(n),[g,x]=Cu(o),v=wl(h,g),y=wl(f,x),{padInfo:w,outHeight:$,outWidth:k}=m5(s,c,u,m,b,v,y,r,a),C=i?p*d:p;let E;return a==="channelsFirst"?E=[l,C,$,k]:a==="channelsLast"&&(E=[l,$,k,C]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:$,outWidth:k,outChannels:C,padInfo:w,strideHeight:m,strideWidth:b,filterHeight:h,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:y,dilationHeight:g,dilationWidth:x,inShape:t,outShape:E,filterShape:e}}function vi(t,e,n,o,s,r=!1,i="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,u,d,h]=t;else if(i==="channelsFirst")[l,h,c,u,d]=t;else throw new Error("Unknown dataFormat ".concat(i));const[f,p,m,,b]=e,[g,x,v]=Px(n),[y,w,$]=Px(o),k=wl(f,y),C=wl(p,w),E=wl(m,$),{padInfo:S,outDepth:T,outHeight:P,outWidth:U}=g5(s,c,u,d,g,x,v,k,C,E,a),W=r?b*h:b;let z;return i==="channelsFirst"?z=[l,W,T,P,U]:i==="channelsLast"&&(z=[l,T,P,U,W]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:T,outHeight:P,outWidth:U,outChannels:W,padInfo:S,strideDepth:g,strideHeight:x,strideWidth:v,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationDepth:y,dilationHeight:w,dilationWidth:$,inShape:t,outShape:z,filterShape:e}}function f5(t,e,n,o,s){o==null&&(o=P1(t,e,n));const r=t[0],i=t[1],a=Iu((r-e+2*o)/n+1,s),l=Iu((i-e+2*o)/n+1,s);return[a,l]}function p5(t,e,n,o,s,r){s==null&&(s=P1(t,e[0],o[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(i[a]=Iu((t[a]-e[a]+2*s)/o[a]+1,r));return i}function P1(t,e,n,o=1){const s=wl(e,o);return Math.floor((t[0]*(n-1)-n+s)/2)}function Cu(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Px(t){return typeof t=="number"?[t,t,t]:t}function wl(t,e){return e<=1?t:t+(t-1)*(e-1)}function m5(t,e,n,o,s,r,i,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=f5([e,n],r,o,t,a);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/o),d=Math.ceil(n/s);const h=Math.max(0,(u-1)*o+r-e),f=Math.max(0,(d-1)*s+i-n),p=Math.floor(h/2),m=h-p,b=Math.floor(f/2),g=f-b;c={top:p,bottom:m,left:b,right:g,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-r+1)/o),d=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=Iu((e-r+h+f)/o+1,a),d=Iu((n-i+p+m)/s+1,a)}else throw Error("Unknown padding parameter: ".concat(t));return{padInfo:c,outHeight:u,outWidth:d}}function g5(t,e,n,o,s,r,i,a,l,c,u){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=p5([e,n,o,1],[a,l,c],1,[s,r,i],t,u);h=b[0],f=b[1],p=b[2]}else if(t==="same"){h=Math.ceil(e/s),f=Math.ceil(n/r),p=Math.ceil(o/i);const m=(h-1)*s+a-e,b=(f-1)*r+l-n,g=(p-1)*i+c-o,x=Math.floor(m/2),v=m-x,y=Math.floor(b/2),w=b-y,$=Math.floor(g/2),k=g-$;d={top:y,bottom:w,left:$,right:k,front:x,back:v,type:"SAME"}}else throw Error("Unknown padding parameter: ".concat(t));return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function Iu(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode ".concat(e))}}function ua(t){const[e,n,o]=Cu(t);return e===1&&n===1&&o===1}function vn(t,e){return ua(t)||ua(e)}function da(t){return Cu(t).every(e=>e>0)}function Rr(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat ".concat(t))}function qn(t,e,n){if(n!=null){if(typeof e=="string")throw Error("Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,"."));if(typeof e=="number")I(_l(e),()=>"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,"."));else if(typeof e=="object")e.forEach(o=>{o.forEach(s=>{I(_l(s),()=>"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(s,"."))})});else throw Error("Error in ".concat(t,": Unknown padding parameter: ").concat(e))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(t,e){const o={x:N(t,"x","reshape","string_or_numeric")},s={shape:e};return O.runKernel(dg,o,s)}const L=M({reshape_:b5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(t,e,n,o,s){const r=N(t,"x","avgPool","float32"),i=1;I(vn(n,i),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'"));let a=r,l=!1;r.rank===3&&(l=!0,a=L(r,[1,r.shape[0],r.shape[1],r.shape[2]])),I(a.rank===4,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(a.rank,".")),qn("avgPool",o,s);const c={x:a},u={filterSize:e,strides:n,pad:o,dimRoundingMode:s};let d=O.runKernel(Em,c,u);return d=de(d,r.dtype),l?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const L1=M({avgPool_:x5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5(t,e,n,o,s,r="NDHWC"){const i=N(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=L(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),I(a.rank===5,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(a.rank,".")),I(r==="NDHWC",()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(r)),I(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),qn("avgPool3d",o,s);const c={x:a},u={filterSize:e,strides:n,pad:o,dimRoundingMode:s,dataFormat:r};let d=O.runKernel(Tm,c,u);return d=de(d,a.dtype),l?L(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const y5=M({avgPool3d_:v5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(t,e=0){I(t.length>=1,()=>"Pass at least one tensor to concat");const n=KR(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(r.dtype,". "))}),n.length===1)return qi(n[0]);const o=n,s={axis:e};return O.runKernel(Dm,o,s)}const Wn=M({concat_:w5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $5(t,e,n=!1,o=!1){let s=N(t,"a","matMul"),r=N(e,"b","matMul");[s,r]=Ct(s,r);const i={a:s,b:r},a={transposeA:n,transposeB:o};return O.runKernel(Nm,i,a)}const Be=M({matMul_:$5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t){const n={x:N(t,"x","sigmoid","float32")};return O.runKernel(_d,n)}const tc=M({sigmoid_:k5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5(t,e,n){const o=N(t,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");const s={x:o},r={begin:e,size:n};return O.runKernel(gg,s,r)}const Je=M({slice_:C5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(t){const n={x:N(t,"x","tanh","float32")};return O.runKernel(zd,n)}const M1=M({tanh_:I5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5(t,e,n){const o=N(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);I(o.rank>=1+e.length,()=>"input rank is ".concat(o.rank," but should be > than blockShape.length ").concat(e.length)),I(n.length===e.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(e.length)),I(o.shape[0]%s===0,()=>"input tensor batch is ".concat(o.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(e.join(" * ")," === ").concat(s));const r={x:o},i={blockShape:e,crops:n};return O.runKernel(Rm,r,i)}const z1=M({batchToSpaceND_:S5});function E5(t){let e;return t.rank===0||t.rank===1?e=L(t,[1,1,1,t.size]):t.rank===2?e=L(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(t,e,n,o,s,r){r==null&&(r=.001);const i=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),l=N(n,"variance","batchNorm");let c;s!=null&&(c=N(s,"scale","batchNorm"));let u;o!=null&&(u=N(o,"offset","batchNorm")),I(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:E5(i),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:r},p=O.runKernel(Vm,h,f);return L(p,i.shape)}const Ig=M({batchNorm_:T5});function N5(t,e,n,o,s,r){const i=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),l=N(n,"variance","batchNorm");let c;s!=null&&(c=N(s,"scale","batchNorm"));let u;return o!=null&&(u=N(o,"offset","batchNorm")),I(i.rank===2,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,".")),I(a.rank===2||a.rank===1,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(a.rank,".")),I(l.rank===2||l.rank===1,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),c!=null&&I(c.rank===2||c.rank===1,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),u!=null&&I(u.rank===2||u.rank===1,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),Ig(i,a,l,u,c,r)}const R5=M({batchNorm2d_:N5});function A5(t,e,n,o,s,r){const i=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),l=N(n,"variance","batchNorm");let c;s!=null&&(c=N(s,"scale","batchNorm"));let u;return o!=null&&(u=N(o,"offset","batchNorm")),I(i.rank===3,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,".")),I(a.rank===3||a.rank===1,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(a.rank,".")),I(l.rank===3||l.rank===1,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),c!=null&&I(c.rank===3||c.rank===1,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),u!=null&&I(u.rank===3||u.rank===1,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),Ig(i,a,l,u,c,r)}const D5=M({batchNorm3d_:A5});function _5(t,e,n,o,s,r){const i=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),l=N(n,"variance","batchNorm");let c;s!=null&&(c=N(s,"scale","batchNorm"));let u;return o!=null&&(u=N(o,"offset","batchNorm")),I(i.rank===4,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,".")),I(a.rank===4||a.rank===1,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(a.rank,".")),I(l.rank===4||l.rank===1,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),c!=null&&I(c.rank===4||c.rank===1,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),u!=null&&I(u.rank===4||u.rank===1,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),Ig(i,a,l,u,c,r)}const O5=M({batchNorm4d_:_5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F5(t,e,n){const o=N(t,"x","bincount"),s=N(e,"weights","bincount");I(o.dtype==="int32",()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(o.dtype)),I(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),I(s.size===o.size||s.size===0,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(o.shape,", weights shape: ")+"".concat(s.shape,"."));const r={x:o,weights:s},i={size:n};return O.runKernel(Yy,r,i)}const P5=M({bincount_:F5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5(t,e){let n=N(t,"broadcastTo","x");const o=n.shape;if(Tr(e),e.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(e.length," < input.rank=").concat(n.rank,"."));if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=L(n,c)}const s=n.shape,r=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])r[c]=1;else if(n.shape[c]!==1)throw new Error("broadcastTo(): [".concat(o,"] cannot be broadcast to [").concat(e,"]."));if(r.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return qi(n);const a={x:n},l={reps:r};return O.runKernel(Bd,a,l)}const Jc=M({broadcastTo_:L5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5(t){const n={x:N(t,"x","ceil","float32")};return O.runKernel(td,n)}const z5=M({ceil_:M5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sg(t,e,n){Tr(t),n=n||Zl(e);const o={shape:t,value:e,dtype:n};return O.runKernel(d1,{},o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5(t,e,n){const o=N(t,"x","clipByValue");if(I(e<=n,()=>"Error in clip: min (".concat(e,") must be ")+"less than or equal to max (".concat(n,").")),e===n)return Sg(o.shape,e,o.dtype);const s={x:o},r={clipValueMin:e,clipValueMax:n};return O.runKernel(nd,s,r)}const Co=M({clipByValue_:B5});function V5(t){return Wn(t,0)}const W5=M({concat1d_:V5});function U5(t,e){return Wn(t,e)}const H5=M({concat2d_:U5});function G5(t,e){return Wn(t,e)}const j5=M({concat3d_:G5});function q5(t,e){return Wn(t,e)}const K5=M({concat4d_:q5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(t,e,n,o,s="NHWC",r=[1,1],i){const a=N(t,"x","conv2d","float32"),l=N(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(c.rank===4,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),I(l.rank===4,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")),qn("conv2d",o,i);const d=s==="NHWC"?c.shape[3]:c.shape[1];I(d===l.shape[2],()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],".")),I(vn(n,r),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(r,"'")),I(da(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),I(da(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},f={strides:n,pad:o,dataFormat:s,dilations:r,dimRoundingMode:i},p=O.runKernel(_m,h,f);return u?L(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ha=M({conv2d_:X5});function Y5(t,e,n,o,s="NWC",r=1,i){const a=N(t,"x","conv1d"),l=N(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=L(a,[1,a.shape[0],a.shape[1]])),I(c.rank===3,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),I(l.rank===3,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")),qn("conv1d",o,i),I(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")),I(vn(n,r),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(r,"'")),I(da(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),I(da(n),()=>"Error in conv1D: Stride should be larger than 0."),I(s==="NWC",()=>"Error in conv1d: got dataFormat of ".concat(s," but only NWC is currently supported."));const d=L(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=L(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=ha(h,d,[1,n],o,"NHWC",[1,r],i);return u?L(b,[b.shape[2],b.shape[3]]):L(b,[b.shape[0],b.shape[2],b.shape[3]])}const sA=M({conv1d_:Y5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5(t,e,n,o,s,r="NHWC",i){I(t.length===e.rank,()=>"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match"));let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),I(a.length===4,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(a.length,".")),I(l.rank===4,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)),I(n.rank===4,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const u=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?l.shape[3]:l.shape[1];I(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")),I(d===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")),qn("conv2dDerInput",s,i);const h={dy:l,filter:n},f={strides:o,pad:s,dataFormat:r,dimRoundingMode:i,inputShape:a},p=O.runKernel(Om,h,f);return c?L(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const B1=M({conv2DBackpropInput_:Q5});function Z5(t,e,n,o,s,r){const i=N(t,"x","conv2dTranspose"),a=N(e,"filter","conv2dTranspose");return B1(n,i,a,o,s,"NHWC",r)}const rA=M({conv2dTranspose_:Z5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5(t,e,n,o,s="NDHWC",r=[1,1,1]){const i=N(t,"x","conv3d"),a=N(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=L(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),I(l.rank===5,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),I(a.rank===5,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(a.rank,".")),I(l.shape[4]===a.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(a.shape[3],".")),I(vn(n,r),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(r,"'")),I(s==="NDHWC",()=>"Error in conv3d: got dataFormat of ".concat(s," but only NDHWC is currently supported.")),I(da(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),I(da(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:o,dataFormat:s,dilations:r},h=O.runKernel(Fm,u,d);return c?L(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const ej=M({conv3d_:J5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tj(t,e,n,o,s){I(t.length===e.rank,()=>"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match"));let r=t,i=e,a=!1;e.rank===4&&(a=!0,i=L(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const l=r[4],c=i.shape[4];I(r.length===5,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(r.length,".")),I(i.rank===5,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)),I(n.rank===5,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),I(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")),I(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const u={dy:i,filter:n},d={pad:s,strides:o,inputShape:r},h=O.runKernel(t1,u,d);return a?L(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const iA=M({conv3DBackpropInput_:tj});function nj(t,e,n,o,s){const r=N(t,"x","conv3dTranspose"),i=N(e,"filter","conv3dTranspose");return iA(n,r,i,o,s)}const oj=M({conv3dTranspose_:nj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sj(t){const n={x:N(t,"x","cos","float32")};return O.runKernel(od,n)}const V1=M({cos_:sj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rj(t){const n={x:N(t,"x","cosh","float32")};return O.runKernel(sd,n)}const aA=M({cosh_:rj});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ij(t,e=0,n=!1,o=!1){const r={x:N(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:o};return O.runKernel(n1,r,i)}const Lx=M({cumprod_:ij});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aj(t,e=0,n=!1,o=!1){const r={x:N(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:o};return O.runKernel(Pm,r,i)}const lA=M({cumsum_:aj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lj(t,e,n,o=!1){const s=N(t,"x","denseBincount"),r=N(e,"weights","denseBincount");I(s.dtype==="int32",()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(s.dtype)),I(s.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(s.rank,".")),I(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),I(r.size===s.size||r.size===0,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(s.shape,", weights shape: ")+"".concat(r.shape,"."));const i={x:s,weights:r},a={size:n,binaryOutput:o};return O.runKernel(s1,i,a)}const _I=M({denseBincount_:lj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cj(t,e,n="NHWC"){const o=N(t,"x","depthToSpace","float32"),s=n==="NHWC"?o.shape[1]:o.shape[2],r=n==="NHWC"?o.shape[2]:o.shape[3],i=n==="NHWC"?o.shape[3]:o.shape[1];I(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(e)),I(s*e>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(s," and ").concat(e,"  for depthToSpace with input shape\n    ").concat(o.shape)),I(r*e>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(r," and ").concat(e," for depthToSpace with input shape\n        ").concat(o.shape)),I(i%(e*e)===0,()=>"Dimension size must be evenly divisible by ".concat(e*e," but is ").concat(i," for depthToSpace with input shape ").concat(o.shape));const a={x:o},l={blockSize:e,dataFormat:n};return O.runKernel(r1,a,l)}const uj=M({depthToSpace_:cj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dj(t,e,n,o,s="NHWC",r=[1,1],i){const a=N(t,"x","depthwiseConv2d","float32"),l=N(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(c.rank===4,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),I(l.rank===4,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."));const d=s==="NHWC"?c.shape[3]:c.shape[1];I(d===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")),qn("depthwiseConv2d",o,i);const h={x:c,filter:l},f={strides:n,pad:o,dataFormat:s,dilations:r,dimRoundingMode:i},p=O.runKernel(Lm,h,f);return u?L(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const W1=M({depthwiseConv2d_:dj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(t,e,n,o,s=[1,1],r="NHWC"){const i=N(t,"x","dilation2d"),a=N(e,"filter","dilation2d");I(i.rank===3||i.rank===4,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")),I(a.rank===3,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(a.rank,".")),I(r==="NHWC",()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(r));let l=i,c=!1;i.rank===3&&(l=L(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),I(l.shape[3]===a.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(a.shape[2]));const u={x:l,filter:a},d={strides:n,pad:o,dilations:s},h=O.runKernel(Mm,u,d);return c?L(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const fj=M({dilation2d_:hj});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(t,e){const n=t.length,o=[];for(let s=0;s<n;s++){const r=n-1-s,i=t[r]||1;(e[e.length-1-s]||1)>1&&i===1&&o.unshift(r)}return o}function Ut(t,e){const n=[];for(let o=0;o<e.length;o++){const s=t[t.length-o-1],r=e.length-o-1,i=e[r];(s==null||s===1&&i>1)&&n.unshift(r)}return n}function Ie(t,e){const n=Math.max(t.length,e.length),o=new Array(n);for(let s=0;s<n;s++){let r=t[t.length-s-1];r==null&&(r=1);let i=e[e.length-s-1];if(i==null&&(i=1),r===1)o[n-s-1]=i;else if(i===1)o[n-s-1]=r;else if(r!==i){const a="Operands could not be broadcast together with shapes "+"".concat(t," and ").concat(e,".");throw Error(a)}else o[n-s-1]=r}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pj(t,e){let n=N(t,"a","equal","string_or_numeric"),o=N(e,"b","equal","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(zm,s)}const Js=M({equal_:pj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mj(t,e,n){const o=N(e,"a","where"),s=N(n,"b","where"),r=N(t,"condition","where","bool"),i=Ie(Ie(r.shape,o.shape),s.shape),a=Jc(r,i),l=Jc(o,i),c=Jc(s,i),u={condition:a,t:l,e:c};return O.runKernel(mg,u)}const Tn=M({where_:mj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gj(t){const n={x:N(t,"x","zerosLike")};return O.runKernel(kg,n)}const Fe=M({zerosLike_:gj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bj(t,e){let n=N(t,"a","div"),o=N(e,"b","div");[n,o]=Ct(n,o);const s=we(n,o),r=Fe(s),i=Js(o,r);return Tn(i,r,s)}const xj=M({divNoNan_:bj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(t,e){const n=N(t,"t1","dot"),o=N(e,"t2","dot");I((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,"."));const s=n.rank===1?n.size:n.shape[1],r=o.rank===1?o.size:o.shape[0];if(I(s===r,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(s," and ").concat(r,".")),n.rank===1&&o.rank===1){const i=L(n,[1,-1]),a=L(o,[-1,1]),l=Be(i,a);return L(l,[])}else if(n.rank===1&&o.rank===2){const i=L(n,[1,-1]),a=L(o,[o.shape[0],o.shape[1]]),l=Be(i,a);return L(l,[l.size])}else if(n.rank===2&&o.rank===1){const i=L(o,[-1,1]),a=Be(n,i);return L(a,[a.size])}else{const i=L(o,[o.shape[0],o.shape[1]]);return Be(n,i)}}const yj=M({dot_:vj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wj(t,...e){const n=e.map((s,r)=>N(s,"tensors".concat(r),"einsum")),o={equation:t};return O.runKernel(l1,n,o)}const Ic=M({einsum_:wj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(t){const n={x:N(t,"x","elu","float32")};return O.runKernel(id,n)}const Eg=M({elu_:$j});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kj(t){let e=N(t,"x","erf");I(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=de(e,"float32"));const n={x:e};return O.runKernel(ad,n)}const Cj=M({erf_:kj});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function cA(t,e,n){const o=t.length+e.length,s=[];let r=0,i=0;for(let a=0;a<o;a++)n.indexOf(a)===-1?s.push(t[r++]):s.push(e[i++]);return s}function en(t,e){const n=[],o=t.length;for(let r=0;r<o;r++)e.indexOf(r)===-1&&n.push(t[r]);const s=e.map(r=>t[r]);return[n,s]}function Ft(t,e){const n=e.map(o=>1);return cA(t,n,e)}function un(t,e,n){I(U1(e,n),()=>"".concat(t," supports only inner-most axes for now. ")+"Got axes ".concat(e," and rank-").concat(n," input."))}function bt(t,e){if(U1(t,e))return null;const n=[];for(let o=0;o<e;++o)t.indexOf(o)===-1&&n.push(o);return t.forEach(o=>n.push(o)),n}function yi(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Et(t,e){const n=[];for(let o=e-t;o<e;++o)n.push(o);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ij(t,e=null,n=!1){const s={x:N(t,"x","max")},r={reductionIndices:e,keepDims:n};return O.runKernel(Qm,s,r)}const ks=M({max_:Ij});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sj(t,e=null,n=!1){const s={x:N(t,"x","min")},r={axis:e,keepDims:n};return O.runKernel(tg,s,r)}const up=M({min_:Sj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ej(t,e){let n=N(t,"base","pow"),o=N(e,"exp","pow");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(kd,s)}const Ll=M({pow_:Ej});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(t,e){if((Yo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Yo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ud(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tj(t){const n={x:N(t,"x","sqrt","float32")};return O.runKernel(Fd,n)}const Dn=M({sqrt_:Tj});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nj(t){const e=N(t,"x","square"),n={};return O.runKernel("Square",{x:e},n)}const rt=M({square_:Nj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rj(t,e=null,n=!1){let o=N(t,"x","sum");o.dtype==="bool"&&(o=de(o,"int32"));const s={x:o},r={axis:e,keepDims:n};return O.runKernel(bg,s,r)}const ye=M({sum_:Rj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(t,e="euclidean",n=null,o=!1){t=N(t,"x","norm");const s=uA(t,e,n);let r=s.shape;if(o){const i=Re(n,t.shape);r=Ft(s.shape,i)}return L(s,r)}function uA(t,e,n=null){if(t.rank===0)return Cn(t);if(t.rank!==1&&n===null)return uA(L(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return ye(Cn(t),n);if(e===1/0)return ks(Cn(t),n);if(e===-1/0)return up(Cn(t),n);if(e==="euclidean"||e===2)return Dn(ye(Ll(Cn(t),ze(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}if(Array.isArray(n)&&n.length===2){if(e===1)return ks(ye(Cn(t),n[0]),n[1]-1);if(e===1/0)return ks(ye(Cn(t),n[1]),n[0]);if(e===-1/0)return up(ye(Cn(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Dn(ye(rt(t),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}throw new Error("Error in norm: invalid axis: ".concat(n))}const Tg=M({norm_:Aj});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dj(t,e=null,n=!1){return Tg(t,"euclidean",e,n)}const _j=M({euclideanNorm_:Dj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oj(t){const n={x:N(t,"x","exp")};return O.runKernel(ld,n)}const $r=M({exp_:Oj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(t,e=0){const n=N(t,"x","expandDims","string_or_numeric");I(e<=n.rank,()=>"Axis must be <= rank of the tensor");const o={input:n},s={dim:e};return O.runKernel(Bm,o,s)}const zn=M({expandDims_:Fj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pj(t){const n={x:N(t,"x","expm1")};return O.runKernel(cd,n)}const Lj=M({expm1_:Pj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mj(t,e){const n=N(t,"x","tile","string_or_numeric");I(n.rank===e.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(e,"."));const o={x:n},s={reps:e};return O.runKernel(Bd,o,s)}const gs=M({tile_:Mj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(t,e,n,o="float32"){e==null&&(e=t);const s=Ne([t,e],o),r=t<=e?t:e;for(let a=0;a<r;++a)s.set(1,a,a);const i=L(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return gs(zn(i,0),[n[0],1,1]);if(n.length===2)return gs(zn(zn(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return gs(zn(zn(zn(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}const dA=M({eye_:zj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bj(t){const n={x:N(t,"x","floor","float32")};return O.runKernel(ud,n)}const Ng=M({floor_:Bj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vj(t,e,n=0,o=0){const s=N(t,"x","gather"),r=N(e,"indices","gather","int32"),i={x:s,indices:r},a={axis:n,batchDims:o};return O.runKernel(Wm,i,a)}const H1=M({gather_:Vj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wj(t,e){let n=N(t,"a","greater","string_or_numeric"),o=N(e,"b","greater","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(Um,s)}const No=M({greater_:Wj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uj(t,e){let n=N(t,"a","greaterEqual","string_or_numeric"),o=N(e,"b","greaterEqual","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(hd,s)}const Ia=M({greaterEqual_:Uj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hj(t){const n={input:N(t,"input","imag")};return O.runKernel(p1,n)}const G1=M({imag_:Hj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(t){const n={x:N(t,"x","isFinite")};return O.runKernel(pd,n)}const jj=M({isFinite_:Gj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qj(t){const n={x:N(t,"x","isInf")};return O.runKernel(md,n)}const Kj=M({isInf_:qj});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xj(t){const n={x:N(t,"x","isNaN")};return O.runKernel(gd,n)}const Yj=M({isNaN_:Xj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qj(t,e=.2){const o={x:N(t,"x","leakyRelu")},s={alpha:e};return O.runKernel(Hm,o,s)}const j1=M({leakyRelu_:Qj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zj(t,e){let n=N(t,"a","less","string_or_numeric"),o=N(e,"b","less","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(Gm,s)}const dp=M({less_:Zj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jj(t,e){let n=N(t,"a","lessEqual","string_or_numeric"),o=N(e,"b","lessEqual","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(jm,s)}const nc=M({lessEqual_:Jj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8(t,e=5,n=1,o=1,s=.5){const r=N(t,"x","localResponseNormalization");I(r.rank===4||r.rank===3,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(r.rank,".")),I(_l(e),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(e,"."));let i=r,a=!1;r.rank===3&&(a=!0,i=L(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:o,beta:s},u=O.runKernel(Ym,l,c);return a?L(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const t8=M({localResponseNormalization_:e8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(t){const n={x:N(t,"x","log","float32")};return O.runKernel(bd,n)}const er=M({log_:n8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(t){const n={x:N(t,"x","log1p")};return O.runKernel(xd,n)}const hA=M({log1p_:o8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(t,e){I(xx(t),()=>"The f passed in variableGrads(f) must be a function"),I(e==null||Array.isArray(e)&&e.every(c=>c instanceof lp),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in O.registeredVariables)e.push(O.registeredVariables[c])}const o=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),I(e.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(s," variables is ")+"trainable.");const r=!0,{value:i,grads:a}=O.gradients(t,e,null,r);I(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),I(i.rank===0,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(i.rank," tensor"));const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),o!=null&&o.forEach(c=>l[c.name]=null),{value:i,grads:l}}function Ml(t){return O.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(t){const n={x:N(t,"x","neg")};return O.runKernel(og,n)}const kt=M({neg_:r8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(t){const n={x:N(t,"x","softplus")};return O.runKernel(Od,n)}const Gd=M({softplus_:i8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8(t){const e=N(t,"x","logSigmoid");return Ml(o=>({value:kt(Gd(kt(o))),gradFunc:i=>F(i,tc(kt(o)))}))(e)}const l8=M({logSigmoid_:a8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(t,e){let n=N(t,"a","sub"),o=N(e,"b","sub");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(Ld,s)}const ke=M({sub_:c8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(t,e=-1){const n=N(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(e));return Ml((s,r)=>{const a=ks(s,e,!0),l=ke(s,a),c=ke(de(l,"float32"),er(ye($r(l),e,!0)));return r([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,p=!0,m=$r(f);return ke(d,F(ye(d,e,p),m))}}})(n)}const fA=M({logSoftmax_:u8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(t,e=null,n=!1){const o=N(t,"x","logSumExp"),s=Re(e,o.shape),r=ks(o,s,!0),i=ke(o,r),a=$r(i),l=ye(a,s),c=er(l),u=oe(L(r,c.shape),c);if(n){const d=Ft(u.shape,s);return L(u,d)}return u}const h8=M({logSumExp_:d8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t,e){const n=N(t,"a","logicalAnd","bool"),o=N(e,"b","logicalAnd","bool");Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(qm,s)}const kr=M({logicalAnd_:f8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(t){const n={x:N(t,"x","logicalNot","bool")};return O.runKernel(Km,n)}const q1=M({logicalNot_:p8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8(t,e){const n=N(t,"a","logicalOr","bool"),o=N(e,"b","logicalOr","bool");Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(Xm,s)}const pA=M({logicalOr_:m8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(t,e){const n=N(t,"a","logicalXor","bool"),o=N(e,"b","logicalXor","bool");return Ie(n.shape,o.shape),kr(pA(t,e),q1(kr(t,e)))}const b8=M({logicalXor_:g8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(t,e,n,o,s){const r=N(t,"x","maxPool"),i=1;let a=r,l=!1;r.rank===3&&(l=!0,a=L(r,[1,r.shape[0],r.shape[1],r.shape[2]])),I(a.rank===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.rank,".")),I(vn(n,i),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")),qn("maxPool",o,s);const c={x:a},u={filterSize:e,strides:n,pad:o,dimRoundingMode:s},d=O.runKernel(Zm,c,u);return l?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const K1=M({maxPool_:x8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8(t,e=[1,1,1],n,o,s,r="NDHWC"){const i=N(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=L(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),I(a.rank===5,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(a.rank,".")),I(r==="NDHWC",()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(r)),qn("maxPool3d",o,s);const c={x:a},u={filterSize:e,strides:n,pad:o,dimRoundingMode:s,dataFormat:r},d=O.runKernel(Jm,c,u);return l?L(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const y8=M({maxPool3d_:v8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8(t,e){let n=N(t,"a","maximum"),o=N(e,"b","maximum");[n,o]=Ct(n,o),n.dtype==="bool"&&(n=de(n,"int32"),o=de(o,"int32")),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(vd,s)}const wi=M({maximum_:w8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(t,e=null,n=!1){const s={x:N(t,"x","mean")},r={axis:e,keepDims:n};return O.runKernel(eg,s,r)}const _t=M({mean_:$8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(t,e="float32"){if(Tr(t),e==="complex64"){const o=Yt(t,"float32"),s=Yt(t,"float32");return aa(o,s)}const n=xn(Q(t),e);return O.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sa(t,e="float32"){if(Tr(t),e==="complex64"){const o=Sa(t,"float32"),s=Yt(t,"float32");return aa(o,s)}const n=Wy(Q(t),e);return O.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8(t,e){let n=N(t,"a","minimum"),o=N(e,"b","minimum");[n,o]=Ct(n,o),n.dtype==="bool"&&(n=de(n,"int32"),o=de(o,"int32")),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(yd,s)}const Su=M({minimum_:k8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(t,e,n){I(n==="reflect"||n==="symmetric",()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const o=N(t,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");I(e.length===o.rank,()=>"Padding doesn't match input. Must be ".concat(o.rank,". ")+"Got ".concat(e.length,"."));const s=n==="reflect"?1:0;for(let a=0;a<o.rank;a++)I(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),I(e[a][0]>=0&&e[a][0]<=o.shape[a]-s&&e[a][1]>=0&&e[a][1]<=o.shape[a]-s,()=>"Padding in dimension ".concat(a," cannot be greater than or equal ")+"to ".concat(o.shape[a]-s," or less than 0 for input of ")+"shape ".concat(o.shape));const r={paddings:e,mode:n},i={x:o};return O.runKernel(ng,i,r)}const I8=M({mirrorPad_:C8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8(t,e){let n=N(t,"a","mod"),o=N(e,"b","mod");[n,o]=Ct(n,o);const s={a:n,b:o};return O.runKernel(wd,s)}const E8=M({mod_:S8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(t,e=null,n=!1){t=N(t,"x","moments");const o=Re(e,t.shape),s=_t(t,o,n);let r=s.shape;n||(r=Ft(s.shape,o));const i=rt(ke(de(t,"float32"),L(s,r))),a=_t(i,o,n);return{mean:s,variance:a}}const X1=M({moments_:T8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(t,e){let n=N(t,"a","notEqual","string_or_numeric"),o=N(e,"b","notEqual","string_or_numeric");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o};return O.runKernel(sg,s)}const hp=M({notEqual_:N8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(t,e,n=1,o=0,s="int32"){if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(e));const i={indices:N(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:o};return O.runKernel(ig,i,a)}const mA=M({oneHot_:R8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(t){const n={x:N(t,"x","onesLike")};return O.runKernel(rg,n)}const Qo=M({onesLike_:A8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(t,e,n=0){const o=N(t,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},r={x:o};return O.runKernel(lg,r,s)}const Y1=M({pad_:D8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(t,e,n){const o=N(t,"x","spaceToBatchND");I(o.rank>=1+e.length,()=>"input rank ".concat(o.rank," should be > than [blockShape] ").concat(e.length)),I(n.length===e.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(e.length)),I(o.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>"input spatial dimensions ".concat(o.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(e.toString()));const s={x:o},r={blockShape:e,paddings:n};return O.runKernel(xg,s,r)}const Q1=M({spaceToBatchND_:_8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(t,e,n,o,s,r,i){s==null&&(s=[1,1]),r==null&&(r=1),o===0&&(o="valid");const a=N(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(vn(r,s),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(s,"'"));const u=Zo(l.shape,e,r,s,o),d=[u.dilationHeight,u.dilationWidth];let h;o==="same"?h=P8([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=F8([u.inHeight,u.inWidth],d,h),b=f?o:"valid",g=f?l:Q1(l,d,p),v=(n==="avg"?()=>L1(g,e,r,b,i):()=>K1(g,e,r,b,i))(),y=f?v:z1(v,d,m);return c?L(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function F8(t,e,n){const o=n.map(u=>u[0]),s=n.map(u=>u[1]),r=t.concat(o,s),i=e.map((u,d)=>(u-r[d]%u)%u),a=s.map((u,d)=>u+i[d]),l=e.map((u,d)=>[o[d],a[d]]),c=e.map((u,d)=>[0,i[d]]);return[l,c]}function P8(t,e){const o=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),s=o.map(i=>Math.floor(i/2)),r=o.map((i,a)=>i-s[a]);return o.map((i,a)=>[s[a],r[a]])}const L8=M({pool_:O8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8(t,e){const n=N(t,"x","prelu"),o=N(e,"alpha","prelu"),s={x:n,alpha:o};return O.runKernel(cg,s)}const Z1=M({prelu_:M8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(t,e=null,n=!1){let o=N(t,"x","prod");o.dtype==="bool"&&(o=de(o,"int32"));const s={x:o},r={axis:e,keepDims:n};return O.runKernel(ug,s,r)}const B8=M({prod_:z8});var J1={exports:{}};J1.exports;(function(t){(function(e,n,o){function s(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function r(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var u=new s(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&r(d,u),h.state=function(){return r(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.alea=i})(va,t,!1)})(J1);var V8=J1.exports,ew={exports:{}};ew.exports;(function(t){(function(e,n,o){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.xor128=i})(va,t,!1)})(ew);var W8=ew.exports,tw={exports:{}};tw.exports;(function(t){(function(e,n,o){function s(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.xorwow=i})(va,t,!1)})(tw);var U8=tw.exports,nw={exports:{}};nw.exports;(function(t){(function(e,n,o){function s(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.xorshift7=i})(va,t,!1)})(nw);var H8=nw.exports,ow={exports:{}};ow.exports;(function(t){(function(e,n,o){function s(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,b,g=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),p=0,m=-32;m<x;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(b=b+1640531527|0,h=g[m&127]^=f+b,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;u.w=b,u.X=g,u.i=p}c(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.xor4096=i})(va,t,!1)})(ow);var G8=ow.exports,sw={exports:{}};sw.exports;(function(t){(function(e,n,o){function s(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:o&&o.amd?o(function(){return i}):this.tychei=i})(va,t,!1)})(sw);var j8=sw.exports,gA={exports:{}};const q8={},K8=Object.freeze(Object.defineProperty({__proto__:null,default:q8},Symbol.toStringTag,{value:"Module"})),X8=IL(K8);(function(t){(function(e,n,o){var s=256,r=6,i=52,a="random",l=o.pow(s,r),c=o.pow(2,i),u=c*2,d=s-1,h;function f(y,w,$){var k=[];w=w==!0?{entropy:!0}:w||{};var C=g(b(w.entropy?[y,v(n)]:y==null?x():y,3),k),E=new p(k),S=function(){for(var T=E.g(r),P=l,U=0;T<c;)T=(T+U)*s,P*=s,U=E.g(1);for(;T>=u;)T/=2,P/=2,U>>>=1;return(T+U)/P};return S.int32=function(){return E.g(4)|0},S.quick=function(){return E.g(4)/4294967296},S.double=S,g(v(E.S),n),(w.pass||$||function(T,P,U,W){return W&&(W.S&&m(W,E),T.state=function(){return m(E,{})}),U?(o[a]=T,P):T})(S,C,"global"in w?w.global:this==o,w.state)}function p(y){var w,$=y.length,k=this,C=0,E=k.i=k.j=0,S=k.S=[];for($||(y=[$++]);C<s;)S[C]=C++;for(C=0;C<s;C++)S[C]=S[E=d&E+y[C%$]+(w=S[C])],S[E]=w;(k.g=function(T){for(var P,U=0,W=k.i,z=k.j,B=k.S;T--;)P=B[W=d&W+1],U=U*s+B[d&(B[W]=B[z=d&z+P])+(B[z]=P)];return k.i=W,k.j=z,U})(s)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function b(y,w){var $=[],k=typeof y,C;if(w&&k=="object")for(C in y)try{$.push(b(y[C],w-1))}catch(E){}return $.length?$:k=="string"?y:y+"\0"}function g(y,w){for(var $=y+"",k,C=0;C<$.length;)w[d&C]=d&(k^=w[d&C]*19)+$.charCodeAt(C++);return v(w)}function x(){try{var y;return h&&(y=h.randomBytes)?y=y(s):(y=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(y)),v(y)}catch(k){var w=e.navigator,$=w&&w.plugins;return[+new Date,e,$,e.screen,v(n)]}}function v(y){return String.fromCharCode.apply(0,y)}if(g(o.random(),n),t.exports){t.exports=f;try{h=X8}catch(y){}}else o["seed"+a]=f})(typeof self<"u"?self:va,[],Math)})(gA);var Y8=gA.exports,Q8=V8,Z8=W8,J8=U8,eq=H8,tq=G8,nq=j8,Ea=Y8;Ea.alea=Q8;Ea.xor128=Z8;Ea.xorwow=J8;Ea.xorshift7=eq;Ea.xor4096=tq;Ea.tychei=nq;var rw=Ea;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bA{constructor(e,n,o,s,r){this.mean=e,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=rw.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,o=!1;for(;!o;){let s,r,i;do s=2*this.random()-1,r=2*this.random()-1,i=s*s+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(e))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class oq{constructor(e=0,n=1,o,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=o,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(n," <= 1 and dtype is not float"));this.random=rw.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sq(t,e=0,n=1,o,s){if(Tr(t),o!=null&&o==="bool")throw new Error("Unsupported data type ".concat(o));const r=new bA(e,n,o,!1,s),i=Ne(t,o);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const rq=M({randomNormal_:sq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iq(t,e=0,n=1,o="float32",s){Tr(t);const r=Ne(t,o),i=new oq(e,n,null,s);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const jd=M({randomUniform_:iq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t,e,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:o};return O.runKernel(w1,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aq(t){const n={input:N(t,"input","real")};return O.runKernel($1,n)}const fp=M({real_:aq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lq(t){const n={x:N(t,"x","reciprocal")};return O.runKernel(Cd,n)}const cq=M({reciprocal_:lq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uq(t){const n={x:N(t,"x","relu")};return O.runKernel(Id,n)}const Ta=M({relu_:uq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dq(t){const n={x:N(t,"x","relu6")};return O.runKernel(Sd,n)}const xA=M({relu6_:dq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(t,e){const o={x:N(t,"x","reverse")},s={dims:e};return O.runKernel(pg,o,s)}const fa=M({reverse_:hq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fq(t){const n={x:N(t,"x","round")};return O.runKernel(Ed,n)}const vA=M({round_:fq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pq(t){const n={x:N(t,"x","rsqrt","float32")};return O.runKernel(Td,n)}const yA=M({rsqrt_:pq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(t){const n={x:N(t,"x","selu")};return O.runKernel(Nd,n)}const wA=M({selu_:mq});function gq(t,e,n,o,s,r=[1,1],i="NHWC"){const a=N(t,"x","separableConv2d"),l=N(e,"depthwiseFilter","separableConv2d"),c=N(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");I(u.rank===4,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")),I(l.rank===4,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),I(c.rank===4,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),I(c.shape[0]===1,()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")),I(c.shape[1]===1,()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],"."));const h=l.shape[2],f=l.shape[3];I(c.shape[2]===h*f,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*f,", ")+"but got ".concat(c.shape[2],"."));const p=W1(u,l,o,s,i,r),b=ha(p,c,1,"valid",i);return d?L(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const $A=M({separableConv2d_:gq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bq(t){const n={x:N(t,"x","sign")};return O.runKernel(Dd,n)}const xq=M({sign_:bq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vq(t){const n={x:N(t,"x","sin","float32")};return O.runKernel(Rd,n)}const kA=M({sin_:vq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yq(t){const n={x:N(t,"x","sinh")};return O.runKernel(Ad,n)}const CA=M({sinh_:yq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wq(t,e,n){const o=N(t,"x","slice1d");return I(o.rank===1,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(o.rank," tensor")),Je(o,[e],[n])}const iw=M({slice1d_:wq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $q(t,e,n){const o=N(t,"x","slice2d");return I(o.rank===2,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(o.rank," tensor")),Je(o,e,n)}const IA=M({slice2d_:$q});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kq(t,e,n){const o=N(t,"x","slice3d");return I(o.rank===3,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(o.rank," tensor")),Je(o,e,n)}const aw=M({slice3d_:kq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cq(t,e,n){const o=N(t,"x","slice4d");return I(o.rank===4,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(o.rank," tensor")),Je(o,e,n)}const pp=M({slice4d_:Cq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iq(t,e=-1){const n=N(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(e));const o={logits:n},s={dim:e};return O.runKernel(yg,o,s)}const lw=M({softmax_:Iq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sq(t){I(t.dtype==="complex64",()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(t.dtype,"."));const e={input:t};return O.runKernel(u1,e)}const SA=M({fft_:Sq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eq(t){I(t.dtype==="complex64",()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(t.dtype,"."));const e={input:t};return O.runKernel(f1,e)}const Mx=M({ifft_:Eq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tq(t){const e=t.shape[t.shape.length-1],n=t.size/e;let o;if(e<=2){const s=L(t,[n,e]);o=Mx(s)}else{const s=[n,2*(e-1)],r=L(fp(t),[n,e]),i=L(G1(t),[n,e]),a=fa(Je(r,[0,1],[n,e-2]),1),l=F(fa(Je(i,[0,1],[n,e-2]),1),ze(-1)),c=Wn([r,a],1),u=Wn([i,l],1),d=L(aa(c,u),[s[0],s[1]]);o=Mx(d)}if(o=fp(o),t.rank===3&&t.shape[0]!==0){const s=o,r=t.shape[0];o=L(o,[r,o.shape[0]/r,o.shape[1]]),s.dispose()}return o}const Nq=M({irfft_:Tq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rq(t,e,n=0){const s={x:N(t,"x","split")},r={numOrSizeSplits:e,axis:n};return O.runKernel(vg,s,r)}const $o=M({split_:Rq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aq(t,e){I(t.dtype==="float32",()=>"The dtype for rfft() must be real value but got ".concat(t.dtype));let n=t.shape[t.shape.length-1];const o=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(b=>0),m=t.shape.map(b=>b);m[t.shape.length-1]=e,s=Je(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=Wn([t,Yt(p)],t.shape.length-1),n=e}else s=t;const r=Fe(s),i=L(aa(s,r),[o,n]),a=SA(i),l=Math.floor(n/2)+1,c=fp(a),u=G1(a),d=$o(c,[l,n-l],c.shape.length-1),h=$o(u,[l,n-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,L(aa(d[0],h[0]),f)}const Dq=M({rfft_:Aq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(t,e){let n=N(t,"a","squaredDifference"),o=N(e,"b","squaredDifference");[n,o]=Ct(n,o),Ie(n.shape,o.shape);const s={a:n,b:o},r={};return O.runKernel(Pd,s,r)}const Oq=M({squaredDifference_:_q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fq(t,e){const n=N(t,"x","squeeze","string_or_numeric");return L(n,gi(n.shape,e).newShape)}const qd=M({squeeze_:Fq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pq(t,e=0){const n=KR(t,"tensors","stack","string_or_numeric");I(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&I(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const o=n,s={axis:e};return O.runKernel(ag,o,s)}const ai=M({stack_:Pq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lq(t,e=0){const o={x:N(t,"x","step")},s={alpha:e};return O.runKernel(Vd,o,s)}const Kd=M({step_:Lq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mq(t,e,n,o,s=0,r=0,i=0,a=0,l=0){const u={x:N(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:o,beginMask:s,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return O.runKernel(E1,u,d)}const zq=M({stridedSlice_:Mq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bq(t){const n={x:N(t,"x","tan","float32")};return O.runKernel(Md,n)}const Vq=M({tan_:Bq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oo(t,e){Vy(t);const n=Wd(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ud(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kb(t,e,n){if(Vy(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const o=Wd(t,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ud(t,e,o,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wq(t,e,n){if(Vy(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const o=Wd(t,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ud(t,e,o,n)}function EA(t,e,n){const o=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,r="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(e.shape,", shape: ").concat(t)+", sliceDim: ".concat(o,", and batchDim: ").concat(s,".");if(n.rank<s)throw new Error(r+" update.rank < ".concat(s,". "));if(t.length<o+(n.rank-s))throw new Error(r+" Output shape length < ".concat(o+(n.rank-s)));if(n.rank!==s+t.length-o)throw new Error(r+" update.rank != ".concat(s+t.length-o));for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(r+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(e.shape[i],")."));for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+o])throw new Error(r+" updates.shape[".concat(i+s,"] (").concat(n.shape[i+s],") != shape[").concat(i+s,"] (").concat(t[i+s],")"))}function Uq(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(e.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(e.shape));if(t.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(t.shape))}EA(n,e,t)}function Na(t,e,n){const o=e.shape.length,s=o>1?e.shape[o-1]:1,r=n.length;let i=1;for(let d=s;d<r;++d)i*=n[d];const a=s<1?1:s,l=Q(e.shape)/a,c=[...ve(n.slice(0,s)),1],u=Q(n);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hq(t,e=1,n=!0){const o=N(t,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=o.shape[o.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(e));if(e>s)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(s,") ")+"but got ".concat(e));const r={x:o},i={k:e,sorted:n},[a,l]=O.runKernel(T1,r,i);return{values:a,indices:l}}const Gq=M({topk_:Hq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(t,e=0,n=1,o,s){if(Tr(t),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new bA(e,n,o,!0,s),i=Ne(t,o);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const TA=M({truncatedNormal_:jq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qq(t,e=0){const n=N(t,"x","unique","string_or_numeric");I(n.rank>0,()=>"The input tensor must be at least 1D");const o={x:n},s={axis:e},[r,i]=O.runKernel(R1,o,s);return{values:r,indices:i}}const Kq=M({unique_:qq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xq(t,e,n){const o=N(t,"x","unsortedSegmentSum"),s=N(e,"segmentIds","unsortedSegmentSum","int32");I(_l(n),()=>"numSegments must be of dtype int");const r={x:o,segmentIds:s},i={numSegments:n};return O.runKernel($g,r,i)}const NA=M({unsortedSegmentSum_:Xq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yq(t,e=0){const n=N(t,"x","unstack","string_or_numeric");I(e>=-n.shape.length&&e<n.shape.length,()=>"Axis = ".concat(e," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const o={value:n},s={axis:e};return O.runKernel(wg,o,s)}const pa=M({unstack_:Yq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qq(t,e=!0,n,o){return O.makeVariable(t,e,n,o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RA(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const o=Ne(t,"int32"),s=Ne([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const i=o.indexToLoc(n[r]),a=r*t.length;s.values.set(i,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(t,e,n){const o=N(t,"x","transpose");if(e==null&&(e=o.shape.map((i,a)=>a).reverse()),I(o.rank===e.length,()=>"Error in transpose: rank of input ".concat(o.rank," ")+"must match length of perm ".concat(e,".")),e.forEach(i=>{I(i>=0&&i<o.rank,()=>"All entries in 'perm' must be between 0 and ".concat(o.rank-1)+" but got ".concat(e))}),o.rank<=1)return o.clone();const s={x:o},r={perm:e};return o.dtype==="complex64"?G(()=>{let i=fp(o),a=G1(o);return i=O.runKernel(yl,{x:i},r),a=O.runKernel(yl,{x:a},r),n&&(a=kt(a)),aa(i,a)}):O.runKernel(yl,s,r)}const Oe=M({transpose_:Zq});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jq(t,e){if(e==null)return t.shape.slice();if(Ve(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let o=0;o<t.shape.length;o++)e[o]==null&&t.shape[o]!=null?n.push(t.shape[o]):n.push(e[o]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(t,e,n,o){const s=N(t,"x","dropout");if(I(s.dtype==="float32",()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(s.dtype," tensor instead.")),I(e>=0&&e<1,()=>"rate must be a float in the range [0, 1), but got ".concat(e,".")),e===0)return t instanceof Dt?s.clone():s;const r=Jq(s,n),i=1-e,a=we(Ng(oe(jd(r,0,1,"float32",o),i)),i);return F(s,a)}const tK=M({dropout_:eK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(t,e,n,o,s,r="NHWC",i){let a=t;t.rank===3&&(a=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=L(e,[1,e.shape[0],e.shape[1],e.shape[2]])),I(a.rank===4,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(a.shape,".")),I(l.rank===4,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")),I(n.length===4,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const c=r==="NHWC"?a.shape[3]:a.shape[1],u=r==="NHWC"?l.shape[3]:l.shape[1];I(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")),I(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")),qn("conv2dDerFilter",s,i);const d={x:a,dy:l},h={strides:o,pad:s,dataFormat:r,dimRoundingMode:i,filterShape:n};return O.runKernel(Jy,d,h)}const cw=M({conv2DBackpropFilter_:nK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uw(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return F(t,Kd(e));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function dw(t,e){let n=e;const o=Ut(t.shape,e.shape);return o.length>0&&(n=ye(n,o)),L(n,t.shape)}function hw(t,e,n,o){if(e==="linear")return t;if(e==="relu")return Ta(t);if(e==="elu")return Eg(t);if(e==="relu6")return xA(t);if(e==="prelu")return Z1(t,n);if(e==="leakyrelu")return j1(t,o);if(e==="sigmoid")return tc(t);throw new Error("Unknown fused activation ".concat(e,"."))}const fw=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oK({x:t,filter:e,strides:n,pad:o,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",fw(O.state.gradientDepth,l)===!1){I(s==="NHWC",()=>"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let $=ha(t,e,n,o,s,r,i);return a!=null&&($=oe($,a)),hw($,l,c,u)}const d=N(t,"x","conv2d","float32"),h=N(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=L(d,[1,d.shape[0],d.shape[1],d.shape[2]])),I(f.rank===4,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),I(h.rank===4,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")),qn("fused conv2d",o,i);const m=s==="NHWC"?f.shape[3]:f.shape[1];I(h.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(h.shape[2],".")),I(vn(n,r),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(r,"'"));const b=cn(f.shape,h.shape,n,r,o,i);let g;a!=null&&(g=N(a,"bias","fused conv2d"),[g]=Ct(g,d),s==="NHWC"?Ie(b.outShape,g.shape):(I(g.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(g.shape.length,".")),I(g.shape.length===0||g.shape[0]===b.outChannels||g.shape[0]===1,()=>"Error in fused conv2d: bias shape (".concat(g.shape,") is not ")+"compatible with the number of output channels "+"(".concat(b.outChannels,")"))));let x;if(c!=null){const $=c.shape;if(I($.length<=1||$.length===3,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat($.length,".")),$.length===1)I($[0]===1||$[0]===b.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat($,") is not compatible with the number of output ")+"channels (".concat(b.outChannels,")."));else if($.length===3)try{Ie($,b.outShape)}catch(k){const C="Error in fused conv2d: PReLU activation weights (".concat($,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(b.outShape,").");throw Error(C)}x=N(c,"prelu weights","fused conv2d")}const v=($,k)=>{I(s==="NHWC",()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported."));const[C,E,S,T]=k,P=uw($,S,l);I(ua(r),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(r,"'"));const U=B1(E.shape,P,C,n,o),W=cw(E,P,C.shape,n,o),z=[U,W];if(T!=null){const B=dw(T,P);z.push(B)}return z},y={x:f,filter:h,bias:g,preluActivationWeights:x},w={strides:n,pad:o,dataFormat:s,dilations:r,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?Ml((k,C,E)=>{let S=O.runKernel(rp,y,w);return E([C,k,S]),p&&(S=L(S,[S.shape[1],S.shape[2],S.shape[3]])),{value:S,gradFunc:v}})(f,h):Ml((k,C,E,S)=>{let T=O.runKernel(rp,y,w);return S([C,k,T,E]),p&&(T=L(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:v}})(f,h,g)}const sK=M({fusedConv2d_:oK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(t,e,n,o,s,r=[1,1],i){let a=t;t.rank===3&&(a=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:o,pad:s,dimRoundingMode:i,dilations:r,filterShape:n};return O.runKernel(i1,c,u)}const iK=M({depthwiseConv2dNativeBackpropFilter_:rK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(t,e,n,o,s,r=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:o,pad:s,dimRoundingMode:i,dilations:r,inputShape:t},d=O.runKernel(a1,c,u);return l?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const lK=M({depthwiseConv2dNativeBackpropInput_:aK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cK({a:t,b:e,transposeA:n=!1,transposeB:o=!1,bias:s,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(fw(O.state.gradientDepth,r)===!1){let T=Be(t,e,n,o);return s!=null&&(T=oe(T,s)),hw(T,r,i,a)}let l=N(t,"a","fused matMul"),c=N(e,"b","fused matMul");[l,c]=Ct(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=o?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=o?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),b=Q(p),g=Q(m);I(u===d,()=>"Error in fused matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(l.shape," and ")+"".concat(c.shape," and transposeA=").concat(n)+" and transposeB=".concat(o," must match."));const v=Ie(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),y=n?L(l,[b,u,h]):L(l,[b,h,u]),w=o?L(c,[g,f,d]):L(c,[g,d,f]);let $;s!=null&&($=N(s,"bias","fused matMul"),[$]=Ct($,l),Ie(v,$.shape));let k;i!=null&&(k=N(i,"prelu weights","fused matMul"));const C=(T,P)=>{const[U,W,z,B]=P,q=uw(L(T,z.shape),z,r);let R,A;if(!n&&!o?(R=Be(q,W,!1,!0),A=Be(U,q,!0,!1)):!n&&o?(R=Be(q,W,!1,!1),A=Be(q,U,!0,!1)):n&&!o?(R=Be(W,q,!1,!0),A=Be(U,q,!1,!1)):(R=Be(W,q,!0,!0),A=Be(q,U,!0,!0)),s!=null){const D=dw(B,q);return[R,A,D]}else return[R,A]},E={a:y,b:w,bias:$,preluActivationWeights:k},S={transposeA:n,transposeB:o,activation:r,leakyreluAlpha:a};return s==null?Ml((P,U,W)=>{const z=O.runKernel(sp,E,S);return W([P,U,z]),{value:L(z,v),gradFunc:C}})(y,w):Ml((P,U,W,z)=>{const B=O.runKernel(sp,E,S);return z([P,U,B,W]),{value:L(B,v),gradFunc:C}})(y,w,$)}const OI=M({fusedMatMul_:cK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uK(t,e,n,o,s="bilinear",r=0){const i=N(t,"image","cropAndResize"),a=N(e,"boxes","cropAndResize","float32"),l=N(n,"boxInd","cropAndResize","int32"),c=a.shape[0];I(i.rank===4,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")),I(a.rank===2&&a.shape[1]===4,()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(a.shape,".")),I(l.rank===1&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(a.shape,".")),I(o.length===2,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(o.length,".")),I(o[0]>=1&&o[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(o)),I(s==="bilinear"||s==="nearest",()=>"method must be bilinear or nearest, but was ".concat(s));const u={image:i,boxes:a,boxInd:l},d={method:s,extrapolationValue:r,cropSize:o};return O.runKernel(o1,u,d)}const dK=M({cropAndResize_:uK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hK(t){const e=N(t,"image","flipLeftRight","float32");I(e.rank===4,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(e.rank,"."));const n={image:e};return O.runKernel(h1,n,{})}const fK=M({flipLeftRight_:hK});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pK(t){const e=N(t,"image","grayscaleToRGB"),n=e.rank-1,o=e.shape[n];I(e.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(e.rank,".")),I(o===1,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(o,"."));const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,gs(e,s)}const mK=M({grayscaleToRGB_:pK});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(t){const e=N(t,"image","RGBToGrayscale"),n=e.rank-1,o=e.shape[n];I(e.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(e.rank,".")),I(o===3,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(o,"."));const s=e.dtype,r=de(e,"float32"),i=oo([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Ic("ij,j->i",r,i);break;case 3:a=Ic("ijk,k->ij",r,i);break;case 4:a=Ic("ijkl,l->ijk",r,i);break;case 5:a=Ic("ijklm,m->ijkl",r,i);break;case 6:a=Ic("ijklmn,n->ijklm",r,i);break;default:throw new Error("Not a valid tensor rank.")}return a=zn(a,-1),de(a,s)}const bK=M({rgbToGrayscale_:gK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK(t,e,n=0,o=.5){const s=N(t,"image","rotateWithOffset","float32");I(s.rank===4,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(s.rank,"."));const r={image:s},i={radians:e,fillValue:n,center:o};return O.runKernel(A1,r,i)}const vK=M({rotateWithOffset_:xK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oc(t,e,n,o,s,r){o==null&&(o=.5),s==null&&(s=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=t.shape[0];return n=Math.min(n,i),I(0<=o&&o<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(o,"'")),I(t.rank===2,()=>"boxes must be a 2D tensor, but was of rank '".concat(t.rank,"'")),I(t.shape[1]===4,()=>"boxes must have 4 columns, but 2nd dimension was ".concat(t.shape[1])),I(e.rank===1,()=>"scores must be a 1D tensor"),I(e.shape[0]===i,()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(e.shape[0])),I(0<=r&&r<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(r,"'")),{maxOutputSize:n,iouThreshold:o,scoreThreshold:s,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY){const r=N(t,"boxes","nonMaxSuppression","float32"),i=N(e,"scores","nonMaxSuppression","float32"),a=oc(r,i,n,o,s);n=a.maxOutputSize,o=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:o,scoreThreshold:s};return O.runKernel(x1,{boxes:r,scores:i},l)}const wK=M({nonMaxSuppression_:yK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $K(t,e,n){const o=kK(t,e,n),s=o<0?-(o+1):o;t.splice(s,0,e)}function kK(t,e,n){return IK(t,e,n||CK)}function CK(t,e){return t>e?1:t<e?-1:0}function IK(t,e,n){let o=0,s=t.length,r=0,i=!1;for(;o<s;){r=o+(s-o>>>1);const a=n(e,t[r]);a>0?o=r+1:(s=r,i=!a)}return i?o:-o-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pw(t,e,n,o,s){return bw(t,e,n,o,s,0)}function mw(t,e,n,o,s,r){return bw(t,e,n,o,s,0,!1,r,!0)}function gw(t,e,n,o,s,r){return bw(t,e,n,o,s,r,!0)}function bw(t,e,n,o,s,r,i=!1,a=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>s&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(FI);const u=r>0?-.5/r:0,d=[],h=[];for(;d.length<n&&c.length>0;){const b=c.pop(),{score:g,boxIndex:x,suppressBeginIndex:v}=b;if(g<s)break;let y=!1;for(let w=d.length-1;w>=v;--w){const $=SK(t,x,d[w]);if($>=o){y=!0;break}if(b.score=b.score*EK(o,u,$),b.score<=s)break}b.suppressBeginIndex=d.length,y||(b.score===g?(d.push(x),h.push(b.score)):b.score>s&&$K(c,b,FI))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function SK(t,e,n){const o=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),r=Math.min(o[0],o[2]),i=Math.min(o[1],o[3]),a=Math.max(o[0],o[2]),l=Math.max(o[1],o[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(a-r)*(l-i),p=(d-c)*(h-u);if(f<=0||p<=0)return 0;const m=Math.max(r,c),b=Math.max(i,u),g=Math.min(a,d),x=Math.min(l,h),v=Math.max(g-m,0)*Math.max(x-b,0);return v/(f+p-v)}function EK(t,e,n){const o=Math.exp(e*n*n);return n<=t?o:0}function FI(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function TK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY){const r=N(t,"boxes","nonMaxSuppressionAsync"),i=N(e,"scores","nonMaxSuppressionAsync"),a=oc(r,i,n,o,s);n=a.maxOutputSize,o=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([r.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:d}=pw(c,u,n,o,s);return r!==t&&r.dispose(),i!==e&&i.dispose(),oo(d,"int32")}const NK=TK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY,r=0){const i=N(t,"boxes","nonMaxSuppression"),a=N(e,"scores","nonMaxSuppression"),l=oc(i,a,n,o,s,r);n=l.maxOutputSize,o=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c={boxes:i,scores:a},u={maxOutputSize:n,iouThreshold:o,scoreThreshold:s,softNmsSigma:r},d=O.runKernel(y1,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const AK=M({nonMaxSuppressionWithScore_:RK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function DK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY,r=0){const i=N(t,"boxes","nonMaxSuppressionAsync"),a=N(e,"scores","nonMaxSuppressionAsync"),l=oc(i,a,n,o,s,r);n=l.maxOutputSize,o=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c=await Promise.all([i.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=gw(u,d,n,o,s,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:oo(h,"int32"),selectedScores:oo(f)}}const _K=DK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY,r=!1){const i=N(t,"boxes","nonMaxSuppression"),a=N(e,"scores","nonMaxSuppression"),l=oc(i,a,n,o,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:i,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:r},p=O.runKernel(v1,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const FK=M({nonMaxSuppressionPadded_:OK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PK(t,e,n,o=.5,s=Number.NEGATIVE_INFINITY,r=!1){const i=N(t,"boxes","nonMaxSuppressionAsync"),a=N(e,"scores","nonMaxSuppressionAsync"),l=oc(i,a,n,o,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=mw(h,f,c,u,d,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:oo(p,"int32"),validOutputs:ze(m,"int32")}}const LK=PK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(t,e,n=!1,o=!1){const s=N(t,"images","resizeBilinear");I(s.rank===3||s.rank===4,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(s.rank,".")),I(e.length===2,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(e,".")),I(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=s,i=!1;s.rank===3&&(i=!0,r=L(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:o,size:e},c=O.runKernel(fg,a,l);return i?L(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const AA=M({resizeBilinear_:MK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(t,e,n=!1,o=!1){const s=N(t,"images","resizeNearestNeighbor");I(s.rank===3||s.rank===4,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(s.rank,".")),I(e.length===2,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(e,".")),I(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),I(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=s,i=!1;s.rank===3&&(i=!0,r=L(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:o,size:e},c=O.runKernel(hg,a,l);return i?L(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const DA=M({resizeNearestNeighbor_:zK});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(t,e="binary",n=!1,o=.5){const s=N(t,"image","threshold"),r=.2989,i=.587,a=.114,l=s.shape[0]*s.shape[1];let c=F(oo([o]),255),u,d,h,f;if(I(s.rank===3,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(s.rank,".")),I(s.shape[2]===3||s.shape[2]===1,()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(s.shape[2],".")),I(s.dtype==="int32"||s.dtype==="float32",()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(s.dtype,".")),I(e==="otsu"||e==="binary",()=>"Method must be binary or otsu, but was ".concat(e)),s.shape[2]===3){[u,d,h]=$o(s,[1,1,1],-1);const b=F(u,r),g=F(d,i),x=F(h,a);f=oe(oe(b,g),x)}else f=t;if(e==="otsu"){const b=P5(de(vA(f),"int32"),Zc([]),256);c=VK(b,l)}const p=n?nc(f,c):No(f,c);return de(F(p,255),"int32")}function VK(t,e){let n=oo([-1]),o=oo([0]),s=oo([0]),r,i,a,l,c,u;for(let d=0;d<t.size-1;d++){r=Je(t,0,d+1),i=Je(t,d+1),c=we(ye(r),e),u=we(ye(i),e);const h=ye(F(r,Eu(0,r.size)));a=we(h,ye(r));const f=Sg(i.shape,r.size),p=oe(Eu(0,i.size),f),m=F(i,p);l=we(ye(m),ye(i));const b=ke(a,l),g=ke(a,l),x=F(c,u);s=F(F(x,b),g);const v=No(s,o);o=Tn(v,s,o),n=Tn(v,oo([d]),n)}return n}const WK=M({threshold_:BK});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(t,e,n="nearest",o="constant",s=0,r){const i=N(t,"image","transform","float32"),a=N(e,"transforms","transform","float32");I(i.rank===4,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")),I(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),I(r==null||r.length===2,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(r,"."));const l={image:i,transforms:a},c={interpolation:n,fillMode:o,fillValue:s,outputShape:r};return O.runKernel(N1,l,c)}const HK=M({transform_:UK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GK(t,e,n){const o=N(t,"a","bandPart");I(o.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(o.rank,"."));const s=o.shape,[r,i]=o.shape.slice(-2);let a,l;typeof e=="number"?(I(e%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(e,".")),I(e<=r,()=>"bandPart(): numLower (".concat(e,")")+" must not be greater than the number of rows (".concat(r,").")),a=N(e<0?r:e,"numLower","bandPart")):(I(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Tn(dp(e,0),r,Su(e,r))),typeof n=="number"?(I(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),I(n<=i,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,").")),l=N(n<0?i:n,"numUpper","bandPart")):(I(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Tn(dp(n,0),i,Su(n,i)));const c=L(Eu(0,r,1,"int32"),[-1,1]),u=Eu(0,i,1,"int32"),d=ke(c,u),h=kr(nc(d,a),Ia(d,kt(l))),f=Yt([r,i],o.dtype);return L(ai(pa(L(o,[-1,r,i])).map(p=>Tn(h,p,f))),s)}const jK=M({bandPart_:GK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qK(t){let e;if(Array.isArray(t)){e=!1,I(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let r=1;r<t.length;++r)I(t[r].shape[0]===s,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(t[r].shape[0]," vs. ").concat(s,")"))}else e=!0,t=$o(t,t.shape[0],0).map(s=>qd(s,[0]));I(t.length<=t[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(t.length,") exceeds ")+"number of dimensions (".concat(t[0].shape[0],")."));const n=[],o=t;for(let s=0;s<t.length;++s)n.push(O.tidy(()=>{let r=o[s];if(s>0)for(let i=0;i<s;++i){const a=F(ye(F(n[i],r)),n[i]);r=ke(r,a)}return we(r,Tg(r,"euclidean"))}));return e?ai(n,0):n}const KK=M({gramSchmidt_:qK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XK(t,e=!1){if(I(t.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(t.rank)),t.rank===2)return PI(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),o=pa(L(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],r=[];o.forEach(l=>{const[c,u]=PI(l,e);s.push(c),r.push(u)});const i=L(ai(s,0),t.shape),a=L(ai(r,0),t.shape);return[i,a]}}function PI(t,e=!1){return O.tidy(()=>{I(t.shape.length===2,()=>"qr2d() requires a 2D Tensor, but got a ".concat(t.shape.length,"D Tensor."));const n=t.shape[0],o=t.shape[1];let s=dA(n),r=qi(t);const i=Kb([[1]],[1,1]);let a=qi(i);const l=n>=o?o:n;for(let c=0;c<l;++c){const u=r,d=a,h=s;[a,r,s]=O.tidy(()=>{const f=Je(r,[c,c],[n-c,1]),p=Tg(f),m=Je(r,[c,c],[1,1]),b=Tn(No(m,0),Kb([[-1]]),Kb([[1]])),g=ke(m,F(b,p)),x=we(f,g);x.shape[0]===1?a=qi(i):a=Wn([i,Je(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const v=kt(we(Be(b,g),p)),y=Je(r,[c,0],[n-c,o]),w=F(v,a),$=Oe(a);if(c===0)r=ke(y,Be(w,Be($,y)));else{const E=ke(y,Be(w,Be($,y)));r=Wn([Je(r,[0,0],[c,o]),E],0)}const k=Oe(w),C=Je(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=ke(C,Be(Be(C,a),k));else{const E=ke(C,Be(Be(C,a),k));s=Wn([Je(s,[0,0],[n,c]),E],1)}return[a,r,s]}),Te([u,d,h])}return!e&&n>o&&(s=Je(s,[0,0],[n,o]),r=Je(r,[0,0],[o,o])),[s,r]})}const YK=M({qr_:XK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gr={flipLeftRight:fK,grayscaleToRGB:mK,resizeNearestNeighbor:DA,resizeBilinear:AA,rgbToGrayscale:bK,rotateWithOffset:vK,cropAndResize:dK,nonMaxSuppression:wK,nonMaxSuppressionAsync:NK,nonMaxSuppressionWithScore:AK,nonMaxSuppressionWithScoreAsync:_K,nonMaxSuppressionPadded:FK,nonMaxSuppressionPaddedAsync:LK,threshold:WK,transform:HK},QK={bandPart:jK,gramSchmidt:KK,qr:YK};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZK=new Map,JK=new Map;class sc{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Bo{constructor(){this.classNameMap={}}static getMap(){return Bo.instance==null&&(Bo.instance=new Bo),Bo.instance}static register(e){Bo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function te(t,e,n){I(t.className!=null,()=>"Class being registered does not have the static className property defined."),I(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),I(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const o=n,s=e+">"+o;return Bo.register(t),ZK.set(s,t),JK.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $i extends sc{minimize(e,n=!1,o){const{value:s,grads:r}=this.computeGradients(e,o);if(o!=null){const i=o.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return Te(r),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return s8(e,n)}dispose(){this.iterations_!=null&&Te(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ze(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty($i,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _A extends $i{static get className(){return"Adadelta"}constructor(e,n,o=null){super(),this.learningRate=e,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(o=>o.name):Object.keys(e)).forEach((o,s)=>{const r=O.registeredVariables[o],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:"".concat(o,"/accum_grad"),variable:G(()=>Fe(r).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:"".concat(o,"/accum_var"),variable:G(()=>Fe(r).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[o];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;G(()=>{const u=oe(F(l,this.rho),F(rt(a),1-this.rho)),d=F(we(Dn(oe(c,this.epsilon)),Dn(oe(l,this.epsilon))),a),h=oe(F(c,this.rho),F(rt(d),1-this.rho));l.assign(u),c.assign(h);const f=oe(F(d,-this.learningRate),r);r.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Te(this.accumulatedGrads.map(e=>e.variable)),Te(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,o=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(o)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(o)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OA extends $i{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(o=>o.name):Object.keys(e)).forEach((o,s)=>{const r=O.registeredVariables[o];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:"".concat(o,"/accumulator"),variable:G(()=>Sg(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[o];if(i==null)return;const a=this.accumulatedGrads[s].variable;G(()=>{const l=oe(a,rt(i));a.assign(l);const c=oe(F(we(i,Dn(oe(l,O.backend.epsilon()))),-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Te(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FA extends $i{static get className(){return"Adam"}constructor(e,n,o,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=o,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],G(()=>{this.accBeta1=ze(n).variable(),this.accBeta2=ze(o).variable()}),s==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(o=>o.name):Object.keys(e);G(()=>{const o=ke(1,this.accBeta1),s=ke(1,this.accBeta2);n.forEach((r,i)=>{const a=O.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(r,"/m"),variable:G(()=>Fe(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:"".concat(r,"/v"),variable:G(()=>Fe(a).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=oe(F(u,this.beta1),F(c,1-this.beta1)),f=oe(F(d,this.beta2),F(rt(c),1-this.beta2)),p=we(h,o),m=we(f,s);u.assign(h),d.assign(f);const b=oe(F(we(p,oe(Dn(m),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(F(this.accBeta1,this.beta1)),this.accBeta2.assign(F(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Te(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Te(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),G(()=>{this.accBeta1.assign(Ll(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ll(this.beta2,this.iterations_+1))});const n=e.length/2,o=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(o)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(o)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PA extends $i{static get className(){return"Adamax"}constructor(e,n,o,s=null,r=0){super(),this.learningRate=e,this.beta1=n,this.beta2=o,this.epsilon=s,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],G(()=>{this.iteration=ze(0).variable(),this.accBeta1=ze(n).variable()}),s==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(o=>o.name):Object.keys(e);G(()=>{const o=ke(1,this.accBeta1),s=we(-this.learningRate,oe(F(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=O.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(r,"/m"),variable:Fe(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:"".concat(r,"/v"),variable:Fe(a).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=oe(F(u,this.beta1),F(c,1-this.beta1)),f=F(d,this.beta2),p=Cn(c),m=wi(f,p);u.assign(h),d.assign(m);const b=oe(F(we(s,o),we(h,oe(m,this.epsilon))),a);a.assign(b)}),this.iteration.assign(oe(this.iteration,1)),this.accBeta1.assign(F(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Te(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Te(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xw extends $i{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(o=>o.name):Object.keys(e)).forEach((o,s)=>{const r=Array.isArray(e)?e[s].tensor:e[o];if(r==null)return;const i=O.registeredVariables[o];G(()=>{const a=oe(F(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ks(ze(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LA extends xw{static get className(){return"Momentum"}constructor(e,n,o=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=ze(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(o=>o.name):Object.keys(e)).forEach((o,s)=>{const r=O.registeredVariables[o];this.accumulations[s]==null&&(this.accumulations[s]={originalName:"".concat(o,"/momentum"),variable:G(()=>Fe(r).variable(!1))});const i=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[o];a!=null&&G(()=>{let l;const c=oe(F(this.m,i),a);this.useNesterov?l=oe(F(this.c,oe(a,F(c,this.m))),r):l=oe(F(this.c,c),r),i.assign(c),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Te(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MA extends $i{static get className(){return"RMSProp"}constructor(e,n=.9,o=0,s=null,r=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=o,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,s==null&&(this.epsilon=O.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(o=>o.name):Object.keys(e)).forEach((o,s)=>{const r=O.registeredVariables[o],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:"".concat(o,"/rms"),variable:G(()=>Fe(r).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:"".concat(o,"/momentum"),variable:G(()=>Fe(r).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:"".concat(o,"/mg"),variable:G(()=>Fe(r).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[o];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;G(()=>{const u=oe(F(l,this.decay),F(rt(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=oe(F(d,this.decay),F(a,1-this.decay)),f=we(F(a,this.learningRate),Dn(ke(u,oe(rt(h),this.epsilon)))),p=oe(F(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(p);const m=ke(r,p);r.assign(m)}else{const d=oe(F(l,this.decay),F(rt(a),1-this.decay)),h=oe(F(c,this.momentum),we(F(a,this.learningRate),Dn(oe(d,this.epsilon))));l.assign(d),c.assign(h);const f=ke(r,h);r.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Te(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Te(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Te(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,o=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(o)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(o)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eX=[_A,OA,FA,PA,LA,MA,xw];function tX(){for(const t of eX)te(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LI(t,e,n,o){i(t),n=n==null?0:n,o=o==null?1:o,a(n,o);let s=0;const r=l=>(l.then(c=>{const u=n+ ++s/t.length*(o-n);return e(u),c}),l);function i(l){I(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){I(l>=0&&l<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(l)),I(c>=0&&c<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(c)),I(c>=l,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(l," and endFraction ")+"".concat(c))}return Promise.all(t.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nX(t,e){e==null&&(e={});const n=e.fetchFunc==null?j().platform.fetch:e.fetchFunc,o=t.map(d=>n(d,e.requestInit,{isBinary:!0})),s=0,r=.5,a=(e.onProgress==null?await Promise.all(o):await LI(o,e.onProgress,s,r)).map(d=>d.arrayBuffer()),l=.5,c=1;return e.onProgress==null?await Promise.all(a):await LI(a,e.onProgress,l,c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oX="application/octet-stream",sX="application/json";class vw{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(I(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=j().platform.fetch,I(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&I(e.length===2,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=pG(e,o);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:sX}),"model.json"),e.weightData!=null){const i=xi.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:oX}),"model.weights.bin")}const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:F1(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let n;try{n=await e.json()}catch(r){let i="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const o=n.modelTopology,s=n.weightsManifest;if(o==null&&s==null)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return gG(n,r=>this.loadWeights(r))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[o,s]=rX(n),r=this.weightPathPrefix||o,i=bG(e),a=[],l=[];for(const u of e)for(const d of u.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):a.push(r+d+s);this.weightUrlConverter&&a.push(...await Promise.all(l));const c=await nX(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,c]}}vw.URL_SCHEME_REGEX=/^https?:\/\//;function rX(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),o=t.substring(0,e),s=n>e?t.substring(n):"";return[o+"/",s]}function MI(t){return t.match(vw.URL_SCHEME_REGEX)!=null}const zA=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(o=>MI(o)):n=MI(t),n)return BA(t,e)}return null};jt.registerSaveRouter(zA);jt.registerLoadRouter(zA);function BA(t,e){return new vw(t,e)}function iX(t,e){return BA(t,e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Ti;function aX(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,s=!1,r=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)r=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(t.constructor.name));if(Cx($x,O.backendName)!=null){const p={pixels:t},m={numChannels:e};return O.runKernel($x,p,m)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(i)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(o||n)d=t.data;else if(r||s||a){if(Ti==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Ti=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Ti=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ti.canvas.width=c,Ti.canvas.height=u,Ti.drawImage(t,0,0,c,u),d=Ti.getImageData(0,0,c,u).data}let h;if(e===4)h=new Int32Array(d);else{const p=c*u;h=new Int32Array(p*e);for(let m=0;m<p;m++)for(let b=0;b<e;++b)h[m*e+b]=d[m*4+b]}return Wq(h,[u,c,e],"int32")}const VA=M({fromPixels_:aX});function yw(t,e){const n=t.shape.length,o=e.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(o<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(o,"."));if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.shape[o-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(e.shape[o-1]," vs. ").concat(n));if(Q(t.shape)===0)throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(t.shape,"."));const s=e.shape,r=s[s.length-1];let i=1;for(let d=0;d<s.length-1;++d)i*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=r;d<n;++d)c*=a[d],l.push(a[d]);const u=[...ve(t.shape).map(d=>d/c),1].slice(0,r);return[l,i,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zx=-2,lX=-1;function ww(t,e,n){const o=t.shape.length;I(o===e.length,()=>"Error in slice".concat(o,"D: Length of begin ").concat(e," must ")+"match the rank of the array (".concat(o,").")),I(o===n.length,()=>"Error in slice".concat(o,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(o,")."));for(let s=0;s<o;++s)I(e[s]+n[s]<=t.shape[s],()=>"Error in slice".concat(o,"D: begin[").concat(s,"] + size[").concat(s,"] ")+"(".concat(e[s]+n[s],") would overflow input.shape[").concat(s,"] (").concat(t.shape[s],")"))}function cX(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function $w(t,e,n){const o=[];for(let s=0;s<t.length;s++)o[s]=Math.ceil((e[s]-t[s])/n[s]);return o}function WA(t,e,n,o){const s=[...t];for(let r=s.length;r<o.length;r++)s.push(1);for(let r=0;r<n;r++)r===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function UA(t,e,n){return n<=t?n:n-(e-1)}function HA(t,e){const n=[];for(let o=0;o<t;o++)n.push(e+o);return n}function uX(t,e,n,o,s,r,i,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&n>0){const f=e[0],p=n+1;u=GA(i,f,p,o,t),d=jA(a,f,p,s,t),h=WA(r,f,p,t)}else for(let f=0;f<c;f++)u[f]=KA(i,o,r,t,f,l),d[f]=XA(a,s,r,t,f,l),h[f]=qA(r,f,l);return{begin:u,end:d,strides:h}}function GA(t,e,n,o,s){const r=[...s],i=HA(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const l=UA(e,n,a);let c=o[l];t&1<<l&&(c=0),r[a]=c}return r}function jA(t,e,n,o,s){const r=[...s],i=HA(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=UA(e,n,a);let c=o[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),r[a]=c}for(let a=0;a<r.length;a++){const l=s[a];r[a]<0&&(r[a]+=l),r[a]=ra(0,r[a],s[a])}return r}function qA(t,e,n){let o=t[e];return(n&1<<e||o==null)&&(o=1),o}function KA(t,e,n,o,s,r){let i=e[s];const a=n[s]||1;(t&1<<s||r&1<<s||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=o[s];return i<0&&(i+=l),i=ra(0,i,l-1),i}function XA(t,e,n,o,s,r){let i=e[s];const a=n[s]||1;(t&1<<s||r&1<<s||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=o[s];return i<0&&(i+=l),a>0?i=ra(0,i,l):i=ra(-1,i,l-1),i}function kw(t,e,n){let o=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){o=s;break}for(let s=o+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function Cw(t,e){let n=t.length>0?t[t.length-1]:1;for(let o=0;o<t.length-1;o++)n+=t[o]*e[o];return n}function Rg(t,e,n){let o;const s=t.shape.length;typeof e=="number"?o=[e,...new Array(s-1).fill(0)]:e.length<s?o=e.concat(new Array(s-e.length).fill(0)):o=e.slice(),o.forEach(i=>{I(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(s).fill(-1):typeof n=="number"?r=[n,...new Array(s-1).fill(-1)]:n.length<s?r=n.concat(new Array(s-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:(I(i===-1,()=>"Negative size values should be exactly -1 but got "+"".concat(i," for the slice() size at index ").concat(a,".")),t.shape[a]-o[a])),[o,r]}function Iw(t,e,n,o,s,r,i,a,l){let c;if(o==null?(c=new Array(e.length),c.fill(1)):c=o,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<d.dims;v++)u&&1<<v&a&&d.numAddAxisAfterEllipsis++,1<<v&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};dX(d,h);let f=!0,p=!0,m=!0;const b=[],g=[];for(let v=0;v<t.length;++v){if(h.strides[v]===0)throw Error("strides[".concat(v,"] must be non-zero"));const y=!!(h.shrinkAxisMask&1<<v),w=t[v];if(w===-1){b.push(y?1:-1);continue}const $=[h.beginMask&1<<v,h.endMask&1<<v],k=[h.strides[v]>0?0:-1,h.strides[v]>0?w:w-1];if(y&&h.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[v]===1;const C=!!(h.beginMask&1<<v&&h.endMask&1<<v);if(h.beginValid&&h.endValid){if(y){const P=h.begin[v]<0?w+h.begin[v]:h.begin[v];if(h.begin[v]=P,h.end[v]=h.begin[v]+1,P<0||P>=w)throw Error("slice index ".concat(h.begin[v]," of dimension ").concat(v," out of bounds."))}else h.begin[v]=zI(h.begin[v],0,h.strides[v],w,$,k),h.end[v]=zI(h.end[v],1,h.strides[v],w,$,k);const T=h.strides[v]===1&&h.begin[v]===0&&h.end[v]===w;f=f&&T,p=p&&(v===0&&h.strides[v]===1||T)}else f=f&&h.strides[v]===1&&C,p=p&&(v===0&&h.strides[v]===1||C);let E,S=!1;if(h.beginValid&&h.endValid?(E=h.end[v]-h.begin[v],S=!0):y?(E=1,S=!0):C&&w>=0&&(h.strides[v]<0?E=-w:E=w,S=!0),S){let T;E===0||E<0!=h.strides[v]<0?T=0:T=Math.trunc(E/h.strides[v])+(E%h.strides[v]!==0?1:0),b.push(T)}else b.push(-1)}for(let v=0;v<h.finalShapeGatherIndices.length;++v){const y=h.finalShapeGatherIndices[v];y>=0?g.push(b[y]):y===zx&&g.push(1)}return{finalShapeSparse:g.filter((v,y)=>h.finalShapeGatherIndices[y]!==zx),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function dX(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let o=0;o<t.dims;o++)if(1<<o&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-o)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&t.newAxisMask)e.finalShapeGatherIndices.push(zx),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(e.dims," dims, ").concat(e.begin.length,"."));t.begin!=null&&(e.begin[n]=t.begin[o]),t.end!=null&&(e.end[n]=t.end[o]),e.strides[n]=t.strides[o],t.beginMask&1<<o&&(e.beginMask|=1<<n),t.endMask&1<<o&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<o?(e.finalShapeGatherIndices.push(lX),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(o)),e.inputShapeGatherIndicesSparse[n]=o,n++}}function zI(t,e,n,o,s,r){if(s[e])return n>0?r[e]:r[e+1&1];{const i=t<0?o+t:t;return i<r[0]?r[0]:i>r[1]?r[1]:i}}const hX=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ww,computeFlatOffset:Cw,computeOutShape:$w,getNormalizedAxes:uX,isSliceContinous:kw,maskToAxes:cX,parseSliceParams:Rg,sliceInfo:Iw,startForAxis:KA,startIndicesWithElidedDims:GA,stopForAxis:XA,stopIndicesWithElidedDims:jA,stridesForAxis:qA,stridesWithElidedDims:WA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fX{static sgd(e){return new xw(e)}static momentum(e,n,o=!1){return new LA(e,n,o)}static rmsprop(e,n=.9,o=0,s=null,r=!1){return new MA(e,n,o,s,r)}static adam(e=.001,n=.9,o=.999,s=null){return new FA(e,n,o,s)}static adadelta(e=.001,n=.95,o=null){return new _A(e,n,o)}static adamax(e=.002,n=.9,o=.999,s=null,r=0){return new PA(e,n,o,s,r)}static adagrad(e,n=.1){return new OA(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ma=fX;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pX=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function YA(){return new Promise(t=>pX(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sw(t,e){const n=t[0].length;t.forEach((s,r)=>{I(s.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(r,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),I(e>=0&&e<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const o=t[0];t.forEach((s,r)=>{for(let i=0;i<n;i++)I(i===e||s[i]===o[i],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(s,") ")+"does not match the shape of the rest (".concat(o,") ")+"along the non-concatenated axis ".concat(r,"."))})}function Xs(t,e){const n=t[0].slice();for(let o=1;o<t.length;o++)n[e]+=t[o][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ps;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ps||(ps={}));function QA(t,e,n){let o=new Array;if(n==null&&e==null)return o;if(e==null)for(;o.length<t+n.length;)o.push(-1);else o=e.slice();if(n==null)return o;if(t+n.length!==o.length)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.rank = ").concat(t+n.length,", but shape.rank = ").concat(o.length));for(let s=1;s<n.length;++s){const r=n[s],i=o[o.length-n.length+s],a=o[i];if(r>=0)if(a>=0){if(a!==r)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.shape[").concat(s+t,"] = ").concat(r," but shape[").concat(s+t,"] = ").concat(a))}else o[i]=r}return o}function ZA(t){const e={FIRST_DIM_SIZE:ps.FIRST_DIM_SIZE,VALUE_ROWIDS:ps.VALUE_ROWIDS,ROW_LENGTHS:ps.ROW_LENGTHS,ROW_SPLITS:ps.ROW_SPLITS,ROW_LIMITS:ps.ROW_LIMITS,ROW_STARTS:ps.ROW_STARTS},n=[];for(const o of t)if(o in e)n.push(e[o]);else break;return n}function JA(t){return t.length===0?0:t[0]===ps.FIRST_DIM_SIZE?t.length-1:t.length}function eD(t,e){if(t==null||e==null)return;const n=t.length,o=e.length;if(n>=o)throw new Error("defaultValue.shape=".concat(t," and ragged tensor flatValues.shape=").concat(e,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(o,")"));for(let s=0;s<Math.min(n,o-1);++s){const r=t[s],i=e[s+1];if(r>=0&&i>=0&&r!==1&&r!==i)throw new Error("defaultValue.shape=".concat(t,", and ragged tensor input flatValues.shape=").concat(e," are incompatible: defaultValue.shape[").concat(s-t.length,"] = ").concat(r," but ragged tensor input.flatValues.shape[").concat(s-t.length,"] = ").concat(i))}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ew=30;function Ag(t){return t<=Ew?t:vx(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tw(t,e,n){const o=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[o,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xd(t,e,n,o=!0){let s=[];if(o)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const r=e.length;for(let i=0;i<r;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(r+1))}return s}function Yd(t,e,n=!0){const o=[];if(n){o.push(e);for(let s=e+1;s<t;++s)s<=2*e?(o.push(s),o.push(s-(e+1))):o.push(s)}else{const s=[],r=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?r.push(i):s.push(i);o.push(...s),o.push(0),o.push(...r)}return o}function Qd(t,e,n,o=!0){const s=[];o?s.push(t[0]/n):s.push(t[0]*n);for(let r=1;r<t.length;++r)r<=e.length?o?s.push(e[r-1]*t[r]):s.push(t[r]/e[r-1]):s.push(t[r]);return s}function Nw(t,e){const n=[0];for(let o=0;o<e;++o)n.push(t[o][0]);return n}function Rw(t,e,n){const o=t.slice(0,1);for(let s=0;s<n;++s)o.push(t[s+1]-e[s][0]-e[s][1]);return o}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dg=1.7580993408473768,_g=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aw=.3275911,Dw=.254829592,_w=-.284496736,Ow=1.421413741,Fw=-1.453152027,Pw=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(t.length,", imag: ").concat(e.length,"."));const n=new Float32Array(t.length*2);for(let o=0;o<n.length;o+=2)n[o]=t[o/2],n[o+1]=e[o/2];return n}function tD(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let o=0;o<t.length;o+=2)e[o/2]=t[o],n[o/2]=t[o+1];return{real:e,imag:n}}function nD(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),o=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],o[Math.floor(s/4)]=t[s+1];return{real:n,imag:o}}function oD(t){const e=Math.floor(t.length/4),n=new Float32Array(e),o=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],o[Math.floor(s/4)]=t[s+1];return{real:n,imag:o}}function Lw(t,e){const n=t[e*2],o=t[e*2+1];return{real:n,imag:o}}function sD(t,e,n,o){t[o*2]=e,t[o*2+1]=n}function rD(t,e){const n=new Float32Array(t/2),o=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const r=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(r),o[s]=Math.sin(r)}return{real:n,imag:o}}function iD(t,e,n){const o=(n?2:-2)*Math.PI*(t/e),s=Math.cos(o),r=Math.sin(o);return{real:s,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xb="->",mX=/->/g,BI=",",VI="...";function Mw(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(mX,"").length)/Xb.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Xb,'").'));const[o,s]=t.split(Xb);I(o.indexOf(VI)===-1,()=>'The ellipsis notation ("'.concat(VI,'") is not supported yet.'));const r=o.split(BI),i=r.length;if(e!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(e));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const f=s[h];if(!r.some(p=>p.indexOf(f)!==-1))throw new Error("Output subscripts contain the label ".concat(f," ")+"not present in the input subscripts.");a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<o.length;++h){const f=o[h];a.indexOf(f)===-1&&f!==BI&&a.push(f)}const l=new Array(r.length);for(let h=0;h<i;++h){if(new Set(r[h].split("")).size!==r[h].length)throw new Error("Found duplicate axes in input component ".concat(r[h],". ")+"Support for duplicate axes in input is not implemented yet.");l[h]=[];for(let f=0;f<r[h].length;++f)l[h].push(a.indexOf(r[h][f]))}const c=a.length,u=s.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function zw(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const o=[];for(let s=0;s<t;++s)n[s]===-1&&o.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:o}}function Bw(t,e,n){const o=new Array(t);for(let s=0;s<n.length;++s){const r=n[s].shape;for(let i=0;i<e[s].length;++i)o[e[s][i]]===void 0?o[e[s][i]]=r[i]:I(o[e[s][i]]===r[i],()=>"Expected dimension ".concat(o[e[s][i]]," at axis ").concat(i," ")+"of input shaped ".concat(JSON.stringify(r),", ")+"but got dimension ".concat(r[i]))}}function Vw(t,e){const n=t,o=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)o.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],l=gX(e,a);for(const c of l)r.indexOf(c)===-1&&(o[i].push(c),r.push(c))}return{path:n,steps:o}}function Ww(t){return t.every((e,n)=>e===n)}function gX(t,e){const n=[];for(let o=0;o<t.length;++o)(t[o].length===0||t[o].indexOf(e)!==-1||e===-1)&&n.push(o);return n}function Uw(t,e,n=0){let o=[];if(typeof e=="number")I(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),o=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);I(s<=1,()=>"There should be only one negative value in split array.");const r=e.indexOf(-1);if(r!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[r]=t.shape[n]-i}I(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),o=e}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aD(t){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(t)}function lD(t,e){return"indices(".concat(t,", 0) is invalid: ").concat(e," < 0")}function cD(t,e,n){return"indices(".concat(t,", 0) is invalid: ").concat(e," >= ").concat(n)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uD(t,e){return"only one output dimension may be -1, not both ".concat(t," and ").concat(e)}function dD(t,e){return"size ".concat(t," must be non-negative, not ").concat(e)}function hD(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function fD(t,e){const n=Q(t),o=Q(e);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(o,". inputShape=").concat(t," outputShape= ").concat(e)}function pD(t,e){const n=Q(t),o=Q(e);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(o,". inputShape=").concat(t," outputShape=").concat(e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bx(){return"segment ids must be >= 0"}function mD(){return"segment ids are not increasing"}function gD(t,e){return"Segment id ".concat(t," out of range [0, ").concat(e,"), possibly because segmentIds input is not sorted.")}function bD(t,e,n){return"Bad: indices[".concat(t,"] == ").concat(e," out of range [0, ").concat(n,")")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(t,e){let n=!1,o;for(t<=Ew?(o=t,n=!0):o=vx(t,Math.floor(Math.sqrt(t)));!n;)o>e||o===t?n=!0:o=vx(t,o+1);return o}function vD(t,e,n){const o=[],s=t.length;for(let r=0;r<s;r++)r!==e?o.push(t[r]):o.push(n);return o}function Hw(t,e,n,o){const s=e.shape.length,r=t.shape.length;if(o!==0&&(o<-s||o>s))throw new Error("Expect batchDims in the range of [-".concat(s,", ").concat(s,"], but got ").concat(o));if(o<0&&(o+=s),o>r)throw new Error("batchDims (".concat(o,") must be less than rank(x) (\n    ").concat(r,")."));if(n<o)throw new Error("batchDims (".concat(o,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<o;++d)if(t.shape[d]!==e.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(t.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(e.shape[d],"."));const i=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<o;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=o;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=o;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<r;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:a}}const bX=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:Hw,computeOutShape:vD,segOpComputeOptimalWindowSize:xD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ir(t){try{return t.map(e=>ii(e))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function yD(t){return t.map(e=>Jr(e))}const xX=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Dw,ERF_A2:_w,ERF_A3:Ow,ERF_A4:Fw,ERF_A5:Pw,ERF_P:Aw,PARALLELIZE_THRESHOLD:Ew,get RowPartitionType(){return ps},SELU_SCALE:_g,SELU_SCALEALPHA:Dg,applyActivation:hw,assertAndGetBroadcastShape:Ie,assertAxesAreInnerMostDims:un,assertParamsConsistent:Sw,assignToTypedArray:sD,axesAreInnerMostDims:U1,calculateShapes:Na,checkEinsumDimSizes:Bw,checkPadOnDimRoundingMode:qn,combineLocations:cA,combineRaggedTensorToTensorShapes:QA,complexWithEvenIndex:nD,complexWithOddIndex:oD,computeConv2DInfo:cn,computeConv3DInfo:vi,computeDefaultPad:P1,computeDilation2DInfo:Hd,computeOptimalWindowSize:Ag,computeOutAndReduceShapes:en,computeOutShape:Xs,computePool2DInfo:Zo,computePool3DInfo:Nr,convertConv2DDataFormat:Rr,decodeEinsumEquation:Mw,eitherStridesOrDilationsAreOne:vn,expandShapeToKeepDim:Ft,exponent:iD,exponents:rD,fromStringArrayToUint8:yD,fromUint8ToStringArray:Ir,getAxesPermutation:bt,getBroadcastDims:Pl,getComplexWithIndex:Lw,getEinsumComputePath:Vw,getEinsumPermutation:zw,getFusedBiasGradient:dw,getFusedDyActivation:uw,getImageCenter:Tw,getInnerMostAxes:Et,getPermuted:Yd,getRaggedRank:JA,getReductionAxes:Ut,getReshaped:Xd,getReshapedPermuted:Qd,getRowPartitionTypesHelper:ZA,getSliceBeginCoords:Nw,getSliceSize:Rw,getSparseFillEmptyRowsIndicesDenseShapeMismatch:aD,getSparseFillEmptyRowsNegativeIndexErrorMessage:lD,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:cD,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:hD,getSparseReshapeInputOutputMismatchErrorMessage:pD,getSparseReshapeInputOutputMultipleErrorMessage:fD,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:uD,getSparseReshapeNegativeOutputDimErrorMessage:dD,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:bD,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Bx,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:mD,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:gD,getUndoAxesPermutation:yi,isIdentityPermutation:Ww,log:P6,mergeRealAndImagArrays:Cr,prepareAndValidate:yw,prepareSplitSize:Uw,segment_util:bX,shouldFuse:fw,slice_util:hX,splitRealAndImagArrays:tD,stridesOrDilationsArePositive:da,tupleValuesAreOne:ua,upcastType:lo,validateDefaultValueShape:eD,validateInput:Uq,validateUpdateShape:EA,warn:xo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tX();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wD={kernelName:Cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,Kd(de(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vX={kernelName:qu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const o=rt(de(n,"float32")),s=Dn(ke(ze(1),o));return kt(we(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yX={kernelName:Ku,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const o=Dn(ke(rt(de(n,"float32")),1));return we(t,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wX={kernelName:ec,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{let a=t;const l=Ut(n.shape,s);return l.length>0&&(a=ye(a,l)),L(a,n.shape)},b:()=>{let a=t;const l=Ut(o.shape,s);return l.length>0&&(a=ye(a,l)),L(a,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $X={kernelName:Gy,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((o,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kX={kernelName:Im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CX={kernelName:Sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IX={kernelName:Xu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,Dn(ke(ze(1),rt(de(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SX={kernelName:Yu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const o=Dn(oe(ze(1),rt(de(n,"float32"))));return we(t,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EX={kernelName:Ju,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{const a=oe(rt(n),rt(o));let l=F(t,we(o,a));const c=Ut(n.shape,s);return c.length>0&&(l=ye(l,c)),L(l,n.shape)},b:()=>{const a=oe(rt(n),rt(o));let l=kt(F(t,we(n,a)));const c=Ut(o.shape,s);return c.length>0&&(l=ye(l,c)),L(l,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TX={kernelName:Qu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,oe(rt(de(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NX={kernelName:Zu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,ke(ze(1),rt(de(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(t,e,n,o,s,r){const i=N(t,"dy","avgPool3dGrad"),a=N(e,"input","avgPool3dGrad");let l=i,c=a,u=!1;a.rank===4&&(u=!0,l=L(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=L(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),I(l.rank===5,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")),I(c.rank===5,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")),qn("avgPool3dGrad",s,r);const d={dy:l,input:c},h={filterSize:n,strides:o,pad:s,dimRoundingMode:r},f=O.runKernel(Xy,d,h);return u?L(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const AX=M({avgPool3dGrad_:RX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DX={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{filterSize:s,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>AX(t,o,s,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _X(t,e,n,o,s){const r=N(t,"dy","avgPoolGrad"),i=N(e,"input","avgPoolGrad");I(i.rank===r.rank,()=>"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(r.rank,")"));let a=i,l=r,c=!1;i.rank===3&&(c=!0,a=L(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=L(r,[1,r.shape[0],r.shape[1],r.shape[2]])),I(l.rank===4,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")),I(a.rank===4,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(a.rank,"."));const u={dy:l,input:a},d={filterSize:n,strides:o,pad:s},h=O.runKernel(Ky,u,d);return c?L(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const OX=M({avgPoolGrad_:_X});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FX={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{filterSize:s,strides:r,pad:i}=n;return{x:()=>OX(t,o,s,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PX={kernelName:Nm,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[o,s]=e,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>Be(t,s,!1,!0),b:()=>Be(o,t,!0,!1)}:!r&&i?{a:()=>Be(t,s,!1,!1),b:()=>Be(t,o,!0,!1)}:r&&!i?{a:()=>Be(s,t,!1,!0),b:()=>Be(o,t,!1,!1)}:{a:()=>Be(s,t,!0,!0),b:()=>Be(t,o,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LX={kernelName:Rm,gradFunc:(t,e,n)=>{const{blockShape:o,crops:s}=n;return{x:()=>Q1(t,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MX={kernelName:_6,gradFunc:(t,e,n)=>{const o=n,s=o.inputShape,r=o.shape,i=Array.from(r);for(let l=s.length-1;l>=0;l--)if(s[l]===r[l])i[l]=1;else if(s[l]!==1)throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(r,"]."));const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>ye(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zX={kernelName:ed,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BX={kernelName:td,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VX={kernelName:nd,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{clipValueMin:s,clipValueMax:r}=n;return{x:()=>Tn(kr(Ia(o,s),nc(o,r)),t,Fe(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WX={kernelName:Am,inputsToSave:["x"],gradFunc:wD.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UX={kernelName:Dm,saveAllInputs:!0,gradFunc:(t,e,n)=>{const o=e.map(l=>l.shape),{axis:s}=n,r=Re(s,e[0].shape)[0],i=o.map(l=>l[r]);return $o(t,i,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HX={kernelName:_m,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[o,s]=e,{dilations:r,strides:i,pad:a,dataFormat:l}=n;return I(ua(r),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(r,"'")),{x:()=>B1(o.shape,t,s,i,a,l),filter:()=>cw(o,t,s.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GX={kernelName:Om,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[o,s]=e,{strides:r,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>ha(t,s,r,i,a,1,l),filter:()=>cw(t,o,s.shape,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(t,e,n,o,s){let r=t;t.rank===4&&(r=L(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=L(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),I(r.rank===5,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(r.shape,".")),I(i.rank===5,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")),I(n.length===5,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),I(r.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(r.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),I(i.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const a={x:r,dy:i},l={strides:o,pad:s,filterShape:n};return O.runKernel(e1,a,l)}const qX=M({conv3DBackpropFilter_:jX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KX={kernelName:Fm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:o,strides:s,pad:r}=n;I(ua(o),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(o,"'"));const[i,a]=e;return{x:()=>iA(i.shape,t,a,s,r),filter:()=>qX(i,t,a.shape,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XX={kernelName:od,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(kt(kA(de(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YX={kernelName:sd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(CA(de(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QX={kernelName:Pm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{axis:s,exclusive:r,reverse:i}=n;return{x:()=>{const a=bt([s],o.rank);let l=lA(t,s,r,!i);return a!=null&&(l=Oe(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZX={kernelName:Lm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:o,strides:s,pad:r,dimRoundingMode:i}=n,a=o==null?[1,1]:o;I(ua(a),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(a,"'"));const[l,c]=e;return I(l.rank===4,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")),I(c.rank===4,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")),I(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")),I(vn(s,a),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(s," and dilations ")+"'".concat(a,"'.")),qn("depthwiseConv2d",r,i),{x:()=>lK(l.shape,t,c,s,r,a,i),filter:()=>iK(l,t,c.shape,s,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JX={kernelName:Mm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[o,s]=e,r={x:o,filter:s,dy:t},i={x:o,filter:s,dy:t};return{x:()=>O.runKernel(yx,r,n),filter:()=>O.runKernel(wx,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7={kernelName:id,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,o={dy:t,y:n};return{x:()=>O.runKernel(c1,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t7={kernelName:ad,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,o=F($r(kt(rt(n))),2/Math.sqrt(Math.PI));return{x:()=>F(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7={kernelName:ld,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o7={kernelName:Bm,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>L(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s7={kernelName:cd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,$r(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7={kernelName:ud,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7={kernelName:dd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{const a=we(t,de(o,"float32")),l=Ut(n.shape,s);return l.length>0?L(ye(a,l),n.shape):a},b:()=>{let a=F(t,de(n,"float32"));const l=Ut(o.shape,s);l.length>0&&(a=L(ye(a,l),o.shape));const c=rt(o);return kt(we(a,de(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7={kernelName:Vm,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:o}=n,[s,r,i,a]=e,l=a==null?ze(1):a,c=Ut(r.shape,s.shape),u=[];if(r.rank===1){for(let y=0;y<s.shape.length-1;++y)u.push(s.shape[y]);u.push(1)}const d=ke(s,r),h=F(t,l),f=yA(oe(i,ze(o))),p=F(F(F(f,f),f),ze(-.5));return{x:()=>r.rank===1?L(F(F(t,gs(L(f,[1,1,1,r.shape[0]]),u)),l),s.shape):L(F(F(t,f),l),s.shape),mean:()=>{let y=F(F(f,ze(-1)),h);return r.rank===1&&(y=ye(y,c)),L(y,r.shape)},variance:()=>{let y=F(F(p,d),h);return r.rank===1&&(y=ye(y,c)),L(y,r.shape)},scale:()=>{const y=F(d,f);let w=F(t,y);return r.rank===1&&(w=ye(w,c)),L(w,r.shape)},offset:()=>{let y=t;return r.rank===1&&(y=ye(y,c)),L(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7={kernelName:Wm,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[o,s]=e,{axis:r}=n,i=Re(r,o.shape)[0];return{x:()=>{const l=o.shape,c=s.size,u=l.slice(0,i),d=u.length,h=l.slice(r,l.length).slice(1),f=h.length,p=WI(0,d),m=WI(d+1,d+1+f),b=UI([u,[c],h]),g=L(t,b),x=L(s,[c]),v=UI([[d],p,m]),y=Oe(g,v);let w=NA(y,x,o.shape[i]);const $=yi(v);return w=Oe(w,$),w},indices:()=>s}}};function WI(t,e){const n=[];for(let o=t;o<e;++o)n.push(o);return n}function UI(t){const e=[];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)e.push(t[n][o]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7={kernelName:hd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e;return{a:()=>Fe(n),b:()=>Fe(o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7={kernelName:fd,gradFunc:t=>({x:()=>de(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7={kernelName:pd,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7={kernelName:md,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7={kernelName:gd,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7={kernelName:Hm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{alpha:s}=n,r=No(o,0);return{x:()=>Tn(r,t,F(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7={kernelName:xd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,oe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7={kernelName:bd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,de(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b7={kernelName:F6,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[o]=e,{axis:s}=n;return{logits:()=>{const i=$r(o);return ke(t,F(ye(t,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7(t,e,n,o=5,s=1,r=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:o,bias:s,alpha:r,beta:i};return O.runKernel(m1,a,l)}const v7=M({localResponseNormalizationBackprop_:x7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7={kernelName:Ym,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[o,s]=e,{depthRadius:r,bias:i,alpha:a,beta:l}=n;return{x:()=>v7(o,s,t,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D(t,e,n,o){return e.rank<n.rank&&(e=L(e,Ft(e.shape,o))),t.rank<n.rank&&(t=L(t,Ft(t.shape,o))),{x:()=>F(t,de(Js(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HI={kernelName:Qm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const o=n,{reductionIndices:s}=o,r=e[0],i=e[1],a=Re(s,r.shape),l=$D(t,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7={kernelName:vd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e;return{a:()=>F(t,de(Ia(n,o),"float32")),b:()=>F(t,de(dp(n,o),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $7(t,e,n,o,s,r,i){const a=N(t,"dy","maxPool3dGrad"),l=N(e,"input","maxPool3dGrad"),c=N(n,"output","maxPool3dGrad");let u=a,d=l,h=c,f=!1;l.rank===4&&(f=!0,u=L(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=L(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=L(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),I(u.rank===5,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),I(d.rank===5,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")),I(h.rank===5,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")),qn("maxPool3dGrad",r,i);const p={dy:u,input:d,output:h},m={filterSize:o,strides:s,pad:r,dimRoundingMode:i},b=O.runKernel(b1,p,m);return f?L(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const k7=M({maxPool3dGrad_:$7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7={kernelName:Jm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[o,s]=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>k7(t,o,s,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7(t,e,n,o,s,r,i){const a=N(t,"dy","maxPoolGrad"),l=N(e,"input","maxPoolGrad"),c=N(n,"output","maxPoolGrad");I(l.rank===a.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(a.rank,")")),I(a.rank===4,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(a.rank,".")),I(l.rank===4,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")),qn("maxPoolGrad",r,i);const u={dy:a,input:l,output:c},d={filterSize:o,strides:s,pad:r,dimRoundingMode:i};return O.runKernel(g1,u,d)}const S7=M({maxPoolGrad_:I7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E7={kernelName:Zm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[o,s]=e,{filterSize:r,strides:i,pad:a}=n;return{x:()=>S7(t,o,s,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{axis:s}=n,r=Re(s,o.shape),a=en(o.shape,r)[1],l=Q(a);return{x:()=>{const u=o.shape.slice();r.forEach(f=>{u[f]=1});const d=L(t,u);return we(F(d,Sa(o.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7={kernelName:tg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const o=n,{axis:s}=o,[r,i]=e,a=Re(s,r.shape),l=$D(t,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7={kernelName:yd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e;return{a:()=>F(t,de(nc(n,o),"float32")),b:()=>F(t,de(No(n,o),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A7={kernelName:ng,inputsToSave:["x"],gradFunc:(t,e,n)=>{const o=e[0],{paddings:s}=n,r=s.map(i=>i[0]);return{x:()=>Je(t,r,o.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D7={kernelName:wd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{const a=Ut(n.shape,s);return a.length>0?L(ye(t,a),n.shape):t},b:()=>{const a=F(t,kt(Ng(we(n,o)))),l=Ut(o.shape,s);return l.length>0?L(ye(a,l),o.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7={kernelName:$d,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{const a=F(t,de(o,"float32")),l=Ut(n.shape,s);return l.length>0?L(ye(a,l),n.shape):a},b:()=>{const a=F(t,de(n,"float32")),l=Ut(o.shape,s);return l.length>0?L(ye(a,l),o.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O7={kernelName:og,gradFunc:t=>({x:()=>kt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7={kernelName:ig,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Yt(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7={kernelName:rg,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7={kernelName:ag,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:o}=n;return pa(t,o).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GI={kernelName:lg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const o=e[0],{paddings:s}=n,r=s.map(i=>i[0]);return{x:()=>Je(t,r,o.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M7={kernelName:kd,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,o,s]=e,r=n,i=o,a=Ie(r.shape,i.shape);return{a:()=>{const u=de(i,"float32");let d=F(t,F(u,Ll(r,ke(u,ze(1)))));const h=Ut(r.shape,a);return h.length>0&&(d=ye(d,h)),L(d,r.shape)},b:()=>{const u=No(r,0),d=Tn(u,er(r),Fe(r));let h=F(t,F(s,d));const f=Ut(i.shape,a);return f.length>0&&(h=ye(h,f)),L(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7={kernelName:cg,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,o]=e,s=No(n,0);return{x:()=>Tn(s,t,F(t,o)),alpha:()=>{let r=Tn(s,Fe(t),F(t,n));const i=Ut(o.shape,t.shape);return i.length>0&&(r=ye(r,i)),L(r,o.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B7(t,e,n){const o=t.shape.slice();o[n]=1;const s=L(e,o),r=Lx(t,n,!0,!1),i=Lx(t,n,!0,!0),a=F(r,i);return F(s,a)}function V7(t,e,n){const o=t.shape.length,s=o-n.length,r=bt(n,o);let i=t;r!=null&&(i=Oe(t,r));const a=i.shape.slice(),c=a.splice(o-n.length,n.length).reduce((h,f)=>h*f,1);a.push(c);const u=i.reshape(a);let d=B7(u,e,s);if(d=d.reshape(i.shape),r!=null){const h=yi(r);d=Oe(d,h)}return d}const W7={kernelName:ug,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{axis:s}=n;let r=[];return s==null?r=o.shape.map((i,a)=>a):typeof s=="number"?r=[s]:r=s,{x:()=>V7(o,t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7={kernelName:rd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{const a=we(t,de(o,"float32")),l=Ut(n.shape,s);return l.length>0?L(ye(a,l),n.shape):a},b:()=>{let a=F(t,de(n,"float32"));const l=Ut(o.shape,s);l.length>0&&(a=L(ye(a,l),o.shape));const c=rt(o);return kt(we(a,de(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H7={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,kt(rt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7={kernelName:Sd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,o=F(nc(n,6),Kd(n));return{x:()=>F(t,de(o,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j7={kernelName:Id,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,de(Kd(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q7={kernelName:dg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>L(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7={kernelName:fg,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[o]=e,s={dy:t,images:o};return{images:()=>O.runKernel(C1,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7={kernelName:hg,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[o]=e,s={dy:t,images:o};return{images:()=>O.runKernel(k1,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7={kernelName:pg,gradFunc:(t,e,n)=>{const{dims:o}=n,s=Re(o,t.shape);return{x:()=>fa(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7={kernelName:Ed,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z7={kernelName:Td,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(we(t,F(Ll(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7={kernelName:mg,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>de(Fe(n),"float32"),t:()=>F(t,de(n,t.dtype)),e:()=>F(t,de(q1(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9={kernelName:Nd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const o=No(n,ze(0)),s=ze(Dg),r=ze(_g),i=F(t,r),a=F(F(t,s),$r(de(n,"float32")));return Tn(o,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9={kernelName:_d,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,F(n,ke(ze(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n9={kernelName:Dd,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9={kernelName:Rd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(V1(de(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9={kernelName:Ad,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(aA(de(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r9={kernelName:gg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{begin:s,size:r}=n,i=o.shape,[a,l]=Rg(o,s,r),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],i[u]-a[u]-l[u]]);return{x:()=>Y1(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i9={kernelName:yg,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[o]=e,{dim:s}=n,r=!0,i=F(t,o);return{logits:()=>ke(i,F(ye(i,[s],r),o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a9={kernelName:Od,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,tc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jI={kernelName:xg,gradFunc:(t,e,n)=>{const{blockShape:o,paddings:s}=n;return{x:()=>z1(t,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qI={kernelName:vg,gradFunc:(t,e,n)=>{const{axis:o}=n;return{x:()=>Wn(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9={kernelName:Fd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,F(Dn(de(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9={kernelName:I1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(t,F(de(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9={kernelName:Pd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=ze(2);return{a:()=>F(t,F(s,ke(n,o))),b:()=>F(t,F(s,ke(o,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9={kernelName:Vd,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9={kernelName:Ld,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,o]=e,s=Ie(n.shape,o.shape);return{a:()=>{let a=t;const l=Ut(n.shape,s);return l.length>0&&(a=ye(a,l)),L(a,n.shape)},b:()=>{let a=t;const l=Ut(o.shape,s);return l.length>0&&(a=ye(a,l)),L(kt(a),o.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9={kernelName:bg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,s=o.shape.slice(),{axis:r}=n;Re(r,o.shape).forEach(c=>{s[c]=1});const a=L(t,s),l=F(a,Sa(o.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9={kernelName:Md,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>we(t,rt(V1(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m9={kernelName:zd,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F(ke(ze(1),rt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g9={kernelName:Bd,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[o]=e,{reps:s}=n;return{x:()=>{let i=Fe(o);if(o.rank===1)for(let a=0;a<s[0];++a)i=oe(i,Je(t,[a*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)i=oe(i,Je(t,[a*o.shape[0],l*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)i=oe(i,Je(t,[a*o.shape[0],l*o.shape[1],c*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)i=oe(i,Je(t,[a*o.shape[0],l*o.shape[1],c*o.shape[2],u*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(o.rank," tensors yet."));return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9={kernelName:yl,gradFunc:(t,e,n)=>{const o=n,{perm:s}=o,r=yi(s);return{x:()=>Oe(t,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9={kernelName:wg,gradFunc:(t,e,n)=>{const o=n,{axis:s}=o;return{value:()=>ai(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v9={kernelName:$g,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>y9(t,n)}}};function y9(t,e){const n=wi(e,Fe(e)),o=H1(t,n);let s=Ia(e,ze(0,"int32"));const r=o.rank-s.rank;for(let a=0;a<r;++a)s=zn(s,a+1);s=kr(s,Sa(o.shape,"bool"));const i=Fe(o);return Tn(s,o,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9={kernelName:kg,gradFunc:t=>({x:()=>Fe(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9=[wD,vX,yX,wX,$X,kX,CX,IX,SX,EX,TX,NX,DX,FX,PX,LX,MX,zX,BX,VX,WX,UX,GX,HX,KX,XX,YX,QX,ZX,JX,U7,e7,t7,n7,o7,s7,i7,r7,a7,l7,c7,u7,d7,h7,f7,p7,m7,g7,b7,y7,HI,HI,w7,C7,E7,T7,N7,R7,A7,D7,_7,O7,F7,P7,L7,GI,GI,M7,z7,W7,H7,G7,j7,q7,K7,X7,Y7,Q7,Z7,J7,e9,t9,n9,o9,s9,r9,i9,a9,jI,jI,qI,qI,l9,u9,c9,d9,h9,f9,p9,m9,g9,b9,x9,v9,w9];for(const t of $9)L6(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.abs=function(){return this.throwIfDisposed(),Cn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.acos=function(){return this.throwIfDisposed(),XG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.acosh=function(){return this.throwIfDisposed(),QG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.add=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.all=function(t,e){return this.throwIfDisposed(),oA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.any=function(t,e){return this.throwIfDisposed(),Fx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.argMax=function(t){return this.throwIfDisposed(),ku(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.argMin=function(t){return this.throwIfDisposed(),n5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.asScalar=function(){return this.throwIfDisposed(),I(this.size===1,()=>"The array must have only 1 element."),L(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.asType=function(t){return this.throwIfDisposed(),de(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.as1D=function(){return this.throwIfDisposed(),L(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.as2D=function(t,e){return this.throwIfDisposed(),L(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),L(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.as4D=function(t,e,n,o){return this.throwIfDisposed(),L(this,[t,e,n,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.as5D=function(t,e,n,o,s){return this.throwIfDisposed(),L(this,[t,e,n,o,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.asin=function(){return this.throwIfDisposed(),s5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.asinh=function(){return this.throwIfDisposed(),i5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.atan=function(){return this.throwIfDisposed(),l5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.atan2=function(t){return this.throwIfDisposed(),u5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.atanh=function(){return this.throwIfDisposed(),h5(this)};Y().prototype.avgPool=function(t,e,n,o){return this.throwIfDisposed(),L1(this,t,e,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),z1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.batchNorm=function(t,e,n,o,s){return this.throwIfDisposed(),Ig(this,t,e,n,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.cast=function(t){return this.throwIfDisposed(),de(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.ceil=function(){return this.throwIfDisposed(),z5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Co(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Dt&&(t=[t]),Wn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.conv1d=function(t,e,n,o,s,r){return this.throwIfDisposed(),sA(this,t,e,n,o,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.conv2dTranspose=function(t,e,n,o,s){return this.throwIfDisposed(),rA(this,t,e,n,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.conv2d=function(t,e,n,o,s,r){return this.throwIfDisposed(),ha(this,t,e,n,o,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.cos=function(){return this.throwIfDisposed(),V1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.cosh=function(){return this.throwIfDisposed(),aA(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Lx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),lA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),uj(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.depthwiseConv2d=function(t,e,n,o,s,r){return this.throwIfDisposed(),W1(this,t,e,n,o,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.dilation2d=function(t,e,n,o,s){return this.throwIfDisposed(),fj(this,t,e,n,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.divNoNan=function(t){return this.throwIfDisposed(),xj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.div=function(t){return this.throwIfDisposed(),we(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.dot=function(t){return this.throwIfDisposed(),yj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.elu=function(){return this.throwIfDisposed(),Eg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.equal=function(t){return this.throwIfDisposed(),Js(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.erf=function(){return this.throwIfDisposed(),Cj(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),_j(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.exp=function(){return this.throwIfDisposed(),$r(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.expandDims=function(t){return this.throwIfDisposed(),zn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.expm1=function(){return this.throwIfDisposed(),Lj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.fft=function(){return this.throwIfDisposed(),SA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.flatten=function(){return this.throwIfDisposed(),L(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.floor=function(){return this.throwIfDisposed(),Ng(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.floorDiv=function(t){return this.throwIfDisposed(),nA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.gather=function(t,e,n){return this.throwIfDisposed(),H1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ia(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.greater=function(t){return this.throwIfDisposed(),No(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.ifft=function(){return this.throwIfDisposed(),Mx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.irfft=function(){return this.throwIfDisposed(),Nq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.isFinite=function(){return this.throwIfDisposed(),jj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.isInf=function(){return this.throwIfDisposed(),Kj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.isNaN=function(){return this.throwIfDisposed(),Yj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.leakyRelu=function(t){return this.throwIfDisposed(),j1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.lessEqual=function(t){return this.throwIfDisposed(),nc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.less=function(t){return this.throwIfDisposed(),dp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.localResponseNormalization=function(t,e,n,o){return this.throwIfDisposed(),t8(this,t,e,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logSigmoid=function(){return this.throwIfDisposed(),l8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logSoftmax=function(t){return this.throwIfDisposed(),fA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),h8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.log=function(){return this.throwIfDisposed(),er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.log1p=function(){return this.throwIfDisposed(),hA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logicalAnd=function(t){return this.throwIfDisposed(),kr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logicalNot=function(){return this.throwIfDisposed(),q1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logicalOr=function(t){return this.throwIfDisposed(),pA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.logicalXor=function(t){return this.throwIfDisposed(),b8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Be(this,t,e,n)};Y().prototype.maxPool=function(t,e,n,o){return this.throwIfDisposed(),K1(this,t,e,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.max=function(t,e){return this.throwIfDisposed(),ks(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.maximum=function(t){return this.throwIfDisposed(),wi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.mean=function(t,e){return this.throwIfDisposed(),_t(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.min=function(t,e){return this.throwIfDisposed(),up(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.minimum=function(t){return this.throwIfDisposed(),Su(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),I8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.mod=function(t){return this.throwIfDisposed(),E8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.mul=function(t){return this.throwIfDisposed(),F(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.neg=function(){return this.throwIfDisposed(),kt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Tg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.notEqual=function(t){return this.throwIfDisposed(),hp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),mA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.onesLike=function(){return this.throwIfDisposed(),Qo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.pad=function(t,e){return this.throwIfDisposed(),Y1(this,t,e)};Y().prototype.pool=function(t,e,n,o,s,r){return this.throwIfDisposed(),L8(this,t,e,n,o,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.pow=function(t){return this.throwIfDisposed(),Ll(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.prelu=function(t){return this.throwIfDisposed(),Z1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.prod=function(t,e){return this.throwIfDisposed(),B8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.reciprocal=function(){return this.throwIfDisposed(),cq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.relu=function(){return this.throwIfDisposed(),Ta(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.relu6=function(){return this.throwIfDisposed(),xA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.reshapeAs=function(t){return this.throwIfDisposed(),L(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.reshape=function(t){return this.throwIfDisposed(),L(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),AA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),DA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.reverse=function(t){return this.throwIfDisposed(),fa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.rfft=function(){return this.throwIfDisposed(),Dq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.round=function(){return this.throwIfDisposed(),vA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.rsqrt=function(){return this.throwIfDisposed(),yA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.selu=function(){return this.throwIfDisposed(),wA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.separableConv2d=function(t,e,n,o,s,r){return this.throwIfDisposed(),$A(this,t,e,n,o,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sigmoid=function(){return this.throwIfDisposed(),tc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sign=function(){return this.throwIfDisposed(),xq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sin=function(){return this.throwIfDisposed(),kA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sinh=function(){return this.throwIfDisposed(),CA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.slice=function(t,e){return this.throwIfDisposed(),Je(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.softmax=function(t){return this.throwIfDisposed(),lw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.softplus=function(){return this.throwIfDisposed(),Gd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Q1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.split=function(t,e){return this.throwIfDisposed(),$o(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sqrt=function(){return this.throwIfDisposed(),Dn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.square=function(){return this.throwIfDisposed(),rt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Oq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.squeeze=function(t){return this.throwIfDisposed(),qd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Dt?[this,t]:[this,...t];return ai(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.step=function(t){return this.throwIfDisposed(),Kd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.stridedSlice=function(t,e,n,o,s,r,i,a){return this.throwIfDisposed(),zq(this,t,e,n,o,s,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sub=function(t){return this.throwIfDisposed(),ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.sum=function(t,e){return this.throwIfDisposed(),ye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.tan=function(){return this.throwIfDisposed(),Vq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.tanh=function(){return this.throwIfDisposed(),M1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.tile=function(t){return this.throwIfDisposed(),gs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.toBool=function(){return this.throwIfDisposed(),de(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.toFloat=function(){return this.throwIfDisposed(),de(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.toInt=function(){return this.throwIfDisposed(),de(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.topk=function(t,e){return this.throwIfDisposed(),Gq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.transpose=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.unique=function(t){return this.throwIfDisposed(),Kq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),NA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.unstack=function(t){return this.throwIfDisposed(),pa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.where=function(t,e){return this.throwIfDisposed(),Tn(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y().prototype.zerosLike=function(){return this.throwIfDisposed(),Fe(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zs.prototype)}}class Go extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Go.prototype)}}class _ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_.prototype)}}class Ee extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ee.prototype)}}class Gw extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gw.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kD{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ma(t,e){if(Array.isArray(t)){let n=[];for(let o=0;o<e;o++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Bs(t,e){if(!t)throw new Gw(e)}function KI(t,e){let n=0;for(const o of t)o===e&&n++;return n}function Bn(t){return t.length===1?t[0]:t}function ot(t){return Array.isArray(t)?t:[t]}function ur(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Fi(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Oo={};function jw(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Vx(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Vx(e));else{const e=Object.keys(t);for(const n of e){const o=t[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?t[n]=o.value:Vx(o))}}}function Zd(t,e={},n={},o="object",s=!1){if(typeof t=="string"){const r=t;let i;if(r in n)i=n[r];else if(r in Oo)i=Oo[r];else if(i=e[r],i==null)throw new _("Unknown ".concat(o,": ").concat(t,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(o," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(o," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}else{const r=t;if(r.className==null||r.config==null)throw new _("".concat(o,": Improper config format: ")+"".concat(JSON.stringify(r),".\n")+"'className' and 'config' must set.");const i=r.className;let a,l;if(i in n?[a,l]=n[i]:i in Oo?[a,l]=Oo.className:i in e&&([a,l]=e[i]),a==null)throw new _("Unknown ".concat(o,": ").concat(i,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(o," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(o," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(l!=null){const c={};for(const f of Object.keys(Oo))c[f]=Oo[f];for(const f of Object.keys(n))c[f]=n[f];const u=r.config;u.customObjects=c;const d=Object.assign({},Oo);for(const f of Object.keys(n))Oo[f]=n[f];Vx(r.config);const h=l(a,r.config,n,s);return Oo=Object.assign({},d),h}else{const c=Object.assign({},Oo);for(const d of Object.keys(n))Oo[d]=n[d];const u=new a(r.config);return Oo=Object.assign({},c),u}}}function k9(t,e){return t<e?-1:t>e?1:0}function Ph(t,e){return-1*k9(t,e)}function ei(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function C9(t){if(t==null)throw new _("Invalid value in obj: ".concat(JSON.stringify(t)));for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ra(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new _("".concat(n," is not a valid ").concat(e,".  Valid values are ").concat(t," or null/undefined."))}function qw(t,e,n=0,o=1/0){return Bs(n>=0),Bs(o>=n),Array.isArray(t)&&t.length>=n&&t.length<=o&&t.every(s=>typeof s===e)}function Zt(t,e){Array.isArray(t)?(I(t.length>0,()=>"".concat(e," is unexpectedly an empty array.")),t.forEach((n,o)=>Zt(n,"element ".concat(o+1," of ").concat(e)))):I(Number.isInteger(t)&&t>0,()=>"Expected ".concat(e," to be a positive integer, but got ")+"".concat(CD(t),"."))}function CD(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>CD(e)).join(",")+"]":typeof t=="string"?'"'.concat(t,'"'):"".concat(t)}function I9(t,e,n){let o=n!=null?n():Mn(),s;return(...i)=>{const a=n!=null?n():Mn();return a-o<e||(o=a,s=t(...i)),s}}function ID(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let S9=0;function SD(){return S9++}const Lh={};function Og(t=""){return t in Lh||(Lh[t]=0),Lh[t]+=1,t+Lh[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const E9=["channelsFirst","channelsLast"],T9=["nearest","bilinear"],N9=["valid","same","causal"],R9=["max","avg"],A9=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const za=new Map;function Tt(t){Ra(E9,"DataFormat",t)}function D9(t){Ra(T9,"InterpolationFormat",t)}function Ro(t){Ra(N9,"PaddingMode",t)}function ED(t){Ra(R9,"PoolMode",t)}const eu=[],XI="/";function Ki(t,e){eu.push(t);try{const n=e();return eu.pop(),n}catch(n){throw eu.pop(),n}}function _9(){return eu.length===0?"":eu.join(XI)+XI}function TD(t){if(!RD(t))throw new Error("Not a valid tensor name: '"+t+"'");return _9()+t}function ND(t){if(!RD(t))throw new Error("Not a valid tensor name: '"+t+"'");za.has(t)||za.set(t,0);const e=za.get(t);if(za.set(t,za.get(t)+1),e>0){const n="".concat(t,"_").concat(e);return za.set(n,1),n}else return t}const O9=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function RD(t){return!!t.match(O9)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function F9(t){return t===parseInt(t.toString(),10)}function ti(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let o=1;for(let s=e;s<n;++s)o*=t[s];return o}function zl(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const o=t[n];o<e&&(e=o)}return e}function li(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const o=t[n];o>e&&(e=o)}return e}function Ss(t,e){if(e<t)throw new _("end (".concat(e,") < begin (").concat(t,") is forbidden."));const n=[];for(let o=t;o<e;++o)n.push(o);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Yb;function zt(){return Yb==null&&(Yb=WG().epsilon()),Yb}function Es(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ys(t,e){return de(t,e)}function Jd(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),L(t,n)}function P9(t,e){return G(()=>{if(t.shape.length!==2)throw new _("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));const n=Jd(t,1);return Wx(n,[1,e,1])})}function L9(t){const e=[ti(t.shape)];return L(t,e)}function M9(t){if(t.rank<=1)throw new _("batchFlatten requires a minimum rank of 2. Got rank: ".concat(t.rank,"."));const e=[t.shape[0],ti(t.shape,1)];return L(t,e)}function Xi(t,e,n){return G(()=>{switch(t.rank){case 1:return iw(t,e,n);case 2:return IA(t,[e,0],[n,t.shape[1]]);case 3:return aw(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return pp(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Je(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Je(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new _("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(t.rank))}})}function Qb(t,e,n){return G(()=>{switch(t.rank){case 1:return iw(t,e,n);case 2:return IA(t,[0,e],[t.shape[0],n]);case 3:return aw(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return pp(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new _("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(t.rank))}})}function Mh(t,e,n,o){return G(()=>{switch(t.rank){case 1:return iw(t,e,n);case 2:switch(o){case 1:return Xi(t,e,n);case 2:return Qb(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+"".concat(o))}case 3:switch(o){case 1:return Xi(t,e,n);case 2:return aw(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Qb(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+"".concat(o))}case 4:switch(o){case 1:return Xi(t,e,n);case 2:return pp(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return pp(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Qb(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+"".concat(o))}default:throw new _("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(t.rank))}})}function Kw(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Wn(t,e)}function YI(t,e){switch(t.rank){case 1:return W5([t,e]);case 2:return H5([t,e],0);case 3:return j5([t,e],0);case 4:return K5([t,e],0);default:throw new _("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(t.rank))}}function Wx(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new _("The length of input n (".concat(e.length,") does not match ")+"the number of dimensions in input x (".concat(t.rank,")"));return gs(t,e)}function Fg(t,e=0,n=1,o,s){return rq(t,e,n,o,s)}function Qs(t,e,n,o){if(t.rank<2||e.rank<2)throw new Ee("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(t.shape," and y shape = ").concat(e.shape));if(e.rank>=3){const s=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(s!==r)throw new Ee("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(t.shape," and ")+" y shape = ".concat(e.shape))}if(t.rank===2&&e.rank===2)return OI({a:t,b:e,transposeA:!1,transposeB:!1,bias:o?Ux(t.rank,o,Es()):null,activation:n});{const s=t.shape.slice(),r=s.pop();t=L(t,[-1,r]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=L(Oe(e,u),[l,-1]);const d=[...s,...c];return L(OI({a:t,b:e,transposeA:!1,transposeB:!1,bias:o?Ux(t.rank,o,Es()):null,activation:n}),d)}}function AD(t,e,n){return G(()=>(Array.isArray(e)?e=oo(e,"int32"):e=de(e,"int32"),H1(t,e,n)))}function eh(t){return F(t,t)}function Ux(t,e,n){const o=e.shape;if(e.rank!==1&&e.rank!==t)throw new _("Unexpected bias dimensions: ".concat(e.rank)+"; expected it to be 1 or ".concat(t));if(t===5){if(n==="channelsFirst")return o.length===1?L(e,[1,o[0],1,1,1]):L(e,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?L(e,[1,1,1,1,o[0]]):L(e,[1].concat(o))}else if(t===4){if(n==="channelsFirst")return o.length===1?L(e,[1,o[0],1,1]):L(e,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?L(e,[1,1,1,o[0]]):L(e,[1].concat(o))}else if(t===3){if(n==="channelsFirst")return o.length===1?L(e,[1,o[0],1]):L(e,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?L(e,[1,1,o[0]]):L(e,[1].concat(o))}else if(t<3)return e;throw new _("Unsupported input rank by biasAdd: ".concat(e.rank))}function Rs(t,e,n){return G(()=>(n==null&&(n=Es()),Tt(n),oe(t,Ux(t.rank,e,n))))}function z9(t,e=1){if(e!==1)throw new Ee("Support for alpha values other than 1 (".concat(e,") is not implemented ")+"yet.");return Eg(t)}function B9(t){return G(()=>we(t,oe(Cn(t),1)))}function DD(t,e,n,o){return G(()=>tK(t,e,n,o))}function V9(t){return G(()=>{const e=oe(.5,F(.2,t));return Co(e,0,1)})}function th(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W9=["fanIn","fanOut","fanAvg"],U9=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function H9(t){Ra(W9,"FanMode",t)}function G9(t){Ra(U9,"Distribution",t)}class Jo extends sc{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class _D extends Jo{apply(e,n){return Yt(e,n)}}_D.className="Zeros";te(_D);class Xw extends Jo{apply(e,n){return Sa(e,n)}}Xw.className="Ones";te(Xw);class OD extends Jo{constructor(e){if(super(),typeof e!="object")throw new _("Expected argument of type ConstantConfig but got ".concat(e));if(e.value===void 0)throw new _("config must have value set but got ".concat(e));this.value=e.value}apply(e,n){return G(()=>F(ze(this.value),Sa(e,n)))}getConfig(){return{value:this.value}}}OD.className="Constant";te(OD);class FD extends Jo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return jd(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}FD.className="RandomUniform";te(FD);class PD extends Jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ee("randomNormal does not support dType ".concat(n,"."));return Fg(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}PD.className="RandomNormal";te(PD);class LD extends Jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ee("truncatedNormal does not support dType ".concat(n,"."));return TA(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}LD.className="TruncatedNormal";te(LD);class MD extends Jo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return G(()=>{if(e.length!==2||e[0]!==e[1])throw new _("Identity matrix initializer can only be used for 2D square matrices.");return F(this.gain,dA(e[0]))})}getConfig(){return{gain:this.gain}}}MD.className="Identity";te(MD);function j9(t,e="channelsLast"){let n,o;if(Tt(e),t.length===2)n=t[0],o=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=ti(t,2);n=t[1]*s,o=t[0]*s}else if(e==="channelsLast"){const s=ti(t,0,t.length-2);n=t[t.length-2]*s,o=t[t.length-1]*s}}else{const s=ti(t);n=Math.sqrt(s),o=Math.sqrt(s)}return[n,o]}class co extends Jo{constructor(e){if(super(),e.scale<0)throw new _("scale must be a positive float. Got: ".concat(e.scale));this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,H9(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,G9(this.distribution),this.seed=e.seed}apply(e,n){const o=j9(e),s=o[0],r=o[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(s+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ee("".concat(this.getClassName()," does not support dType ").concat(n,"."));return TA(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return jd(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}co.className="VarianceScaling";te(co);class Yw extends co{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return co.className}}Yw.className="GlorotUniform";te(Yw);class Qw extends co{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return co.className}}Qw.className="GlorotNormal";te(Qw);class Zw extends co{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return co.className}}Zw.className="HeNormal";te(Zw);class Jw extends co{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return co.className}}Jw.className="HeUniform";te(Jw);class e$ extends co{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return co.className}}e$.className="LeCunNormal";te(e$);class t$ extends co{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return co.className}}t$.className="LeCunUniform";te(t$);class zD extends Jo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return G(()=>{if(e.length<2)throw new Ee("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError("Unsupported data type ".concat(n,"."));n=n;const o=Q(e.slice(0,-1)),s=e[e.length-1],r=o*s;r>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(r,") elements: ")+"Slowness may result.");const i=[Math.max(s,o),Math.min(s,o)],a=Fg(i,0,1,n,this.seed),l=QK.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,o)*Math.min(s,o)],[Math.min(s,o)+1]);return c=F(c,d.sign()),o<s&&(c=c.transpose()),F(ze(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}zD.className="Orthogonal";te(zD);const QI={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ZI(t,e={}){return Zd(t,Bo.getMap().classNameMap,e,"initializer")}function gt(t){return jw(t)}function ut(t){if(typeof t=="string"){const e=t in QI?QI[t]:t;if(e==="GlorotNormal")return new Qw;if(e==="GlorotUniform")return new Yw;if(e==="HeNormal")return new Zw;if(e==="HeUniform")return new Jw;if(e==="LeCunNormal")return new e$;if(e==="LeCunUniform")return new t$;{const n={};return n.className=e,n.config={},ZI(n)}}else return t instanceof Jo?t:ZI(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hx(t){return Array.isArray(t)&&Array.isArray(t[0])}function mp(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function $e(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new _("Expected Tensor length to be 1; got ".concat(t.length));e=t[0]}else e=t;return e}function Le(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new _("Expected exactly 1 Shape; got ".concat(t.length))}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gp(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((o,s)=>o*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const JI="Variable";class q9{constructor(e,n="float32",o=JI,s=!0,r=null){this.dtype=n==null?"float32":n,this.shape=e.shape,this.id=SD(),o=o==null?JI:o,this.originalName=TD(o),this.name=ND(this.originalName),this.trainable_=s,this.constraint=r,this.val=Qq(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),K9(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function K9(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Gx(t){return t.map(e=>e.read())}function n$(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bt{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Us{constructor(e,n,o,s,r,i,a){this.dtype=e,this.shape=n,this.sourceLayer=o,this.inputs=s,this.callArgs=r,this.outputTensorIndex=a,this.id=SD(),i!=null&&(this.originalName=TD(i),this.name=ND(this.originalName)),this.rank=n.length}}let X9=0;class Pg{constructor(e,n){this.callArgs=n,this.id=X9++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const o of e.inboundLayers)o!=null&&o.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Y9=0;class Ae extends sc{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Y9++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const o=this.getClassName();n=ur(o)+"_"+Og(o)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let o;if(e.batchInputShape!=null)o=e.batchInputShape;else if(e.inputShape!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),o=[r].concat(e.inputShape)}this.batchInputShape=o;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Go("The layer has never been called "+"and thus has no defined ".concat(n,"."));if(this.inboundNodes.length<=e)throw new _("Asked to get ".concat(n," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return Bn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Bn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new zs("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new zs("Layer ".concat(this.name)+" is not connected, no input to return.");return Bn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new zs("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new zs("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Bn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=ot(e),this.inputSpec==null||this.inputSpec.length===0)return;const n=ot(this.inputSpec);if(e.length!==n.length)throw new _("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(let o=0;o<e.length;o++){const s=e[o],r=n[o];if(r==null)continue;const i=s.rank;if(r.ndim!=null&&i!==r.ndim)throw new _("Input ".concat(o," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(r.ndim,", found ndim=").concat(i));if(r.maxNDim!=null&&i>r.maxNDim)throw new _("Input ".concat(o," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(r.maxNDim,", found ndim=").concat(i));if(r.minNDim!=null&&i<r.minNDim)throw new _("Input ".concat(o," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(r.minNDim,", found ndim=").concat(i,"."));if(r.dtype!=null&&s.dtype!==r.dtype)throw new _("Input ".concat(o," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(r.dtype,", found dtype=").concat(s.dtype,"."));if(r.axes){const a=s.shape;for(const l in r.axes){const c=Number(l),u=r.axes[l],d=c>=0?a[c]:a[a.length+c];if(u!=null&&[u,null].indexOf(d)===-1)throw new _("Input ".concat(o," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(c," of input shape to ")+"have value ".concat(u," but got shape ").concat(a,"."))}}if(r.shape!=null)for(let a=0;a<r.shape.length;++a){const l=r.shape[a],c=s.shape[a];if(l!=null&&c!=null&&l!==c)throw new _("Input ".concat(o," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(r.shape,", ")+"found shape=".concat(s.shape,"."))}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const o=ot(e);let s=!0;for(const i of o)if(!(i instanceof Us)){s=!1;break}let r=!0;for(const i of o)if(i instanceof Us){r=!1;break}if(s===r)throw new _("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ki(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of ot(e))i.push(a.shape);this.build(Bn(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let i=this.call(e,n);const a=ot(i),l=[];for(let c of a)o.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=Bn(l),this.activityRegularizer!=null)throw new Ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Q9(e),a=this.computeOutputShape(i);let l;const c=Z9(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Us(c,u,this,ot(e),n,this.name,d)):l=new Us(c,a,this,ot(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let n=!1;this.batchInputShape.forEach((o,s)=>{o!=null&&e[s]!=null&&e[s]!==o&&(n=!0)}),n&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new zs("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const n of this.inboundNodes){const o=JSON.stringify(n.outputShapes);e.indexOf(o)===-1&&e.push(o)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new zs("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new Go("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return gp(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Gx(e?this.trainableWeights:this.weights)}setWeights(e){G(()=>{const n=this.weights;if(n.length!==e.length)throw new _('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(n.length===0)return;const o=[],s=Gx(n);for(let r=0;r<s.length;++r){const i=s[r],a=n[r],l=e[r];if(!Ve(i.shape,l.shape))throw new _("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(l.shape));o.push([a,l])}n$(o)})}addWeight(e,n,o,s,r,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new _("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():ut("zeros"));const c=s.apply(n,o),u=new q9(c,o,e,i,a);return c.dispose(),r!=null&&this.addLoss(()=>r.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ot(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")});else throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");return null}return n}addInboundNode(e,n,o,s,r,i,a=null){const l=ot(e);n=ot(n),o=ot(o),s=ot(s),r=mp(r),i=mp(i);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new Pg({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:o,outputMasks:s,inputShapes:r,outputShapes:i},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Q9(t){t=ot(t);const e=[];for(const n of t)e.push(n.shape);return Bn(e)}function Z9(t){return"float32"}function BD(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const o=e.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{const s=[];for(let r=0;r<o.inboundLayers.length;r++){const i=o.inputTensors[r],a=o.inboundLayers[r],l=o.nodeIndices[r],c=BD(i,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nh extends Ae{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Og("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new _("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new _("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new _("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const o=e.dtype||"float32";this.batchInputShape=n,this.dtype=o,this.inputSpec=[{shape:n}];const s=new Us(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Pg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new _("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}nh.className="InputLayer";te(nh);function J9(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new _("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new nh({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eY(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return de(e,t.dtype)}catch(n){throw new _("The dtype of the feed (".concat(e.dtype,") can not be cast to the dtype ")+"of the key '".concat(t.name,"' (").concat(t.dtype,")."))}}class Vr{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Vr)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,o){if(this.id2Value[e.id]==null)this.id2Value[e.id]=eY(e,n),this.name2Id[e.name]=e.id,o!=null&&(this.id2Mask[e.id]=o);else throw new _("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Us){if(this.id2Value[e.id]==null)throw new _("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new _("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[n]}}getMask(e){if(e instanceof Us){if(this.id2Value[e.id]==null)throw new _("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new _("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Te(this.id2Mask)}}const bp=new kD,xp=new kD;function tY(t){bp!=null&&bp.setMaxEntries(t),xp!=null&&xp.setMaxEntries(t)}function Pc(t,e,n,o){const s=n==null?!1:n.training,r=Array.isArray(t),i=r?t:[t],a=i.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);o!=null&&(o.maxNumTensors=-1/0,o.minNumTensors=1/0);const u=a.join(",")+"|"+e.names().sort().join(",");let d=bp.get(u),h;if(d==null){const p=nY(i,e);d=p.sorted,h=p.recipientCounts,bp.put(u,d),xp.put(u,h)}h={},s||Object.assign(h,xp.get(u));const f=new Vr(e);for(let p=0;p<d.length;++p){if(o!=null){const E=Ox().numTensors;E>o.maxNumTensors&&(o.maxNumTensors=E),E<o.minNumTensors&&(o.minNumTensors=E)}const m=d[p],b=m.sourceLayer;if(b instanceof nh)continue;const g=[],x=[],v=[];let y=!1;for(const E of m.inputs){const S=f.getValue(E),T=f.getMask(E);g.push(S),x.push(T),T!=null&&(y=!0),s||(h[E.name]--,h[E.name]===0&&!e.hasKey(E)&&a.indexOf(E.name)===-1&&!S.isDisposed&&E.sourceLayer.stateful!==!0&&v.push(S))}y&&(n=n||{},n.mask=x[0]);const w=ot(b.apply(g,n));let $=null;b.supportsMasking&&($=b.computeMask(g,x));const k=sY(m),C=Array.isArray(k)?k:[k];for(let E=0;E<C.length;++E){f.hasKey(C[E])||f.add(C[E],w[E],Array.isArray($)?$[0]:$);const S=a.indexOf(C[E].name);S!==-1&&(l[S]=w[E])}s||Te(v)}return f.disposeMasks(),r?l:l[0]}function nY(t,e){I(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(t.length===1){const s=eS(t[0],e);n=s.sorted,o=s.recipientMap}else{const s=new Set;for(const r of t){const{sorted:i,recipientMap:a}=eS(r,e);for(const l of i)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)o[l]==null&&(o[l]=new Set),a[l].forEach(c=>o[l].add(c))}}return{sorted:n,recipientCounts:oY(o)}}function oY(t){const e={};for(const n in t)e[n]=t[n].size;return e}function eS(t,e){const n=new Set,o=[],s={};for(const a of e.names())n.add(a);const r=[],i=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=i[i.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),o.push(a),n.add(a.name),l&&i.pop();else{i.push(r.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&r.push(c)}}return{sorted:o,recipientMap:s}}function sY(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let o=0;o<t.sourceLayer.inboundNodes.length;++o)for(const s of t.sourceLayer.inboundNodes[o].outputTensors)if(s.id===t.id){n=o;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rY=j();rY.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,tY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o$(t,e){return G(()=>Dn(ye(F(t,t),e,!0)))}class oh extends sc{getConfig(){return{}}}class VD extends oh{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>{const n=o$(e,this.axis),o=Co(n,0,this.maxValue);return F(e,we(o,oe(zt(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}VD.className="MaxNorm";te(VD);class WD extends oh{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>we(e,oe(zt(),o$(e,this.axis))))}getConfig(){return{axis:this.axis}}}WD.className="UnitNorm";te(WD);class UD extends oh{apply(e){return Ta(e)}}UD.className="NonNeg";te(UD);class HD extends oh{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>{const n=o$(e,this.axis),o=oe(F(this.rate,Co(n,this.minValue,this.maxValue)),F(1-this.rate,n));return F(e,we(o,oe(zt(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}HD.className="MinMaxNorm";te(HD);const tS={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Vt(t){return jw(t)}function nS(t,e={}){return Zd(t,Bo.getMap().classNameMap,e,"constraint")}function Wt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in tS?tS[t]:t,config:{}};return nS(n)}else return t instanceof oh?t:nS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Ni(t){if(t==null)return;const e=[],n=[],o=[];for(const s in t){const r=t[s];if(typeof r!="number"){const i=r;e.push(i.data()),n.push(s),o.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let r=0;r<s.length;++r)t[n[r]]=s[r][0];Te(o)}}function GD(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var oS;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(oS||(oS={}));const iY=125;class Tu{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class aY{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const o of this.callbacks)await o.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const o of this.callbacks)await o.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const o of this.callbacks)await o.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const o of this.callbacks)await o.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class lY extends Tu{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const o=n.size==null?0:n.size;this.seen+=o;for(const s in n){const r=n[s];if(typeof r=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+r*o;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const a=G(()=>oe(this.totals[s],F(r,o)));this.totals[s]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:G(()=>{const s=F(we(1,this.seen),this.totals[o]);n[o]=s,this.totals[o].dispose(),Ks(n[o])}))}}class cY extends Tu{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])}async syncData(){const e=[],n=[],o=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(r),o.push(a)}}const s=await Promise.all(e);for(let r=0;r<s.length;++r)this.history[n[r]][o[r]].dispose(),this.history[n[r]][o[r]]=s[r][0]}}class uY extends Tu{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||YA,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=iY),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");bx(this.yieldEvery)&&(this.maybeWait=I9(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,o){const s=[];this.yield!=null&&(await Ni(o),s.push(this.yield(e,n,o))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Ni(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const o=[];this.epochEnd!=null&&(await Ni(n),o.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),await Promise.all(o)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Ni(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const o=[];this.batchEnd!=null&&(await Ni(n),o.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):bx(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(o)}async onTrainBegin(e){this.trainBegin!=null&&(await Ni(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ni(e),await this.trainEnd(e))}}function jD(t,e){return t==null&&(t={}),t instanceof Tu?[t]:Array.isArray(t)&&t[0]instanceof Tu?t:ot(t).map(o=>new uY(o,e))}class Lo{constructor(){}static registerCallbackConstructor(e,n){I(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),Lo.checkForDuplicate(n),Lo.constructors[e]==null&&(Lo.constructors[e]=[]),Lo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Lo.constructors)Lo.constructors[+n].forEach(s=>{if(s===e)throw new _("Duplicate callback constructor.")})}static clear(){Lo.constructors={}}static createCallbacks(e){const n=[];for(const o in Lo.constructors){const s=+o;e>=s&&n.push(...Lo.constructors[s])}return n.map(o=>new o)}}Lo.constructors={};function qD(t,e,n,o,s,r,i,a,l){const c=new cY,u=[new lY,...Lo.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new aY(u);return d.setParams({epochs:n,initialEpoch:o,samples:s,steps:r,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zs(t,e={},n=!1){return Zd(t,Bo.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vp(t,e){return G(()=>{t.dtype!=="float32"&&(t=de(t,"float32"));const n=ye(eh(t),e,!0),o=Sg(n.shape,zt()),s=Dn(wi(n,o));return we(t,s)})}function Lg(t,e){return G(()=>_t(eh(ke(e,t)),-1))}function s$(t,e){return G(()=>_t(Cn(ke(e,t)),-1))}function r$(t,e){return G(()=>{const n=ke(t,e),o=Co(Cn(t),zt(),Number.MAX_VALUE),s=Cn(we(n,o));return F(100,_t(s,-1))})}function dY(t,e){return G(()=>{const n=Co(e,zt(),Number.MAX_VALUE),o=er(oe(1,n)),s=Co(t,zt(),Number.MAX_VALUE),r=er(oe(1,s));return _t(eh(ke(o,r)),-1)})}function hY(t,e){return G(()=>{const n=wi(0,ke(1,F(t,e)));return _t(eh(n),-1)})}function fY(t,e){return G(()=>{const n=wi(0,ke(1,F(t,e)));return _t(n,-1)})}function pY(t,e){return G(()=>{const n=ye(F(t,e),-1),o=ks(F(ke(1,t),e),-1);return wi(0,oe(1,ke(o,n)))})}function mY(t,e){return G(()=>{const n=Math.log(2),o=ke(e,t),s=ke(oe(o,Gd(F(-2,o))),n);return _t(s,-1)})}function Nu(t,e,n=!1){return G(()=>{if(n)e=lw(e);else{const o=ye(e,e.shape.length-1,!0);e=we(e,o)}return e=Co(e,zt(),1-zt()),kt(ye(F(de(t,"float32"),er(e)),e.shape.length-1))})}function yp(t,e,n=!1){return G(()=>{const o=de(Ng(L9(t)),"int32");e=Co(e,zt(),1-zt());const s=e.shape,r=L(mA(o,s[s.length-1]),s);return Nu(r,e,n)})}function gY(t,e){if(!Ve(t.shape,e.shape))throw new _("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(t.shape)," and ").concat(JSON.stringify(e.shape)));return G(()=>{const n=Ta(e),o=kt(Cn(e));return oe(ke(n,F(e,t)),hA($r(o)))})}function Mg(t,e){return G(()=>{let n;return n=Co(e,zt(),1-zt()),n=er(we(n,ke(1,n))),_t(gY(t,n),-1)})}function bY(t,e){return G(()=>{const n=Co(t,zt(),1),o=Co(e,zt(),1);return ye(F(t,er(we(n,o))),-1)})}function xY(t,e){return G(()=>{const n=er(oe(zt(),e));return _t(ke(e,F(t,n)),-1)})}function KD(t,e){return G(()=>{const n=vp(t,-1),o=vp(e,-1),s=F(n,o);return kt(ye(s,-1))})}const wp={meanSquaredError:Lg,meanAbsoluteError:s$,meanAbsolutePercentageError:r$,meanSquaredLogarithmicError:dY,squaredHinge:hY,hinge:fY,categoricalHinge:pY,logcosh:mY,categoricalCrossentropy:Nu,sparseCategoricalCrossentropy:yp,binaryCrossentropy:Mg,kullbackLeiblerDivergence:bY,poisson:xY,cosineProximity:KD};function Zb(t){if(typeof t=="string"){if(t in wp)return wp[t];let e="Unknown loss ".concat(t);throw t.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss ".concat(t,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new _(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XD(t,e){return G(()=>{const n=F(.5,Qo(e)),o=Ys(No(e,n),t.dtype);return _t(Js(t,o),-1)})}function YD(t,e){return G(()=>Ys(Js(ku(t,-1),ku(e,-1)),"float32"))}function vY(t,e){return G(()=>de(ye(kr(Js(t,1),Js(e,1))),"float32"))}function yY(t,e){return G(()=>de(ye(kr(Js(t,0),Js(e,1))),"float32"))}function wY(t,e){return G(()=>{const n=vY(t,e),o=yY(t,e),s=oe(n,o);return de(Tn(No(s,0),we(n,s),0),"float32")})}function $Y(t,e){return Mg(t,e)}function kY(t,e){return t.rank===e.rank&&(t=qd(t,[t.rank-1])),e=ku(e,-1),e.dtype!==t.dtype&&(e=de(e,t.dtype)),de(Js(t,e),"float32")}const CY=Lg,IY=Lg,SY=s$,EY=s$,TY=r$,NY=r$,QD=Nu,RY=KD,ZD=yp,$p={binaryAccuracy:XD,categoricalAccuracy:YD,precision:wY,categoricalCrossentropy:QD,sparseCategoricalCrossentropy:ZD,mse:CY,MSE:IY,mae:SY,MAE:EY,mape:TY,MAPE:NY,cosine:RY};function AY(t){if(typeof t=="string"&&t in $p)return $p[t];if(typeof t!="string"&&t!=null)return t;throw new _("Unknown metric ".concat(t))}function zh(t){if(Bs(t!==null,"Unknown LossOrMetricFn ".concat(t)),typeof t=="string")return t;{let e;for(const n of Object.keys(wp))if(wp[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys($p))if($p[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DY(t){const e={Adagrad:()=>Ma.adagrad(.01),Adadelta:()=>Ma.adadelta(1,.95,zt()),Adam:()=>Ma.adam(.001,.9,.999,zt()),Adamax:()=>Ma.adamax(.002,.9,.999,zt(),0),RMSProp:()=>Ma.rmsprop(.001,.9,0,zt()),SGD:()=>Ma.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new _("Unknown Optimizer ".concat(t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sS=1*1024*1024;function rS(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!jx(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const o=JSON.stringify(t);o.length>sS&&console.warn('User-defined metadata of model "'.concat(e,'" is too large in ')+"size (length=".concat(o.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(sS,"."))}}function jx(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!jx(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!jx(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _Y(t,e,n,o=console.log){const s=FY(t),r=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let i;if(!s){r.push("Receives inputs"),i=[];for(const u in t.nodesByDepth)i.push(...t.nodesByDepth[u])}o("_".repeat(e)),kp(r,n,o),o("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?PY(a[u],n,o):LY(a[u],n,i,o),o((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=OY(t),c=gp(t.nonTrainableWeights);o("Total params: ".concat(l+c)),o("Trainable params: ".concat(l)),o("Non-trainable params: ".concat(c)),o("_".repeat(e))}function OY(t){let e;return t.collectedTrainableWeights!=null?e=gp(t.collectedTrainableWeights):e=gp(t.trainableWeights),e}function FY(t){let e=!0;const n=[],o=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}o.push(...s)}if(e)for(const s of t.layers){let r=!1;for(const i of s.inboundNodes)if(o.indexOf(i)!==-1)if(r){e=!1;break}else r=!0;if(!e)break}return e}function kp(t,e,n=console.log){let o="";for(let s=0;s<t.length;++s)s>0&&(o=o.slice(0,o.length-1)+" "),o+=t[s],o=o.slice(0,e[s]),o+=" ".repeat(e[s]-o.length);n(o)}function PY(t,e,n){let o,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch(l){s="multiple"}try{o=JSON.stringify(t.outputShape)}catch(l){o="multiple"}const r=t.name,i=t.getClassName(),a=["".concat(r," (").concat(i,")"),s,o,t.countParams().toString()];kp(a,e,n)}function LY(t,e,n,o){let s,r;try{r=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch(d){r="multiple"}try{s=JSON.stringify(t.outputShape)}catch(d){s="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];i.push("".concat(f,"[").concat(p,"][").concat(m,"]"))}const a=t.name,l=t.getClassName(),c=i.length===0?"":i[0],u=["".concat(a," (").concat(l,")"),r,s,t.countParams().toString(),c];kp(u,e,o);for(let d=1;d<i.length;++d)kp(["","","","",i[d]],e,o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JD(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Cp(t,e){if(t===null)return null;if(typeof t=="string")return Fi(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],o=t.length;for(let s=0;s<o;++s){const r=t[s];JD(e,s,r)?n.push(r):n.push(Cp(r,e))}return n}else{const n={};for(const o of Object.keys(t)){const s=t[o];if(o==="name"&&typeof s=="string")n[o]=s;else{const r=Fi(o);n[r]=Cp(s,r)}}return n}}function qx(t,e){if(t==null)return null;if(typeof t=="string")return ur(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],o=t.length;for(let s=0;s<o;++s){const r=t[s];JD(e,s,r)?n.push(r):n.push(qx(r,e))}return n}else{const n={};for(const o of Object.keys(t)){const s=t[o],r=ur(o);(o==="name"||o==="className")&&typeof s=="string"?n[r]=s:n[r]=qx(s,o)}return n}}/** @license See the LICENSE file. */const e_="4.10.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class as extends Ae{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=Og(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ei(this.inputs).length!==this.inputs.length)throw new _("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(x=>x.name)));ei(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(x=>x.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const v=x.sourceLayer,y=x.nodeIndex,w=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const x of this.inputs){const v=x.sourceLayer,y=x.nodeIndex,w=x.tensorIndex;Bs(y===0,"input layer has >1 nodes"),Bs(w===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const v=this.inputLayers[x];if(!(v instanceof nh))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(x," (0-based) originates ")+"from layer type ".concat(v.getClassName(),"."));this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},o={},s={},r={},i={},a=[],l=(x,v,y,w,$,k)=>{(w==null||$==null||k==null)&&(w=x.sourceLayer,$=x.nodeIndex,k=x.tensorIndex);const C=w.inboundNodes[$];if(y.indexOf(C)!==-1)throw new Go("The tensor ".concat(x.name,' at layer "').concat(w.name,'" ')+"is part of a cycle.");if(v.indexOf(C)!==-1)return;this.containerNodes.add(as.nodeKey(w,$)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(C)===-1&&y.push(C);const E=C.inboundLayers.length;for(let S=0;S<E;S++){const T=C.inputTensors[S],P=C.inboundLayers[S],U=C.nodeIndices[S],W=C.tensorIndices[S];l(T,v,y,P,U,W)}for(v.push(C);y.indexOf(C)>=0;)y.splice(y.indexOf(C),1);a.push(C)},c=[],u=[];for(const x of this.outputs)l(x,c,u);const d=a.slice().reverse();for(const x of d){o[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id];const y=s[x.outboundLayer.id]==null?0:s[x.outboundLayer.id];v=Math.max(v,y),s[x.outboundLayer.id]=v,r[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let w=0;w<x.inboundLayers.length;w++){const $=x.inboundLayers[w],k=x.nodeIndices[w],C=$.inboundNodes[k],E=n[C.id]==null?0:n[C.id];n[C.id]=Math.max(v+1,E),o[C.id]=C}}const h={};for(const x in n){const v=n[x];v in h||(h[v]=[]),h[v].push(o[x])}const f={};for(const x in s){const v=s[x];v in f||(f[v]=[]),f[v].push(r[x])}let p=Object.keys(f).map(x=>parseInt(x,10)).sort(Ph);this.layers=[];for(const x of p){const v=f[x];v.sort((y,w)=>{const $=i[y.id],k=i[w.id];return $<k?-1:$>k?1:0});for(const y of v)y instanceof as&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=f,p=Object.keys(h).map(x=>parseInt(x,10)).sort(Ph);const m=this.inputs.slice(),b=[];for(const x of p)for(const v of h[x]){const y=v.outboundLayer;if(y!=null){for(const w of v.inputTensors)if(m.indexOf(w)===-1)throw new Go("Graph disconnected: cannot obtain value for tensor ".concat(w)+' at layer "'.concat(y.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(b));for(const w of v.outputTensors)m.push(w);b.push(y.name)}}this.nodesByDepth=h;const g=this.layers.map(x=>x.name);for(const x of g){const v=g.filter(y=>y===x).length;if(v!==1)throw new Go('The name "'.concat(x,'" is used ').concat(v," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Pg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new _("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const o of this.layers)n.push(...o.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const o={};let s=0;const r=Object.keys(e)[0].split("/"),i=!isNaN(parseInt(r[r.length-1],10));for(const l of this.layers)for(const[c,u]of l.weights.entries()){const d=i?"".concat(u.name.split("/").slice(0,-1).join("/")+"/").concat(c):u.originalName;if(o[d]!=null)throw new _("Duplicate weight name: ".concat(d));o[d]=u,s++}const a=[];for(const l in e){let c=l;if(o[l]==null){const u=l.split("/");c=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(o[c]!=null)a.push([o[c],e[l]]);else if(n)throw new _("Provided weight data has no target variable: ".concat(l));delete o[c]}if(n){const l=[];for(const c in o)l.push(c);if(l.length>0)throw new _("".concat(l.length," of ").concat(s," weights are not set: ")+"".concat(l))}n$(a)}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion="tfjs-layers ".concat(e_),n.backend="TensorFlow.js",n}toJSON(e,n=!0){const o=qx(this.updatedConfig());return n?JSON.stringify(o):o}call(e,n){return G(()=>{e=ot(e);const o=new Vr;for(let s=0;s<this.inputs.length;++s)o.add(this.inputs[s],e[s]);return Pc(this.outputs,o,n)})}computeMask(e,n){return G(()=>{e=ot(e);let o;return n==null?o=ma(null,e.length):o=ot(n),this.runInternalGraph(e,o)[1]})}computeOutputShape(e){const n=mp(e);if(n.length!==this.inputLayers.length)throw new _("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const o={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";o[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Ph);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<c.inboundLayers.length;m++){const b=c.inboundLayers[m],g=c.nodeIndices[m],x=c.tensorIndices[m],v="".concat(b.name,"_").concat(g,"_").concat(x),y=o[v];d.push(y)}const h=u.computeOutputShape(Bn(d)),f=mp(h),p=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const b="".concat(u.name,"_").concat(p,"_").concat(m);o[b]=f[m]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d="".concat(l.name,"_").concat(c,"_").concat(u);i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Bs(l in o),r.push(o[l])}return Bn(r)}runInternalGraph(e,n){n==null&&(n=ma(null,e.length));const o={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];o[c.id]=[u,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Ph);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of h)m.id in o&&p.push(o[m.id]);if(p.length===h.length){let m={},b,g,x,v;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[y,w]=p[0];m.mask==null&&(m.mask=w),x=ot(d.call(y,m)),v=ot(d.computeMask(y,w)),b=[y],g=[w]}else b=p.map(y=>y[0]),g=p.map(y=>y[1]),m.mask==null&&(m.mask=g),x=ot(d.call(b,m)),v=ot(d.computeMask(b,g));if(d.activityRegularizer)throw new Ee("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<f.length;++y){const w=f[y],$=x[y],k=v[y];o[w.id]=[$,k]}}}}const r=[],i=[],a=[];for(const l of this.outputs){Bs(l.id in o,"Could not compute output ".concat(l.name," : ").concat(l.id));const[c,u]=o[l.id];a.push(c.shape),r.push(c),i.push(u)}return[r,i,a]}buildNodeConversionMap(e){const n={};let o;for(const s of this.layers){o=s instanceof as?1:0;for(let r=0;r<s.inboundNodes.length;r++){const i=as.nodeKey(s,r);this.containerNodes.has(i)&&(n[i]=o,o+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new _("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const o of this.layers)if(o.name===e)return o;throw new _("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new _("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return G(()=>{const e=[];for(const n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){const s=as.nodeKey(n,o);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),c=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],f=as.nodeKey(i,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch(m){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(h.inboundLayers.length>0){const m=[];for(let b=0;b<h.inboundLayers.length;b++){const g=h.inboundLayers[b],x=h.nodeIndices[b],v=h.tensorIndices[b],y=as.nodeKey(g,x);let w=n[y];w==null&&(w=0),m.push([g.name,w,v,p])}c.push(m)}}}const u={};u.name=i.name,u.className=a,u.config=l,u.inboundNodes=c,o.push(u)}e.layers=o;const s=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=as.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[i];s.push([a.name,u,d])}e.inputLayers=s;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=as.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,u,d])}return e.outputLayers=r,e}static fromConfig(e,n,o={},s=!1){const r={},i={};function a(b,g){b.name in i?i[b.name].push(g):i[b.name]=[g]}function l(b,g){const x=[];let v;for(const y of g){const w=y[0],$=y[1],k=y[2];if(v=y[3]==null?{}:y[3],!(w in r)){a(b,g);return}const C=r[w];if(C.inboundNodes.length<=$){a(b,g);return}const E=C.inboundNodes[$];x.push(E.outputTensors[k])}x.length>0&&b.apply(Bn(x),v)}function c(b){const g=b.name,x=Zs(b,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(s),r[g]=x,b.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new _("Corrupted configuration, expected array for nodeData: ".concat(y));a(x,y)})}const u=n.name,d=n.layers;for(const b of d)c(b);for(;!C9(i);)for(const b of d){const g=r[b.name];if(g.name in i){const x=i[g.name];delete i[g.name];for(const v of x)l(g,v)}}const h=[],f=[],p=n.inputLayers;for(const b of p){const g=b[0],x=b[1],v=b[2];Bs(g in r);const w=r[g].inboundNodes[x].outputTensors;h.push(w[v])}const m=n.outputLayers;for(const b of m){const g=b[0],x=b[1],v=b[2];Bs(g in r);const w=r[g].inboundNodes[x].outputTensors;f.push(w[v])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new _("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){G(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MY(t,e,n){const o=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(o===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==o)throw new Error("Provided ".concat(n," is an array of ").concat(t.length," ")+"element(s), but the model has ".concat(o," outputs. ")+"Make sure a set of weights is provided for each model output.");return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(r=>{r in t?s.push(t[r]):s.push(null)}),s}else throw new Error("The model has multiple (".concat(o,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(o," elements or an object with ").concat(e," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(t)))}function t_(t,e){return MY(t,e,"classWeight")}async function n_(t,e,n,o){if(e!=null||o!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const s=G(()=>{if(t.shape.length===1)return qi(t);if(t.shape.length===2){if(t.shape[1]>1)return ku(t,1);if(t.shape[1]===1)return L(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}else throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await s.data());Te(s);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(a," exists in the data but not in ")+"classWeight");i.push(n[a])}),oo(i,"float32")}else return null}function zY(t,e){return F(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const BY=32;function o_(t,e){let n,o;const s=e;n=s.xs,o=s.ys,I(n!=null&&o!=null,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(e));const r=iS("input",t.inputNames,n),i=iS("output",t.outputNames,o),a=r[0].shape[0];I(r.length===t.inputs.length,()=>"LayersModel has ".concat(t.inputs.length," inputs, but the dataset ")+"provides ".concat(r.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(t.inputNames),")")),I(i.length===t.outputs.length,()=>"LayersModel has ".concat(t.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(t.outputNames),")"));for(let l=0;l<r.length;l++)I(r[l].shape[0]===a,()=>"Batch size mismatch: input "+"".concat(t.inputNames[l]," has ").concat(r[l].shape[0],"; ")+"expected  ".concat(a," based on input ").concat(t.inputNames[0],"."));for(let l=0;l<i.length;l++)I(i[l].shape[0]===a,()=>"Batch size mismatch: output "+"".concat(t.outputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(a," based on input ").concat(t.inputNames[0],"."));return{xs:r,ys:i}}function iS(t,e,n){if(n instanceof Dt)return[n];if(Array.isArray(n))return I(n.length===e.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(e.length," to match the ").concat(t," keys ").concat(e,".")),n;{const o=[];for(const s of e){if(n[s]==null)throw new _("The feature data generated by the dataset lacks the required "+"".concat(t," key '").concat(s,"'."));o.push(n[s])}return o}}function VY(t){if(t.length===3)throw new Ee("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function WY(t,e,n){const o=n.batchesPerEpoch!=null;if(I(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),I(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),I(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),I(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),I(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let r,i;if(s)if(aS(n.validationData))I(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const b=VY(n.validationData);r=b.xs,i=b.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const u=jD(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=qD(u,d,n.epochs,null,null,UY(e,n),null,s,c);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const b={};await h.onEpochBegin(p);let g=0,x=0;for(o||(m=await e.iterator());!o||g<n.batchesPerEpoch;){const v=await m.next();if(o&&v.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(g," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(v.value!=null){const{xs:y,ys:w}=o_(t,v.value),$={};$.batch=x,$.size=y[0].shape[0],await h.onBatchBegin(x,$);const k=[];if(n.classWeight!=null){const S=t_(n.classWeight,t.outputNames);for(let T=0;T<S.length;++T)k.push(await n_(w[T],null,S[T]))}const C=y.concat(w).concat(k),E=a(C);Te(C);for(let S=0;S<l.length;++S){const T=l[S],P=E[S];$[T]=P,Ks(P)}await h.onBatchEnd(x,$),GD($),x++,g++}if(o?g>=n.batchesPerEpoch:v.done){if(s){let y;aS(n.validationData)?y=ot(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=ot(t.evaluate(r,i,{batchSize:n.validationBatchSize==null?BY:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)b["val_".concat(t.metricsNames[w])]=y[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,b),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function UY(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function aS(t){return typeof t.iterator=="function"}function HY(t){return typeof t.next=="function"}async function GY(t,e,n){n=n||{};const o=n.batches!=null,s=t.testFunction;let r=[];if(n.verbose>0)throw new Ee("Verbose mode is not implemented yet.");I(!o||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const i=HY(e)?e:await e.iterator();let a=0,l=0;for(;!o||l<n.batches;){const c=await i.next();if(r=G(()=>{if(c.value){const{xs:u,ys:d}=o_(t,c.value),h=u.concat(d),f=G(()=>s(h));if(Te(h),l===0)for(let m=0;m<f.length;++m)r.push(ze(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const b=f[m],g=r[m];r[m]=G(()=>oe(r[m],F(p,b))),l>0&&Te(g)}Te(f),a+=p,++l}return r}),c.done){o&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<r.length;++c){const u=r[c];r[c]=we(r[c],a),Te(u)}return Bn(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jb(t){I(t>0&&Number.isInteger(t),()=>"batchSize is required to be a positive integer, but got ".concat(t))}function Sc(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(o=>Xi(o,e,n-e)):Xi(t,e,n-e)}function Kx(t,e){return G(()=>t==null?null:Array.isArray(t)?t.map(n=>Kx(n,e)):AD(t,e.dtype==="int32"?e:de(e,"int32")))}function e0(t,e){const n=[];let o=0,s=null;for(;o<t;)s=o+e,s>=t&&(s=t),n.push([o,s]),o=s;return n}function s_(t){const e=[];t instanceof Dt&&(t=[t]);for(let n=0;n<t.length;++n){const o=t[n];if(o.rank===1)e.push(Jd(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(o)}}return e}function is(t,e){if(t==null)return;const n=[];if(e instanceof Dt)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const r=e[s];n.push(r.id)}const o=[];if(t instanceof Dt)n.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&o.push(s)});else if(t!=null)for(const s in t){const r=t[s];n.indexOf(r.id)===-1&&o.push(r)}o.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jY(t){return t instanceof Dt}function Xx(t){return Array.isArray(t)}function lS(t){return!jY(t)&&!Xx(t)}function cS(t,e,n,o=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(Xx(t)&&t.length>0)i=!0;else if(lS(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new _("Error when checking model ".concat(s," expected no data, ")+"but got ".concat(t))}return[]}if(t==null)return e.map(i=>null);let r;if(lS(t)){t=t,r=[];for(const i of e){if(t[i]==null)throw new _('No data provided for "'.concat(i,'". Need data for each key in: ')+"".concat(e));r.push(t[i])}}else if(Xx(t)){if(t=t,t.length!==e.length)throw new _("Error when checking model ".concat(s,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(e.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(t));r=t}else{if(t=t,e.length>1)throw new _("The model ".concat(s," expects ").concat(e.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(t.shape));r=[t]}if(r=s_(r),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new _("Error when checking ".concat(s,": expected ").concat(e[i]," ")+"to have ".concat(n[i].length," dimension(s). but got array with ")+"shape ".concat(a.shape));for(let l=0;l<n[i].length;++l){if(l===0&&!o)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u>=0&&c!==u)throw new _("".concat(s," expected a batch of elements where each ")+"example has shape [".concat(n[i].slice(1,n[i].length),"] ")+"(i.e.,tensor shape [*,".concat(n[i].slice(1,n[i].length),"])")+" but the ".concat(s," received an input with ").concat(a.shape[0])+" examples, each with shape [".concat(a.shape.slice(1,a.shape.length),"]")+" (tensor shape [".concat(a.shape,"])"))}}return r}function qY(t,e,n){const o=ei(t.map(r=>r.shape[0]));o.sort();const s=ei(e.map(r=>r.shape[0]));if(s.sort(),o.length>1)throw new _("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(r=>r.shape))));if(s.length>1)throw new _("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(r=>r.shape))));if(o.length>0&&s.length>0&&!Ve(o,s))throw new _("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(o[0]," input sample(s) and ").concat(s[0]," target ")+"sample(s).")}function KY(t,e,n){const o=[Lg,Mg,Nu];for(let s=0;s<t.length;++s){const r=t[s],i=e[s],a=n[s];if(i!=null){if(i===Nu&&r.shape[r.shape.length-1]===1)throw new _("You are passing a target array of shape ".concat(r.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(o.indexOf(i)!==-1){const l=r.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new _("A target Tensor with shape ".concat(r.shape," was passed for an ")+"output of shape ".concat(a,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}function uS(t,e,n,o=!0,s=""){let r;if(Array.isArray(t)){if(t.length!==e.length)throw new _("Error when checking model ".concat(s,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(e.length," Tensor(s),")+" but instead got ".concat(t.length," Tensors(s)."));r=t}else{if(e.length>1)throw new _("The model expects ".concat(e.length," ").concat(s," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(t.shape),"."));r=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new _("Error when checking ".concat(s,": expected ").concat(e[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(a.shape)));for(let l=0;l<n[i].length;++l){if(l===0&&!o)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u!==c)throw new _("Error when checking ".concat(s,": expected ")+"".concat(e[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(a.shape),"."))}}}function XY(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(t));if(Array.isArray(n))return e.map(o=>n);{const o=[];for(const s of e){let r=n.hasOwnProperty(s)?n[s]:[];Array.isArray(r)||(r=[r]),o.push(r)}return o}}const YY="layers-model";class $l extends as{constructor(e){super(e),this.isTraining=!1}summary(e,n,o=console.log){if(!this.built)throw new _("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");_Y(this,e,n,o)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=DY(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof $i))throw new _("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new _('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const i of this.outputNames)e.loss[i]==null&&console.warn('Output "'.concat(i,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(i," during training")),n.push(Zb(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new _("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));n=e.loss.map(a=>Zb(a))}else{const i=Zb(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const o=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ki("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(o.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=XY(e.metrics,this.outputNames),r=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Ki("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(o.indexOf(i)!==-1)continue;const a=s[i];(c=>{const u="";let d,h,f;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const b=this.internalOutputShapes[i];b[b.length-1]===1||this.lossFunctions[i]===Mg?["accuracy","acc"].indexOf(p)!==-1?h=XD:["crossentropy","ce"].indexOf(p)!==-1&&(h=$Y):this.lossFunctions[i]===yp?["accuracy","acc"].indexOf(p)!==-1?h=kY:["crossentropy","ce"].indexOf(p)!==-1&&(h=ZD):["accuracy","acc"].indexOf(p)!==-1?h=YD:["crossentropy","ce"].indexOf(p)!==-1&&(h=QD);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=u+g}else f=AY(p),d=u+zh(p);let m;Ki(d,()=>{m=f}),r(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,o={}){const s=o.batchSize==null?32:o.batchSize;Jb(s);const r=!0,i=this.standardizeUserDataXY(e,n,r,s);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,o.verbose,o.steps);return Bn(c)}finally{is(i[0],e),is(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),GY(this,e,n)}checkNumSamples(e,n,o,s="steps"){let r;if(o!=null){if(r=null,n!=null)throw new _("If ".concat(s," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(n))}else if(e!=null)Array.isArray(e)?r=e[0].shape[0]:r=e.shape[0];else throw new _("Either the input data should have a defined shape, or "+"".concat(s," shoud be specified."));return r}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new _("`outputs` is an empty Array, which is not allowed.");const o=Array.isArray(n),s=o?n:[n],r=this.retrieveSymbolicTensors(s),i=new Vr;if(e instanceof Dt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new _("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new _("No value is provided for the model's input ".concat(l.name));i.add(l,c)}const a=Pc(r,i);return o?a:a[0]}retrieveSymbolicTensors(e){const n=ma(null,e.length);let o=e.length;for(const s of this.layers){const r=Array.isArray(s.output)?s.output:[s.output],i=r.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=r[l],o--),o===0)break}if(o===0)break}if(o>0){const s=[];throw n.forEach((r,i)=>{r==null&&s.push(e[i])}),new _("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(s)))}return n}predictLoop(e,n=32,o=!1){return G(()=>{const s=this.checkNumSamples(e);if(o)throw new Ee("Verbose predictLoop() is not implemented yet.");const r=e0(s,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)G(()=>{const c=r[a][0],u=r[a][1],d=Sc(e,c,u),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Vr(h);return Pc(this.outputs,f)}).forEach((c,u)=>i[u].push(c));return Bn(i.map(a=>Wn(a,0)))})}predict(e,n={}){const o=s_(e);uS(o,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return Jb(s),this.predictLoop(o,s)}finally{is(o,e)}}predictOnBatch(e){uS(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,o=!0,s){if(this.optimizer_==null)throw new Go("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===yp?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(e=cS(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=cS(n,this.feedOutputNames,r,!1,"target"),qY(e,n),KY(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new _("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(s,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,n]}async standardizeUserData(e,n,o,s,r=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,r,i);if(o!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=t_(s,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await n_(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,o,s=0,r){return G(()=>{const i=this.checkNumSamples(n,o,r,"steps"),a=[];if(s>0)throw new Ee("Verbose mode is not implemented yet.");if(r!=null)throw new Ee("steps mode in testLoop() is not implemented yet");{const l=e0(i,o),c=oo(Ss(0,i));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],f=Xi(c,d,h-d),p=Kx(n,f),m=e(p);if(u===0)for(let b=0;b<m.length;++b)a.push(ze(0));for(let b=0;b<m.length;++b){const g=m[b];a[b]=oe(a[b],F(h-d,g))}}for(let u=0;u<a.length;++u)a[u]=we(a[u],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let o=0;o<e.length;++o){const s=e[o];let r=s;if(KI(e,s)>1){const i=KI(e.slice(0,o),s);r+="_".concat(i)}n.push(r)}return n}makeTrainFunction(){return e=>{const n=[],o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:o[m]});const h=new Vr(d),f=Pc(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const b=this.lossFunctions[m];let g=b(s[m],f[m]);r[m]!=null&&(g=zY(g,r[m]));const x=_t(g);n.push(x),m===0?p=g:p=oe(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let b;if(this.outputs.length>1&&m<this.outputs.length)b=n[m];else{const g=this.metricsTensors[m][0],x=this.metricsTensors[m][1];b=_t(g(s[x],f[x]))}Ks(b),i.push(b)}return p=_t(p),this.calculateLosses().forEach(m=>{p=oe(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),c=!0;return[this.optimizer_.minimize(a,c,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>G(()=>{const n=[];let o;const s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:s[c]});const a=new Vr(i),l=Pc(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=_t(u(r[c],l[c]));c===0?o=d:o=oe(o,d),n.push(o)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=_t(u(r[d],l[d]));n.push(h)}return n})}async fit(e,n,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,r,i,a,l,c,u,d,h;try{const f=o.batchSize==null?32:o.batchSize;Jb(f);const p=!1,m=await this.standardizeUserData(e,n,o.sampleWeight,o.classWeight,p,f);s=m[0],r=m[1],h=m[2];let b=!1,g;if(o.validationData!=null&&o.validationData.length>0){if(b=!0,o.validationData.length===2)l=o.validationData[0],c=o.validationData[1];else throw o.validationData.length===3?new Ee("validationData including sample weights is not supported yet."):new _("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(o.validationData," is invalid."));const E=!0,S=await this.standardizeUserData(l,c,null,null,E,f);u=S[0],d=S[1],g=u.concat(d)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){b=!0;const E=Math.floor(s[0].shape[0]*(1-o.validationSplit)),S=s[0].shape[0];u=Sc(s,E,S),i=s,s=Sc(s,0,E),d=Sc(r,E,S),a=r,r=Sc(r,0,E),g=u.concat(d)}else o.validationSteps!=null&&(b=!0);const x=s.concat(r).concat(h);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let w,$;b?(this.makeTestFunction(),w=this.testFunction,$=y.slice().concat(y.map(E=>"val_"+E))):(w=null,g=[],$=y.slice());const k=jD(o.callbacks,o.yieldEvery);return await this.fitLoop(v,x,y,f,o.epochs,o.verbose,k,w,g,o.shuffle,$,o.initialEpoch,null,null)}finally{this.isTraining=!1,is(s,e),is(r,n),is(i,e),is(a,n),is(u,l),is(d,c),h!=null&&Te(h)}}async fitLoop(e,n,o,s,r,i,a,l,c,u,d,h,f,p){s==null&&(s=32),r==null&&(r=1),u==null&&(u=!0),h==null&&(h=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new _("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,s,f,"steps_per_epoch");let g;b!=null&&(g=Ss(0,b)),i==null&&(i=1);const{callbackList:x,history:v}=qD(a,i,r,h,b,f,s,m,d);x.setModel(this),this.history=v,await x.onTrainBegin(),this.stopTraining_=!1;for(let y=h;y<r;++y){await x.onEpochBegin(y);const w={};if(f!=null)throw new Ee("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Ee("batch shuffling is not implemneted yet");u&&y6(g);const $=oo(g),k=e0(b,s);for(let C=0;C<k.length;++C){const E={};if(await x.onBatchBegin(C,E),G(()=>{const S=k[C][0],T=k[C][1],P=Xi($,S,T-S);E.batch=C,E.size=T-S;const U=Kx(n,P),W=e(U);for(let z=0;z<o.length;++z){const B=o[z],q=W[z];E[B]=q,Ks(q)}if(C===k.length-1&&m){const z=this.testLoop(l,c,s);for(let B=0;B<o.length;++B){const q=o[B],R=z[B];Ks(R),w["val_"+q]=R}}}),await x.onBatchEnd(C,E),GD(E),this.stopTraining_)break}$.dispose()}if(await x.onEpochEnd(y,w),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return WY(this,e,n)}async trainOnBatch(e,n){const o=await this.standardizeUserData(e,n),s=o[0],r=o[1],a=this.makeTrainFunction()(s.concat(r)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return Te(a),is(o[0],e),is(o[1],n),Bn(l)}getNamedWeights(e){const n=[],o=e!=null&&e.trainableOnly,s=o?this.trainableWeights:this.weights,r=this.getWeights(o);for(let i=0;i<s.length;++i)o&&!s[i].trainable||n.push({name:s[i].originalName,tensor:r[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Ox().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Ox().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=ur(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>ur(n))}else{const n=Object.keys(this.loss);e={};const o=this.loss;for(const s of n)if(typeof o[s]=="string")e[s]=ur(o[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ur(zh(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>ur(zh(e)));{const e={};for(const n in this.metrics)e[n]=ur(zh(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Cp(e.optimizer_config),o=Zs(n);let s;if(typeof e.loss=="string")s=Fi(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>Fi(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=Fi(e.loss[i])}let r;if(Array.isArray(e.metrics))r=e.metrics.map(i=>Fi(i));else if(e.metrics!=null){r={};for(const i in e.metrics)r[i]=Fi(e.metrics[i])}this.compile({loss:s,metrics:r,optimizer:o})}async save(e,n){if(typeof e=="string"){const c=$G(e);if(c.length===0)throw new _("Cannot find any save handlers for URL '".concat(e,"'"));if(c.length>1)throw new _("Found more than one (".concat(c.length,") save handlers for ")+"URL '".concat(e,"'"));e=c[0]}if(e.save==null)throw new _("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const o=await RI(this.getNamedWeights(n)),s=!1,r=null,a={modelTopology:this.toJSON(r,s),format:YY,generatedBy:"TensorFlow.js tfjs-layers v".concat(e_),convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await RI(await this.optimizer.getWeights(),c);o.specs.push(...d),o.data=fG([o.data,u])}return this.userDefinedMetadata!=null&&(rS(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=o.data,a.weightSpecs=o.specs,e.save(a)}setUserDefinedMetadata(e){rS(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}$l.className="Model";te($l);class r_ extends $l{}r_.className="Functional";te(r_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function i_(t,e){if(e==null&&(e={}),typeof t=="string"){const n=kG(t,e);if(n.length===0)n.push(iX(t,e));else if(n.length>1)throw new _("Found more than one (".concat(n.length,") load handlers for ")+"URL '".concat(t,"'"));t=n[0]}return QY(t,void 0,e)}async function QY(t,e,n){if(n==null&&(n={}),t.load==null)throw new _("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const o=await t.load();let s=o.modelTopology;s.model_config!=null&&(s=s.model_config);const r=n.strict==null?!0:n.strict,i=o.weightData!=null&&o.weightSpecs!=null&&r,a=Zs(Cp(s),e,i),l=o.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),o.userDefinedMetadata!=null&&a.setUserDefinedMetadata(o.userDefinedMetadata),o.weightData!=null){if(o.weightSpecs==null)throw new _("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:c,optimizerWeights:u}=ZY(o.weightData,o.weightSpecs);a.loadWeights(c,r),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),Te(c),Te(u.map(d=>d.tensor))}return a}function ZY(t,e){const n=cG(t,e),o={},s=[];return e.forEach(r=>{r.group==="optimizer"?s.push({name:r.name,tensor:n[r.name]}):o[r.name]=n[r.name]}),{modelWeights:o,optimizerWeights:s}}class Ru extends $l{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Og("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new _("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const n=e instanceof Ru||e instanceof $l;let o;if(n){if(o=e,o.outputs.length!==1)throw new _("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new _("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new _("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=J9({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=o.outputs,this.inputs=o.inputs;else{if(e.inboundNodes.length!==1)throw new _("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(e.inboundNodes[0].outputTensors.length!==1)throw new _("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=BD(this.outputs[0])}this.inboundNodes=[],new Pg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ma(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Le(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new $l({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,o=console.log){this.built||this.build(),super.summary(e,n,o)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,o={}){if(!this.built)throw new Go("The model needs to be compiled before being used.");return this.model.evaluate(e,n,o)}async evaluateDataset(e,n){if(!this.built)throw new Go("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,o={}){if(!this.built)throw new Go("The model needs to be compiled before being used.");return this.model.fit(e,n,o)}async fitDataset(e,n){if(!this.built)throw new Go("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,o={},s=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new _("Legacy serialization format not supported yet.");r=n}else I(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof Ru))throw new Ee("Sequential.fromConfig called on non-Sequential input: ".concat(a));for(const l of r){const u=Zs(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new _("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new _("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const o={};o.className=n.getClassName(),o.config=n.getConfig(),e.push(o)}return{name:this.name,layers:e}}}Ru.className="Sequential";te(Ru);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Kn=class extends sc{getConfig(){return{}}};class a_ extends Kn{apply(e,n=1){return z9(e,n)}}a_.className="elu";te(a_);class l_ extends Kn{apply(e){return wA(e)}}l_.className="selu";te(l_);class c_ extends Kn{apply(e){return Ta(e)}}c_.className="relu";te(c_);class u_ extends Kn{apply(e){return G(()=>Su(6,Ta(e)))}}u_.className="relu6";te(u_);class d_ extends Kn{apply(e){return e}}d_.className="linear";te(d_);class h_ extends Kn{apply(e){return tc(e)}}h_.className="sigmoid";te(h_);class f_ extends Kn{apply(e){return V9(e)}}f_.className="hardSigmoid";te(f_);class p_ extends Kn{apply(e){return Gd(e)}}p_.className="softplus";te(p_);class m_ extends Kn{apply(e){return B9(e)}}m_.className="softsign";te(m_);class g_ extends Kn{apply(e){return M1(e)}}g_.className="tanh";te(g_);let i$=class extends Kn{apply(e,n=-1){return lw(e,n)}};i$.className="softmax";te(i$);class b_ extends Kn{apply(e,n=-1){return fA(e,n)}}b_.className="logSoftmax";te(b_);class x_ extends Kn{apply(e,n=1){return G(()=>F(tc(F(e,n)),e))}}x_.className="swish";te(x_);class v_ extends Kn{apply(e){return G(()=>F(e,M1(Gd(e))))}}v_.className="mish";te(v_);function ci(t){return t.getClassName()}function t0(t,e={}){return Zd(t,Bo.getMap().classNameMap,e,"activation")}function ui(t){if(t==null){const e={};return e.className="linear",e.config={},t0(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},t0(e)}else return t instanceof Kn?t:t0(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JY(t){if(t!=null&&typeof t!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(t))}class y_ extends sc{}class w_ extends y_{constructor(e){super(),JY(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return G(()=>{let n=Yt([1]);return this.hasL1&&(n=oe(n,ye(F(this.l1,Cn(e))))),this.hasL2&&(n=oe(n,ye(F(this.l2,eh(e))))),L(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}w_.className="L1L2";te(w_);const dS={l1l2:"L1L2"};function Xe(t){return jw(t)}function hS(t,e={}){return Zd(t,Bo.getMap().classNameMap,e,"regularizer")}function dt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in dS?dS[t]:t,config:{}};return hS(n)}else return t instanceof y_?t:hS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $_ extends Ae{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=$e(e);let o=Ta(e);return this.maxValue!=null&&(o=Co(o,0,this.maxValue)),o}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}$_.className="ReLU";te($_);class k_ extends Ae{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const o=$e(e);return j1(o,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}k_.className="LeakyReLU";te(k_);class C_ extends Ae{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=ut(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=dt(e.alphaRegularizer),this.alphaConstraint=Wt(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new _("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes))}build(e){e=Le(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const o={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)o[s]=e[s];this.inputSpec=[new Bt({ndim:e.length,axes:o})],this.built=!0}call(e,n){return e=$e(e),Z1(e,this.alpha.read())}getConfig(){const e={alphaInitializer:gt(this.alphaInitializer),alphaRegularizer:Xe(this.alphaRegularizer),alphaConstraint:Vt(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}C_.className="PReLU";te(C_);let I_=class extends Ae{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ee("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const o=$e(e);return Eg(o)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};I_.className="ELU";te(I_);class S_ extends Ae{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const o=$e(e);return F(o,de(No(o,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}S_.className="ThresholdedReLU";te(S_);class E_ extends Ae{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new i$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){const o=$e(e);return this.softmax(o,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}E_.className="Softmax";te(E_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kl(t,e,n){if(typeof t=="number")return ma(t,e);if(t.length!==e)throw new _("The ".concat(n," argument must be an integer or tuple of ").concat(e," integers.")+" Received: ".concat(t.length," elements."));for(let o=0;o<e;++o){const s=t[o];if(!F9(s))throw new _("The ".concat(n," argument must be an integer or tuple of ").concat(e)+" integers. Received: ".concat(JSON.stringify(t)," including a")+" non-integer number ".concat(s))}return t}function Cs(t,e,n,o,s=1){if(t==null)return t;const r=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-r+1,Math.floor((i+o-1)/o)}function Vs(t,e,n,o){if(t==null)return null;if(o==="valid")t=t*e+li([n-e,0]);else if(o==="same")t=t*e;else throw new _("Unsupport padding mode: ".concat(o,"."));return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a$(t,e){return G(()=>(Tt(e),e==="channelsFirst"?Oe(t,[0,2,3,1]):t))}function T_(t,e){return G(()=>(Tt(e),e==="channelsFirst"?Oe(t,[0,2,3,4,1]):t))}function eQ(t,e,n,o=1,s="valid",r,i=1){return G(()=>{if(r==null&&(r=Es()),Tt(r),t.shape.length!==3)throw new _("The input of a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead."));if(e.shape.length!==3)throw new _("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead"));if(n!=null&&n.shape.length!==1)throw new _("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(e.shape.length," instead"));if(r==="channelsFirst"&&(t=Oe(t,[0,2,1])),s==="causal")throw new Ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=sA(t,e,o,s==="same"?"same":"valid","NWC",i);return n!=null&&(a=Rs(a,n)),a})}function fS(t,e,n,o=[1,1],s="valid",r,i,a=null){return G(()=>{if(r==null&&(r=Es()),Tt(r),t.rank!==3&&t.rank!==4)throw new _("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(t.rank,"."));if(e.rank!==3&&e.rank!==4)throw new _("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(t.rank,"."));let l=a$(t,r);if(s==="causal")throw new Ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=sK({x:l,filter:e,strides:o,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=Oe(l,[0,3,1,2])),l})}function tQ(t,e,n,o=[1,1,1],s="valid",r,i){return G(()=>{if(r==null&&(r=Es()),Tt(r),t.rank!==4&&t.rank!==5)throw new _("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(t.rank,"."));if(e.rank!==4&&e.rank!==5)throw new _("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(t.rank,"."));let a=T_(t,r);if(s==="causal")throw new Ee("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=ej(a,e,o,s==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Rs(a,n)),r==="channelsFirst"&&(a=Oe(a,[0,4,1,2,3])),a})}class zg extends Ae{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",zg.verifyArgs(n),this.rank=e,Zt(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ee("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=kl(n.kernelSize,e,"kernelSize"),this.strides=kl(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Ro(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Tt(this.dataFormat),this.activation=ui(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ut(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Wt(n.biasConstraint),this.biasRegularizer=dt(n.biasRegularizer),this.activityRegularizer=dt(n.activityRegularizer),this.dilationRate=kl(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new _("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new _("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new _("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}}static verifyArgs(e){if(Bs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!qw(e.kernelSize,"number",1,3))throw new _("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ci(this.activation),useBias:this.useBias,biasInitializer:gt(this.biasInitializer),biasRegularizer:Xe(this.biasRegularizer),activityRegularizer:Xe(this.activityRegularizer),biasConstraint:Vt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class rc extends zg{constructor(e,n){super(e,n),this.kernel=null,rc.verifyArgs(n),this.filters=n.filters,Zt(this.filters,"filters"),this.kernelInitializer=ut(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Wt(n.kernelConstraint),this.kernelRegularizer=dt(n.kernelRegularizer)}build(e){e=Le(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new _("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const o=e[n],s=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(e,n){return G(()=>{e=$e(e);let o;const s=this.bias==null?null:this.bias.read(),r=ID(this.activation.getClassName());if(r!=null&&this.rank===2)o=fS(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)o=eQ(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=fS(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=tQ(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ee("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(e){e=Le(e);const n=[],o=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<o.length;++r){const i=Cs(o[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:gt(this.kernelInitializer),kernelRegularizer:Xe(this.kernelRegularizer),kernelConstraint:Vt(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new _("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class sh extends rc{constructor(e){super(2,e),sh.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!qw(e.kernelSize,"number",1,2))throw new _("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}sh.className="Conv2D";te(sh);class rh extends rc{constructor(e){super(3,e),rh.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new _("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}rh.className="Conv3D";te(rh);class N_ extends sh{constructor(e){if(super(e),this.inputSpec=[new Bt({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new _("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=Le(e),e.length!==4)throw new _("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new _("The channel dimension of the inputs should be defined. Found `None`.");const o=e[n],s=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bt({ndim:4,axes:{[n]:o}})],this.built=!0}call(e,n){return G(()=>{let o=$e(e);if(o.shape.length!==4)throw new _("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(o.shape.length));const s=o.shape,r=s[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=s[i],c=s[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=Vs(l,h,u,this.padding),m=Vs(c,f,d,this.padding),b=[r,p,m,this.filters];this.dataFormat!=="channelsLast"&&(o=Oe(o,[0,2,3,1]));let g=rA(o,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=Oe(g,[0,3,1,2])),this.bias!=null&&(g=Rs(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=Le(e);const n=e.slice();let o,s,r;this.dataFormat==="channelsFirst"?(o=1,s=2,r=3):(o=3,s=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[o]=this.filters,n[s]=Vs(n[s],l,i,this.padding),n[r]=Vs(n[r],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}N_.className="Conv2DTranspose";te(N_);class R_ extends rh{constructor(e){if(super(e),this.inputSpec=[new Bt({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new _("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=Le(e),e.length!==5)throw new _("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new _("The channel dimension of the inputs should be defined. Found `None`.");const o=e[n],s=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bt({ndim:5,axes:{[n]:o}})],this.built=!0}call(e,n){return G(()=>{let o=$e(e);if(o.shape.length!==5)throw new _("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(o.shape.length));const s=o.shape,r=s[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const c=s[l],u=s[i],d=s[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],b=this.strides[1],g=this.strides[2],x=Vs(c,m,h,this.padding),v=Vs(u,b,f,this.padding),y=Vs(d,g,p,this.padding),w=[r,x,v,y,this.filters];this.dataFormat!=="channelsLast"&&(o=Oe(o,[0,2,3,4,1]));let $=oj(o,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=Oe($,[0,4,1,2,3])),this.bias!==null&&($=Rs($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=Le(e);const n=e.slice();let o,s,r,i;this.dataFormat==="channelsFirst"?(o=1,s=2,r=3,i=4):(o=4,s=1,r=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[o]=this.filters,n[s]=Vs(n[s],u,a,this.padding),n[r]=Vs(n[r],d,l,this.padding),n[i]=Vs(n[i],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}R_.className="Conv3DTranspose";te(R_);class A_ extends rc{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new _("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new _("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new _("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(n.padding)));this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ut(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=dt(n.depthwiseRegularizer),this.depthwiseConstraint=Wt(n.depthwiseConstraint),this.pointwiseInitializer=ut(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=dt(n.pointwiseRegularizer),this.pointwiseConstraint=Wt(n.pointwiseConstraint)}build(e){if(e=Le(e),e.length<this.rank+2)throw new _("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new _("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[n])));const o=e[n],s=this.kernelSize.concat([o,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(o*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Bt({ndim:this.rank+2,axes:{[n]:o}})],this.built=!0}call(e,n){return G(()=>{e=$e(e);let o;if(this.rank===1)throw new Ee("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Oe(e,[0,2,3,1])),o=$A(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=Rs(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=Oe(o,[0,3,1,2])),o})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=gt(this.depthwiseInitializer),e.pointwiseInitializer=gt(this.pointwiseInitializer),e.depthwiseRegularizer=Xe(this.depthwiseRegularizer),e.pointwiseRegularizer=Xe(this.pointwiseRegularizer),e.depthwiseConstraint=Vt(this.depthwiseConstraint),e.pointwiseConstraint=Vt(this.pointwiseConstraint),e}}A_.className="SeparableConv";class D_ extends A_{constructor(e){super(2,e)}}D_.className="SeparableConv2D";te(D_);class Bg extends rc{constructor(e){super(1,e),Bg.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!qw(e.kernelSize,"number",1,1))throw new _("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}Bg.className="Conv1D";te(Bg);class __ extends Ae{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return G(()=>{if(e=$e(e),this.dataFormat==="channelsLast"){const o=Mh(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Mh(o,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const o=Mh(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Mh(o,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}__.className="Cropping2D";te(__);class O_ extends Ae{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,D9(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],o=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,o]}else{const n=e[1]==null?null:this.size[0]*e[1],o=e[2]==null?null:this.size[1]*e[2];return[e[0],n,o,e[3]]}}call(e,n){return G(()=>{let o=$e(e);const s=o.shape;if(this.dataFormat==="channelsFirst"){o=Oe(o,[0,2,3,1]);const r=this.size[0]*s[2],i=this.size[1]*s[3],a=this.interpolation==="nearest"?gr.resizeNearestNeighbor(o,[r,i]):gr.resizeBilinear(o,[r,i]);return Oe(a,[0,3,1,2])}else{const r=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?gr.resizeNearestNeighbor(o,[r,i]):gr.resizeBilinear(o,[r,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}O_.className="UpSampling2D";te(O_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nQ(t,e,n=[1,1],o="valid",s,r){return G(()=>{s==null&&(s=Es()),Tt(s);let i=a$(t,s);if(t.rank!==4)throw new _("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));if(e.rank!==4)throw new _("depthwiseKernel is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));return i=W1(i,e,n,o==="same"?"same":"valid","NHWC",r),s==="channelsFirst"&&(i=Oe(i,[0,3,1,2])),i})}class F_ extends zg{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=ut(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Wt(e.depthwiseConstraint),this.depthwiseRegularizer=dt(e.depthwiseRegularizer)}build(e){if(e=Le(e),e.length<4)throw new _("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new _("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[n],")."));const o=e[n],s=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return G(()=>{e=$e(e);let o=nQ(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=Rs(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(e){e=Le(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=Cs(n,this.kernelSize[0],this.padding,this.strides[0]),i=Cs(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,r,i]:[e[0],r,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=gt(this.depthwiseInitializer),e.depthwiseRegularizer=Xe(this.depthwiseRegularizer),e.depthwiseConstraint=Vt(this.depthwiseRegularizer),e}}F_.className="DepthwiseConv2D";te(F_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P_(t,e,n,o){if(Array.isArray(t)){if(e!=null||n!=null)throw new _("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=t.slice(t.length-o,t.length),t=t.slice(0,t.length-o)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(r){return r==null||Array.isArray(r)?r:[r]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function L_(t,e,n,o=!1,s,r,i=!1,a=!1){return G(()=>{const l=e.shape.length;if(l<3)throw new _("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(Ss(2,l));if(e=Oe(e,c),r!=null)throw new Ee("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=de(de(s,"bool"),"float32"),s.rank===l-1&&(s=zn(s,-1)),s=Oe(s,c)),o&&(e=fa(e,0),s!=null&&(s=fa(s,0)));const u=[];let d,h=n;const f=e.shape[0],p=pa(e);let m;s!=null&&(m=pa(s));for(let g=0;g<f;++g){const x=p[g],v=G(()=>t(x,h));if(s==null)d=v[0],h=v[1];else{const y=G(()=>{const w=m[g],$=ke(Qo(w),w),k=oe(F(v[0],w),F(h[0],$)),C=h.map((E,S)=>oe(F(v[1][S],w),F(E,$)));return{output:k,newStates:C}});d=y.output,h=y.newStates}a&&u.push(d)}let b;return a&&(b=ai(u,1)),[d,b,h]})}class ki extends Ae{constructor(e){super(e);let n;if(e.cell==null)throw new _("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new u$({cells:e.cell}):n=e.cell,n.stateSize==null)throw new _("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Bt({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ss(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Hx(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const o=n[0];let s;if(this.returnSequences?s=[e[0],e[1],o]:s=[e[0],o],this.returnState){const r=[];for(const i of n)r.push([e[0],i]);return[s].concat(r)}else return s}computeMask(e,n){return G(()=>{Array.isArray(n)&&(n=n[0]);const o=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(r=>null);return[o].concat(s)}else return o})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let o=0;o<e;++o)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ee("Constants support is not implemented in RNN yet.");Hx(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,o=e.slice(2);this.inputSpec[0]=new Bt({shape:[n,null,...o]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!Ve(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new _("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map(i=>new Bt({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){G(()=>{if(!this.stateful)throw new zs("Cannot call resetStates() on an RNN Layer that is not stateful.");const o=this.inputSpec[0].shape[0];if(o==null)throw new _("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Yt([o,s])):this.states_=[Yt([o,this.cell.stateSize])];else if(e==null)Te(this.states_),this.keptStates!=null&&(Te(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Yt([o,s])):this.states_[0]=Yt([o,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new _("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n===!0?this.keptStates.push(this.states_.slice()):Te(this.states_);for(let s=0;s<this.states_.length;++s){const r=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[o,i];if(!Ve(r.shape,a))throw new _("State ".concat(s," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(a,", received shape=").concat(r.shape));this.states_[s]=r}}this.states_=this.states_.map(s=>Ks(s.clone()))})}apply(e,n){let o=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const r=P_(e,o,s,this.numConstants);e=r.inputs,o=r.initialState,s=r.constants;let i=[],a=[];if(o!=null){n.initialState=o,i=i.concat(o),this.stateSpec=[];for(const c of o)this.stateSpec.push(new Bt({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof Us){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return G(()=>{const o=n==null?null:n.mask,s=n==null?null:n.training;let r=n==null?null:n.initialState;e=$e(e),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new _("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(r.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=L_((p,m)=>{const b=this.cell.call([p].concat(m),a);return[b[0],b.slice(1)]},e,r,this.goBackwards,o,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,s);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return G(()=>{let n=Yt(e.shape);return n=ye(n,[1,2]),n=Jd(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?Wx(n,[1,o]):n):this.cell.stateSize>1?[Wx(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const o=this.cell.getConfig();return this.getClassName()===ki.className&&(n.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),e),n)}static fromConfig(e,n,o={}){const s=n.cell,r=Zs(s,o);return new e(Object.assign(n,{cell:r}))}}ki.className="RNN";te(ki);class Vg extends Ae{}class l$ extends Vg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Zt(this.units,"units"),this.activation=ui(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ut(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ut(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ut(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=dt(e.kernelRegularizer),this.recurrentRegularizer=dt(e.recurrentRegularizer),this.biasRegularizer=dt(e.biasRegularizer),this.kernelConstraint=Wt(e.kernelConstraint),this.recurrentConstraint=Wt(e.recurrentConstraint),this.biasConstraint=Wt(e.biasConstraint),this.dropout=zl([1,li([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zl([1,li([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Le(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return G(()=>{if(e=e,e.length!==2)throw new _("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let o=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=di({ones:()=>Qo(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=di({ones:()=>Qo(o),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=Qs(F(e,i),this.kernel.read()):r=Qs(e,this.kernel.read()),this.bias!=null&&(r=Rs(r,this.bias.read())),a!=null&&(o=F(o,a));let l=oe(r,Qs(o,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ci(this.activation),useBias:this.useBias,kernelInitializer:gt(this.kernelInitializer),recurrentInitializer:gt(this.recurrentInitializer),biasInitializer:gt(this.biasInitializer),kernelRegularizer:Xe(this.kernelRegularizer),recurrentRegularizer:Xe(this.recurrentRegularizer),biasRegularizer:Xe(this.biasRegularizer),activityRegularizer:Xe(this.activityRegularizer),kernelConstraint:Vt(this.kernelConstraint),recurrentConstraint:Vt(this.recurrentConstraint),biasConstraint:Vt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}l$.className="SimpleRNNCell";te(l$);class M_ extends ki{constructor(e){e.cell=new l$(e),super(e)}call(e,n){return G(()=>{this.cell.dropoutMask!=null&&(Te(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Te(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:o,training:s,initialState:r})})}static fromConfig(e,n){return new e(n)}}M_.className="SimpleRNN";te(M_);class c$ extends Vg{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new _("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Zt(this.units,"units"),this.activation=ui(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ui(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ut(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ut(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ut(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=dt(e.kernelRegularizer),this.recurrentRegularizer=dt(e.recurrentRegularizer),this.biasRegularizer=dt(e.biasRegularizer),this.kernelConstraint=Wt(e.kernelConstraint),this.recurrentConstraint=Wt(e.recurrentConstraint),this.biasConstraint=Wt(e.biasConstraint),this.dropout=zl([1,li([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zl([1,li([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Le(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return G(()=>{if(e=e,e.length!==2)throw new _("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const o=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=di({ones:()=>Qo(e),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=di({ones:()=>Qo(s),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=F(e,r[0]));let u=Qs(e,this.kernel.read());this.useBias&&(u=Rs(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=F(s,i[0]));const d=this.recurrentKernel.read(),[h,f]=$o(d,[2*this.units,this.units],d.rank-1),p=Qs(s,h),[m,b,g]=$o(u,3,u.rank-1),[x,v]=$o(p,2,p.rank-1);a=this.recurrentActivation.apply(oe(m,x)),l=this.recurrentActivation.apply(oe(b,v));const y=Qs(F(l,s),f);c=this.activation.apply(oe(g,y));const w=oe(F(a,s),F(oe(1,kt(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ci(this.activation),recurrentActivation:ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gt(this.kernelInitializer),recurrentInitializer:gt(this.recurrentInitializer),biasInitializer:gt(this.biasInitializer),kernelRegularizer:Xe(this.kernelRegularizer),recurrentRegularizer:Xe(this.recurrentRegularizer),biasRegularizer:Xe(this.biasRegularizer),activityRegularizer:Xe(this.activityRegularizer),kernelConstraint:Vt(this.kernelConstraint),recurrentConstraint:Vt(this.recurrentConstraint),biasConstraint:Vt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}c$.className="GRUCell";te(c$);class z_ extends ki{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new c$(e),super(e)}call(e,n){return G(()=>{this.cell.dropoutMask!=null&&(Te(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Te(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:o,training:s,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}z_.className="GRU";te(z_);class Wg extends Vg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Zt(this.units,"units"),this.activation=ui(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ui(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ut(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ut(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ut(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=dt(e.kernelRegularizer),this.recurrentRegularizer=dt(e.recurrentRegularizer),this.biasRegularizer=dt(e.biasRegularizer),this.kernelConstraint=Wt(e.kernelConstraint),this.recurrentConstraint=Wt(e.recurrentConstraint),this.biasConstraint=Wt(e.biasConstraint),this.dropout=zl([1,li([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zl([1,li([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Le(e);const o=e[e.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;s=new(n=class extends Jo{apply(l,c){const u=r.apply([i]),d=new Xw().apply([i]),h=r.apply([i*2]);return YI(YI(u,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return G(()=>{const o=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new _("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let s=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=di({ones:()=>Qo(e),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=di({ones:()=>Qo(s),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=F(e,i[0]));let h=Qs(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=F(s,a[0])),h=oe(h,Qs(s,this.recurrentKernel.read())),this.useBias&&(h=Rs(h,this.bias.read()));const[f,p,m,b]=$o(h,4,h.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(p),u=oe(F(c,r),F(l,this.activation.apply(m))),d=this.recurrentActivation.apply(b);const g=F(d,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ci(this.activation),recurrentActivation:ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gt(this.kernelInitializer),recurrentInitializer:gt(this.recurrentInitializer),biasInitializer:gt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Xe(this.kernelRegularizer),recurrentRegularizer:Xe(this.recurrentRegularizer),biasRegularizer:Xe(this.biasRegularizer),activityRegularizer:Xe(this.activityRegularizer),kernelConstraint:Vt(this.kernelConstraint),recurrentConstraint:Vt(this.recurrentConstraint),biasConstraint:Vt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Wg.className="LSTMCell";te(Wg);class B_ extends ki{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wg(e),super(e)}call(e,n){return G(()=>{this.cell.dropoutMask!=null&&(Te(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Te(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:o,training:s,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}B_.className="LSTM";te(B_);class u$ extends Vg{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return G(()=>{e=e;let o=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(o.splice(0,a.stateSize.length)):s.push(o.splice(0,1));s.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];o=s[a],a===0?i=[e[0]].concat(o):i=[i[0]].concat(o),i=l.call(i,n),r.push(i.slice(1))}o=[];for(const a of r.slice().reverse())o.push(...a);return[i[0]].concat(o)})}build(e){Hx(e)&&(e=e[0]),e=e;let n;this.cells.forEach((o,s)=>{Ki("RNNCell_".concat(s),()=>{o.build(e),Array.isArray(o.stateSize)?n=o.stateSize[0]:n=o.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,o={}){const s=[];for(const r of n.cells)s.push(Zs(r,o));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const o of this.cells)n.push(...o.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Gx(e)}setWeights(e){const n=[];for(const o of this.cells){const s=o.weights.length,r=e.splice(s);for(let i=0;i<o.weights.length;++i)n.push([o.weights[i],r[i]])}n$(n)}}u$.className="StackedRNNCells";te(u$);function di(t){const{ones:e,rate:n,training:o=!1,count:s=1,dropoutFunc:r}=t,i=()=>r!=null?r(e(),n):DD(e(),n),a=()=>th(i,e,o);return!s||s<=1?Ks(a().clone()):Array(s).fill(void 0).map(a).map(c=>Ks(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var oQ=globalThis&&globalThis.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n};class V_ extends ki{constructor(e){if(e.unroll)throw new Ee("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ee("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Bt({ndim:5})]}call(e,n){return G(()=>{if(this.cell.dropoutMask!=null&&(Te(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Te(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new _("ConvRNN2D cell does not support constants");const o=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:o,training:s,initialState:r})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return G(()=>{const{stateSize:n}=this.cell,o=e.shape,s=this.computeSingleOutputShape(o),r=[s[0],...s.slice(2)],i=Yt(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){G(()=>{if(!this.stateful)throw new zs("Cannot call resetStates() on an RNN Layer that is not stateful.");const o=this.inputSpec[0].shape,s=this.computeSingleOutputShape(o),r=[s[0],...s.slice(2)];if(o[0]==null)throw new _("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Yt(r)):this.states_=[Yt(r)];else if(e==null)Te(this.states_),this.keptStates!=null&&(Te(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Yt(r)):this.states_[0]=Yt(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new _("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?this.keptStates.push(this.states_.slice()):Te(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=r;if(!Ve(l.shape,c))throw new _("State ".concat(a," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(c,", received shape=").concat(l.shape));this.states_[a]=l}}this.states_=this.states_.map(a=>Ks(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:o,kernelSize:s,padding:r,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Cs(c,s[0],r,i[0],a[0]),h=Cs(u,s[1],r,i[1],a[1]);return[...e.slice(0,2),...l?[o,d,h]:[d,h,o]]}}V_.className="ConvRNN2D";class d$ extends Wg{constructor(e){const{filters:n,kernelSize:o,strides:s,padding:r,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Zt(this.filters,"filters"),this.kernelSize=kl(o,2,"kernelSize"),this.kernelSize.forEach(l=>Zt(l,"kernelSize")),this.strides=kl(s||1,2,"strides"),this.strides.forEach(l=>Zt(l,"strides")),this.padding=r||"valid",Ro(this.padding),this.dataFormat=i||"channelsLast",Tt(this.dataFormat),this.dilationRate=kl(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Zt(l,"dilationRate"))}build(e){var n;e=Le(e);const o=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[o]==null)throw new _("The channel dimension of the input should be defined. "+"Found ".concat(e[o]));const s=e[o],r=4,i=this.kernelSize.concat([s,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Jo{apply(h,f){const p=c.apply([u]),m=Sa([u]),b=c.apply([u*2]);return Kw([p,m,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return G(()=>{if(e.length!==3)throw new _("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const o=n.training||!1,s=e[0],r=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=di({ones:()=>Qo(s),rate:this.dropout,training:o,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(D,V,H)=>!V||!V[H]?D:F(V[H],D);let u=c(s,l,0),d=c(s,l,1),h=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=di({ones:()=>Qo(r),rate:this.recurrentDropout,training:o,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(r,p,0),b=c(r,p,1),g=c(r,p,2),x=c(r,p,3);const v=3,[y,w,$,k]=$o(this.kernel.read(),a,v),[C,E,S,T]=this.useBias?$o(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,y,C,this.padding),d=this.inputConv(d,w,E,this.padding),h=this.inputConv(h,$,S,this.padding),f=this.inputConv(f,k,T,this.padding);const[P,U,W,z]=$o(this.recurrentKernel.read(),a,v);m=this.recurrentConv(m,P),b=this.recurrentConv(b,U),g=this.recurrentConv(g,W),x=this.recurrentConv(x,z);const B=this.recurrentActivation.apply(oe(u,m)),q=this.recurrentActivation.apply(oe(d,b)),R=oe(F(q,i),F(B,this.activation.apply(oe(h,g)))),A=F(this.recurrentActivation.apply(oe(f,x)),this.activation.apply(R));return[A,A,R]})}getConfig(){const e=super.getConfig(),n=oQ(e,["units"]),o={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),o)}inputConv(e,n,o,s){const r=ha(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?Rs(r,o,this.dataFormat):r}recurrentConv(e,n){return ha(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}d$.className="ConvLSTM2DCell";te(d$);class W_ extends V_{constructor(e){const n=new d$(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}W_.className="ConvLSTM2D";te(W_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class h$ extends Ae{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,o=[];for(let s=0;s<this.noiseShape.length;++s)o.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return o}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,r=this.getNoiseShape(o);return th(()=>DD(o,this.rate,r,this.seed),()=>o,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}h$.className="Dropout";te(h$);class U_ extends h${constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}U_.className="SpatialDropout1D";te(U_);class H_ extends Ae{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Zt(this.units,"units"),this.activation=ui(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=ut(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ut(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Wt(e.kernelConstraint),this.biasConstraint=Wt(e.biasConstraint),this.kernelRegularizer=dt(e.kernelRegularizer),this.biasRegularizer=dt(e.biasRegularizer),this.activityRegularizer=dt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Le(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Le(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e),s=ID(this.activation.getClassName());let r;return s!=null?r=Qs(o,this.kernel.read(),s,this.bias?this.bias.read():null):(r=Qs(o,this.kernel.read()),this.bias!=null&&(r=Rs(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const e={units:this.units,activation:ci(this.activation),useBias:this.useBias,kernelInitializer:gt(this.kernelInitializer),biasInitializer:gt(this.biasInitializer),kernelRegularizer:Xe(this.kernelRegularizer),biasRegularizer:Xe(this.biasRegularizer),activityRegularizer:Xe(this.activityRegularizer),kernelConstraint:Vt(this.kernelConstraint),biasConstraint:Vt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}H_.className="Dense";te(H_);class G_ extends Ae{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Le(e);for(const n of e.slice(1))if(n==null)throw new _('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],ti(e,1)]}call(e,n){return G(()=>{this.invokeCallHook(e,n);let o=$e(e);if(this.dataFormat==="channelsFirst"&&o.rank>1){const s=[0];for(let r=2;r<o.rank;++r)s.push(r);s.push(1),o=Oe(o,s)}return M9(o)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}G_.className="Flatten";te(G_);class j_ extends Ae{constructor(e){super(e),this.supportsMasking=!0,this.activation=ui(e.activation)}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e);return this.activation.apply(o)})}getConfig(){const e={activation:ci(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}j_.className="Activation";te(j_);class q_ extends Ae{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return G(()=>(e=$e(e),P9(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}q_.className="RepeatVector";te(q_);class K_ extends Ae{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const o="Total size of new array must be unchanged.",s=n.slice();let r=1,i=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(i===null)i=l;else throw new _("Can only specifiy one unknown dimension.");else r*=c}const a=ti(e);if(i!==null){if(r===0||a%r!==0)throw new _(o);s[i]=a/r}else if(a!==r)throw new _(o);return s}computeOutputShape(e){let n=!1;for(let o=0;o<e.length;++o)if(this.isUnknown(e[o])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e),s=o.shape,r=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return L(o,r)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}K_.className="Reshape";te(K_);class X_ extends Ae{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const n=Ss(1,e.dims.length+1);if(!Ve(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Bt({ndim:this.dims.length+1})]}computeOutputShape(e){e=Le(e);const n=e.slice();return this.dims.forEach((o,s)=>{n[s+1]=e[o]}),n}call(e,n){return Oe($e(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}X_.className="Permute";te(X_);class Y_ extends Ae{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const o=$e(e),s=-1;return Fx(hp(o,this.maskValue),s)}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e),s=-1,r=!0,i=Fx(hp(o,this.maskValue),s,r);return F(o,de(i,o.dtype))})}}Y_.className="Masking";te(Y_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Q_ extends Ae{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ot(e.inputLength))}this.inputDim=e.inputDim,Zt(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Zt(this.outputDim,"outputDim"),this.embeddingsInitializer=ut(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=dt(e.embeddingsRegularizer),this.activityRegularizer=dt(e.activityRegularizer),this.embeddingsConstraint=Wt(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return G(()=>this.maskZero?(e=$e(e),hp(e,Fe(e))):null)}computeOutputShape(e){if(e=Le(e),this.inputLength==null)return[...e,this.outputDim];const n=ot(this.inputLength);if(n.length!==e.length-1)throw new _('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let o=0;for(let s=0;s<n.length;++s){const r=n[s],i=e[s+1];if(r!=null&&i!=null&&r!==i)throw new _('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));r==null&&(n[o]=i),o++}}return[e[0],...n,this.outputDim]}call(e,n){return G(()=>{this.invokeCallHook(e,n);let o=$e(e);o.dtype!=="int32"&&(o=Ys(o,"int32"));const s=AD(this.embeddings.read(),L(o,[o.size]));return L(s,Le(this.computeOutputShape(o.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:gt(this.embeddingsInitializer),embeddingsRegularizer:Xe(this.embeddingsRegularizer),activityRegularizer:Xe(this.activityRegularizer),embeddingsConstraint:Vt(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Q_.className="Embedding";te(Q_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Aa extends Ae{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ee}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const o=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const r=e[e.length-n.length+s],i=n[s];if(r==null||i==null||r<0||i<0)o.push(null);else if(r===1)o.push(i);else if(i===1)o.push(r);else{if(r!==i)throw new _("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));o.push(r)}}return o}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Le(e)]),e=e,e.length<2)throw new _("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let n=[];for(const r of e)r!=null&&r[0]!==null&&n.push(r[0]);if(n=ei(n),n.length>1)throw new _("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let o=e[0]==null?null:e[0].slice(1);for(let r=1;r<e.length;++r){const i=e[r]==null?null:e[r].slice(1);o=this.computeElementwiseOpOutputShape(o,i)}const s=e.map(r=>r.length);e.indexOf(null)===-1&&ei(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return G(()=>{if(e=e,this.reshapeRequired){const o=[],s=e.map(r=>r.rank);if(s.indexOf(null)===-1){const r=li(s);for(let i of e){const a=i.rank;for(let l=0;l<r-a;++l)i=Jd(i,1);o.push(i)}return this.mergeFunction(o)}else{let r=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=L(l,[d].concat(ti(u.slice(1))));f=Oe(f,[1,0]),f=L(f,h),o.push(f),r=!0}else if(c>1){const u=Ss(1,c).concat([0]);o.push(Oe(l,u)),r=!0}else o.push(l)}let i=this.mergeFunction(o);const a=i.rank;if(r){if(a==null){const l=i.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));i=L(Oe(L(i,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Ss(0,a-1));i=Oe(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const r=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let o=[];for(const s of e)s!=null&&s[0]!==null&&o.push(s[0]);return o=ei(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(e,n){return G(()=>{if(n==null)return null;if(!Array.isArray(n))throw new _("`mask` should be an Array");if(!Array.isArray(e))throw new _("`inputs` should be an Array");if(n.length!==e.length)throw new _("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(n.length,")"));if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:zn(s,0));let o=n[0];for(let s=1;s<n.length-1;++s)o=kr(o,n[s]);return o})}}class Z_ extends Aa{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let o=1;o<e.length;++o)n=oe(n,e[o]);return n})}}Z_.className="Add";te(Z_);class J_ extends Aa{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let o=1;o<e.length;++o)n=F(n,e[o]);return n})}}J_.className="Multiply";te(J_);class eO extends Aa{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let o=1;o<e.length;++o)n=oe(n,e[o]);return F(1/e.length,n)})}}eO.className="Average";te(eO);class tO extends Aa{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0];for(let o=1;o<e.length;++o)n=wi(n,e[o]);return n})}}tO.className="Maximum";te(tO);class nO extends Aa{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0];for(let o=1;o<e.length;++o)n=Su(n,e[o]);return n})}}nO.className="Minimum";te(nO);class oO extends Aa{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new _("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const o=[];for(let s=0;s<e.length;++s){const r=e[s].slice();r.splice(this.axis,1);let i=!1;for(const a of o)if(Ve(a,r)){i=!0;break}i||o.push(r)}if(o.length>1)throw new _("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return G(()=>Kw(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new _("A `Concatenate` layer should be called on a list of inputs.");const n=e,o=n[0].slice(),s=this.axis<0?o.length+this.axis:this.axis;for(const r of n.slice(1)){if(o[s]==null||r[s]==null){o[s]=null;break}o[s]+=r[s]}return o}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new _("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new _("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new _("Mismatch in the length of mask (".concat(n.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return G(()=>{let o=!0;if(n.forEach(i=>{if(i!=null){o=!1;return}}),o)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(de(Qo(e[i]),"bool")):n[i].rank<e[i].rank?s.push(zn(n[i],-1)):s.push(n[i]);const r=Wn(s,this.axis);return oA(r,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}oO.className="Concatenate";te(oO);function Ec(t,e){for(;t<0;)t+=e;return t}function sQ(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ee("batchDot is not implemented for tensors of 4D or higher rank yet");if(I(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(t.shape.length)),I(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(e.shape.length)),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ee("batchDot is not implemented for complex64-type Tensors yet.");const o=t.shape.length,s=e.shape.length;n==null&&(n=[o-1,s-2]);const r=n;return G(()=>{let i;if(o>s){i=o-s;const l=[];for(let c=0;c<i;++c)l.push(1);e=L(e,e.shape.concat(l))}else if(s>o){i=s-o;const l=[];for(let c=0;c<i;++c)l.push(1);t=L(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)r[0]===r[1]?a=ye(F(t,e),r[0]):a=ye(F(Oe(t,[1,0]),e),r[1]);else{const l=r[0]!==t.shape.length-1,c=r[1]===e.shape.length-1;a=Be(t,e,l,c)}if(i>0){let l;o>s?l=o+s-3:l=o-1;const c=[];for(let u=l;u<l+i;++u)c.push(u);a=qd(a,c)}return a.shape.length===1&&(a=zn(a,1)),a})}class sO extends Aa{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){I(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],o=e[1];if(n.length>3||o.length>3)throw new Ee("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,o);if(n[s[0]]!==o[s[1]])throw new _("Dimension incompatibility: "+"".concat(n[s[0]]," !== ").concat(o[s[1]]))}mergeFunction(e){if(e.length!==2)throw new _("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let n=e[0],o=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((r,i)=>Ec(r,e[i].shape.length)):s=[Ec(this.axes,n.shape.length),Ec(this.axes,o.shape.length)],this.normalize&&(n=vp(n,s[0]),o=vp(o,s[1])),sQ(n,o,s)}interpretAxes(e,n){let o;return Array.isArray(this.axes)?o=this.axes:o=[Ec(this.axes,e.length),Ec(this.axes,n.length)],o}computeOutputShape(e){I(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),o=e[1].slice();if(n.length>3||o.length>3)throw new Ee("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,o);n.splice(s[0],1),o.splice(s[1],1),o.splice(0,1);const r=n.concat(o);return r.length===1&&r.push(1),r}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}sO.className="Dot";te(sO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rO extends Ae{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e);return th(()=>oe(Fg(o.shape,0,this.stddev),o),()=>o,n.training||!1)})}}rO.className="GaussianNoise";te(rO);class iO extends Ae{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return G(()=>{this.invokeCallHook(e,n);const o=$e(e);return this.rate>0&&this.rate<1?th(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return F(o,Fg(o.shape,1,r))},()=>o,n.training||!1):o})}}iO.className="GaussianDropout";te(iO);class aO extends Ae{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||$e(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return G(()=>{if(this.rate<1&&this.rate>0){const o=this._getNoiseShape(e);return th(()=>{const r=$e(e),i=1.6732632423543772,a=1.0507009873554805,l=-i*a;let c=Ia(jd(o),this.rate);c=Ys(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=oe(F(r,c),F(oe(c,-1),l));return oe(F(h,u),d)},()=>$e(e),n.training||!1)}return e})}}aO.className="AlphaDropout";te(aO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Au(t,e,n,o,s,r=.001){let i;if(t.rank===2)i=R5(t,e,n,o,s,r);else if(t.rank===3)i=D5(t,e,n,o,s,r);else if(t.rank===4)i=O5(t,e,n,o,s,r);else throw new Ee("batchNormalization is not implemented for array of rank ".concat(t.rank," ")+"yet");return i}function rQ(t,e,n,o,s=.001){return G(()=>{const r=X1(t,o),i=r.mean,a=r.variance;return[Au(t,i,a,n,e,s),i,a]})}function iQ(t,e,n,o,s=.001){return G(()=>{const r=X1(t,o),i=r.mean,a=r.variance,l=[];for(const p of Ss(0,t.rank))o.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=L(i,l),u=L(a,l),d=e==null?null:L(e,l),h=n==null?null:L(n,l);return[Au(t,c,u,h,d,s),i,a]})}function aQ(t,e,n,o,s=.001){return Ve(o.slice().sort(),Ss(0,t.rank-1))?rQ(t,e,n,o,s):iQ(t,e,n,o,s)}class lO extends Ae{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ut(e.betaInitializer||"zeros"),this.gammaInitializer=ut(e.gammaInitializer||"ones"),this.movingMeanInitializer=ut(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ut(e.movingVarianceInitializer||"ones"),this.betaConstraint=Wt(e.betaConstraint),this.gammaConstraint=Wt(e.gammaConstraint),this.betaRegularizer=dt(e.betaRegularizer),this.gammaRegularizer=dt(e.gammaRegularizer)}build(e){e=Le(e);const n=this.axis>=0?this.axis:this.axis+e.length,o=e[n];if(o==null)throw new _("Axis ".concat(n," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Bt({ndim:e.length,axes:{[n]:o}})];const s=[o];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return G(()=>{const o=n.training==null?!1:n.training,s=$e(e),r=s.shape,i=r.length,a=Ss(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const c=ma(1,i);c[l]=r[l];const u=a.slice();u.sort();const d=!Ve(u,Ss(0,i).slice(0,i-1)),h=()=>{if(d){const x=L(this.movingMean.read(),c),v=L(this.movingVariance.read(),c),y=this.center?L(this.beta.read(),c):null,w=this.scale?L(this.gamma.read(),c):null;return Au(s,x,v,y,w,this.epsilon)}else return Au(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return h();const[f,p,m]=aQ(s,this.gamma.read(),this.beta.read(),a,this.epsilon),b=(x,v,y)=>{G(()=>{const w=1-y,$=x.read(),k=F(ke($,v),w);x.write(ke($,k))})};return(()=>{b(this.movingMean,p,this.momentum),b(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gt(this.betaInitializer),gammaInitializer:gt(this.gammaInitializer),movingMeanInitializer:gt(this.movingMeanInitializer),movingVarianceInitializer:gt(this.movingVarianceInitializer),betaRegularizer:Xe(this.betaRegularizer),gammaRegularizer:Xe(this.gammaRegularizer),betaConstraint:Vt(this.betaConstraint),gammaConstraint:Vt(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}lO.className="BatchNormalization";te(lO);class cO extends Ae{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}else throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ut(e.betaInitializer||"zeros"),this.gammaInitializer=ut(e.gammaInitializer||"ones"),this.betaRegularizer=dt(e.betaRegularizer),this.gammaRegularizer=dt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Le(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==ei(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const o=this.axis.map(r=>e[r]),s=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const o=$e(e),s=o.shape,r=s.length;return G(()=>{let{mean:a,variance:l}=X1(o,this.axis,!0);const c=ma(1,r);for(const m of this.axis)c[m]=s[m];const u=m=>m!=null&&m.shape.length!==r?L(m,c):m;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<r;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),p.push(1)):(f.push(1),p.push(s[m]));return a=gs(a,f),l=gs(l,f),d!=null&&(d=gs(d,p)),h!=null&&(h=gs(h,p)),Au(o,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gt(this.betaInitializer),gammaInitializer:gt(this.gammaInitializer),betaRegularizer:Xe(this.betaRegularizer),gammaRegularizer:Xe(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}cO.className="LayerNormalization";te(cO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lQ(t,e,n){return G(()=>{if(t.rank!==4)throw new _("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new _("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Es()),n!=="channelsLast"&&n!=="channelsFirst")throw new _("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let o;return n==="channelsFirst"?o=[[0,0],[0,0],e[0],e[1]]:o=[[0,0],e[0],e[1],[0,0]],Y1(t,o)})}class uO extends Ae{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Es():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new _("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let n,o;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new _("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(n=e.padding[0],e.padding[1].length!==2)throw new _("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}this.padding=[n,o]}this.inputSpec=[new Bt({ndim:4})]}computeOutputShape(e){e=Le(e);let n,o;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?o=e[3]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],e[1],n,o]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?o=e[2]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],n,o,e[3]])}call(e,n){return G(()=>lQ($e(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}uO.className="ZeroPadding2D";te(uO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ug(t,e,n,o,s,r){return G(()=>{Tt(s),ED(r),Ro(o),n==null&&(n=[1,1]),o==null&&(o="valid"),s==null&&(s=Es()),r==null&&(r="max"),t=a$(t,s);let i;const a=o==="same"?"same":"valid";return r==="max"?i=K1(t,e,n,a):i=L1(t,e,n,a),s==="channelsFirst"&&(i=Oe(i,[0,3,1,2])),i})}function dO(t,e,n,o,s,r){return G(()=>{Tt(s),ED(r),Ro(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),s==null&&(s=Es()),r==null&&(r="max"),t=T_(t,s);let i;const a=o==="same"?"same":"valid";return r==="max"?i=y8(t,e,n,a):i=y5(t,e,n,a),s==="channelsFirst"&&(i=Oe(i,[0,4,1,2,3])),i})}class hO extends Ae{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new _("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));if(Zt(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new _("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));Zt(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Ro(this.padding),this.inputSpec=[new Bt({ndim:3})]}computeOutputShape(e){e=Le(e);const n=Cs(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return G(()=>{this.invokeCallHook(e,n),e=Jd($e(e),2);const o=this.poolingFunction($e(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return qd(o,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class fO extends hO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),Ug(e,n,o,s,r,"max")}}fO.className="MaxPooling1D";te(fO);class pO extends hO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),Ug(e,n,o,s,r,"avg")}}pO.className="AveragePooling1D";te(pO);class mO extends Ae{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new _("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Zt(this.poolSize,"poolSize"),Zt(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(this.dataFormat),Ro(this.padding),this.inputSpec=[new Bt({ndim:4})]}computeOutputShape(e){e=Le(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Cs(n,this.poolSize[0],this.padding,this.strides[0]),o=Cs(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,o]:[e[0],n,o,e[3]]}call(e,n){return G(()=>(this.invokeCallHook(e,n),this.poolingFunction($e(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class gO extends mO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),Ug(e,n,o,s,r,"max")}}gO.className="MaxPooling2D";te(gO);class bO extends mO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),Ug(e,n,o,s,r,"avg")}}bO.className="AveragePooling2D";te(bO);class xO extends Ae{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new _("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Zt(this.poolSize,"poolSize"),Zt(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(this.dataFormat),Ro(this.padding),this.inputSpec=[new Bt({ndim:5})]}computeOutputShape(e){e=Le(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Cs(n,this.poolSize[0],this.padding,this.strides[0]),o=Cs(o,this.poolSize[1],this.padding,this.strides[1]),s=Cs(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,o,s]:[e[0],n,o,s,e[4]]}call(e,n){return G(()=>(this.invokeCallHook(e,n),this.poolingFunction($e(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class vO extends xO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),dO(e,n,o,s,r,"max")}}vO.className="MaxPooling3D";te(vO);class yO extends xO{constructor(e){super(e)}poolingFunction(e,n,o,s,r){return Tt(r),Ro(s),dO(e,n,o,s,r,"avg")}}yO.className="AveragePooling3D";te(yO);class wO extends Ae{constructor(e){super(e),this.inputSpec=[new Bt({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ee}}class $O extends wO{constructor(e){super(e||{})}call(e,n){return G(()=>{const o=$e(e);return _t(o,1)})}}$O.className="GlobalAveragePooling1D";te($O);class kO extends wO{constructor(e){super(e||{})}call(e,n){return G(()=>{const o=$e(e);return ks(o,1)})}}kO.className="GlobalMaxPooling1D";te(kO);class CO extends Ae{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(this.dataFormat),this.inputSpec=[new Bt({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ee}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class IO extends CO{call(e,n){return G(()=>{const o=$e(e);return this.dataFormat==="channelsLast"?_t(o,[1,2]):_t(o,[2,3])})}}IO.className="GlobalAveragePooling2D";te(IO);class SO extends CO{call(e,n){return G(()=>{const o=$e(e);return this.dataFormat==="channelsLast"?ks(o,[1,2]):ks(o,[2,3])})}}SO.className="GlobalMaxPooling2D";te(SO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EO extends Ae{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,o={}){const s=n.layer,r=Zs(s,o);delete n.layer;const i={layer:r};return Object.assign(i,n),new e(i)}}class TO extends EO{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Le(e),e.length<3)throw new _("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Le(e);const n=[e[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(n),s=e[1];return[o[0],s].concat(o.slice(1))}call(e,n){return G(()=>(e=$e(e),L_((i,a)=>[$e(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}TO.className="TimeDistributed";te(TO);function cQ(t){Ra(A9,"BidirectionalMergeMode",t)}const uQ="concat";class NO extends EO{constructor(e){super(e);const n=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=n,this.forwardLayer=Zs(o),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Zs(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?uQ:e.mergeMode,cQ(this.mergeMode),e.weights)throw new Ee("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,o=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let o,s,r;return this.returnState&&(r=n.slice(1)),o=n[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,s=[o]):this.mergeMode==null?s=[o,o.slice()]:s=[o],this.returnState?this.mergeMode==null?s.concat(r).concat(r.slice()):[o].concat(r).concat(r.slice()):Bn(s)}apply(e,n){let o=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const r=P_(e,o,s,this.numConstants);if(e=r.inputs,o=r.initialState,s=r.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(o==null||o.length===0)&&s==null)return super.apply(e,n);const i=[],a=[];if(o!=null){const c=o.length;if(c%2>0)throw new _("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=o,i.push(...o);const u=o.map(d=>new Bt({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new Ee("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof Us;for(const c of i)if(c instanceof Us!==l)throw new _("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return G(()=>{const o=n.initialState;let s,r;if(o==null)s=this.forwardLayer.call(e,n),r=this.backwardLayer.call(e,n);else{const l=o.slice(0,o.length/2),c=o.slice(o.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(r.slice(1))),s=s[0],r=r[0]),this.returnSequences&&(r=fa(r,1));let a;return this.mergeMode==="concat"?a=Kw([s,r]):this.mergeMode==="sum"?a=oe(s,r):this.mergeMode==="ave"?a=F(.5,oe(s,r)):this.mergeMode==="mul"?a=F(s,r):this.mergeMode==null&&(a=[s,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ki(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ki(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[n,n]:o=n:this.mergeMode==null?o=[null,null]:o=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(o)?o.concat(r).concat(r):[o].concat(r).concat(r)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const o=Zs(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ee("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=o,new e(s)}}NO.className="Bidirectional";te(NO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class RO extends Ae{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return G(()=>(e=$e(e),e.dtype!=="float32"&&(e=Ys(e,"float32")),oe(F(e,this.scale),this.offset)))}}RO.className="Rescaling";te(RO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:dQ,cropAndResize:hQ}=gr;class AO extends Ae{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,o,s,r,i,a,l){return G(()=>{let c,u=!1;const d=n/i,h=o/a,f=(s+n)/i,p=(r+o)/a,m=[d,h,f,p],b=[];e.rank===3?(u=!0,c=ai([e])):c=e;for(let w=0;w<c.shape[0];w++)b.push(m);const g=Zc(b,[b.length,4]),x=Eu(0,b.length,1,"int32"),y=hQ(c,g,x,[s,r],"nearest");return Ys(u?$e(pa(y)):y,l)})}upsize(e,n,o,s){return G(()=>{const r=dQ(e,[n,o]);return Ys(r,s)})}call(e,n){return G(()=>{const o=$e(e),s=o.dtype,r=o.shape,i=r[r.length-3],a=r[r.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(o,l,c,this.height,this.width,i,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Le(e);const n=e.length-3,o=e.length-2;return e[n]=this.height,e[o]=this.width,e}}AO.className="CenterCrop";te(AO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fQ(t,e,n,o){let s=$e(t);if(s.dtype!=="int32"&&(s=Ys(s,"int32")),e==="int")return s;const r=s.shape;if(s.rank===0&&(s=zn(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=zn(s,-1)),s.rank>2)throw new _("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(e," and input shape ").concat(r)+" which would result in output rank ".concat(s.rank,"."));const i=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof o<"u"&&e==="count"?l=_I(a,o,n,i):l=_I(a,[],n,i),e!=="tfIdf")return l;if(o)return F(l,o);throw new _("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class DO extends Ae{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Le(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return G(()=>{e=$e(e),e.dtype!=="int32"&&(e=Ys(e,"int32"));let o;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new _("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(n.countWeights));o=$e(n.countWeights)}const s=ks(e),r=up(e),i=No(this.numTokens,s).bufferSync().get(0),a=Ia(r,0).bufferSync().get(0);if(!(i&&a))throw new _("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return fQ(e,this.outputMode,this.numTokens,o)})}}DO.className="CategoryEncoding";te(DO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pQ=["bilinear","nearest"],pS=new Set(pQ);class _O extends Ae{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(pS.has(e.interpolation))this.interpolation=e.interpolation;else throw new _("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Le(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return G(()=>{const o=[this.height,this.width];if(this.interpolation==="bilinear")return gr.resizeBilinear(e,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return gr.resizeNearestNeighbor(e,o,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...pS]," are supported"))})}}_O.className="Resizing";te(_O);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OO{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}OO.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FO extends Ae{constructor(e){super(e),this.randomGenerator=new OO(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}FO.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const mQ=["bilinear","nearest"],mS=new Set(mQ);class PO extends FO{constructor(e){super(e);const{factor:n,interpolation:o="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new _("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));if(this.widthLower<-1||this.widthUpper<-1)throw new _("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new _("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(o)if(mS.has(o))this.interpolation=o;else throw new _("Invalid interpolation parameter: ".concat(o," is not implemented"))}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Le(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return G(()=>{const o=$e(e);this.imgHeight=o.shape[o.shape.length-3];const s=o.shape[o.shape.length-2];this.widthFactor=jd([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*s;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return gr.resizeBilinear(e,i);case"nearest":return gr.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...mS]," are supported"))}})}}PO.className="RandomWidth";te(PO);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gQ=j();gQ.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var gS;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(gS||(gS={}));var bS;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(bS||(bS={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var xS;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(xS||(xS={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&I(n.dtype!=="complex64",()=>"".concat(e," does not support complex64 tensors in the CPU backend."))})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQ=RA;class Hg extends My{nextDataId(){return Hg.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new eR(this,Ls())}write(e,n,o){this.firstUse&&(this.firstUse=!1,j().get("IS_NODE")&&xo("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:o,refCount:1}),s}makeTensorInfo(e,n,o){let s;if(n==="string"&&o!=null&&o.length>0&&ju(o[0])){const r=o.map(i=>Jr(i));s=this.write(r,e,n)}else s=this.write(o,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,o,s,r){this.data.set(e,{values:n,dtype:s,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:o}=this.data.get(e);if(n==="complex64"){const s=this.readSync(o.real.dataId),r=this.readSync(o.imag.dataId);return Cr(s,r)}return S6(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const o=n.map(s=>ii(s));return Ne(e.shape,e.dtype,o)}catch(o){throw new Error("Failed to decode encoded string bytes into utf-8")}return Ne(e.shape,e.dtype,n)}makeOutput(e,n,o){return Ls().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:o}=this.data.get(e);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Mn();return e(),{kernelMs:Mn()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){pe([e],"where");const n=this.readSync(e.dataId);return bQ(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Hg.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const xQ=t=>{const{x:e}=t.inputs,n=t.backend;pe(e,"abs");let o=new Float32Array(Q(e.shape));const s=n.data.get(e.dataId).values;return o=LO(s),n.makeOutput(o,e.shape,e.dtype)},vQ={kernelName:Cm,backendName:"cpu",kernelFunc:xQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nt(t){return(e,n,o,s,r)=>{const i=Ie(e,n),a=i.length,l=ve(i),c=Q(i),u=bn(r,c),d=e.length,h=n.length,f=ve(e),p=ve(n),m=Pl(e,i),b=Pl(n,i);if(m.length+b.length===0)for(let g=0;g<u.length;++g)u[g]=t(o[g%o.length],s[g%s.length]);else for(let g=0;g<u.length;++g){const x=Jl(g,a,l),v=x.slice(-d);m.forEach(k=>v[k]=0);const y=qs(v,d,f),w=x.slice(-h);b.forEach(k=>w[k]=0);const $=qs(w,h,p);u[g]=t(o[y],s[$])}return[u,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t){const{inputs:e,backend:n}=t,{real:o,imag:s}=e,r=n.data.get(o.dataId).values,i=n.data.get(s.dataId).values,a=n.makeTensorInfo(o.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",r),imag:n.makeTensorInfo(s.shape,"float32",i)},a}const yQ={kernelName:Zy,backendName:"cpu",kernelFunc:Jn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ip(t,e,n="float32"){if(n==="complex64"){const s=Ip(t,e,"float32"),r=Ip(t,e,"float32");return Jn({inputs:{real:s,imag:r},backend:t})}const o=xn(Q(e),n);return t.makeTensorInfo(e,n,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(t){const{inputs:e,backend:n}=t,{x:o}=e;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}const wQ={kernelName:fd,backendName:"cpu",kernelFunc:tr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(t){const{inputs:e,backend:n}=t,{input:o}=e,s=n.data.get(o.dataId).complexTensorInfos.real,r=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,r)}const $Q={kernelName:$1,backendName:"cpu",kernelFunc:ga};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(t,e,n,o){if(o==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(o==="bool"){const s=Ca([0],n),[r,i]=Nt((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[i,"bool",r]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(o))}function hi(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{dtype:r}=o;if(r==="complex64"){if(s.dtype==="complex64")return tr({inputs:{x:s},backend:n});const u=Ip(n,s.shape,s.dtype),d=hi({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=Jn({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const u=ga({inputs:{input:s},backend:n}),d=hi({inputs:{x:u},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(u),d}if(!nR(s.dtype,r)){const u=tr({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:r}}const i=n.data.get(s.dataId).values,[a,l,c]=MO(i,s.shape,s.dtype,r);return n.makeTensorInfo(a,l,c)}const kQ={kernelName:ed,backendName:"cpu",kernelFunc:hi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(t,e,n,o){return n==null?({inputs:s,backend:r})=>{const{a:i,b:a}=s,l=r;pe([i,a],t);const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=i.dtype==="string"?Ir(c):c,h=i.dtype==="string"?Ir(u):u,f=o||i.dtype,[p,m]=e(i.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:s,backend:r})=>{const{a:i,b:a}=s,l=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const c=hi({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=hi({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(m.dataId),g=b.complexTensorInfos.real,x=b.complexTensorInfos.imag,v=l.data.get(g.dataId).values,y=l.data.get(x.dataId).values,[w,$,k]=n(i.shape,a.shape,f,p,v,y),C=l.makeTensorInfo(k,"float32",w),E=l.makeTensorInfo(k,"float32",$),S=Jn({inputs:{real:C,imag:E},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(E),S}else{const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=o||i.dtype,[h,f]=e(i.shape,a.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function f$(t){return(e,n,o,s,r,i)=>{const a=Ie(e,n),l=Q(a),c=a.length,u=ve(a),d=bn("float32",l),h=bn("float32",l),f=Pl(e,a),p=Pl(n,a),m=Cr(o,s),b=Cr(r,i),g=e.length,x=ve(e),v=n.length,y=ve(n);if(f.length+p.length===0)for(let w=0;w<d.length;w++){const $=w%m.length,k=w%b.length,C=t(m[$*2],m[$*2+1],b[k*2],b[k*2+1]);d[w]=C.real,h[w]=C.imag}else for(let w=0;w<d.length;w++){const $=Jl(w,c,u),k=$.slice(-g);f.forEach(P=>k[P]=0);const C=qs(k,g,x),E=$.slice(-v);p.forEach(P=>E[P]=0);const S=qs(E,v,y),T=t(m[C*2],m[C*2+1],b[S*2],b[S*2+1]);d[w]=T.real,h[w]=T.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zO=Nt((t,e)=>t+e),CQ=f$((t,e,n,o)=>({real:t+n,imag:e+o})),Bl=Ht(ec,zO,CQ),IQ={kernelName:ec,backendName:"cpu",kernelFunc:Bl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$(t,e,n,o,s){const r=Q(o),i=xn(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(r>0?i[l]+=e[a]:i[l]+=1)}return i}function BO(t,e,n,o=!1){const s=t.shape[0],r=t.shape[1],i=Ne([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<r;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(o?i.set(1,a,c):e.size>0?i.set(i.get(a,c)+e.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VO=Nt((t,e)=>t&e),SQ=Ht(Qy,VO),EQ={kernelName:Qy,backendName:"cpu",kernelFunc:SQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sr(t){return(e,n,o)=>{const s=$t(n,e.length);for(let r=0;r<e.length;++r)s[r]=t(e[r],o);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function He(t,e,n){const o=sr(e);return Ci(t,o,n)}function Ci(t,e,n){return({inputs:o,attrs:s,backend:r})=>{const{x:i}=o;pe(i,t);const a=r,l=a.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Ir(l)}else c=l;const u=n||i.dtype,d=e(c,u,s);return a.makeTensorInfo(i.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WO=sr(t=>Math.ceil(t)),TQ=Ci(td,WO),NQ={kernelName:td,backendName:"cpu",kernelFunc:TQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UO(t,e,n,o){const s=$t(n,Q(e));if(o&&n!=="string"){let r=0;t.forEach(i=>{const a=Q(i.shape);s.set(i.vals,r),r+=a})}else{let r=0;t.forEach(i=>{const a=n==="string"?Ir(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const u=c*e[1]+r;for(let d=0;d<i.shape[1];++d)s[u+d]=a[l++]}r+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HO=Nt((t,e)=>t===e?1:0),GO=Ht(zm,HO,null,"bool"),RQ={kernelName:zm,backendName:"cpu",kernelFunc:GO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jO=sr(t=>Math.exp(t)),qO=Ci(ld,jO,"float32"),AQ={kernelName:ld,backendName:"cpu",kernelFunc:qO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KO=sr(t=>Math.expm1(t)),DQ=Ci(cd,KO),_Q={kernelName:cd,backendName:"cpu",kernelFunc:DQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XO=sr(t=>Math.floor(t)),OQ=Ci(ud,XO),FQ={kernelName:ud,backendName:"cpu",kernelFunc:OQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YO=Nt((t,e)=>Math.floor(t/e)),PQ=Ht(dd,YO,null,"int32"),LQ={kernelName:dd,backendName:"cpu",kernelFunc:PQ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QO(t,e,n,o,s,r,i,a,l){const c=Ne([o,r],n);for(let u=0;u<o;u++){const d=[];let h=0;for(let f=0;f<s;f++){const p=t[u*s+f];h+=p*i[f],d.push(p)}if(h<0||h>=l/r)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(a));for(let f=0;f<r;f++)c.values[u*r+f]=e.get(...e.indexToLoc(h*r+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZO(t,e,n){const o=Ne(n,t.dtype);for(let s=0;s<o.size;++s){const i=o.indexToLoc(s).slice(),a=i[0],l=i[2],c=e.locToIndex([a,l]);i[2]=e.values[c];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(o.values[s]=t.values[u])}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JO=Nt((t,e)=>t>e?1:0),MQ=Ht(Um,JO,null,"bool"),zQ={kernelName:Um,backendName:"cpu",kernelFunc:MQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eF=Nt((t,e)=>t>=e?1:0),BQ=Ht(hd,eF,null,"bool"),VQ={kernelName:hd,backendName:"cpu",kernelFunc:BQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tF=Nt((t,e)=>t<e?1:0),WQ=Ht(Gm,tF,null,"bool"),UQ={kernelName:Gm,backendName:"cpu",kernelFunc:WQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nF=Nt((t,e)=>t<=e?1:0),HQ=Ht(jm,nF,null,"bool"),GQ={kernelName:jm,backendName:"cpu",kernelFunc:HQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oF(t,e,n){const o=(e-t)/(n-1),s=xn(n,"float32");s[0]=t;for(let r=1;r<s.length;r++)s[r]=s[r-1]+o;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sF=sr(t=>Math.log(t)),jQ=Ci(bd,sF),qQ={kernelName:bd,backendName:"cpu",kernelFunc:jQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rF(t,e,n,o){const s=bn(o,Q(n));for(let r=0;r<s.length;++r){const i=r*e;let a=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>a)&&(a=c)}s[r]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iF=Nt((t,e)=>Math.max(t,e)),KQ=Ht(vd,iF),XQ={kernelName:vd,backendName:"cpu",kernelFunc:KQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aF=Nt((t,e)=>Math.min(t,e)),YQ=Ht(yd,aF),QQ={kernelName:yd,backendName:"cpu",kernelFunc:YQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$=Nt((t,e)=>t*e),ZQ=f$((t,e,n,o)=>({real:t*n-e*o,imag:t*o+e*n})),Gg=Ht($d,m$,ZQ),JQ={kernelName:$d,backendName:"cpu",kernelFunc:Gg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lF(t,e,n){const o=bi(-1,n);return m$([],e,o,t,n)}function eZ(t){const{inputs:e,backend:n}=t,{x:o}=e;pe(o,"neg");const s=n.data.get(o.dataId).values,[r,i]=lF(s,o.shape,o.dtype);return n.makeTensorInfo(i,o.dtype,r)}const tZ={kernelName:og,backendName:"cpu",kernelFunc:eZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cF=Nt((t,e)=>t!==e?1:0),nZ=Ht(sg,cF,null,"bool"),oZ={kernelName:sg,backendName:"cpu",kernelFunc:nZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$(t,e,n,o,s){const r=e.length,i=Q(e),a=ve(e),l=ve(s),c=bn(n,Q(s));for(let u=0;u<i;++u){const d=Jl(u,r,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[o[p]];const f=qs(h,r,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(t){const{inputs:e,attrs:n,backend:o}=t,{x:s}=e,{perm:r}=n;pe(s,"transpose");const i=s.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=s.shape[r[d]];const l=o.data.get(s.dataId).values,c=g$(l,s.shape,s.dtype,r,a);return{dataId:o.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const sZ={kernelName:yl,backendName:"cpu",kernelFunc:Hn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uF(t,e,n,o){const[s,r]=en(t,o),i=lo(e,"int32"),a=xn(Q(s),i),l=Q(r);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];a[c]=d}return{outVals:a,outShape:s,outDtype:i}}function rZ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;pe(s,"prod");const a=s.shape.length,l=Re(r,s.shape),c=bt(l,a);let u=l,d=s;const h=[];c!=null&&(d=Hn({inputs:{x:s},backend:n,attrs:{perm:c}}),h.push(d),u=Et(u.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:b}=uF(d.shape,d.dtype,f,u);let g=m;return i&&(g=Ft(m,l)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(g,b,p)}const iZ={kernelName:ug,backendName:"cpu",kernelFunc:rZ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(t,e,n){t.forEach((o,s)=>{if(o<0||o>=n){const r=Jl(s,e.length,ve(e)).join(",");throw new Error("indices[".concat(r,"] = ").concat(o," is not in [0, ").concat(n,")"))}})}function lZ(t,e){for(let n=0;n<t.length;++n){const o=t[n],s=n===t.length-1?e:t[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>s)throw new Error("Ragged splits must not point past values");for(let r=1;r<o.length;++r)if(o[r-1]>o[r])throw new Error("Ragged splits must be sorted in ascending order")}}function cZ(t,e,n,o){const s=[];let r=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);lZ(n,o);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],b=m[m.length-1]-f[u];for(let g=u;g<d;++g)a[p].push(f[g+1]+b)}u=f[u],d=f[d]}d!==u&&(s.push([u,d]),r+=d-u)}return{outSplits:a,valueSlices:s,numValues:r}}function uZ(t){const e=[];for(let n=0;n<t.length;++n){const o=t[n].length,s=$t("int32",o);e.push(s),t[n].forEach((r,i)=>s[i]=r)}return e}function vS(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let o=e;o<t.length;o++)n[e-1]*=t[o];return n}function dZ(t,e,n,o,s,r){const i=vS(e,2)[1],a=vS(r,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<o;++d)s[l*a+d]=t[u*i+d];++l}}function hZ(t,e,n,o,s){const r=e.slice();r[0]=s;const i=$t(n,Q(r)),a=t.length,l=a===0?0:a/e[0];return dZ(t,e,o,l,i,r),[i,r]}function dF(t,e,n,o,s,r,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(aZ(r,i,l),o.length===0)throw new Error("params.rank must be nonzero");const c=o[0],{outSplits:u,valueSlices:d,numValues:h}=cZ(r,i,t,c),f=uZ(u),p=hZ(n,o,s,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yS=2147483647;function hF(t,e,n,o,s,r,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=i.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(i[0]);for(let b=1;b<u.length;++b)if(u[b]!==u[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=$t("int32",d+1);h[0]=0;for(let b=0;b<d;++b){const g=a?t[0]:t[b],x=l?o[0]:o[b],v=c?r[0]:r[b];if(v===0)throw new Error("Requires delta != 0");let y;if(v>0&&x<g||v<0&&x>g)y=0;else if(y=Math.ceil(Math.abs((x-g)/v)),y>yS)throw new Error("Requires ((limit - start) / delta) <= ".concat(yS));h[b+1]=h[b]+y}const f=h[d],p=$t(n,f);let m=0;for(let b=0;b<d;++b){const g=h[b+1]-h[b];let x=a?t[0]:t[b];const v=c?r[0]:r[b];for(let y=0;y<g;++y)p[m++]=x,x+=v}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fo=ps;class Sp{constructor(e,n,o,s,r,i,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=o,this.valuesShape=s,this.valuesDType=r,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ZA(u),this.raggedRank=JA(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Fo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Fo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Fo.VALUE_ROWIDS:return Sp.getMaxWidthValueRowID(n);case Fo.ROW_SPLITS:return Sp.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(Fo[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let o=0;for(let s=0;s<n-1;++s){const r=e[s+1]-e[s];r>o&&(o=r)}return o}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let o=0,s=e[0],r=0;for(let i=1;i<n;++i){const a=e[i];a!==s&&(s=a,r=Math.max(i-o,r),o=i)}return Math.max(n-o,r)}tensorShapeFromTensor(e,n,o=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return $S(e,o)}calculateOutputSize(e){const n=this.valuesShape,o=this.defaultValueShape;eD(o,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=QA(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,o){const s=Math.min(e,o),r=[];let i=0;for(let a=0;a<s;++a,i+=n)r.push(i);for(let a=s;a<e;++a)r.push(-1);return I(r.length===e,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(e,n,o,s){const r=e.length,i=[];for(let a=0;a<r-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)i.push(u),u+=o;for(let d=0;d<l-c;++d)i.push(-1)}if(r>0&&i.length!==e[r-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,o,s){const r=e.length,i=[];if(r===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error("Got currentValueRowId=".concat(l,", which is not less than ").concat(n.length));let c=n[l];i.push(c);for(let u=1;u<r;++u){const d=e[u];if(d===l)c>=0&&(++a,a<s?c+=o:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error("Got nextValueRowId=".concat(d," which is not less than ").concat(n.length));c=n[d]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,o,s){const r=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Fo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,n,o,s);case Fo.ROW_SPLITS:if(r.length-1>n.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(n.length));return this.calculateOutputIndexRowSplit(r,n,o,s);default:throw new Error("Unsupported partition type: ".concat(Fo[i]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Fo.FIRST_DIM_SIZE:return e[0];case Fo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Fo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Fo[n]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*o[l+1];const r=$S(o,!1),i=$t(this.valuesDType,Q(r));if(s[0]*o[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],o[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],o[c]);this.setOutput(this.raggedRank,l,i,r)}return[r,i]}setOutput(e,n,o,s){if(o.length===0)return;const r=this.values,i=o;let a=s.slice();a=a.slice(e+1);const l=Q(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;G(()=>{const m=L(u,p);u=Jc(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=c;++p){let m=p<c?n[p]:-1;if(m===f){++f;continue}if(h<f){const b=r.subarray(d*l),g=i.subarray(h*l),x=(f-h)*l;wS(g,b,x)}if(p>=c){const b=o.length;m=Math.floor(b/l)}if(m>f)if(this.defaultValue.length===1)i.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const b=i.slice(f*l);wS(b,u,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function wS(t,e,n){for(let o=0;o<n;o++)t[o]=e[o]}function $S(t,e){const n=[];for(let o of t){if(o<0){if(!e)throw new Error("Dimension ".concat(o," must be >= 0"));if(o<-1)throw new Error("Dimension ".concat(o," must be >= -1"));o=-1}n.push(o)}return n}function fF(t,e,n,o,s,r,i,a,l,c){return new Sp(t,e,n,o,s,r,i,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pF(t,e,n,o){const s=t===e,r=t<e&&n<0,i=e<t&&n>1;if(s||r||i)return xn(0,o);const a=Math.abs(Math.ceil((e-t)/n)),l=xn(a,o);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mF=sr(t=>1/Math.sqrt(t)),fZ=Ci(Td,mF),pZ={kernelName:Td,backendName:"cpu",kernelFunc:fZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ui(t,e,n,o,s,r,i,a,l,c){const u=[o/s,s],d=t.values,h=e.values;if(o===0)return Ne(n,e.dtype);const f=l instanceof rn?l:Ne(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<r;p++){const m=[];let b=0;for(let g=0;g<i;g++){const x=d[p*i+g];m.push(x),b+=x*a[g]}if(b<0||b>=o/s)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(let g=0;g<s;g++)c?f.values[b*s+g]+=h[p*s+g]:f.values[b*s+g]=e.rank===0?h[0]:h[p*s+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZ=sr(t=>1/(1+Math.exp(-t))),gF=He(_d,t=>1/(1+Math.exp(-t))),gZ={kernelName:_d,backendName:"cpu",kernelFunc:gF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bF(t,e,n,o,s){const r=kw(o,e,n),i=Q(n),a=ve(o);if(r){const d=Cw(e,a);return s==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=s==="string"?Ir(t):t,c=Ne(o,s,l),u=Ne(n,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,m)=>p+e[m]);u.set(c.get(...f),...h)}return s==="string"?yD(u.values):u.values}function ba(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{begin:r,size:i}=o;pe(s,"slice");const[a,l]=Rg(s,r,i);ww(s,a,l);const c=n.data.get(s.dataId).values,u=bF(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const bZ={kernelName:gg,backendName:"cpu",kernelFunc:ba};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xF(t,e,n,o,s,r,i){const a=e[0],l=r[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(aD(a));const b=$t(n,0),g=$t(s,0);return[b,[0,d],g,c,u]}let h=!0,f=0;const p=new Array(l).fill(0);for(let b=0;b<a;++b){const g=t[b*d];if(g<0)throw new Error(lD(b,g));if(g>=l)throw new Error(cD(b,g,l));++p[g],h=h&&g>=f,f=g}let m=!0;for(let b=0;b<l;++b){const g=p[b]===0;c[b]=g,m=m&&!g,p[b]=Math.max(p[b],1),b>0&&(p[b]+=p[b-1])}if(m&&h){const b=t,g=o;for(let x=0;x<a;++x)u[x]=x;return[b,[a,d],g,c,u]}else{const b=p[l-1],g=$t(n,b*d),x=$t(s,b),v=new Array(l).fill(0);for(let y=0;y<a;++y){const w=t[y*d],$=v[w],k=(w===0?0:p[w-1])+$;v[w]++;for(let C=0;C<d;++C)g[k*d+C]=t[y*d+C];x[k]=o[y],u[y]=k}for(let y=0;y<l;++y)if(v[y]===0){const $=y===0?0:p[y-1];g[$*d+0]=y;for(let k=1;k<d;++k)g[$*d+k]=0;x[$]=i}return[g,[b,d],x,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vF(t,e,n,o,s){const r=Q(o),i=e[0],a=s.length,l=[];let c=1,u=-1;for(let b=0;b<a;++b){const g=s[b];if(g===-1){if(u!==-1)throw new Error(uD(u,b));u=b,l.push(1)}else{if(g<0)throw new Error(dD(b,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(hD());const b=Math.trunc(r/c);if(c*b!==r)throw new Error(fD(o,l));l[u]=b}if(Q(l)!==r)throw new Error(pD(o,l));const h=o.length,f=[];if(h>0){f[h-1]=1;for(let b=h-2;b>=0;--b)f[b]=f[b+1]*o[b+1]}const p=[];if(a>0){p[a-1]=1;for(let b=a-2;b>=0;--b)p[b]=p[b+1]*l[b+1]}const m=$t(n,i*a);for(let b=0;b<i;++b){let g=0;for(let x=0;x<h;++x)g+=t[b*h+x]*f[x];for(let x=0;x<a;++x)m[b*a+x]=Math.trunc(g/p[x]),g%=p[x]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(t,e,n,o,s,r=!1,i=0){const a=o.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(Bx());const h=e.slice();h[0]=d;const f=h.reduce((v,y)=>v*y,1),p=$t(n,f);if(a===0)return d>0&&p.fill(i),[p,h];if(d<=0)throw new Error(Bx());let m=0,b=1,g=0,x=s[m];for(;;){let v=0;if(b<a){if(v=s[b],x===v){++b;continue}if(x>=v)throw new Error(mD())}if(x<0||x>=d)throw new Error(gD(x,d));x>g&&p.fill(i,g*c,x*c);for(let y=m;y<b;++y){const w=o[y];if(w<0||w>=l[0])throw new Error(bD(y,o[y],l[0]));for(let $=0;$<c;$++)p[x*c+$]+=t[w*c+$]}if(r)for(let y=0;y<c;y++)p[x*c+y]/=b-m;if(m=b,++b,g=x+1,x=v,b>a)break}return g<d&&p.fill(i,g*c,d*c),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xZ=sr(t=>Math.sqrt(t)),vZ=He(Fd,t=>Math.sqrt(t)),yZ={kernelName:Fd,backendName:"cpu",kernelFunc:vZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yF=Nt((t,e)=>{const n=t-e;return n*n}),wZ=Ht(Pd,yF),$Z={kernelName:Pd,backendName:"cpu",kernelFunc:wZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wF=sr((t,e)=>{const{pattern:n,replaceGlobal:o,rewrite:s}=e;return t.replace(new RegExp(n,o?"g":""),s)}),kZ=Ci(S1,wF),CZ={kernelName:S1,backendName:"cpu",kernelFunc:kZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $F(t,e,n,o){const s=Ne(t,e.dtype);for(let r=0;r<s.size;r++){const i=s.indexToLoc(r),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+o[l];s.set(e.get(...a),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IZ{constructor(e,n,o,s,r,i){this.separator=Jr(e),this.nGramWidths=n,this.leftPad=Jr(o),this.rightPad=Jr(s),this.padWidth=r,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const o=this.getPadWidth(n);return Math.max(0,e+2*o-n+1)}createNGrams(e,n,o,s,r,i){for(let a=0;a<r;++a){const l=this.getPadWidth(i),c=Math.max(0,l-a),u=Math.max(0,l-(r-(a+1))),d=i-(c+u),h=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let x=0;x<d;++x)f+=e[h+x].length;f+=u*this.rightPad.length;const p=c+u+d-1;f+=p*this.separator.length,o[s+a]=new Uint8Array(f);const m=o[s+a];let b=0;const g=x=>x.forEach(v=>m[b++]=v);for(let x=0;x<c;++x)g(this.leftPad),g(this.separator);for(let x=0;x<d-1;++x)g(e[h+x]),g(this.separator);if(d>0){g(e[h+d-1]);for(let x=0;x<u;++x)g(this.separator),g(this.rightPad)}else{for(let x=0;x<u-1;++x)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const o=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error("First split value must be 0, got ".concat(l));for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=o,!u)throw new Error("Invalid split value ".concat(n[c],", must be in [").concat(l,", ").concat(o,"]"));l=n[c]}if(l!==o)throw new Error("Last split value must be data size. Expected ".concat(o,", got ").concat(l))}const r=s-1,i=$t("int32",s);if(o===0||s===0){const l=new Array(o);for(let c=0;c<=r;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=r;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),i[l]=i[l-1]+u}const a=new Array(i[r]);for(let l=0;l<r;++l){const c=n[l];let u=i[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,c,a,u,f,d),u+=f}),this.preserveShort&&u===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth,f=1;this.createNGrams(e,c,a,u,f,h)}}return[a,i]}}function kF(t,e,n,o,s,r,i,a){return new IZ(n,o,s,r,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(t,e,n,o){if(!t.length)return;if(e.length===0){for(let r=0;r<t.length;++r)o.push(t.subarray(r,r+1));return}if(e.length===1){const r=e[0];let i=t.indexOf(r);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&o.push(a),t=t.subarray(i+1),i=t.indexOf(r)}(!n||t.length!==0)&&o.push(t);return}let s=0;for(let r=0;r<t.length+1;r++)if(r===t.length||e.indexOf(t[r])!==-1){const i=t.subarray(s,r);(!n||i.length!==0)&&o.push(i),s=r+1}}function CF(t,e,n){const o=t.length,s=[];let r=0,i=0;const a=new Array(o);for(let h=0;h<o;++h){const f=s.length;SZ(t[h],e,n,s);const p=s.length-f;a[h]=p,r+=p,i=Math.max(i,p)}const l=$t("int32",r*2),c=new Array(r),u=[o,i];let d=0;for(let h=0;h<o;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IF(t,e){const n=$t("int32",t.length);for(let o=0;o<t.length;++o)n[o]=H6(t[o]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SF=Nt((t,e)=>t-e),EZ=f$((t,e,n,o)=>({real:t-n,imag:e-o})),x$=Ht(Ld,SF,EZ),TZ={kernelName:Ld,backendName:"cpu",kernelFunc:x$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EF(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const o=Ne(n,t.dtype);for(let s=0;s<o.values.length;++s){const r=o.indexToLoc(s),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=r[l]%t.shape[l];const a=t.locToIndex(i);o.values[s]=t.values[a]}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lc=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function TF(t,e,n=0,o=t.length-1){for(;o>n;){if(o-n>600){const a=o-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*u/a+d)),f=Math.min(o,Math.floor(e+(a-l)*u/a+d));TF(t,e,h,f)}const s=t[e];let r=n,i=o;for(Ka(t,n,e),Lc(t[o],s)>0&&Ka(t,n,o);r<i;){for(Ka(t,r,i),r++,i--;Lc(t[r],s)<0;)r=r+1;for(;Lc(t[i],s)>0;)i=i-1}Lc(t[n],s)===0?Ka(t,n,i):(i=i+1,Ka(t,i,o)),i<=e&&(n=i+1),e<=i&&(o=i-1)}}function NF(t,e,n,o,s){const r=e[e.length-1],[i,a]=[t.length/r,r],l=bn(n,i*o),c=bn("int32",i*o);for(let d=0;d<i;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((x,v)=>p[v]={value:x,index:v}),o<p.length&&(TF(p,o),p=p.slice(0,o)),s&&p.sort(Lc);const m=d*o,b=l.subarray(m,m+o),g=c.subarray(m,m+o);for(let x=0;x<o;x++)b[x]=p[x].value,g[x]=p[x].index}const u=e.slice();return u[u.length-1]=o,[Ne(u,n,l),Ne(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RF(t,e,n,o){const s=Re(e,n)[0],r=[1,n[0],1];for(let p=0;p<s;p++)r[0]*=n[p];r[1]=n[s];for(let p=s+1;p<n.length;p++)r[2]*=n[p];const i=new Map,a=new Int32Array(n[s]),l=new rn(r,o,t),c=[],u=r[0]===1&&r[2]===1;for(let p=0;p<n[s];p++){let m;if(u)m=t[p].toString();else{const g=[];for(let x=0;x<r[0];x++)for(let v=0;v<r[2];v++)g.push(l.get(x,p,v));m=g.join(",")}const b=i.get(m);if(b!=null)a[p]=b;else{const g=i.size;i.set(m,g),a[p]=g,c.push(p)}}const d=r.slice();d[1]=i.size;const h=new rn(d,o);c.forEach((p,m)=>{for(let b=0;b<r[0];b++)for(let g=0;g<r[2];g++)h.set(l.get(b,p,g),b,m,g)});const f=n.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NZ=Object.freeze(Object.defineProperty({__proto__:null,addImpl:zO,bincountImpl:p$,bincountReduceImpl:BO,bitwiseAndImpl:VO,castImpl:MO,ceilImpl:WO,concatImpl:UO,equalImpl:HO,expImpl:jO,expm1Impl:KO,floorDivImpl:YO,floorImpl:XO,gatherNdImpl:QO,gatherV2Impl:ZO,greaterEqualImpl:eF,greaterImpl:JO,lessEqualImpl:nF,lessImpl:tF,linSpaceImpl:oF,logImpl:sF,maxImpl:rF,maximumImpl:iF,minimumImpl:aF,multiplyImpl:m$,negImpl:lF,notEqualImpl:cF,prodImpl:uF,raggedGatherImpl:dF,raggedRangeImpl:hF,raggedTensorToTensorImpl:fF,rangeImpl:pF,rsqrtImpl:mF,scatterImpl:Ui,sigmoidImpl:mZ,simpleAbsImpl:LO,sliceImpl:bF,sparseFillEmptyRowsImpl:xF,sparseReshapeImpl:vF,sparseSegmentReductionImpl:b$,sqrtImpl:xZ,squaredDifferenceImpl:yF,staticRegexReplaceImpl:wF,stridedSliceImpl:$F,stringNGramsImpl:kF,stringSplitImpl:CF,stringToHashBucketFastImpl:IF,subImpl:SF,tileImpl:EF,topKImpl:NF,transposeImpl:g$,uniqueImpl:RF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tA("cpu",()=>new Hg,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AF=He(id,t=>t>=0?t:Math.exp(t)-1),RZ={kernelName:id,backendName:"cpu",kernelFunc:AF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DF(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{alpha:r}=o;pe([s],"leakyRelu");const i=Q(s.shape),a=n.data.get(s.dataId).values,l=bn("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?r*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const AZ={kernelName:Hm,backendName:"cpu",kernelFunc:DF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ=Nt((t,e)=>t<0?e*t:t);function _F(t){const{inputs:e,backend:n}=t,{x:o,alpha:s}=e;pe([o,s],"prelu");const r=n.data.get(o.dataId).values,i=n.data.get(s.dataId).values,[a,l]=DZ(o.shape,s.shape,r,i,"float32");return n.makeTensorInfo(l,"float32",a)}const _Z={kernelName:cg,backendName:"cpu",kernelFunc:_F};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OF=He(Id,t=>Math.max(0,t)),OZ={kernelName:Id,backendName:"cpu",kernelFunc:OF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FF=He(Sd,t=>Math.min(Math.max(0,t),6)),FZ={kernelName:Sd,backendName:"cpu",kernelFunc:FF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ep(t,e,n,o,s){if(n==="linear")return tr({inputs:{x:e},backend:t});if(n==="relu")return OF({inputs:{x:e},backend:t});if(n==="elu")return AF({inputs:{x:e},backend:t});if(n==="relu6")return FF({inputs:{x:e},backend:t});if(n==="prelu")return _F({inputs:{x:e,alpha:o},backend:t});if(n==="leakyrelu")return DF({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return gF({inputs:{x:e},backend:t});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function et(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{shape:r}=o,i=Q(s.shape),a=tR(r,i),l=Q(a);I(i===l,()=>"The new shape (".concat(a,") has ").concat(l," elements and the old ")+"shape (".concat(s.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const PZ={kernelName:dg,backendName:"cpu",kernelFunc:et};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PF(t){const{inputs:e,backend:n,attrs:o}=t,{a:s,b:r}=e,{transposeA:i,transposeB:a}=o;pe([s,r],"matMul");const l=s.shape.length,c=r.shape.length,u=i?s.shape[l-2]:s.shape[l-1],d=a?r.shape[c-1]:r.shape[c-2],h=i?s.shape[l-1]:s.shape[l-2],f=a?r.shape[c-2]:r.shape[c-1],p=s.shape.slice(0,-2),m=r.shape.slice(0,-2),b=Q(p),g=Q(m),v=Ie(s.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,f]);I(u===d,()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(s.shape," and ")+"".concat(r.shape," and transposeA=").concat(i)+" and transposeB=".concat(a," must match."));const y=i?[b,u,h]:[b,h,u],w=a?[g,f,d]:[g,d,f],$=et({inputs:{x:s},backend:n,attrs:{shape:y}}),k=et({inputs:{x:r},backend:n,attrs:{shape:w}}),C=i?$.shape[1]:$.shape[2],E=i?$.shape[2]:$.shape[1],S=a?k.shape[1]:k.shape[2],T=Math.max(b,g),P=n.data.get($.dataId).values,U=n.data.get(k.dataId).values,W=ve($.shape),z=ve(k.shape),[B,q,R]=i?[W[0],1,W[1]]:[W[0],W[1],1],[A,D,V]=a?[1,z[1],z[0]]:[z[1],1,z[0]],H=E*S,K=Ne([T,E,S],$.dtype),ee=K.values,J=n.blockSize;for(let ne=0;ne<T;ne++){const re=ne%b,ge=ne%g;for(let xe=0;xe<E;xe+=J){const Ce=Math.min(xe+J,E);for(let Se=0;Se<S;Se+=J){const _e=Math.min(Se+J,S);for(let Ge=0;Ge<C;Ge+=J){const tt=Math.min(Ge+J,C);for(let Ue=xe;Ue<Ce;Ue++)for(let We=Se;We<_e;We++){let nt=0;for(let Qe=Ge;Qe<tt;Qe++){const ts=P[re*B+Ue*q+Qe*R],Lt=U[Qe*A+We*D+ge*V];nt+=ts*Lt}ee[ne*H+(Ue*S+We)]+=nt}}}}}return n.disposeIntermediateTensorInfo($),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(v,K.dtype,K.values)}const LZ={kernelName:Nm,backendName:"cpu",kernelFunc:PF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(t){const{inputs:e,backend:n,attrs:o}=t,{a:s,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=o;let h,f,p;const m=[];h=PF({inputs:{a:s,b:r},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(f=Bl({inputs:{a:h,b:i},backend:n}),m.push(h),h=f),u&&(p=Ep(n,h,u,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const zZ={kernelName:sp,backendName:"cpu",kernelFunc:MZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BZ=He(qu,t=>Math.acos(t)),VZ={kernelName:qu,backendName:"cpu",kernelFunc:BZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WZ=He(Ku,t=>Math.acosh(t)),UZ={kernelName:Ku,backendName:"cpu",kernelFunc:WZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(t){const{inputs:e,backend:n}=t,o=e;pe(e,"addN");const s=o.map(a=>n.data.get(a.dataId).values),r=Ne(o[0].shape,o[0].dtype),i=r.values;for(let a=0;a<o.length;a++){const l=s[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const GZ={kernelName:Gy,backendName:"cpu",kernelFunc:HZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;pe(s,"all");const a=Re(r,s.shape);let l=a;const c=bt(l,s.shape.length);let u=s;c!=null&&(u=Hn({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Et(l.length,s.shape.length)),un("all",l,u.shape.length);const[d,h]=en(u.shape,l),f=Q(h),p=xn(Q(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const x=g*f;let v=m[x];for(let y=0;y<f;++y){const w=m[x+y];v=v&&w}p[g]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const b=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Ft(d,a),x=et({inputs:{x:b},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(b),x}return b}const qZ={kernelName:jy,backendName:"cpu",kernelFunc:jZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;pe(s,"any");const a=Re(r,s.shape);let l=a;const c=bt(l,s.shape.length);let u=s;c!=null&&(u=Hn({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Et(l.length,s.shape.length)),un("any",l,u.shape.length);const[d,h]=en(u.shape,l),f=Q(h),p=xn(Q(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const x=g*f;let v=m[x];for(let y=0;y<f;++y){const w=m[x+y];v=v||w}p[g]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const b=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Ft(d,a),x=et({inputs:{x:b},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(b),x}return b}const XZ={kernelName:qy,backendName:"cpu",kernelFunc:KZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r}=o;pe(s,"argMax");let i=Re(r,s.shape);const a=bt(i,s.shape.length);let l=s;const c=[];a!=null&&(l=Hn({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Et(i.length,l.shape.length)),i=[i[0]],un("argMax",i,l.shape.length);const[u,d]=en(l.shape,i),h=Q(u),f=xn(h,"int32"),p=Q(d),m=n.data.get(l.dataId).values;for(let b=0;b<f.length;++b){const g=b*p;let x=m[g],v=0;for(let y=0;y<p;++y){const w=m[g+y];w>x&&(x=w,v=y)}f[b]=v}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(u,"int32",f)}const QZ={kernelName:Im,backendName:"cpu",kernelFunc:YZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r}=o;pe(s,"argMin");let i=Re(r,s.shape);const a=bt(i,s.shape.length);let l=s;const c=[];a!=null&&(l=Hn({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Et(i.length,l.shape.length)),i=[i[0]],un("argMin",i,l.shape.length);const[u,d]=en(l.shape,i),h=Q(u),f=xn(h,"int32"),p=Q(d),m=n.data.get(l.dataId).values;for(let b=0;b<f.length;++b){const g=b*p;let x=m[g],v=0;for(let y=0;y<p;++y){const w=m[g+y];w<x&&(x=w,v=y)}f[b]=v}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(u,"int32",f)}const JZ={kernelName:Sm,backendName:"cpu",kernelFunc:ZZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ=He(Xu,t=>Math.asin(t)),tJ={kernelName:Xu,backendName:"cpu",kernelFunc:eJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJ=He(Yu,t=>Math.asinh(t)),oJ={kernelName:Yu,backendName:"cpu",kernelFunc:nJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sJ=He(Qu,t=>Math.atan(t)),rJ={kernelName:Qu,backendName:"cpu",kernelFunc:sJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ=Nt((t,e)=>Math.atan2(t,e)),aJ=Ht(Ju,iJ),lJ={kernelName:Ju,backendName:"cpu",kernelFunc:aJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ=He(Zu,t=>Math.atanh(t)),uJ={kernelName:Zu,backendName:"cpu",kernelFunc:cJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$(t,e,n,o,s,r){const i=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ne(s.outShape,n),b=m.values,g=s.outShape[1]*s.outShape[2]*s.outShape[3],x=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let y=0;y<s.batchSize;++y){const w=y*g,$=y*o[0];for(let k=0;k<s.inChannels;++k)for(let C=0;C<s.outHeight;++C){const E=C*i-h,S=Math.max(0,E),T=Math.min(s.inHeight,u+E),P=w+C*x;for(let U=0;U<s.outWidth;++U){const W=U*a-f,z=Math.max(0,W),B=Math.min(s.inWidth,d+W);let q=p,R=0,A=0;for(let V=S;V<T;V+=l){const H=$+V*o[1];for(let K=z;K<B;K+=c){const ee=H+K*o[2],J=t[ee+k];r==="max"&&J>q?q=J:r==="avg"&&(R+=J,A++)}if(isNaN(q))break}const D=P+U*v+k;b[D]=r==="avg"?R/A:q}}}return m}function LF(t,e,n,o,s=!1,r=!1){const i=Ne(o.outShape,"int32"),a=o.strideHeight,l=o.strideWidth,c=o.dilationHeight,u=o.dilationWidth,d=o.effectiveFilterHeight,h=o.effectiveFilterWidth,f=o.padInfo.top,p=o.padInfo.left,m=Ne(e,n,t);for(let b=0;b<o.batchSize;++b)for(let g=0;g<o.inChannels;++g)for(let x=0;x<o.outHeight;++x){const v=x*a-f;let y=v;for(;y<0;)y+=c;const w=Math.min(o.inHeight,d+v);for(let $=0;$<o.outWidth;++$){const k=$*l-p;let C=k;for(;C<0;)C+=u;const E=Math.min(o.inWidth,h+k);let S=Number.NEGATIVE_INFINITY,T=-1;for(let P=y;P<w;P+=c){const U=P-v;for(let W=C;W<E;W+=u){const z=W-k,B=m.get(b,P,W,g);B>S&&(S=B,s?T=r?((b*o.inHeight+P)*o.inWidth+W)*o.inChannels+g:(P*o.inWidth+W)*o.inChannels+g:T=U*h+z)}}i.set(T,b,x,$,g)}}return i}function MF(t,e,n,o,s,r){const i=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,b=s.padInfo.top,g=s.padInfo.left,x=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Ne(s.outShape,n),y=v.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],$=s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[3]*s.outShape[4],C=s.outShape[4];for(let E=0;E<s.batchSize;++E){const S=E*w,T=E*o[0];for(let P=0;P<s.inChannels;++P)for(let U=0;U<s.outDepth;++U){const W=U*i-m;let z=W;for(;z<0;)z+=c;const B=Math.min(s.inDepth,h+W),q=S+U*$;for(let R=0;R<s.outHeight;++R){const A=R*a-b;let D=A;for(;D<0;)D+=u;const V=Math.min(s.inHeight,f+A),H=q+R*k;for(let K=0;K<s.outWidth;++K){const ee=K*l-g;let J=ee;for(;J<0;)J+=d;const ne=Math.min(s.inWidth,p+ee),re=H+K*C;let ge=x,xe=0,Ce=0;for(let _e=z;_e<B;_e+=c){const Ge=T+_e*o[1];for(let tt=D;tt<V;tt+=u){const Ue=Ge+tt*o[2];for(let We=J;We<ne;We+=d){const nt=Ue+We*o[3],Qe=t[nt+P];if(r==="max"&&Qe>ge?ge=Qe:r==="avg"&&(xe+=Qe,Ce++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}const Se=re+P;y[Se]=r==="avg"?xe/Math.max(Ce,1):ge}}}}return v}function dJ(t,e){const n=Ne(e.outShape,"int32"),o=e.strideDepth,s=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let b=0;b<e.inChannels;++b)for(let g=0;g<e.outDepth;++g){const x=g*o-h;let v=x;for(;v<0;)v+=i;const y=Math.min(e.inDepth,c+x);for(let w=0;w<e.outHeight;++w){const $=w*s-f;let k=$;for(;k<0;)k+=a;const C=Math.min(e.inHeight,u+$);for(let E=0;E<e.outWidth;++E){const S=E*r-p;let T=S;for(;T<0;)T+=l;const P=Math.min(e.inWidth,d+S);let U=Number.NEGATIVE_INFINITY,W=-1;for(let z=v;z<y;z+=i){const B=z-x;for(let q=k;q<C;q+=a){const R=q-$;for(let A=T;A<P;A+=l){const D=A-S,V=t.get(m,z,q,A,b);V>=U&&(U=V,W=B*u*d+R*u+D)}}}n.set(W,m,g,w,E,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e;pe(s,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=o,c=1;I(vn(i,c),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(c,"'"));const u=Zo(s.shape,r,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Ve(u.inShape,u.outShape))d=tr({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=ve(s.shape),p=v$(h,s.shape,s.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}const fJ={kernelName:Em,backendName:"cpu",kernelFunc:hJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=o;pe(s,"avgPool3d");const u=Nr(s.shape,r,i,1,a,l,c),d=n.data.get(s.dataId).values,h=MF(d,s.shape,s.dtype,ve(s.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const mJ={kernelName:Tm,backendName:"cpu",kernelFunc:pJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJ(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=o;pe([s,r],"avgPool3DGrad");const u=Nr(r.shape,i,a,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,b=u.filterWidth,g=u.dilationDepth,x=u.dilationHeight,v=u.dilationWidth,y=u.effectiveFilterDepth,w=u.effectiveFilterHeight,$=u.effectiveFilterWidth,k=y-1-u.padInfo.front,C=$-1-u.padInfo.left,E=w-1-u.padInfo.top,S=Ne(r.shape,"float32"),T=1/(p*m*b),P=n.bufferSync(s);for(let U=0;U<u.batchSize;++U)for(let W=0;W<u.inChannels;++W)for(let z=0;z<u.inDepth;++z)for(let B=0;B<u.inHeight;++B)for(let q=0;q<u.inWidth;++q){const R=z-k,A=B-E,D=q-C;let V=0;for(let H=0;H<y;H+=g){const K=(R+H)/d;if(!(K<0||K>=u.outDepth||Math.floor(K)!==K))for(let ee=0;ee<w;ee+=x){const J=(A+ee)/h;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let ne=0;ne<$;ne+=v){const re=(D+ne)/f;if(re<0||re>=u.outWidth||Math.floor(re)!==re)continue;const ge=P.get(U,K,J,re,W);V+=ge}}}S.set(V*T,U,z,B,q,W)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const bJ={kernelName:Xy,backendName:"cpu",kernelFunc:gJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xJ(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,i=r;pe([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=o,u=Zo(i.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,b=u.dilationWidth,g=u.effectiveFilterHeight,x=u.effectiveFilterWidth,v=x-1-u.padInfo.left,y=g-1-u.padInfo.top,w=Ne(i.shape,"float32"),$=1/(f*p),k=n.data.get(s.dataId).values,C=Ne(s.shape,"float32",k);for(let E=0;E<u.batchSize;++E)for(let S=0;S<u.inChannels;++S)for(let T=0;T<u.inHeight;++T)for(let P=0;P<u.inWidth;++P){const U=T-y,W=P-v;let z=0;for(let B=0;B<g;B+=m){const q=(U+B)/d;if(!(q<0||q>=u.outHeight||Math.floor(q)!==q))for(let R=0;R<x;R+=b){const A=(W+R)/h;if(A<0||A>=u.outWidth||Math.floor(A)!==A)continue;const D=C.get(E,q,A,S);z+=D}}w.set(z*$,E,T,P,S)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const vJ={kernelName:Ky,backendName:"cpu",kernelFunc:xJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,scale:r,offset:i,mean:a,variance:l}=e;I(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),pe([s,a,l,r,i],"batchNorm");let{varianceEpsilon:c}=o;c==null&&(c=.001);const u=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),b=p.length,g=f.length,x=h.length,v=d.length;let y=0,w=0,$=0,k=0;for(let C=0;C<u.length;++C)m[C]=p[y++]+(u[C]-d[w++])*f[$++]/Math.sqrt(h[k++]+c),y>=b&&(y=0),w>=v&&(w=0),$>=g&&($=0),k>=x&&(k=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const wJ={kernelName:Vm,backendName:"cpu",kernelFunc:yJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockShape:r,crops:i}=o;pe([s],"batchToSpaceND");const a=r.reduce((g,x)=>g*x),l=Xd(s.shape,r,a),c=Yd(l.length,r.length),u=Qd(s.shape,r,a),d=Nw(i,r.length),h=Rw(u,i,r.length),f=et({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Hn({inputs:{x:f},backend:n,attrs:{perm:c}}),m=et({inputs:{x:p},backend:n,attrs:{shape:u}}),b=ba({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),b}const kJ={kernelName:Rm,backendName:"cpu",kernelFunc:$J};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,weights:r}=e,{size:i}=o,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=p$(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}const IJ={kernelName:Yy,backendName:"cpu",kernelFunc:CJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(t){const{inputs:e,backend:n}=t,{s0:o,s1:s}=e,r=n.data.get(o.dataId).values,i=n.data.get(s.dataId).values,a=Ie(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const EJ={kernelName:aR,backendName:"cpu",kernelFunc:SJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJ=He(nd,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),NJ={kernelName:nd,backendName:"cpu",kernelFunc:TJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJ=t=>{const{x:e}=t.inputs,n=t.backend,o=new Float32Array(Q(e.shape)),s=n.data.get(e.dataId),r=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];o[c]=Math.hypot(u,d)}return n.makeOutput(o,e.shape,"float32")},AJ={kernelName:Am,backendName:"cpu",kernelFunc:RJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vl(t){const{inputs:e,backend:n}=t,{input:o}=e,s=n.data.get(o.dataId).complexTensorInfos.imag,r=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,r)}const DJ={kernelName:p1,backendName:"cpu",kernelFunc:Vl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wl(t){const{inputs:e,backend:n,attrs:o}=t,{axis:s}=o,r=Re(s,e[0].shape)[0],i=e.map(m=>m.shape);Sw(i,r);let a=Xs(e.map(m=>m.shape),r);if(Q(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>Q(m.shape)>0);if(l.length===1)return tr({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(y=>ga({inputs:{input:y},backend:n})),b=l.map(y=>Vl({inputs:{input:y},backend:n})),g=Wl({inputs:m,backend:n,attrs:{axis:r}}),x=Wl({inputs:b,backend:n,attrs:{axis:r}}),v=Jn({inputs:{real:g,imag:x},backend:n});return m.forEach(y=>n.disposeIntermediateTensorInfo(y)),b.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),v}const c=l.map(m=>{const g=[-1,Q(m.shape.slice(r))];return et({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Xs(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,h=UO(u,a,e[0].dtype,d),f=Xs(l.map(m=>m.shape),r),p=n.makeTensorInfo(f,e[0].dtype,h);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const _J={kernelName:Dm,backendName:"cpu",kernelFunc:Wl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zF(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=o;pe([s,r],"conv2d");const d=Rr(l),h=cn(s.shape,r.shape,i,c,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,b=h.dilationWidth,g=h.padInfo.left,x=h.padInfo.top,v=h.dataFormat==="channelsLast",y=new rn(h.outShape,s.dtype),w=ve(s.shape),$=ve(r.shape),k=w[0],C=v?w[1]:w[2],E=v?w[2]:1,S=v?1:w[1],T=y.strides[0],P=v?y.strides[1]:y.strides[2],U=v?y.strides[2]:1,W=v?1:y.strides[1],z=n.data.get(s.dataId).values,B=n.data.get(r.dataId).values,q=y.values;for(let R=0;R<h.batchSize;++R){const A=R*k,D=R*T;for(let V=0;V<h.outHeight;++V){const H=D+V*P,K=V*h.strideHeight-x;for(let ee=0;ee<f;++ee){const J=K+ee*m;if(J<0||J>=h.inHeight)continue;const ne=ee*$[0],re=A+J*C;for(let ge=0;ge<h.outWidth;++ge){const xe=H+ge*U,Ce=ge*h.strideWidth-g;for(let Se=0;Se<p;++Se){const _e=Ce+Se*b;if(_e<0||_e>=h.inWidth)continue;const Ge=ne+Se*$[1],tt=re+_e*E;let Ue=Ge;for(let We=0;We<h.inChannels;++We){const nt=z[tt+We*S];for(let Qe=0;Qe<h.outChannels;++Qe)q[xe+Qe*W]+=nt*B[Ue+Qe];Ue+=h.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,q)}const OJ={kernelName:_m,backendName:"cpu",kernelFunc:zF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=o;pe([s,r],"conv2dBackpropFilter");const d=Rr(l),h=cn(s.shape,u,i,1,a,c,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:b}=h,g=h.dataFormat==="channelsLast",x=new rn(h.filterShape,"float32"),v=h.padInfo.left,y=h.padInfo.top,w=n.data.get(s.dataId).values,$=n.data.get(r.dataId).values,k=new rn(s.shape,s.dtype,w),C=new rn(r.shape,r.dtype,$);for(let E=0;E<m;++E){const S=Math.max(0,Math.ceil((y-E)/f)),T=Math.min(h.outHeight,(h.inHeight+y-E)/f);for(let P=0;P<b;++P){const U=Math.max(0,Math.ceil((v-P)/p)),W=Math.min(h.outWidth,(h.inWidth+v-P)/p);for(let z=0;z<h.inChannels;++z)for(let B=0;B<h.outChannels;++B){let q=0;for(let R=0;R<h.batchSize;++R)for(let A=S;A<T;++A){const D=E+A*f-y;for(let V=U;V<W;++V){const H=P+V*p-v;g?q+=k.get(R,D,H,z)*C.get(R,A,V,B):q+=k.get(R,z,D,H)*C.get(R,B,A,V)}}x.set(q,E,P,z,B)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const PJ={kernelName:Jy,backendName:"cpu",kernelFunc:FJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=o;pe([s,r],"conv2dBackpropInput");const d=ve(r.shape),h=ve(s.shape);let f=Rr(c);const p=cn(i,r.shape,a,1,l,u,!1,f),m=new rn(p.inShape,"float32"),b=m.values,g=n.data.get(s.dataId).values,x=n.data.get(r.dataId).values,[v,y,w]=d,{batchSize:$,filterHeight:k,filterWidth:C,inChannels:E,inHeight:S,inWidth:T,outChannels:P,outHeight:U,outWidth:W,strideHeight:z,strideWidth:B}=p;f=p.dataFormat;const q=k-1-p.padInfo.top,R=C-1-p.padInfo.left,A=f==="channelsLast",D=m.strides[0],V=A?m.strides[1]:m.strides[2],H=A?m.strides[2]:1,K=A?1:m.strides[1],ee=h[0],J=A?h[1]:h[2],ne=A?h[2]:1,re=A?1:h[1];for(let ge=0;ge<$;++ge)for(let xe=0;xe<E;++xe)for(let Ce=0;Ce<S;++Ce){const Se=Ce-q,_e=Math.max(0,Math.ceil(Se/z)),Ge=Math.min(U,(k+Se)/z);for(let tt=0;tt<T;++tt){const Ue=tt-R,We=Math.max(0,Math.ceil(Ue/B)),nt=Math.min(W,(C+Ue)/B);let Qe=0;for(let Lt=_e;Lt<Ge;++Lt){const As=Lt*z-Se;for(let Fn=We;Fn<nt;++Fn){const rr=Fn*B-Ue,fo=ee*ge+J*Lt+ne*Fn,ns=v*(k-1-As)+y*(C-1-rr)+w*xe;for(let Ds=0;Ds<P;++Ds){const _s=g[fo+re*Ds],Xn=x[ns+Ds];Qe+=_s*Xn}}}const ts=D*ge+V*Ce+H*tt+K*xe;b[ts]=Qe}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const MJ={kernelName:Om,backendName:"cpu",kernelFunc:LJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dilations:l}=o;pe([s,r],"conv3d");const c=vi(s.shape,r.shape,i,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:b}=c,g=b.front,x=b.left,v=b.top,y=new rn(c.outShape,s.dtype),w=n.data.get(s.dataId).values,$=n.data.get(r.dataId).values,k=y.values,C=ve(s.shape),E=ve(r.shape);for(let S=0;S<c.batchSize;++S){const T=S*C[0],P=S*y.strides[0];for(let U=0;U<c.outDepth;++U){const W=P+U*y.strides[1],z=U*c.strideDepth-g;for(let B=0;B<u;++B){const q=z+B*f;if(q<0||q>=c.inDepth)continue;const R=B*E[0],A=T+q*C[1];for(let D=0;D<c.outHeight;++D){const V=W+D*y.strides[2],H=D*c.strideHeight-v;for(let K=0;K<d;++K){const ee=H+K*p;if(ee<0||ee>=c.inHeight)continue;const J=R+K*E[1],ne=A+ee*C[2];for(let re=0;re<c.outWidth;++re){const ge=V+re*c.outChannels,xe=re*c.strideWidth-x;for(let Ce=0;Ce<h;++Ce){const Se=xe+Ce*m;if(Se<0||Se>=c.inWidth)continue;const _e=J+Ce*E[2],Ge=ne+Se*c.inChannels;let tt=_e;for(let Ue=0;Ue<c.inChannels;++Ue){const We=w[Ge+Ue];for(let nt=0;nt<c.outChannels;++nt)k[ge+nt]+=We*$[tt+nt];tt+=c.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const BJ={kernelName:Fm,backendName:"cpu",kernelFunc:zJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,pad:a,filterShape:l}=o;pe([s,r],"conv3dBackpropFilterV2");const c=ve(s.shape),u=ve(r.shape),d=vi(s.shape,l,i,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,b=d.filterHeight,g=d.filterWidth,x=new rn(d.filterShape,"float32"),v=x.values,[y,w,$,k]=x.strides,C=n.data.get(r.dataId).values,[E,S,T,P]=u,U=n.data.get(s.dataId).values,[W,z,B,q]=c,R=d.padInfo.front,A=d.padInfo.left,D=d.padInfo.top;for(let V=0;V<m;++V){const H=Math.max(0,Math.ceil((R-V)/h)),K=Math.min(d.outDepth,(d.inDepth+R-V)/h),ee=V*y;for(let J=0;J<b;++J){const ne=Math.max(0,Math.ceil((D-J)/f)),re=Math.min(d.outHeight,(d.inHeight+D-J)/f),ge=J*w+ee;for(let xe=0;xe<g;++xe){const Ce=Math.max(0,Math.ceil((A-xe)/p)),Se=Math.min(d.outWidth,(d.inWidth+A-xe)/p),_e=xe*$+ge;for(let Ge=0;Ge<d.inChannels;++Ge){const tt=Ge*k+_e;for(let Ue=0;Ue<d.outChannels;++Ue){let We=0;for(let nt=0;nt<d.batchSize;++nt){const Qe=nt*W,ts=nt*E;for(let Lt=H;Lt<K;++Lt){const Fn=(V+Lt*h-R)*z+Qe,rr=Lt*S+ts;for(let fo=ne;fo<re;++fo){const Ds=(J+fo*f-D)*B+Fn,_s=fo*T+rr;for(let Xn=Ce;Xn<Se;++Xn){const ir=(xe+Xn*p-A)*q+Ds,Pn=Xn*P+_s;We+=U[ir+Ge]*C[Pn+Ue]}}}}v[tt+Ue]=We}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const WJ={kernelName:e1,backendName:"cpu",kernelFunc:VJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{pad:i,strides:a,inputShape:l}=o;pe([s],"conv3dBackpropInputV2");const c=ve(s.shape),u=ve(r.shape),d=vi(l,r.shape,a,1,i),h=new rn(d.inShape,"float32"),f=h.values,[p,m,b,g]=h.strides,x=n.data.get(s.dataId).values,[v,y,w,$]=c,k=n.data.get(r.dataId).values,[C,E,S,T]=u,{batchSize:P,filterDepth:U,filterHeight:W,filterWidth:z,inChannels:B,inDepth:q,inHeight:R,inWidth:A,outChannels:D,outDepth:V,outHeight:H,outWidth:K,strideDepth:ee,strideHeight:J,strideWidth:ne}=d,re=U-1-d.padInfo.front,ge=W-1-d.padInfo.top,xe=z-1-d.padInfo.left;for(let Ce=0;Ce<P;++Ce)for(let Se=0;Se<B;++Se)for(let _e=0;_e<q;++_e){const Ge=_e-re,tt=Math.max(0,Math.ceil(Ge/ee)),Ue=Math.min(V,(U+Ge)/ee);for(let We=0;We<R;++We){const nt=We-ge,Qe=Math.max(0,Math.ceil(nt/J)),ts=Math.min(H,(W+nt)/J);for(let Lt=0;Lt<A;++Lt){const As=Lt-xe,Fn=Math.max(0,Math.ceil(As/ne)),rr=Math.min(K,(z+As)/ne);let fo=0;for(let ns=tt;ns<Ue;++ns){const Ds=ns*ee-Ge;for(let _s=Qe;_s<ts;++_s){const Xn=_s*J-nt;for(let Ao=Fn;Ao<rr;++Ao){const ir=Ao*ne-As,Pn=v*Ce+y*ns+w*_s+$*Ao,Os=C*(U-1-Ds)+E*(W-1-Xn)+S*(z-1-ir)+T*Se;for(let os=0;os<D;++os){const Jg=x[Pn+os],eb=k[Os+os];fo+=Jg*eb}}}}f[p*Ce+m*_e+b*We+g*Lt+Se]=fo}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const HJ={kernelName:t1,backendName:"cpu",kernelFunc:UJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJ=He(od,t=>Math.cos(t)),jJ={kernelName:od,backendName:"cpu",kernelFunc:GJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJ=He(sd,t=>Math.cosh(t)),KJ={kernelName:sd,backendName:"cpu",kernelFunc:qJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJ(t){const{inputs:e,backend:n,attrs:o}=t,{image:s,boxes:r,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=o,[u,d,h,f]=s.shape,p=r.shape[0],[m,b]=a,g=Ne([p,m,b,f],"float32"),x=n.data.get(r.dataId).values,v=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,w=ve(s.shape),$=ve(g.shape);for(let k=0;k<p;k++){const C=k*4,E=x[C],S=x[C+1],T=x[C+2],P=x[C+3],U=v[k];if(U>=u)continue;const W=m>1?(T-E)*(d-1)/(m-1):0,z=b>1?(P-S)*(h-1)/(b-1):0;for(let B=0;B<m;B++){const q=m>1?E*(d-1)+B*W:.5*(E+T)*(d-1);if(q<0||q>d-1){for(let R=0;R<b;R++)for(let A=0;A<f;A++){const D=A+R*$[2]+B*$[1]+k*$[0];g.values[D]=c}continue}if(l==="bilinear"){const R=Math.floor(q),A=Math.ceil(q),D=q-R;for(let V=0;V<b;V++){const H=b>1?S*(h-1)+V*z:.5*(S+P)*(h-1);if(H<0||H>h-1){for(let ne=0;ne<f;ne++){const re=ne+V*$[2]+B*$[1]+k*$[0];g.values[re]=c}continue}const K=Math.floor(H),ee=Math.ceil(H),J=H-K;for(let ne=0;ne<f;ne++){let re=ne+K*w[2]+R*w[1]+U*w[0];const ge=y[re];re=ne+ee*w[2]+R*w[1]+U*w[0];const xe=y[re];re=ne+K*w[2]+A*w[1]+U*w[0];const Ce=y[re];re=ne+ee*w[2]+A*w[1]+U*w[0];const Se=y[re],_e=ge+(xe-ge)*J,Ge=Ce+(Se-Ce)*J;re=ne+V*$[2]+B*$[1]+k*$[0],g.values[re]=_e+(Ge-_e)*D}}}else for(let R=0;R<b;++R){const A=b>1?S*(h-1)+R*z:.5*(S+P)*(h-1);if(A<0||A>h-1){for(let H=0;H<f;H++){const K=H+R*$[2]+B*$[1]+k*$[0];g.values[K]=c}continue}const D=Math.round(A),V=Math.round(q);for(let H=0;H<f;H++){const K=H+D*w[2]+V*w[1]+U*w[0],ee=H+R*$[2]+B*$[1]+k*$[0];g.values[ee]=y[K]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const YJ={kernelName:o1,backendName:"cpu",kernelFunc:XJ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,exclusive:i,reverse:a}=o;pe(s,"cumprod");const l=bt([r],s.shape.length);let c=s;l!=null&&(c=Hn({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Et(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=lo(c.dtype,"int32"),h=Wy(Q(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,x)=>g+p-x-1:(g,x)=>g+x;for(let g=0;g<f.length;g+=p)for(let x=0;x<p;x++){const v=m(g,x);if(x===0)h[v]=i?1:f[v];else{const y=m(g,x-1);h[v]=i?f[y]*h[y]:f[v]*h[y]}}const b=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=yi(l),x=Hn({inputs:{x:b},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),x}return b}const ZJ={kernelName:n1,backendName:"cpu",kernelFunc:QJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJ(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,exclusive:i,reverse:a}=o;pe(s,"cumsum");const l=bt([r],s.shape.length);let c=s;l!=null&&(c=Hn({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Et(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=lo(c.dtype,"int32"),h=xn(Q(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,x)=>g+p-x-1:(g,x)=>g+x;for(let g=0;g<f.length;g+=p)for(let x=0;x<p;x++){const v=m(g,x);if(x===0)h[v]=i?0:f[v];else{const y=m(g,x-1);h[v]=i?f[y]+h[y]:f[v]+h[y]}}const b=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=yi(l),x=Hn({inputs:{x:b},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),x}return b}const eee={kernelName:Pm,backendName:"cpu",kernelFunc:JJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,weights:r}=e,{size:i,binaryOutput:a}=o;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=p$(l,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(r),u=BO(l,c,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(s.shape.length,"."))}const nee={kernelName:s1,backendName:"cpu",kernelFunc:tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockSize:r,dataFormat:i}=o;I(i==="NHWC",()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i));const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*r,h=c*r,f=u/(r*r),p=n.data.get(s.dataId).values,m=new Float32Array(a*d*h*f);let b=0;for(let g=0;g<a;++g)for(let x=0;x<d;++x){const v=Math.floor(x/r),y=x%r;for(let w=0;w<h;++w){const $=Math.floor(w/r),k=w%r,C=(y*r+k)*f;for(let E=0;E<f;++E){const T=E+C+u*($+c*(v+l*g));m[b++]=p[T]}}}return n.makeTensorInfo([a,d,h,f],s.dtype,m)}const see={kernelName:r1,backendName:"cpu",kernelFunc:oee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BF(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=o;pe([s,r],"depthwiseConv2DNative");const u=ve(s.shape),d=ve(r.shape);let h=l;h==null&&(h=[1,1]),I(vn(i,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(h,"'"));const f=cn(s.shape,r.shape,i,h,a,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:b,dilationWidth:g,padInfo:x}=f,v=x.left,y=x.top,w=f.outChannels/f.inChannels,$=new rn(f.outShape,s.dtype),k=n.data.get(s.dataId).values,C=n.data.get(r.dataId).values,E=$.values;for(let S=0;S<f.batchSize;++S){const T=S*u[0],P=S*$.strides[0];for(let U=0;U<f.outHeight;++U){const W=P+U*$.strides[1],z=U*f.strideHeight-y;for(let B=0;B<p;++B){const q=z+B*b;if(q<0||q>=f.inHeight)continue;const R=B*d[0],A=T+q*u[1];for(let D=0;D<f.outWidth;++D){const V=W+D*$.strides[2],H=D*f.strideWidth-v;for(let K=0;K<m;++K){const ee=H+K*g;if(ee<0||ee>=f.inWidth)continue;const J=R+K*d[1],ne=A+ee*f.inChannels;let re=V,ge=J;for(let xe=0;xe<f.inChannels;++xe){const Ce=k[ne+xe];for(let Se=0;Se<w;++Se)E[re+Se]+=Ce*C[ge+Se];re+=w,ge+=w}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}const ree={kernelName:Lm,backendName:"cpu",kernelFunc:BF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=o;pe([s,r],"depthwiseConv2dNativeBackpropFilter");const d=cn(s.shape,u,i,a,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,b=new rn(d.filterShape,"float32"),g=d.padInfo.left,x=d.padInfo.top,v=d.outChannels/d.inChannels,y=n.data.get(s.dataId).values,w=new rn(s.shape,s.dtype,y),$=n.data.get(r.dataId).values,k=new rn(r.shape,r.dtype,$);for(let C=0;C<p;++C){const E=Math.max(0,Math.ceil((x-C)/h)),S=Math.min(d.outHeight,(d.inHeight+x-C)/h);for(let T=0;T<m;++T){const P=Math.max(0,Math.ceil((g-T)/f)),U=Math.min(d.outWidth,(d.inWidth+g-T)/f);for(let W=0;W<d.outChannels;++W){const z=Math.trunc(W/v),B=W%v;let q=0;for(let R=0;R<d.batchSize;++R)for(let A=E;A<S;++A){const D=C+A*h-x;for(let V=P;V<U;++V){const H=T+V*f-g;q+=w.get(R,D,H,z)*k.get(R,A,V,W)}}b.set(q,C,T,z,B)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const aee={kernelName:i1,backendName:"cpu",kernelFunc:iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=o;pe([s,r],"depthwiseConv2DNativeBackpropInput");const d=ve(s.shape),h=ve(r.shape),f=cn(u,r.shape,i,a,l,c,!0),p=new rn(f.inShape,"float32"),m=p.values,[b,g,x]=p.strides,v=n.data.get(s.dataId).values,[y,w,$]=d,k=n.data.get(r.dataId).values,[C,E,S]=h,{batchSize:T,filterHeight:P,filterWidth:U,inChannels:W,inHeight:z,inWidth:B,outChannels:q,outHeight:R,outWidth:A,strideHeight:D,strideWidth:V}=f,H=P-1-f.padInfo.top,K=U-1-f.padInfo.left,ee=q/W;for(let J=0;J<T;++J)for(let ne=0;ne<W;++ne)for(let re=0;re<z;++re){const ge=re-H,xe=Math.max(0,Math.ceil(ge/D)),Ce=Math.min(R,(P+ge)/D);for(let Se=0;Se<B;++Se){const _e=Se-K,Ge=Math.max(0,Math.ceil(_e/V)),tt=Math.min(A,(U+_e)/V);let Ue=0;for(let We=xe;We<Ce;++We){const nt=We*D-ge;for(let Qe=Ge;Qe<tt;++Qe){const ts=Qe*V-_e,Lt=y*J+w*We+$*Qe,As=C*(P-1-nt)+E*(U-1-ts)+S*ne;for(let Fn=0;Fn<ee;++Fn){const rr=ne*ee+Fn,fo=v[Lt+rr],ns=k[As+Fn];Ue+=fo*ns}}}m[b*J+g*re+x*Se+ne]=Ue}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const cee={kernelName:a1,backendName:"cpu",kernelFunc:lee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(t){const{inputs:e,backend:n}=t,{x:o}=e,s=Q(o.shape),r=n.data.get(o.dataId).values,i=Ne([s,s],o.dtype),a=i.values;for(let c=0;c<r.length;c++)a[c*s+c]=r[c];const l=[...o.shape,...o.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const dee={kernelName:lR,backendName:"cpu",kernelFunc:uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hee={kernelName:Mm,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:o,filter:s}=t,{strides:r,pad:i,dilations:a}=n,l=e,c=l.data.get(o.dataId).values,u=o.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:b,outHeight:g,outWidth:x,padInfo:v,strideHeight:y,strideWidth:w,filterHeight:$,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:S}=Hd(o.shape,s.shape,r,i,"NHWC",a),T=Q(S),P=S.length,U=$t(o.dtype,T);for(let z=0;z<f;++z)for(let B=0;B<g;++B){const q=B*y-v.top;for(let R=0;R<x;++R){const A=R*w-v.left;for(let D=0;D<b;++D){let V=Number.MIN_SAFE_INTEGER;for(let K=0;K<$;++K){const ee=q+K*C;if(ee>=0&&ee<p)for(let J=0;J<k;++J){const ne=A+J*E;if(ne>=0&&ne<m){const re=qs([z,ee,ne,D],u,ve(o.shape)),ge=qs([K,J,D],h,ve(s.shape)),xe=c[re]+d[ge];xe>V&&(V=xe)}}}const H=qs([z,B,R,D],P,ve(S));U[H]=V}}}return{dataId:l.write(Ca(U,o.dtype),S,o.dtype),shape:S,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fee={kernelName:wx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:o,filter:s,dy:r}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=$s(o.shape,c.data.get(o.dataId).values),d=$s(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:b,outWidth:g,padInfo:x,strideHeight:v,strideWidth:y,filterHeight:w,filterWidth:$,dilationHeight:k,dilationWidth:C,outShape:E}=Hd(o.shape,s.shape,i,a,"NHWC",l);I(r.rank===E.length,()=>"Error in ".concat(wx,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(r.rank));const S=$s(E,c.data.get(r.dataId).values),T=sR(s.shape,s.dtype);for(let U=0;U<h;++U)for(let W=0;W<b;++W){const z=W*v-x.top;for(let B=0;B<g;++B){const q=B*y-x.left;for(let R=0;R<m;++R){let A=Number.MIN_SAFE_INTEGER,D=0,V=0;for(let H=0;H<w;++H){const K=z+H*k;if(K>=0&&K<f)for(let ee=0;ee<$;++ee){const J=q+ee*C;if(J>=0&&J<p){const ne=u[U][K][J][R]+d[H][ee][R];ne>A&&(A=ne,D=H,V=ee)}}}T[D][V][R]+=S[U][W][B][R]}}}return{dataId:c.write(Ca(T,o.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pee={kernelName:yx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:o,filter:s,dy:r}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=$s(o.shape,c.data.get(o.dataId).values),d=$s(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:b,outWidth:g,padInfo:x,strideHeight:v,strideWidth:y,filterHeight:w,filterWidth:$,dilationHeight:k,dilationWidth:C,outShape:E}=Hd(o.shape,s.shape,i,a,"NHWC",l);I(r.rank===E.length,()=>"Error in ".concat(yx,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(r.rank));const S=$s(E,c.data.get(r.dataId).values),T=sR(o.shape,o.dtype);for(let U=0;U<h;++U)for(let W=0;W<b;++W){const z=W*v-x.top;for(let B=0;B<g;++B){const q=B*y-x.left;for(let R=0;R<m;++R){let A=Number.MIN_SAFE_INTEGER,D=z<0?0:z,V=q<0?0:q;for(let H=0;H<w;++H){const K=z+H*k;if(K>=0&&K<f)for(let ee=0;ee<$;++ee){const J=q+ee*C;if(J>=0&&J<p){const ne=u[U][K][J][R]+d[H][ee][R];ne>A&&(A=ne,D=K,V=J)}}}T[U][D][V][R]+=S[U][W][B][R]}}}return{dataId:c.write(Ca(T,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t){const{inputs:e,backend:n,attrs:o}=t,{image:s}=e,{canvas:r,options:i}=o,{contextOptions:a,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error("Context type ".concat(a.contextType," is not supported by the CPU backend."));const d=r.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error("Could not get the context with ".concat(u," type."));const[h,f]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,b=s.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let v=0;v<h*f;++v){const y=[0,0,0,255*c];for(let $=0;$<p;$++){const k=m[v*p+$];if(s.dtype==="float32"){if(k<0||k>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(k,"."))}else if(s.dtype==="int32"&&(k<0||k>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(k,"."));p===1?(y[0]=k*b,y[1]=k*b,y[2]=k*b):y[$]=k*b}const w=v*4;g[w+0]=Math.round(y[0]),g[w+1]=Math.round(y[1]),g[w+2]=Math.round(y[2]),g[w+3]=Math.round(y[3])}r.width=f,r.height=h;const x=new ImageData(g,f,h);return d.putImageData(x,0,0),s}const gee={kernelName:O6,backendName:"cpu",kernelFunc:mee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ih(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;pe(s,"sum");let a;s.dtype==="bool"?a=hi({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=tr({inputs:{x:s},backend:n});const l=a.shape.length,c=Re(r,a.shape),u=bt(c,l);let d=c,h=a;u!=null&&(h=Hn({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Et(d.length,l)),un("sum",d,h.shape.length);const[f,p]=en(h.shape,d),m=lo(h.dtype,"int32");let b=Ip(n,f,m);const g=Q(p),x=n.data.get(b.dataId).values,v=n.data.get(h.dataId).values;for(let y=0;y<x.length;++y){const w=y*g;let $=0;for(let k=0;k<g;++k)$+=v[w+k];x[y]=$}if(i){const y=Ft(b.shape,c),w=b;b=et({inputs:{x:b},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),b}const bee={kernelName:bg,backendName:"cpu",kernelFunc:ih};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t){const{inputs:e,backend:n,attrs:o}=t,{equation:s}=o,r=e,{allDims:i,summedDims:a,idDims:l}=Mw(s,r.length);Bw(i.length,l,r);const{path:c,steps:u}=Vw(a,l),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const b of u[m]){const{permutationIndices:g,expandDims:x}=zw(f,l[b]);let v;Ww(g)?v=r[b]:(v=Hn({inputs:{x:r[b]},backend:n,attrs:{perm:g}}),p.push(v));const y=v.shape.slice();for(let w=0;w<x.length;++w)y.splice(x[w],0,1);Ve(v.shape,y)||(v=et({inputs:{x:v},backend:n,attrs:{shape:y}}),p.push(v)),h===null?h=v:(h=Gg({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=ih({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const vee={kernelName:l1,backendName:"cpu",kernelFunc:xee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t){const{inputs:e,backend:n}=t,{dy:o,y:s}=e;pe([o,s],"eluGrad");const r=new Float32Array(Q(s.shape)),i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?r[l]=a[l]:r[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",r)}const wee={kernelName:c1,backendName:"cpu",kernelFunc:yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ee=Aw,kee=Dw,Cee=_w,Iee=Ow,See=Fw,Eee=Pw,Tee=He(ad,t=>{const e=Math.sign(t),n=Math.abs(t),o=1/(1+$ee*n);return e*(1-((((Eee*o+See)*o+Iee)*o+Cee)*o+kee)*o*Math.exp(-n*n))}),Nee={kernelName:ad,backendName:"cpu",kernelFunc:Tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tp(t){const{inputs:e,backend:n,attrs:o}=t,{input:s}=e,{dim:r}=o,i=s.shape.length,a=s.shape.slice();let l=r;return r<0&&(I(-(i+1)<=r,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),l=i+r+1),a.splice(l,0,1),et({inputs:{x:s},backend:n,attrs:{shape:a}})}const Ree={kernelName:Bm,backendName:"cpu",kernelFunc:Tp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aee=Nt((t,e)=>t/e),y$=Ht(rd,Aee),Yx={kernelName:rd,backendName:"cpu",kernelFunc:y$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VF(t,e,n){const o=t.shape,s=o[0],r=o[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,r],u=Q(c),d=bn("float32",u),h=bn("float32",u);for(let b=0;b<s;b++){const g=ba({inputs:{x:a},backend:n,attrs:{begin:[b,0],size:[1,r]}}),x=ba({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,r]}}),v=Jn({inputs:{real:g,imag:x},backend:n}),{real:y,imag:w}=Dee(v,e,n),$=Cr(y,w);for(let k=0;k<r;k++){const C=Lw($,k);d[b*r+k]=C.real,h[b*r+k]=C.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}const f=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",h),m=Jn({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function Dee(t,e,n){const o=Q(t.shape),s=n.data.get(t.dataId),r=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(_ee(o)){const a=Qx(r,i,o,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",bi(o,"float32")),h=tr({inputs:{x:d},backend:n}),f=Yx.kernelFunc({inputs:{a:c,b:d},backend:n}),p=Yx.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(f.dataId).values,b=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:b}}return a}else{const a=Cr(r,i),l=Oee(a,o,e);return tD(l)}}function _ee(t){return(t&t-1)===0}function Qx(t,e,n,o,s){if(n===1)return{real:t,imag:e};const r=Cr(t,e),i=n/2,a=nD(r),l=a.real,c=a.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),f=Jn({inputs:{real:d,imag:h},backend:s}),p=oD(r),m=p.real,b=p.imag,g=[m.length],x=s.makeTensorInfo(g,"float32",m),v=s.makeTensorInfo(g,"float32",b),y=Jn({inputs:{real:x,imag:v},backend:s}),w=Qx(l,c,i,o,s),$=w.real,k=w.imag,C=[$.length],E=s.makeTensorInfo(C,"float32",$),S=s.makeTensorInfo(C,"float32",k),T=Jn({inputs:{real:E,imag:S},backend:s}),P=Qx(m,b,i,o,s),U=P.real,W=P.imag,z=[U.length],B=s.makeTensorInfo(z,"float32",U),q=s.makeTensorInfo(z,"float32",W),R=Jn({inputs:{real:B,imag:q},backend:s}),A=rD(n,o),D=[A.real.length],V=s.makeTensorInfo(D,"float32",A.real),H=s.makeTensorInfo(D,"float32",A.imag),K=Jn({inputs:{real:V,imag:H},backend:s}),ee=Gg({inputs:{a:K,b:R},backend:s}),J=Bl({inputs:{a:T,b:ee},backend:s}),ne=x$({inputs:{a:T,b:ee},backend:s}),re=ga({inputs:{input:J},backend:s}),ge=ga({inputs:{input:ne},backend:s}),xe=Vl({inputs:{input:J},backend:s}),Ce=Vl({inputs:{input:ne},backend:s}),Se=Wl({inputs:[re,ge],backend:s,attrs:{axis:0}}),_e=Wl({inputs:[xe,Ce],backend:s,attrs:{axis:0}}),Ge=s.data.get(Se.dataId).values,tt=s.data.get(_e.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(ee),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(re),s.disposeIntermediateTensorInfo(xe),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(Se),s.disposeIntermediateTensorInfo(_e),{real:Ge,imag:tt}}function Oee(t,e,n){const o=new Float32Array(e*2);for(let s=0;s<e;s++){let r=0,i=0;for(let a=0;a<e;a++){const l=iD(s*a,e,n),c=Lw(t,a);r+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(r/=e,i/=e),sD(o,r,i,s)}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t){const{inputs:e,backend:n}=t,{input:o}=e,s=Q(o.shape),r=o.shape[o.shape.length-1],i=s/r,a=et({inputs:{x:o},backend:n,attrs:{shape:[i,r]}}),l=VF(a,!1,n),c=et({inputs:{x:l},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Pee={kernelName:u1,backendName:"cpu",kernelFunc:Fee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(t){const{backend:e,attrs:n}=t,{shape:o,value:s,dtype:r}=n,i=r||Zl(s),a=$t(i,Q(o));return Mee(a,s,i),e.makeTensorInfo(o,i,a)}const Lee={kernelName:d1,backendName:"cpu",kernelFunc:w$};function Mee(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zee={kernelName:h1,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:o}=t,s=n,r=bn(o.dtype,Q(o.shape)),[i,a,l,c]=o.shape,u=s.data.get(o.dataId).values;for(let h=0;h<i;h++){const f=h*l*a*c;for(let p=0;p<a;p++){const m=p*(l*c);for(let b=0;b<l;b++){const g=b*c;for(let x=0;x<c;x++){const v=Math.round(l-b-1),y=f+m+g+x;let w=u[y];if(v>=0&&v<l){const $=v*c,k=f+m+$+x;w=u[k]}r[y]=w}}}}return{dataId:s.write(r,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=o;let m=zF({inputs:{x:s,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const b=m;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const g=et({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Bl({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Bl({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(b)}if(f){const b=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=et({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=Ep(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=Ep(n,m,f,a,p);n.disposeIntermediateTensorInfo(b)}return m}const Vee={kernelName:rp,backendName:"cpu",kernelFunc:Bee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=o;let m=BF({inputs:{x:s,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const b=m;m=Bl({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(b)}if(f){const b=m;m=Ep(n,m,f,a,p),n.disposeIntermediateTensorInfo(b)}return m}const Uee={kernelName:ER,backendName:"cpu",kernelFunc:Wee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t){const{inputs:e,backend:n}=t,{params:o,indices:s}=e,r=Q(o.shape),i=s.shape,a=i[i.length-1],[l,c,u,d]=yw(o,s);if(c===0)return n.makeTensorInfo(l,o.dtype,[]);const h=n.data.get(s.dataId).values,f=n.bufferSync(o),p=QO(h,f,o.dtype,c,a,u,d,o.shape,r);return n.makeTensorInfo(l,o.dtype,p.values)}const Gee={kernelName:cR,backendName:"cpu",kernelFunc:Hee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,indices:r}=e,{axis:i,batchDims:a}=o;pe([s,r],"gatherV2");const l=Re(i,s.shape)[0],c=n.data.get(r.dataId).values,u=s.shape[l];for(let y=0;y<c.length;++y){const w=c[y];I(w<=u-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(u-1,"]"))}let d=a;a==null&&(d=0);const h=Q(r.shape),f=Hw(s,r,l,d),p=et({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=et({inputs:{x:r},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),b=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),x=n.bufferSync(p),v=ZO(x,g,b);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const qee={kernelName:Wm,backendName:"cpu",kernelFunc:jee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(t){const{inputs:e,backend:n}=t,{input:o}=e,s=Q(o.shape),r=o.shape[o.shape.length-1],i=s/r,a=et({inputs:{x:o},backend:n,attrs:{shape:[i,r]}}),l=VF(a,!0,n),c=et({inputs:{x:l},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Xee={kernelName:f1,backendName:"cpu",kernelFunc:Kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yee=He(pd,t=>Number.isFinite(t)?1:0,"bool"),Qee={kernelName:pd,backendName:"cpu",kernelFunc:Yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zee=He(md,t=>Math.abs(t)===1/0?1:0,"bool"),Jee={kernelName:md,backendName:"cpu",kernelFunc:Zee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ete=He(gd,t=>Number.isNaN(t)?1:0,"bool"),tte={kernelName:gd,backendName:"cpu",kernelFunc:ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(t){const{backend:e,attrs:n}=t,{start:o,stop:s,num:r}=n,i=oF(o,s,r);return e.makeTensorInfo([i.length],"float32",i)}const ote={kernelName:uR,backendName:"cpu",kernelFunc:nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ste=He(xd,t=>Math.log1p(t)),rte={kernelName:xd,backendName:"cpu",kernelFunc:ste};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ite=Nt((t,e)=>t&&e),ate=Ht(qm,ite,null,"bool"),lte={kernelName:qm,backendName:"cpu",kernelFunc:ate};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cte=He(Km,t=>t?0:1,"bool"),ute={kernelName:Km,backendName:"cpu",kernelFunc:cte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dte=Nt((t,e)=>t||e),hte=Ht(Xm,dte,null,"bool"),fte={kernelName:Xm,backendName:"cpu",kernelFunc:hte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{depthRadius:r,bias:i,alpha:a,beta:l}=o;pe(s,"LRN");const c=s.shape[3],u=c-1,d=n.data.get(s.dataId).values,h=Q(s.shape),f=new Float32Array(h);function p(m){const b=m%c;let g=m-b+Math.max(0,b-r);const x=m-b+Math.min(b+r,u);let v=0;for(;g<=x;g++){const y=d[g];v+=y*y}return v}for(let m=0;m<h;m++){const b=p(m),g=d[m]*Math.pow(i+a*b,-l);f[m]=g}return n.makeTensorInfo(s.shape,s.dtype,f)}const mte={kernelName:Ym,backendName:"cpu",kernelFunc:pte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,y:r,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=o;pe(i,"LRNGrad");const d=Q(i.shape),h=i.shape[3],f=n.data.get(i.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(r.dataId).values,b=new Float32Array(d),g=d;for(let x=0;x<g;x++){const v=x%h,y=x-v+Math.max(0,v-a),w=x-v+Math.min(h,v+a+1);let $=0;for(let k=y;k<w;k++)$+=Math.pow(p[k],2);$=c*$+l;for(let k=y;k<w;k++){let C=-2*c*u*p[k]*m[x]/$;x===k&&(C+=Math.pow($,-u)),C*=f[x],b[k]+=C}}return n.makeTensorInfo(i.shape,s.dtype,b)}const bte={kernelName:m1,backendName:"cpu",kernelFunc:gte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WF(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{reductionIndices:r,keepDims:i}=o,a=n;let l=s.shape;const c=l.length,u=Re(r,l);let d=u;const h=bt(d,c);let f=a.data.get(s.dataId).values;if(h!=null){const y=new Array(c);for(let w=0;w<y.length;w++)y[w]=l[h[w]];f=g$(f,l,s.dtype,h,y),d=Et(d.length,c),l=y}pe(s,"max"),un("max",d,c);const[p,m]=en(l,d),b=Q(m),g=rF(f,b,p,s.dtype),x=a.write(g,p,s.dtype);let v=p;return i&&(v=Ft(p,u)),{dataId:x,shape:v,dtype:s.dtype}}const xte={kernelName:Qm,backendName:"cpu",kernelFunc:WF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e;pe(s,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=o,c=1;I(vn(i,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(c,"'"));const u=Zo(s.shape,r,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Ve(u.inShape,u.outShape))d=tr({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=ve(s.shape),p=v$(h,s.shape,s.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}const yte={kernelName:Zm,backendName:"cpu",kernelFunc:vte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=o;pe(s,"maxPool3d");const u=Nr(s.shape,r,i,1,a,l,c),d=n.data.get(s.dataId).values,h=MF(d,s.shape,s.dtype,ve(s.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const $te={kernelName:Jm,backendName:"cpu",kernelFunc:wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kte(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=o;pe([s,r],"maxPool3DGrad");const u=Nr(r.shape,i,a,1,l,c),d=n.bufferSync(r),h=dJ(d,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,b=u.dilationDepth,g=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterDepth,y=u.effectiveFilterHeight,w=u.effectiveFilterWidth,$=v-1-u.padInfo.front,k=w-1-u.padInfo.left,C=y-1-u.padInfo.top,E=Ne(r.shape,"float32"),S=n.bufferSync(s);for(let T=0;T<u.batchSize;++T)for(let P=0;P<u.inChannels;++P)for(let U=0;U<u.inDepth;++U)for(let W=0;W<u.inHeight;++W)for(let z=0;z<u.inWidth;++z){const B=U-$,q=W-C,R=z-k;let A=0;for(let D=0;D<v;D+=b){const V=(B+D)/f;if(!(V<0||V>=u.outDepth||Math.floor(V)!==V))for(let H=0;H<y;H+=g){const K=(q+H)/p;if(!(K<0||K>=u.outHeight||Math.floor(K)!==K))for(let ee=0;ee<w;ee+=x){const J=(R+ee)/m;if(J<0||J>=u.outWidth||Math.floor(J)!==J)continue;const ne=v*y*w-1-h.get(T,V,K,J,P),re=D*y*w+H*w+ee,ge=ne===re?1:0;if(ge===0)continue;const xe=S.get(T,V,K,J,P);A+=xe*ge}}}E.set(A,T,U,W,z,P)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Cte={kernelName:b1,backendName:"cpu",kernelFunc:kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r,output:i}=e,a=r;pe([r,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=o,h=Zo(a.shape,l,c,1,u,d),f=n.data.get(a.dataId).values,p=Ne(h.outShape,a.dtype,LF(f,a.shape,a.dtype,h).values),m=h.strideHeight,b=h.strideWidth,g=h.dilationHeight,x=h.dilationWidth,v=h.effectiveFilterHeight,y=h.effectiveFilterWidth,w=y-1-h.padInfo.left,$=v-1-h.padInfo.top,k=Ne(a.shape,"float32"),C=n.data.get(s.dataId).values,E=Ne(s.shape,"float32",C);for(let S=0;S<h.batchSize;++S)for(let T=0;T<h.inChannels;++T)for(let P=0;P<h.inHeight;++P)for(let U=0;U<h.inWidth;++U){const W=P-$,z=U-w;let B=0;for(let q=0;q<v;q+=g){const R=(W+q)/m;if(!(R<0||R>=h.outHeight||Math.floor(R)!==R))for(let A=0;A<y;A+=x){const D=(z+A)/b;if(D<0||D>=h.outWidth||Math.floor(D)!==D)continue;const V=v*y-1-p.get(S,R,D,T),H=q*y+A,K=V===H?1:0;if(K===0)continue;const ee=E.get(S,R,D,T);B+=ee*K}}k.set(B,S,P,U,T)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Ste={kernelName:g1,backendName:"cpu",kernelFunc:Ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,e,n,o,s){const r=ve(e),i=v$(t,e,n,r,s,"max"),a=LF(t,e,n,s,!0,o);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tte={kernelName:dR,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:o}=t,{filterSize:s,strides:r,pad:i,includeBatchInIndex:a}=e,l=n;pe(o,"MaxPoolWithArgmax");const c=l.data.get(o.dataId).values,u=Zo(o.shape,s,r,[1,1],i),[d,h]=Ete(c,o.shape,o.dtype,a,u),f=l.write(d,u.outShape,o.dtype),p=l.write(h,u.outShape,o.dtype);return[{dataId:f,shape:u.outShape,dtype:o.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o,a=Re(r,s.shape),c=en(s.shape,a)[1],u=Q(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=hi({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=y$({inputs:{a:f,b:h},backend:n});d.push(p);const m=ih({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),m}const Rte={kernelName:eg,backendName:"cpu",kernelFunc:Nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;pe(s,"min");const a=Re(r,s.shape);let l=a;const c=bt(l,s.shape.length);let u=s;c!=null&&(u=Hn({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Et(l.length,s.shape.length)),un("min",l,u.shape.length);const[d,h]=en(u.shape,l),f=Q(h),p=xn(Q(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const x=g*f;let v=m[x];for(let y=0;y<f;++y){const w=m[x+y];(Number.isNaN(w)||w<v)&&(v=w)}p[g]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const b=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Ft(d,a),x=et({inputs:{x:b},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(b),x}return b}const Dte={kernelName:tg,backendName:"cpu",kernelFunc:Ate};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{paddings:r,mode:i}=o;pe(s,"mirrorPad");const a=r.map((v,y)=>v[0]+s.shape[y]+v[1]),l=r.map(v=>v[0]),c=r.map((v,y)=>v[0]+s.shape[y]),u=i==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,f=ve(s.shape),p=Q(a),m=a.length,b=ve(a),g=bn(s.dtype,p);for(let v=0;v<p;v++){let y=Jl(v,m,b);for(let $=0;$<m;$++)y[$]<l[$]?y[$]=l[$]*2-y[$]-u:y[$]>=c[$]&&(y[$]=(c[$]-1)*2-y[$]+u);y=y.map(($,k)=>$-l[k]);const w=qs(y,h,f);g[v]=d[w]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const Ote={kernelName:ng,backendName:"cpu",kernelFunc:_te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fte=Nt((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Pte=Ht(wd,Fte),Lte={kernelName:wd,backendName:"cpu",kernelFunc:Pte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UF(t){const{inputs:e,backend:n,attrs:o}=t,{logits:s}=e,{dim:r}=o,i=s.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(a));const l=Re([a],s.shape),c=WF({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Ft(c.shape,l),d=et({inputs:{x:c},backend:n,attrs:{shape:u}}),h=x$({inputs:{a:s,b:d},backend:n}),f=qO({inputs:{x:h},backend:n}),p=ih({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=et({inputs:{x:p},backend:n,attrs:{shape:u}}),b=y$({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),b}const Mte={kernelName:yg,backendName:"cpu",kernelFunc:UF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(t){const{inputs:e,backend:n,attrs:o}=t,{logits:s}=e,{numSamples:r,seed:i,normalized:a}=o;pe(s,"multinomial");const l=a?s:UF({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,r],f=xn(Q(h),"int32");for(let p=0;p<c;++p){const m=p*u,b=new Float32Array(u-1);b[0]=d[m];for(let v=1;v<b.length;++v)b[v]=b[v-1]+d[m+v];const g=rw.alea(i.toString()),x=p*r;for(let v=0;v<r;++v){const y=g();f[x+v]=b.length;for(let w=0;w<b.length;w++)if(y<b[w]){f[x+v]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const Bte={kernelName:hR,backendName:"cpu",kernelFunc:zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vte=pw;function Wte(t){const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=o;pe(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(r.dataId).values,{selectedIndices:d}=Vte(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Ute={kernelName:x1,backendName:"cpu",kernelFunc:Wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hte=mw;function Gte(t){const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=o;pe(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:h,validOutputs:f}=Hte(u,d,i,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const jte={kernelName:v1,backendName:"cpu",kernelFunc:Gte};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qte=gw;function Kte(t){const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=o;pe(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,d=n.data.get(r.dataId).values,h=i,f=a,p=l,m=c,{selectedIndices:b,selectedScores:g}=qte(u,d,h,f,p,m);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Xte={kernelName:y1,backendName:"cpu",kernelFunc:Kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t){const{inputs:e,backend:n,attrs:o}=t,{indices:s}=e,{dtype:r,depth:i,onValue:a,offValue:l}=o;pe(s,"oneHot");const c=Q(s.shape),u=new Float32Array(c*i);u.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<i&&(u[h*i+d[h]]=a);return n.makeTensorInfo([...s.shape,i],r,u)}const Qte={kernelName:ig,backendName:"cpu",kernelFunc:Yte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Np(t){const{inputs:e,backend:n}=t,{x:o}=e;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){const s=ga({inputs:{input:o},backend:n}),r=Np({inputs:{x:s},backend:n}),i=Vl({inputs:{input:o},backend:n}),a=Np({inputs:{x:i},backend:n}),l=Jn({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return w$({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}const Zte={kernelName:kg,backendName:"cpu",kernelFunc:Np};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HF(t){const{inputs:e,backend:n}=t,{x:o}=e;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){const s=ga({inputs:{input:o},backend:n}),r=HF({inputs:{x:s},backend:n}),i=Vl({inputs:{input:o},backend:n}),a=Np({inputs:{x:i},backend:n}),l=Jn({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return w$({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}const Jte={kernelName:rg,backendName:"cpu",kernelFunc:HF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GF(t){const{inputs:e,backend:n,attrs:o}=t,{axis:s}=o;if(e.length===1)return Tp({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{By(r,u.shape,"All tensors passed to stack must have matching shapes"),I(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=Tp({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=Wl({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const ene={kernelName:ag,backendName:"cpu",kernelFunc:GF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{paddings:r,constantValue:i}=o;pe(s,"pad");const a=r.map((x,v)=>x[0]+s.shape[v]+x[1]),l=r.map(x=>x[0]),c=n.data.get(s.dataId).values,u=Q(s.shape),d=s.shape.length,h=ve(s.shape),f=Q(a),p=a.length,m=ve(a),b=bn(s.dtype,f);i!==0&&b.fill(i);for(let x=0;x<u;x++){const y=Jl(x,d,h).map(($,k)=>$+l[k]),w=qs(y,p,m);b[w]=c[x]}return{dataId:n.write(b,a,s.dtype),shape:a,dtype:s.dtype}}const jF={kernelName:lg,backendName:"cpu",kernelFunc:tne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nne=Nt((t,e)=>Math.pow(t,e)),one=Ht(kd,nne),sne={kernelName:kd,backendName:"cpu",kernelFunc:one};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rne(t){const{inputs:e,backend:n,attrs:o}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:i}=e,a=s.map(b=>n.data.get(b.dataId).values),l=s.map(b=>b.shape),c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,[d,h,f]=dF(a,l,c,r.shape,r.dtype,u,i.shape),p=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),m=n.makeTensorInfo(f,r.dtype,h);return p.concat([m])}const ine={kernelName:fR,backendName:"cpu",kernelFunc:rne};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(t){const{inputs:e,backend:n}=t,{starts:o,limits:s,deltas:r}=e,i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=hF(i,o.shape,o.dtype,a,s.shape,l,r.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],o.dtype,u);return[d,h]}const lne={kernelName:pR,backendName:"cpu",kernelFunc:ane};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cne(t){const{inputs:e,backend:n,attrs:o}=t,{shape:s,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=o,c=n.data.get(s.dataId).values,u=n.data.get(r.dataId).values,d=n.data.get(i.dataId).values,h=a.map(b=>n.data.get(b.dataId).values),f=a.map(b=>b.shape),[p,m]=fF(c,s.shape,u,r.shape,r.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,r.dtype,m)}const une={kernelName:mR,backendName:"cpu",kernelFunc:cne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(t){const{backend:e,attrs:n}=t,{start:o,stop:s,dtype:r,step:i}=n,a=pF(o,s,i,r);return e.makeTensorInfo([a.length],r,a)}const hne={kernelName:w1,backendName:"cpu",kernelFunc:dne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fne=He(Cd,t=>1/t),pne={kernelName:Cd,backendName:"cpu",kernelFunc:fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mne(t){const{inputs:e,backend:n,attrs:o}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:i,size:a}=o;pe(s,"resizeBilinear");const l=ve(s.shape),[c,u]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,b=new Float32Array(Q([d,c,u,p])),g=[r&&c>1?h-1:h,r&&u>1?f-1:f],x=[r&&c>1?c-1:c,r&&u>1?u-1:u];let v=0;const y=g[0]/x[0],w=g[1]/x[1];for(let $=0;$<d;$++)for(let k=0;k<c;k++){let C;i?C=y*(k+.5)-.5:C=y*k;const E=Math.max(0,Math.floor(C)),S=C-E,T=Math.min(h-1,Math.ceil(C)),P=$*l[0]+E*l[1],U=$*l[0]+T*l[1];for(let W=0;W<u;W++){let z;i?z=w*(W+.5)-.5:z=w*W;const B=Math.max(0,Math.floor(z)),q=z-B,R=Math.min(f-1,Math.ceil(z)),A=P+B*l[2],D=U+B*l[2],V=P+R*l[2],H=U+R*l[2];for(let K=0;K<p;K++){const ee=m[A+K],J=m[D+K],ne=m[V+K],re=m[H+K],ge=ee+(ne-ee)*q,xe=J+(re-J)*q,Ce=ge+(xe-ge)*S;b[v++]=Ce}}}return n.makeTensorInfo([d,c,u,p],"float32",b)}const gne={kernelName:fg,backendName:"cpu",kernelFunc:mne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bne(t){const{inputs:e,backend:n,attrs:o}=t,{images:s,dy:r}=e,{alignCorners:i}=o;pe([r,s],"resizeBilinearGrad");const a=ve(s.shape),[l,c,u,d]=s.shape,[,h,f]=r.shape,p=new Float32Array(l*c*u*d),m=[i&&h>1?c-1:c,i&&f>1?u-1:u],b=[i&&h>1?h-1:h,i&&f>1?f-1:f],g=m[0]/b[0],x=m[1]/b[1],v=n.data.get(r.dataId).values;let y=0;for(let w=0;w<l;w++){const $=w*a[0];for(let k=0;k<h;k++){const C=k*g,E=Math.floor(C),S=Math.min(Math.ceil(C),c-1),T=$+E*a[1],P=$+S*a[1],U=C-E,W=1-U;for(let z=0;z<f;z++){const B=z*x,q=Math.floor(B),R=Math.min(Math.ceil(B),u-1),A=B-q,D=1-A,V=T+q*a[2],H=T+R*a[2],K=P+q*a[2],ee=P+R*a[2],J=W*D,ne=W*A,re=U*D,ge=U*A;for(let xe=0;xe<d;xe++){const Ce=v[y++];p[V+xe]+=Ce*J,p[H+xe]+=Ce*ne,p[K+xe]+=Ce*re,p[ee+xe]+=Ce*ge}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const xne={kernelName:C1,backendName:"cpu",kernelFunc:bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(t){const{inputs:e,backend:n,attrs:o}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:i,size:a}=o;pe(s,"resizeNearestNeighbor");const l=ve(s.shape),[c,u]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,b=new Float32Array(d*c*u*p),g=[r&&c>1?h-1:h,r&&u>1?f-1:f],x=[r&&c>1?c-1:c,r&&u>1?u-1:u],v=g[0]/x[0],y=g[1]/x[1];let w=0;for(let $=0;$<d;$++){const k=$*l[0];for(let C=0;C<c;C++){const E=i?v*(C+.5):v*C;let S=Math.min(h-1,r?Math.round(E):Math.floor(E));i&&(S=Math.max(0,S));const T=k+S*l[1];for(let P=0;P<u;P++){const U=i?y*(P+.5):y*P;let W=Math.min(f-1,r?Math.round(U):Math.floor(U));i&&(W=Math.max(0,W));const z=T+W*l[2];for(let B=0;B<p;B++){const q=m[z+B];b[w++]=q}}}}return n.makeTensorInfo([d,c,u,p],s.dtype,b)}const yne={kernelName:hg,backendName:"cpu",kernelFunc:vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(t){const{inputs:e,backend:n,attrs:o}=t,{images:s,dy:r}=e,{alignCorners:i}=o;pe([r,s],"resizeNearestNeighborGrad");const a=ve(s.shape),l=ve(r.shape),[c,u,d,h]=s.shape,[,f,p]=r.shape,m=new Float32Array(c*u*d*h),b=n.data.get(r.dataId).values,g=[i&&f>1?u-1:u,i&&p>1?d-1:d],x=[i&&f>1?f-1:f,i&&p>1?p-1:p],v=g[0]/x[0],y=g[1]/x[1],w=1/v,$=1/y,k=Math.ceil(w)*2+2,C=Math.ceil($)*2+2;for(let E=0;E<c;E++){const S=E*a[0];for(let T=0;T<u;T++){const P=S+T*a[1],U=Math.floor(T*w),W=Math.floor(U-k/2);for(let z=0;z<d;z++){const B=P+z*a[2],q=Math.floor(z*$),R=Math.floor(q-C/2);for(let A=0;A<h;A++){let D=0;for(let V=0;V<k;V++){const H=V+W;if(H<0||H>=f)continue;const K=S+H*l[1],ee=H*v,J=Math.min(u-1,i?Math.round(ee):Math.floor(ee));if(T===J)for(let ne=0;ne<C;ne++){const re=ne+R;if(re<0||re>=p)continue;const ge=K+re*l[2],xe=re*y,Ce=Math.min(d-1,i?Math.round(xe):Math.floor(xe));z===Ce&&(D+=b[ge+A])}}m[B+A]=D}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const $ne={kernelName:k1,backendName:"cpu",kernelFunc:wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kne(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{dims:r}=o;pe(s,"reverse");const i=s.shape.length,a=Re(r,s.shape);if(i===0)return tr({inputs:{x:s},backend:n});const l=new rn(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=s.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Cne={kernelName:pg,backendName:"cpu",kernelFunc:kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ine={kernelName:A1,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:o}=t,{radians:s,fillValue:r,center:i}=e,a=n,l=bn(o.dtype,Q(o.shape)),[c,u,d,h]=o.shape,[f,p]=Tw(i,u,d),m=255,b=Math.sin(s),g=Math.cos(s),x=a.data.get(o.dataId).values;for(let y=0;y<c;y++){const w=y*d*u*h;for(let $=0;$<u;$++){const k=$*(d*h);for(let C=0;C<d;C++){const E=C*h;for(let S=0;S<h;S++){const T=[c,$,C,S],P=T[2],U=T[1];let W=(P-f)*g-(U-p)*b,z=(P-f)*b+(U-p)*g;W=Math.round(W+f),z=Math.round(z+p);let B=r;if(typeof r!="number"&&(S===3?B=m:B=r[S]),W>=0&&W<d&&z>=0&&z<u){const R=z*(d*h),A=W*h,D=w+R+A+S;B=x[D]}const q=w+k+E+S;l[q]=B}}}}return{dataId:a.write(l,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sne=He(Ed,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Ene={kernelName:Ed,backendName:"cpu",kernelFunc:Sne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(t){const{inputs:e,backend:n,attrs:o}=t,{indices:s,updates:r}=e,{shape:i}=o,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Na(r,s,i),h=!0,f=n.bufferSync(s),p=n.bufferSync(r),m=Ui(f,p,i,d,c,l,a,u,0,h);return n.makeTensorInfo(i,m.dtype,m.values)}const Nne={kernelName:gR,backendName:"cpu",kernelFunc:Tne};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e){let n=0,o=t.length,s=0;for(;n<o;)s=Math.floor((n+o)/2),t[s]<e?n=s+1:o=s;return o}function Ane(t,e){let n=0,o=t.length,s=0;for(;n<o;)s=Math.floor((n+o)/2),t[s]<=e?n=s+1:o=s;return o}function Dne(t,e,n,o,s,r){const i=$t("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*o,(a+1)*o),c=a*s;for(let u=0;u<s;++u)i[c+u]=r==="left"?Rne(l,e[u+c]):Ane(l,e[u+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(t){const{inputs:e,backend:n,attrs:o}=t,{sortedSequence:s,values:r}=e,{side:i}=o,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=Dne(a,l,s.shape[0],s.shape[1],r.shape[1],i);return n.makeTensorInfo(r.shape,"int32",c)}const One={kernelName:xR,backendName:"cpu",kernelFunc:_ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fne(t){const{inputs:e,backend:n}=t,{condition:o,t:s,e:r}=e;pe([o,s,r],"select");const i=o.shape.length,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=lo(s.dtype,r.dtype),d=xn(Q(s.shape),u);let h=0;const f=i===0||i>1||s.shape.length===1?1:Q(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=c[p];return n.makeTensorInfo(s.shape,u,d)}const Pne={kernelName:mg,backendName:"cpu",kernelFunc:Fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lne=Dg,Mne=_g,zne=He(Nd,t=>t>=0?Mne*t:Lne*(Math.exp(t)-1)),Bne={kernelName:Nd,backendName:"cpu",kernelFunc:zne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vne=He(Dd,t=>t<0?-1:t>0?1:0),Wne={kernelName:Dd,backendName:"cpu",kernelFunc:Vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Une=He(Rd,t=>Math.sin(t)),Hne={kernelName:Rd,backendName:"cpu",kernelFunc:Une};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gne=He(Ad,t=>Math.sinh(t)),jne={kernelName:Ad,backendName:"cpu",kernelFunc:Gne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qne=11920928955078125e-23,kS=Math.log(qne)+2,Kne=He(Od,t=>{const e=t>-kS,n=t<kS,o=Math.exp(t);let s;return n?s=o:e?s=t:s=Math.log(1+o),s}),Xne={kernelName:Od,backendName:"cpu",kernelFunc:Kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yne(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockShape:r,paddings:i}=o;pe([s],"spaceToBatchND");const a=Q(r),l=[[0,0]];l.push(...i);for(let $=1+r.length;$<s.shape.length;++$)l.push([0,0]);const c=jF.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=Xd(c.shape,r,a,!1),d=Yd(u.length,r.length,!1),h=Qd(c.shape,r,a,!1),m=et({inputs:{x:c},backend:n,attrs:{shape:u}}),x=Hn({inputs:{x:m},backend:n,attrs:{perm:d}}),w=et({inputs:{x},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}const Qne={kernelName:xg,backendName:"cpu",kernelFunc:Yne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zne(t){const{inputs:e,backend:n}=t,{indices:o,values:s,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n        ".concat(r.shape));if(o.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n        ".concat(o.shape));if(s.shape.length!==1)throw new Error("Values must be a vector, saw:\n        ".concat(s.shape));if(i.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values[0],[d,h,f,p,m]=xF(a,o.shape,o.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,o.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(b=>Number(b)))),n.makeTensorInfo([m.length],o.dtype,new Int32Array(m))]}const Jne={kernelName:vR,backendName:"cpu",kernelFunc:Zne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eoe(t){const{inputs:e,backend:n}=t,{inputIndices:o,inputShape:s,newShape:r}=e;if(o.shape.length!==2)throw new Error("Input indices should be a matrix but received shape\n        ".concat(o.shape));if(s.shape.length!==1)throw new Error("Input shape should be a vector but received shape\n        ".concat(s.shape));if(r.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(r.shape));const i=Array.from(n.data.get(s.dataId).values),a=n.data.get(o.dataId).values,l=Array.from(n.data.get(r.dataId).values),[c,u,d]=vF(a,o.shape,o.dtype,i,l);return[n.makeTensorInfo(u,o.dtype,c),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const toe={kernelName:yR,backendName:"cpu",kernelFunc:eoe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function noe(t){const{inputs:e,backend:n}=t,{data:o,indices:s,segmentIds:r}=e;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error("Indices should be a vector but received shape\n          ".concat(s.shape));if(r.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n          ".concat(r.shape));if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=b$(i,o.shape,o.dtype,a,l,!0);return n.makeTensorInfo(u,o.dtype,c)}const ooe={kernelName:wR,backendName:"cpu",kernelFunc:noe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function soe(t){const{inputs:e,backend:n}=t,{data:o,indices:s,segmentIds:r}=e;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error("Indices should be a vector but received shape\n         ".concat(s.shape));if(r.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n         ".concat(r.shape));if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=b$(i,o.shape,o.dtype,a,l);return n.makeTensorInfo(u,o.dtype,c)}const roe={kernelName:$R,backendName:"cpu",kernelFunc:soe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ioe(t){const{inputs:e,backend:n,attrs:o}=t,{sparseIndices:s,sparseValues:r,defaultValue:i}=e,{outputShape:a}=o,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Na(r,s,a),f=!1,p=n.bufferSync(s);let m;switch(r.dtype){case"bool":{const b=n.bufferSync(r),g=!!n.data.get(i.dataId).values[0];m=Ui(p,b,a,h,u,c,l,d,g,f);break}case"float32":{const b=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=Ui(p,b,a,h,u,c,l,d,g,f);break}case"int32":{const b=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=Ui(p,b,a,h,u,c,l,d,g,f);break}case"string":{const b=n.bufferSync(r),g=ii(n.data.get(i.dataId).values[0]);m=Ui(p,b,a,h,u,c,l,d,g,f);break}default:throw new Error("Unsupported type ".concat(r.dtype))}return n.makeTensorInfo(a,m.dtype,m.values)}const aoe={kernelName:kR,backendName:"cpu",kernelFunc:ioe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function loe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{numOrSizeSplits:r,axis:i}=o,a=Re(i,s.shape)[0],l=Uw(s,r,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const f=ba({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,f})}const coe={kernelName:vg,backendName:"cpu",kernelFunc:loe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uoe={kernelName:I1,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,o=e;pe(n,"square");const s=o.data.get(n.dataId).values,r=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];r[a]=l*l}return{dataId:o.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe=He(Vd,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),hoe={kernelName:Vd,backendName:"cpu",kernelFunc:doe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function foe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{begin:r,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=o;pe(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:b,isSimpleSlice:g,begin:x,end:v,strides:y}=Iw(s.shape,r,i,a,l,c,u,d,h);let w;if(m)w=et({inputs:{x:s},backend:n,attrs:{shape:p}});else if(b||g){I(s.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(s.shape.length));const $=$w(x,v,y),k=ba({inputs:{x:s},backend:n,attrs:{begin:x,size:$}});w=et({inputs:{x:k},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(k)}else{const $=n.bufferSync(s),k=$F(f,$,y,x);w=n.makeTensorInfo(p,k.dtype,k.values)}return w}const poe={kernelName:E1,backendName:"cpu",kernelFunc:foe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(t){const{inputs:e,backend:n,attrs:o}=t,{separator:s,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=o,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[p,m]=kF(h,f,s,r,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const goe={kernelName:CR,backendName:"cpu",kernelFunc:moe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function boe(t){const{inputs:e,backend:n,attrs:o}=t,{skipEmpty:s}=o,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(r.shape));if(i.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,d]=CF(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const xoe={kernelName:IR,backendName:"cpu",kernelFunc:boe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function voe(t){const{inputs:e,backend:n,attrs:o}=t,{numBuckets:s}=o,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=IF(i,s);return n.makeTensorInfo(r.shape,"int32",a)}const yoe={kernelName:SR,backendName:"cpu",kernelFunc:voe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const woe=He(Md,t=>Math.tan(t)),$oe={kernelName:Md,backendName:"cpu",kernelFunc:woe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const koe=He(zd,t=>Math.tanh(t)),Coe={kernelName:zd,backendName:"cpu",kernelFunc:koe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ioe(t){const{inputs:e,backend:n}=t,{tensor:o,indices:s,updates:r}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Na(r,s,o.shape),d=!1,h=n.bufferSync(s),f=n.bufferSync(r),p=n.bufferSync(o),m=Ui(h,f,o.shape,u,l,a,i,c,p,d);return n.makeTensorInfo(o.shape,m.dtype,m.values)}const Soe={kernelName:bR,backendName:"cpu",kernelFunc:Ioe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eoe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{reps:r}=o;pe(s,"tile");const i=EF(n.bufferSync(s),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Toe={kernelName:Bd,backendName:"cpu",kernelFunc:Eoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{k:r,sorted:i}=o;pe(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=NF(a,s.shape,s.dtype,r,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const Roe={kernelName:T1,backendName:"cpu",kernelFunc:Noe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aoe(t){const{inputs:e,attrs:n,backend:o}=t,{image:s,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,h,f]=s.shape,[p,m]=c!=null?c:[d,h],b=[u,p,m,f],g=ve(s.shape),x=g[0],v=g[1],y=g[2],w=ve(b),$=w[0],k=w[1],C=w[2],E=bn(s.dtype,Q(b));E.fill(l);const S=o.data.get(s.dataId).values,T=o.data.get(r.dataId).values;for(let U=0;U<u;++U){const W=r.shape[0]===1?T:T.subarray(U*8,U*8+8);for(let z=0;z<p;++z)for(let B=0;B<m;++B)for(let q=0;q<f;++q){let R;const A=W[6]*B+W[7]*z+1;if(A===0)continue;const D=(W[0]*B+W[1]*z+W[2])/A,V=(W[3]*B+W[4]*z+W[5])/A,H=CS(D,h,a),K=CS(V,d,a);switch(i){case"nearest":R=Loe(S,d,h,x,v,y,U,K,H,q,l);break;case"bilinear":R=Moe(S,d,h,x,v,y,U,K,H,q,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}const ee=U*$+z*k+B*C+q;E[ee]=R}return o.makeTensorInfo(b,s.dtype,E)}return{dataId:o.write(E,b,s.dtype),shape:s.shape,dtype:s.dtype}}const Doe={kernelName:N1,backendName:"cpu",kernelFunc:Aoe};function CS(t,e,n){switch(n){case"reflect":return _oe(t,e);case"wrap":return Ooe(t,e);case"nearest":return Poe(t,e);case"constant":default:return Foe(t)}}function _oe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const o=2*e;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-e?n+o:-n-1}else if(n>e-1)if(e<=1)n=0;else{const o=2*e;n-=o*Math.trunc(n/o),n>=e&&(n=o-n-1)}return ra(0,n,e-1)}function Ooe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const o=e-1;n+=e*(Math.trunc(-n/o)+1)}else if(n>e-1)if(e<=1)n=0;else{const o=e-1;n-=e*Math.trunc(n/o)}return ra(0,n,e-1)}function Foe(t,e){return t}function Poe(t,e){return ra(0,t,e-1)}function Mc(t,e,n,o,s,r,i,a,l,c,u){const d=i*o+a*s+l*r+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function Loe(t,e,n,o,s,r,i,a,l,c,u){const d=Math.round(a),h=Math.round(l);return Mc(t,e,n,o,s,r,i,d,h,c,u)}function Moe(t,e,n,o,s,r,i,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*Mc(t,e,n,o,s,r,i,d,h,c,u)+(l-h)*Mc(t,e,n,o,s,r,i,d,p,c,u),b=(p-l)*Mc(t,e,n,o,s,r,i,f,h,c,u)+(l-h)*Mc(t,e,n,o,s,r,i,f,p,c,u);return(f-a)*m+(a-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zoe(t){const{inputs:e,attrs:n,backend:o}=t,{axis:s}=n,{x:r}=e;pe(r,"unique");const i=o.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:c}=RF(i,s,r.shape,r.dtype);return[o.makeTensorInfo(l,r.dtype,a),o.makeTensorInfo([c.length],"int32",c)]}const Boe={kernelName:R1,backendName:"cpu",kernelFunc:zoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Voe(t){const{inputs:e,backend:n,attrs:o}=t,{value:s}=e;let{axis:r}=o;r<0&&(r+=s.shape.length);const i=s.shape.length,a=s.shape[r],l=new Array(i-1);let c=0;for(let f=0;f<i;f++)f!==r&&(l[c++]=s.shape[f]);const u=new Array(i).fill(0),d=s.shape.slice();d[r]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[r]=f;const p=ba({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});h[f]=et({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const Woe={kernelName:wg,backendName:"cpu",kernelFunc:Voe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uoe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,segmentIds:r}=e,{numSegments:i}=o;pe(s,"unsortedSegmentSum");const a=s.shape.length,l=r.shape.length,c=[],u=[],d=a-l;let h=r;for(let p=0;p<d;++p){const m=Tp({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,u.push(m)}for(let p=0;p<i;++p){const m=bi(p,"int32"),b=n.makeTensorInfo([],"int32",m),g=GO({inputs:{a:b,b:h},backend:n}),x=hi({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),v=Gg({inputs:{a:x,b:s},backend:n}),y=ih({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(y),u.push(b),u.push(g),u.push(x),u.push(v),u.push(y)}const f=GF({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const Hoe={kernelName:$g,backendName:"cpu",kernelFunc:Uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Goe=[zZ,vQ,VZ,UZ,IQ,GZ,qZ,XZ,QZ,JZ,tJ,oJ,rJ,lJ,uJ,fJ,mJ,bJ,vJ,LZ,wJ,kJ,IJ,EQ,EJ,kQ,NQ,NJ,yQ,AJ,_J,OJ,PJ,MJ,BJ,WJ,HJ,jJ,KJ,YJ,ZJ,eee,nee,see,ree,aee,cee,dee,hee,fee,pee,gee,vee,RZ,wee,RQ,Nee,AQ,Ree,_Q,Pee,Lee,zee,FQ,LQ,Vee,Uee,Gee,qee,zQ,VQ,wQ,Xee,DJ,Qee,Jee,tte,AZ,UQ,GQ,ote,qQ,rte,lte,ute,fte,mte,bte,xte,XQ,yte,$te,Cte,Ste,Tte,Rte,Dte,QQ,Ote,Lte,Bte,JQ,tZ,Ute,jte,Xte,oZ,Qte,Jte,ene,jF,sne,_Z,iZ,ine,lne,une,hne,$Q,Yx,pne,OZ,FZ,PZ,gne,xne,yne,$ne,Cne,Ine,Ene,pZ,Nne,One,Pne,Bne,gZ,Wne,Hne,jne,bZ,Mte,Xne,Qne,Jne,toe,ooe,roe,aoe,coe,yZ,uoe,$Z,CZ,hoe,poe,goe,xoe,yoe,TZ,bee,$oe,Coe,Soe,Toe,Roe,Doe,sZ,Boe,Woe,Hoe,Zte];for(const t of Goe)TR(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pi={},Bh={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function joe(t,e){Pi[t]=e}function Ts(t,e){if(!(t in Pi)||e!=null){const o=Koe(t,e);if(o!==null)Pi[t]=o;else return console.log("Could not get context for WebGL version",t),null}const n=Pi[t];return n==null||n.isContextLost()?(delete Pi[t],Ts(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Pi[t])}function qoe(t){if(!j().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Koe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e==null?qoe(t):e;return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete Pi[t]},!1),j().getBool("SOFTWARE_WEBGL_ENABLED")&&(Bh.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Bh)||n.getContext("experimental-webgl",Bh):n.getContext("webgl2",Bh)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Du;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Du||(Du={}));var yo;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(yo||(yo={}));var on;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(on||(on={}));function ah(t,e){return[e,t]}function Xoe(t,e){return t*e}function Vh(t){const e=Q(t),n=Math.ceil(e/4);return gx(n)}function ic(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Yoe(t,e){const[n,o]=ic(t,e);return n*o*4}function $$(t,e){const n=t;let o,s,r,i,a,l,c,u,d,h;return j().getNumber("WEBGL_VERSION")===2?(o=n.R32F,s=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(o=t.RGBA,s=t.RGBA,r=t.RGBA,i=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ue(t,e){const n=e();return j().getBool("DEBUG")&&Qoe(t),n}function Qoe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+tse(t,e))}const Zoe=596e-10,Joe=65504;function ese(t){return!!(j().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Zoe<Math.abs(t)&&Math.abs(t)<Joe)}function tse(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(e)}}function Wh(t,e){return Ar(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function nse(t,e){const n=Ar(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ue(t,()=>t.shaderSource(n,e)),ue(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function ose(t,e){const n=Ar(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ue(t,()=>t.shaderSource(n,e)),ue(t,()=>t.compileShader(n)),j().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw qF(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const sse=/ERROR: [0-9]+:([0-9]+):/g;function qF(t,e){const n=sse.exec(e);if(n==null){console.log("Couldn't parse line number in error: ".concat(e)),console.log(t);return}const o=+n[1],s=t.split("\n"),r=s.length.toString().length+2,i=s.map((d,h)=>vl((h+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,o-1),c=i.slice(o-1,o),u=i.slice(o);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c ".concat(vl(c[0],a)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function rse(t){return Ar(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ise(t,e){if(ue(t,()=>t.linkProgram(e)),!j().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function n0(t,e){if(ue(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ase(t,e){const n=Ar(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ue(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ue(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function lse(t,e){const n=Ar(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ue(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ue(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function cse(t){return Ar(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function use(t,e){const n=j().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const o="[".concat(t,"x").concat(e,"]");throw new Error("Requested texture size "+o+" is invalid.")}if(t>n||e>n){const o="[".concat(t,"x").concat(e,"]"),s="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+s+".")}}function dse(t){return Ar(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function IS(t,e,n,o,s,r,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(ue(t,()=>t.bindBuffer(t.ARRAY_BUFFER,o)),ue(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,r,i)),ue(t,()=>t.enableVertexAttribArray(a)),!0)}function hse(t,e,n){bse(t,n),ue(t,()=>t.activeTexture(t.TEXTURE0+n)),ue(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function fse(t,e,n){return Ar(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function pse(t,e,n){return t.getUniformLocation(e,n)}function mse(t,e,n,o){ue(t,()=>hse(t,e,o)),ue(t,()=>t.uniform1i(n,o))}function o0(t,e,n){ue(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ue(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function SS(t,e){ue(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ue(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Uh(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+gse(t,e))}function gse(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(e)}}function Ar(t,e,n){const o=ue(t,()=>e());if(o==null)throw new Error(n);return o}function bse(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=e+t.TEXTURE0;if(o<t.TEXTURE0||o>n){const s="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(s,"."))}}function Ul(t,e=2){return Q(t.slice(0,t.length-e))}function Hl(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Hh(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Ul(t),...Hl(t)]),e}function xse(t,e=!1){let n=j().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=j().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&j().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),e&&(n=n*2,o=o*2,t=t.map((a,l)=>l>=t.length-2?zy(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=gi(t).newShape);let s=Q(t),r=null;t.length<=1&&s<=n?r=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?r=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?r=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?r=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?r=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(r=[t[0],t[1]*t[2]*t[3]]);const i=r!=null&&Math.max(...r)>o&&Math.min(...r)<=(e?2:1)&&Math.min(...r)>0;if(r==null||i)if(e){const a=Ul(t);let l=2,c=2;t.length&&([l,c]=Hl(t)),s=a*(l/2)*(c/2),r=gx(s).map(u=>u*2)}else r=gx(s);return r}function Gh(t){return t%2===0}function Rp(t,e){if(t=t.slice(-2),e=e.slice(-2),Ve(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],o=e[e.length-1];if(n===o||Gh(n)&&Gh(o)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Gh(t[0])&&Gh(e[0])}let s0,r0;function vse(t){if(s0==null){const e=Ts(t);s0=e.getParameter(e.MAX_TEXTURE_SIZE)}return s0}function yse(t){if(r0==null){const e=Ts(t);r0=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,r0)}function wse(t){if(t===0)return 0;let e;const n=Ts(t);return jo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:jo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function jo(t,e){return t.getExtension(e)!=null}function ES(t){try{if(Ts(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function $se(t){if(t===0)return!1;const e=Ts(t);if(t===1){if(!jo(e,"OES_texture_float"))return!1}else if(!jo(e,"EXT_color_buffer_float"))return!1;return Zx(e)}function kse(t){if(t===0)return!1;const e=Ts(t);if(t===1){if(!jo(e,"OES_texture_float")||!jo(e,"WEBGL_color_buffer_float"))return!1}else{if(jo(e,"EXT_color_buffer_float"))return Zx(e);const o="EXT_color_buffer_half_float";if(jo(e,o)){const s=e.getExtension(o);return Cse(e,s)}return!1}return Zx(e)}function Zx(t){const e=$$(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const o=1,s=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,o,s,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function Cse(t,e){const n=$$(t,e),o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o);const s=1,r=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,s,r,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(i),a}function Ise(t){return t!==2?!1:Ts(t).fenceSync!=null}function lh(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&I(n.dtype!=="complex64",()=>"".concat(e," does not support complex64 tensors ")+"in the WebGL backend.")})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const me=j();me.registerFlag("HAS_WEBGL",()=>me.getNumber("WEBGL_VERSION")>0);me.registerFlag("WEBGL_VERSION",()=>ES(2)?2:ES(1)?1:0);me.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);me.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>me.get("WEBGL_VERSION")===2);me.registerFlag("WEBGL_CPU_FORWARD",()=>!0);me.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);me.registerFlag("WEBGL_PACK",()=>me.getBool("HAS_WEBGL"));me.registerFlag("WEBGL_PACK_NORMALIZATION",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_CLIP",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_PACK_REDUCE",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_LAZILY_UNPACK",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_CONV_IM2COL",()=>me.getBool("WEBGL_PACK"));me.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>vse(me.getNumber("WEBGL_VERSION")));me.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>yse(me.getNumber("WEBGL_VERSION")));me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=me.getNumber("WEBGL_VERSION");return t===0?0:wse(t)});me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>me.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!GR());me.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>$se(me.getNumber("WEBGL_VERSION")));me.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>me.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:me.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));me.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>kse(me.getNumber("WEBGL_VERSION")));me.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Ise(me.getNumber("WEBGL_VERSION")));me.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>me.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);me.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(t,"."));if(t<0&&t!==-1)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(t,"."))});me.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>GR()?1:-1,t=>{if(typeof t!="number")throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(t,"."));if(t<0&&t!==-1)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(t,"."))});me.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);me.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);me.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);me.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);me.registerFlag("WEBGL_EXP_CONV",()=>!1);me.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>me.getBool("IS_TEST"));me.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);me.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);me.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);me.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(){let t,e,n,o,s,r,i,a,l,c;return j().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",o="in",s="texture",r="outputColor",i="out vec4 outputColor;",a=j().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",o="varying",s="texture2D",r="gl_FragColor",i="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:o,texture2D:s,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Da(t,e,n="index"){const o=ve(e);return o.map((s,r)=>{const i="int ".concat(t[r]," = ").concat(n," / ").concat(s),a=r===o.length-1?"int ".concat(t[r+1]," = ").concat(n," - ").concat(t[r]," * ").concat(s):"index -= ".concat(t[r]," * ").concat(s);return"".concat(i,"; ").concat(a,";")}).join("")}function jg(t,e,n="index"){const o=ve(e);return o.map((s,r)=>{const i="int ".concat(t[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),a=r===o.length-1?"int ".concat(t[r+1]," = ").concat(n," - ").concat(t[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(t[r]," * outShapeStrides[").concat(r,"]");return"".concat(i,"; ").concat(a,";")}).join("")}function Sse(t,e){const n=t.length,o=t.map(r=>"".concat(e,"[").concat(r,"]")),s=new Array(n-1);s[n-2]=o[n-1];for(let r=n-3;r>=0;--r)s[r]="(".concat(s[r+1]," * ").concat(o[r+1],")");return s}function Ese(t,e,n="index"){const o=t.map((r,i)=>i),s=Sse(o,e);return s.map((r,i)=>{const a="int ".concat(t[i]," = ").concat(n," / ").concat(s[i]),l=i===s.length-1?"int ".concat(t[i+1]," = ").concat(n," - ").concat(t[i]," * ").concat(s[i]):"index -= ".concat(t[i]," * ").concat(s[i]);return"".concat(a,"; ").concat(l,";")}).join("")}function k$(t){const e=ve(t).map(n=>n.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(e[0]," + coords.y * ").concat(e[1]," + coords.z;\n  }\n")}function C$(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}const KF="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:XF}=xX;function Tse(t,e,n){const o=[];if(t.forEach(f=>{const p=Q(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?o.push("uniform float ".concat(f.name).concat(p>1?"[".concat(p,"]"):"",";")):(o.push("uniform sampler2D ".concat(f.name,";")),o.push("uniform int offset".concat(f.name,";"))),n.enableShapeUniforms){const{uniformShape:m}=I$(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:o.push("uniform int ".concat(f.name,"Shape;"));break;case 2:o.push("uniform ivec2 ".concat(f.name,"Shape;"));break;case 3:o.push("uniform ivec3 ".concat(f.name,"Shape;"));break;case 4:o.push("uniform ivec4 ".concat(f.name,"Shape;"));break}o.push("uniform ivec2 ".concat(f.name,"TexShape;"))}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{o.push("uniform ".concat(f.type," ").concat(f.name).concat(f.arrayIndex?"[".concat(f.arrayIndex,"]"):"",";"))});const s=o.join("\n"),r=t.map(f=>Nse(f,e,n.packedInputs,n.enableShapeUniforms)).join("\n"),i=e.texShape,a=On(),l=Dse(a);let c,u,d=Fse(a);return e.isPacked?(c=Rse(e.logicalShape,i,n.enableShapeUniforms),u=Ose(a)):(c=Ase(e.logicalShape,i,n.enableShapeUniforms),u=_se(a)),n.packedInputs&&(d+=zse),[d,l,u,s,c,r,n.userCode].join("\n")}function ac(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Qse(t,e);case 1:return Jse(t,e);case 2:return tre(t,e);case 3:return ore(t,e);case 4:return rre(t,e);case 5:return ire(t);case 6:return are(t);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function YF(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Yse(t);case 1:return Zse(t,e);case 2:return ere(t,e);case 3:return nre(t,e);default:return sre(t,e)}}function Nse(t,e,n=!1,o){let s="";n?s+=YF(t,o):s+=ac(t,o);const r=t.shapeInfo.logicalShape,i=e.logicalShape;return r.length<=i.length&&(n?s+=lre(t,e):s+=cre(t,e)),s}function Rse(t,e,n){switch(t.length){case 0:return QF();case 1:return Bse(t,e,n);case 2:return Kse(t,e,n);case 3:return Wse(t,e,n);default:return Hse(t,e,n)}}function Ase(t,e,n){switch(t.length){case 0:return QF();case 1:return Vse(t,e,n);case 2:return Xse(t,e,n);case 3:return Use(t,e,n);case 4:return Gse(t,e,n);case 5:return jse(t,e);case 6:return qse(t,e);default:throw new Error("".concat(t.length,"-D output sampling is not yet supported"))}}function Dse(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(t.texture2D,"(textureSampler, uv).r;\n    }\n  ")}function _se(t){return"\n    void setOutput(float val) {\n      ".concat(t.output," = vec4(val, 0, 0, 0);\n    }\n  ")}function Ose(t){return"\n    void setOutput(vec4 val) {\n      ".concat(t.output," = val;\n    }\n  ")}function Fse(t){return"".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFs," vec2 resultUV;\n    ").concat(t.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(t.defineSpecialNaN,"\n    ").concat(t.defineSpecialInf,"\n    ").concat(t.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Pse,"\n    ").concat(Lse,"\n    ").concat(Mse,"\n  ")}const Pse="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Lse="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Mse="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zse="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function QF(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function Bse(t,e,n){const o=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return o[0]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(o[1],".0);\n      }\n    "):o[1]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(o[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(o[0],", ").concat(o[1],"));\n      return 2 * (resTexRC.x * ").concat(o[1]," + resTexRC.y);\n    }\n  ")}function Vse(t,e,n){return e[0]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(e[1],".0);\n      }\n    "):e[1]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(e[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      return resTexRC.x * ").concat(e[1]," + resTexRC.y;\n    }\n  ")}function Wse(t,e,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const o=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),r=s*Math.ceil(t[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(o[0],", ").concat(o[1],"));\n      int index = resTexRC.x * ").concat(o[1]," + resTexRC.y;\n\n      int b = index / ").concat(r,";\n      index -= b * ").concat(r,";\n\n      int r = 2 * (index / ").concat(s,");\n      int c = imod(index, ").concat(s,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}function Use(t,e,n){if(n){const s=jg(["r","c","d"],t);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(s,"\n    return ivec3(r, c, d);\n  }\n")}const o=Da(["r","c","d"],t);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(o,"\n      return ivec3(r, c, d);\n    }\n  ")}function Hse(t,e,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const o=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),r=s*Math.ceil(t[t.length-2]/2);let i=r,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],a="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+a,l="b".concat(c,", ")+l;return"\n    ivec".concat(t.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(o[0],", ").concat(o[1],"));\n      int index = resTexRC.x * ").concat(o[1]," + resTexRC.y;\n\n      ").concat(a,"\n\n      int b = index / ").concat(r,";\n      index -= b * ").concat(r,";\n\n      int r = 2 * (index / ").concat(s,");\n      int c = imod(index, ").concat(s,") * 2;\n\n      return ivec").concat(t.length,"(").concat(l,");\n    }\n  ")}function Gse(t,e,n){if(n){const s=jg(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(s,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const o=Da(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(o,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}function jse(t,e){const n=Da(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(e[0],",\n                             ").concat(e[1],"));\n\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}function qse(t,e){const n=Da(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}function Kse(t,e,n){const o=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Ve(t,e))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(o[0],", ").concat(o[1],"));\n      }\n    ");const s=Math.ceil(t[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(o[0],", ").concat(o[1],"));\n\n      int index = resTexRC.x * ").concat(o[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(s,");\n      int c = imod(index, ").concat(s,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}function Xse(t,e,n){return Ve(t,e)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(e[0],", ").concat(e[1],"));\n      }\n    "):t[1]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):t[0]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      int r = index / ").concat(t[1],";\n      int c = index - r * ").concat(t[1],";\n      return ivec2(r, c);\n    }\n  ")}function _a(t){return"offset".concat(t)}function Yse(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),o=On();return"\n    vec4 ".concat(n,"() {\n      return ").concat(o.texture2D,"(").concat(e,", halfCR);\n    }\n  ")}function Qse(t,e){const n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"float ".concat(o,"() {return ").concat(n,";}");const[s,r]=t.shapeInfo.texShape;if(s===1&&r===1)return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=_a(n);if(e)return"\n    float ".concat(o,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[a,l]=t.shapeInfo.texShape;return"\n    float ".concat(o,"() {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(l,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Zse(t,e){const n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,r=On();if(e)return"\n    vec4 ".concat(o,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return"\n    vec4 ".concat(o,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}function Jse(t,e){const n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"\n      float ".concat(o,"(int index) {\n        ").concat(lc(t),"\n      }\n    ");const s=t.shapeInfo.texShape,r=s[0],i=s[1];if(i===1&&r===1)return"\n      float ".concat(o,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const a=_a(n);return i===1?e?"\n      float ".concat(o,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(a,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(o,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(a,") + 0.5) / ").concat(r,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):r===1?e?"\n      float ".concat(o,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(a,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(o,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(a,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):e?"\n    float ".concat(o,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(o,"(int index) {\n      vec2 uv = uvFromFlat(").concat(r,", ").concat(i,", index + ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function ere(t,e){const n=t.shapeInfo.logicalShape,o=t.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),r=t.shapeInfo.texShape,i=r[0],a=r[1],l=On();if(r!=null&&Ve(n,r))return e?"\n      vec4 ".concat(s,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(o,", uv);\n      }\n    "):"\n      vec4 ".concat(s,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,".0, ").concat(i,".0);\n\n        return ").concat(l.texture2D,"(").concat(o,", uv);\n      }\n    ");if(e)return"\n    vec4 ".concat(s,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(o,"TexShape[0]) / 2.0), ceil(float(").concat(o,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(o,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(o,", uv);\n    }\n  ");const c=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(s,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(o,", uv);\n    }\n  ")}function tre(t,e){const n=t.shapeInfo.logicalShape,o=t.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),r=t.shapeInfo.texShape;if(r!=null&&Ve(n,r)){if(e)return"\n      float ".concat(s,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n        return sampleTexture(").concat(o,", uv);\n      }\n    ");const h=r[0],f=r[1];return"\n    float ".concat(s,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(f,".0, ").concat(h,".0);\n      return sampleTexture(").concat(o,", uv);\n    }\n  ")}const{newShape:i,keptDims:a}=gi(n),l=i;if(l.length<n.length){const h=cc(t,l),f=["row","col"];return"\n      ".concat(ac(h,e),"\n      float ").concat(s,"(int row, int col) {\n        return ").concat(s,"(").concat(uc(f,a),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(s,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(lc(t),"\n      }\n    ");const c=r[0],u=r[1],d=_a(o);return u===1?e?"\n      float ".concat(s,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(o,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(o,"TexShape[0]));\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n    float ".concat(s,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(o,", uv);\n    }\n  "):c===1?e?"\n      float ".concat(s,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(o,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(o,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n    float ".concat(s,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(o,", uv);\n    }\n  "):e?"\n      float ".concat(s,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(o,"TexShape[0], ").concat(o,"TexShape[1], index);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n  float ".concat(s,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(o,", uv);\n  }\n")}function nre(t,e){const n=t.shapeInfo.logicalShape,o=t.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=cc(t,h),m=["b","row","col"];return"\n        ".concat(YF(p,e),"\n        vec4 ").concat(s,"(int b, int row, int col) {\n          return ").concat(s,"(").concat(uc(m,f),");\n        }\n      ")}const a=On();if(e)return"\n    vec4 ".concat(s,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(o,"TexShape[0]) / 2.0), ceil(float(").concat(o,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(o,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(o,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(a.texture2D,"(").concat(o,", uv);\n    }\n  ");const l=i[0],c=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(s,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(a.texture2D,"(").concat(o,", uv);\n    }\n  ")}function ore(t,e){const n=t.shapeInfo.logicalShape,o=t.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=gi(n),c=a;if(c.length<n.length){const m=cc(t,c),b=["row","col","depth"];return"\n        ".concat(ac(m,e),"\n        float ").concat(s,"(int row, int col, int depth) {\n          return ").concat(s,"(").concat(uc(b,l),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(s,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(r,", ").concat(i,", 1)));\n        ").concat(lc(t),"\n      }\n    ");const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===r&&f==null)return e?"\n      float ".concat(s,"(int row, int col, int depth) {\n        int stride1 = ").concat(o,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n        float ".concat(s,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(o,", uv);\n        }\n      ");if(h===i&&f==null)return e?"\n      float ".concat(s,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(o,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n    float ".concat(s,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(o,", uv);\n    }\n  ");const p=_a(o);return e?"\n    float ".concat(s,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(o,"Shape[1] * ").concat(o,"Shape[2];\n      int stride1 = ").concat(o,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(o,"TexShape[0], ").concat(o,"TexShape[1], index);\n      return sampleTexture(").concat(o,", uv);\n    }\n    "):"\n      float ".concat(s,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r," + col * ").concat(i," + depth + ").concat(p,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(o,", uv);\n      }\n  ")}function sre(t,e){const n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),s=On();if(e)return"\n    vec4 ".concat(o,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ");const r=t.shapeInfo.logicalShape,i=r.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(r[i-1]/2);let h=d*Math.ceil(r[i-2]/2),f="int b, int row, int col",p="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<i-1;m++)f="int b".concat(m,", ")+f,h*=r[i-m-1],p="b".concat(m," * ").concat(h," + ")+p;return"\n    vec4 ".concat(o,"(").concat(f,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}function rre(t,e){const n=t.shapeInfo.logicalShape,o=t.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:l,keptDims:c}=gi(n);if(l.length<n.length){const x=cc(t,l),v=["row","col","depth","depth2"];return"\n      ".concat(ac(x,e),"\n      float ").concat(s,"(int row, int col, int depth, int depth2) {\n        return ").concat(s,"(").concat(uc(v,c),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(s,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(a,", ").concat(i,", ").concat(r,", 1)));\n        ").concat(lc(t),"\n      }\n    ");const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p="int stride2 = ".concat(o,"Shape[3];"),m="int stride1 = ".concat(o,"Shape[2] * stride2;"),b="int stride0 = ".concat(o,"Shape[1] * stride1;");if(f===a&&u==null)return e?"\n      float ".concat(s,"(int row, int col, int depth, int depth2) {\n        ").concat(p,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n      float ".concat(s,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(r,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(o,", uv);\n      }\n    ");if(f===r&&u==null)return e?"\n      float ".concat(s,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(o,"Shape[1] * ").concat(o,"Shape[2], ").concat(o,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(o,"TexShape[1], ").concat(o,"TexShape[0]);\n        return sampleTexture(").concat(o,", uv);\n      }\n    "):"\n      float ".concat(s,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(o,", uv);\n      }\n    ");const g=_a(o);return e?"\n    float ".concat(s,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(p,"\n      ").concat(m,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(o,"TexShape[0], ").concat(o,"TexShape[1], index + ").concat(g,");\n      return sampleTexture(").concat(o,", uv);\n    }\n  "):"\n    float ".concat(s,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(a," + col * ").concat(i," +\n          depth * ").concat(r," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index + ").concat(g,");\n      return sampleTexture(").concat(o,", uv);\n    }\n  ")}function ire(t){const e=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],r=e[3]*s,i=e[2]*r,a=e[1]*i,{newShape:l,keptDims:c}=gi(e);if(l.length<e.length){const m=cc(t,l),b=["row","col","depth","depth2","depth3"];return"\n      ".concat(ac(m),"\n      float ").concat(o,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(o,"(").concat(uc(b,c),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(a,", ").concat(i,", ").concat(r,", ").concat(s,")) +\n          depth3;\n        ").concat(lc(t),"\n      }\n    ");const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&u==null)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(r,", ").concat(s,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&u==null)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3],",\n               ").concat(e[2]*e[3],", ").concat(e[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const p=_a(n);return"\n    float ".concat(o,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(a," + col * ").concat(i," + depth * ").concat(r," +\n          depth2 * ").concat(s," + depth3 + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function are(t){const e=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:r}=gi(e);if(s.length<e.length){const b=cc(t,s),g=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(ac(b),"\n      float ").concat(o,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(o,"(").concat(uc(g,r),");\n      }\n    ")}const i=e[5],a=e[4]*i,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(a,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(lc(t),"\n      }\n    ");const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&d==null)return"\n      float ".concat(o,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(a,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===i&&d==null)return"\n      float ".concat(o,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3]*e[4],",\n               ").concat(e[2]*e[3]*e[4],",\n               ").concat(e[3]*e[4],",\n               ").concat(e[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=_a(n);return"\n    float ".concat(o,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(a," + depth3 * ").concat(i," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function lc(t){const e=t.name,n=Q(t.shapeInfo.logicalShape);return n<2?"return ".concat(e,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(e,"[i];\n      }\n    }\n  ")}function lre(t,e){const n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),s="get"+o+"AtOutCoords",r=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=XF(t.shapeInfo.logicalShape,e.logicalShape),l=qe(i),c=i-r;let u;const d=["x","y","z","w","u","v"];r===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(x=>"coords.".concat(d[x+c]," = 0;")).join("\n");let h="";i<2&&r>0?h="coords":h=t.shapeInfo.logicalShape.map((x,v)=>"coords.".concat(d[v+c])).join(", ");let f="return outputValue;";const m=Q(t.shapeInfo.logicalShape)===1,g=Q(e.logicalShape)===1;if(r===1&&!m&&!g)f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";else if(m&&!g)i===1?f="\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":f="\n        return vec4(outputValue.x);\n      ";else if(a.length){const x=r-2,v=r-1;a.indexOf(x)>-1&&a.indexOf(v)>-1?f="return vec4(outputValue.x);":a.indexOf(x)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return"\n    vec4 ".concat(s,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(o,"(").concat(h,");\n      ").concat(f,"\n    }\n  ")}function cre(t,e){const n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),s="get"+o+"AtOutCoords",r=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Ve(i,r))return"\n      float ".concat(s,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=qe(l),u=XF(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>"coords.".concat(f[m+d]," = 0;")).join("\n");let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,b)=>"coords.".concat(f[b+d])).join(", "),"\n    float ".concat(s,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(o,"(").concat(p,");\n    }\n  ")}function qe(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))}function I$(t,e,n){const{newShape:o,keptDims:s}=gi(e),r=e.length,i=t&&r===3&&e[0]===1,a=i?e.slice(1):o,l=!t&&r>1&&!Ve(e,n)&&o.length<r||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function cc(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function uc(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(t,e,n,o){const s=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),r=s.map(u=>u.shapeInfo),i={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},a=Tse(s,i,e),l=ose(t.gl,a),c=t.createProgram(l);return j().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:i},ZF(t,e,c)))}function ZF(t,e,n){const o=[],s=[];let r,i,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),j().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,"offset".concat(d),u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,"".concat(d,"Shape"),u),h.texShape=t.getUniformLocation(n,"".concat(d,"TexShape"),u)),o.push(h)}if(e.enableShapeUniforms&&(r=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),i=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:o,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:i}}function TS(t,e){if(t.length!==e.length)throw Error("Binary was compiled with ".concat(t.length," inputs, but ")+"was executed with ".concat(e.length," inputs"));t.forEach((n,o)=>{const s=n.logicalShape,r=e[o],i=r.shape;if(!Ve(s,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(s," and ").concat(i," must match"));if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!Ve(a,l))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(a," and ").concat(l," must match"))})}function dre(t,e,n,o,s){e.program.enableShapeUniforms||(TS(e.inShapeInfos,n),TS([e.outShapeInfo],[o]));const r=o.texData.texture,i=o.texData.texShape;o.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):t.setOutputMatrixTexture(r.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),j().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=I$(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Q(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(o.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(o.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(o.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(o.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(o.shape));break}if(e.outShapeStridesLocation){const l=ve(o.shape);switch(o.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error("uniform type ".concat(c.type," is not supported yet."))}t.executeProgram()}function hre(t,e,n){let o="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=I$(t.packedInputs,i.shape,l);let h="",f="",p="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h="".concat(w[0]>1,"_").concat(w[1]>1)}else if(u.length===2&&!t.packedInputs)f="".concat(u[0]>1,"_").concat(u[1]>1);else if(u.length>2&&!t.packedInputs){const w=ve(u);p="".concat(w[0]===l[1],"_").concat(w[w.length-1]===l[1])}const m=i.shape.length,b=u.length===2&&Ve(i.shape,l),g=Q(i.shape)===1,x=Pl(i.shape,n.shape),v=!t.packedInputs&&m===n.shape.length&&Ve(l,n.texData.texShape),y=t.packedInputs||u.length>2?"":"".concat(l[0]>1,"_").concat(l[1]>1);o+="".concat(m,"_").concat(v,"_").concat(c?d:"","_").concat(u.length,"_").concat(g,"_").concat(x,"_").concat(b,"_").concat(h,"_").concat(f,"_").concat(p,"_").concat(y,"_").concat(a)}else{const l=i.isUniform?"uniform":i.texData.texShape;o+="".concat(i.shape,"_").concat(l,"_").concat(a)}});const s=t.userCode;let r=t.constructor.name;return r+="_"+o+"_"+s+"".concat(j().getNumber("WEBGL_VERSION")),r}function yn(t){return j().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fre{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Du.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=On();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?jg(["r","c","d"],e):Da(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pre{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Du.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=On();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?jg(["r","c","d"],e):Da(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mre{constructor(e){this.variableNames=["A"],this.outTexUsage=yo.DOWNLOAD;const n=On();this.outputShape=e,this.userCode="\n      ".concat(KF,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gre{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=yo.DOWNLOAD;const n=On();this.outputShape=e,this.userCode="\n      ".concat(KF,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bre={R:0,G:1,B:2,A:3};class NS{constructor(e,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=On();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let r="result";n&&(r="floor(result * 255. + 0.5)");let i="";for(let a=0;a<o.length;a++){const l=o[a];i+="\n          if(offset == ".concat(a,") {\n            result = values[").concat(bre[l],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?C$():k$(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(o.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(o.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(s.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(s.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xre{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=On();this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let s="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;s+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(a," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(a,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(o.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(l,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(l,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(l,"] = values[2];\n            } else {\n              result[").concat(l,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?C$():k$(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(s,"\n\n          ").concat(o.output," = ").concat(r,";\n        }\n    ")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vre(t){const e=On(),n="".concat(e.version,"\n    precision highp float;\n    ").concat(e.attribute," vec3 clipSpacePos;\n    ").concat(e.attribute," vec2 uv;\n    ").concat(e.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }");return nse(t,n)}function yre(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return ase(t,e)}function wre(t){const e=new Uint16Array([0,1,2,2,1,3]);return lse(t,e)}function ch(t,e,n,o,s,r){use(e,n);const i=cse(t),a=t.TEXTURE_2D;return ue(t,()=>t.bindTexture(a,i)),ue(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ue(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ue(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ue(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),j().getNumber("WEBGL_VERSION")===1?ue(t,()=>t.texImage2D(a,0,o,e,n,0,s,r,null)):ue(t,()=>t.texStorage2D(a,1,o,e,n)),ue(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function JF(t){return t.internalFormatFloat}function $re(t,e,n,o){const[s,r]=ah(e,n);return ch(t,s,r,JF(o),o.textureFormatFloat,t.FLOAT)}function eP(t){return t.internalFormatHalfFloat}function kre(t,e,n,o){const[s,r]=ah(e,n);return ch(t,s,r,eP(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function tP(t){return t.downloadTextureFormat}function Cre(t,e,n,o){const[s,r]=ah(e,n);return ch(t,s,r,tP(o),t.RGBA,t.UNSIGNED_BYTE)}function nP(t){return t.internalFormatPackedFloat}function Ire(t,e,n,o){const[s,r]=ic(e,n);return ch(t,s,r,nP(o),t.RGBA,t.FLOAT)}function oP(t){return t.internalFormatPackedHalfFloat}function Sre(t,e,n,o){const[s,r]=ic(e,n);return ch(t,s,r,oP(o),t.RGBA,o.textureTypeHalfFloat)}function Ere(t,e,n){return ue(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),IS(t,e,"clipSpacePos",n,3,20,0)&&IS(t,e,"uv",n,2,20,12)}function Tre(t,e,n,o,s,r){ue(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;s instanceof Uint8Array?(i=new Uint8Array(n*o*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*o*4),a=t.FLOAT,l=r.internalFormatPackedFloat),i.set(s),j().getNumber("WEBGL_VERSION")===2?ue(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,o,t.RGBA,a,i)):ue(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,o,0,t.RGBA,a,i)),ue(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Nre(t,e,n){ue(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?j().getNumber("WEBGL_VERSION")===2?ue(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ue(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):j().getNumber("WEBGL_VERSION")===2?ue(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ue(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ue(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Rre(t,e,n,o){const s=t.createBuffer();ue(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return ue(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ue(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ue(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function Are(t,e,n){const o=t,s=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,e),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,s),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),s}function Dre(t,e,n,o){const[s,r]=ah(e,n),i=4,a=new Uint8Array(Xoe(e*n,i));return ue(t,()=>t.readPixels(0,0,s,r,o.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function _re(t,e,n,o,s,r,i,a){const l=t,c=new Float32Array(Yoe(r,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Ore(t,e,n){const o=new Float32Array(e*n*4);return ue(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,o)),o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=j().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,joe(n,e)):this.gl=Ts(n),e=this.gl,j().getNumber("WEBGL_VERSION")===2){const r=e;this.createVertexArray=()=>ue(r,()=>r.createVertexArray()),this.bindVertexArray=i=>ue(r,()=>r.bindVertexArray(i)),this.deleteVertexArray=i=>ue(r,()=>r.deleteVertexArray(i)),this.getVertexArray=()=>ue(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(e!=null){const r=e.getExtension("OES_vertex_array_object");if(r==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ue(e,()=>r.createVertexArrayOES()),this.bindVertexArray=i=>ue(e,()=>r.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ue(e,()=>r.deleteVertexArrayOES(i)),this.getVertexArray=()=>ue(e,()=>e.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),j().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Wh(this.gl,r),jo(this.gl,i))this.textureHalfFloatExtension=Wh(this.gl,i);else if(j().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),jo(this.gl,s))this.colorBufferHalfFloatExtension=Wh(this.gl,s);else if(j().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",jo(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(jo(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=yre(this.gl),this.indexBuffer=wre(this.gl),this.framebuffer=dse(this.gl),this.textureConfig=$$(this.gl,this.textureHalfFloatExtension)}get debug(){return j().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ue(e,()=>e.finish()),ue(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ue(e,()=>e.deleteFramebuffer(this.framebuffer)),ue(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ue(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ue(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),$re(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),kre(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Cre(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Nre(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,o,s){this.throwIfDisposed(),Tre(this.gl,e,n,o,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Sre(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Ire(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(SS(this.gl,this.framebuffer),this.outputTexture=null),ue(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,o){return this.downloadMatrixDriver(e,()=>Dre(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,o,s,r,i){return _re(this.gl,e,n,o,s,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Are(this.gl,e,n)}createBufferFromTexture(e,n,o){this.bindTextureToFrameBuffer(e);const s=Rre(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,o;if(j().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,r=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),o=()=>{const i=s.clientWaitSync(r,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=r}else j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(e,n,o){return this.downloadMatrixDriver(e,()=>Ore(this.gl,n,o))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=vre(n));const o=rse(n);ue(n,()=>n.attachShader(o,this.vertexShader)),ue(n,()=>n.attachShader(o,e)),ise(n,o);const s=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&n0(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ue(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Ere(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ue(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&n0(this.gl,this.program),ue(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,o=!0){return this.throwIfDisposed(),o?fse(this.gl,e,n):pse(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ue(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),mse(this.gl,e,n,o)}setOutputMatrixTexture(e,n,o){this.setOutputMatrixTextureDriver(e,o,n)}setOutputPackedMatrixTexture(e,n,o){this.throwIfDisposed();const[s,r]=ic(n,o);this.setOutputMatrixTextureDriver(e,s,r)}setOutputMatrixWriteRegion(e,n,o,s){this.setOutputMatrixWriteRegionDriver(o,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,o,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&n0(this.gl,this.program),Uh(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ue(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ue(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Wh(this.gl,j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const o=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=o.createQuery();return o.beginQuery(s.TIME_ELAPSED_EXT,r),r}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await mI(()=>this.disposed||this.isQueryAvailable(e,j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const o=this.gl;return o.getQueryParameter(e,o.QUERY_RESULT)/1e6}else{const o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const o=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=o.getQueryParameter(e,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const o=this.getQueryTimerExtensionWebGL1(),s=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Fre(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in j().platform&&(o=j().platform.setTimeoutCustom.bind(j().platform)),mI(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o0(this.gl,e,this.framebuffer),this.debug&&Uh(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(o0(this.gl,this.outputTexture,this.framebuffer),this.debug&&Uh(this.gl)):SS(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(e,n,o){this.throwIfDisposed();const s=this.gl;o0(s,e,this.framebuffer),this.debug&&Uh(s),this.outputTexture=e,ue(s,()=>s.viewport(0,0,n,o)),ue(s,()=>s.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(e,n,o,s){this.throwIfDisposed(),ue(this.gl,()=>this.gl.scissor(e,n,o,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Fre(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Pre,bincountImpl:sP,bincountReduceImpl:Lre,bitwiseAndImpl:Mre,castImpl:zre,ceilImpl:Bre,concatImpl:Vre,equalImpl:Wre,expImpl:Ure,expm1Impl:Hre,floorImpl:Gre,gatherNdImpl:jre,gatherV2Impl:qre,greaterImpl:Kre,greaterEqualImpl:Xre,lessImpl:Yre,lessEqualImpl:Qre,linSpaceImpl:Zre,logImpl:Jre,maxImpl:eie,maximumImpl:tie,minimumImpl:nie,multiplyImpl:oie,negImpl:sie,notEqualImpl:rie,prodImpl:iie,raggedGatherImpl:aie,raggedRangeImpl:lie,raggedTensorToTensorImpl:cie,rangeImpl:uie,rsqrtImpl:die,scatterImpl:hie,sigmoidImpl:fie,simpleAbsImpl:rP,sliceImpl:pie,sparseFillEmptyRowsImpl:mie,sparseReshapeImpl:gie,sparseSegmentReductionImpl:iP,sqrtImpl:bie,staticRegexReplaceImpl:xie,stridedSliceImpl:vie,stringNGramsImpl:yie,stringSplitImpl:wie,stringToHashBucketFastImpl:$ie,subImpl:kie,tileImpl:Cie,topKImpl:Iie,transposeImpl:S$,uniqueImpl:Sie}=NZ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aP(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>"".concat(t,".").concat(n))}function En(t,e){return e===1?[t]:aP(t,e)}function Eie(t,e){if(t===1)return"rc";let n="";for(let o=0;o<t;o++)n+=e[o],o<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tie{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=yn(this.outputShape.length),this.rank===0)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=En("rc",this.rank),o=qe(this.rank),s=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(o," rc = getOutputCoords();\n\n          if(").concat(s,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const n=[];for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){let r="".concat(o===0?"r":"rp1",", ").concat(s===0?"c":"cp1");for(let i=2;i<this.rank;i++)r="".concat(e[e.length-1-i],",")+r;n.push(r)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let n="";for(let o=this.rank-2;o<this.rank;o++)n+="".concat(e[o]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(o,"]"):this.outputShape[o]),o<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),o=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],s=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(n[0],";\n      int c = ").concat(n[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(o,";\n      bool rEdge = rp1 >= ").concat(s,";\n    ")}getOutput(e){const n=this.getSourceCoordsArr(e);if(this.rank===1){const o=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(o," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(n[0],"),\n            cEdge ? 0. : getA(").concat(n[1],"),\n            rEdge ? 0. : getA(").concat(n[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(n[3],")")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lP{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);let o="";for(let s=0;s<4;s++){let r="thisRC = rc;";s%2===1&&(r+="thisRC.z += 1;"),s>1&&(r+="thisRC.y += 1;"),o+="\n        ".concat(r,"\n        ").concat(s>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(s,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(s>0?"}":"","\n      ")}this.userCode="\n      ".concat(Nie(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?C$():k$(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function Nie(t,e){const n=e?Ese(["r","c","d"],"inputShape"):Da(["r","c","d"],t);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rie{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,o){const s=AS(n,o),r=DS(e,s,o);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=RS(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return s===on.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===on.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===on.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===on.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===on.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,o,s){if(this.freeTextures==null)return;const r=AS(o,s),i=DS(n,r,s);i in this.freeTextures||(this.freeTextures[i]=[]);const a=RS(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=j().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[i],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const n=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*n),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Aie(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(e))}function RS(t,e,n,o,s){const r=Die(e,o);let i;if(s){const[l,c]=ic(t[0],t[1]);i=l*c}else{const[l,c]=ah(t[0],t[1]);i=l*c}const a=Aie(n,r);return i*a}function Die(t,e){switch(t){case on.PACKED_2X2_FLOAT32:return nP(e);case on.PACKED_2X2_FLOAT16:return oP(e);case on.UNPACKED_FLOAT32:return JF(e);case on.UNPACKED_FLOAT16:return eP(e);case on.PACKED_4X1_UNSIGNED_BYTE:return tP(e);default:throw new Error("Unknown physical texture type ".concat(t))}}function _ie(t){return j().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?on.PACKED_2X2_FLOAT32:on.UNPACKED_FLOAT32:t?on.PACKED_2X2_FLOAT16:on.UNPACKED_FLOAT16}function AS(t,e){if(t===yo.UPLOAD)return on.PACKED_2X2_FLOAT32;if(t===yo.RENDER||t==null)return _ie(e);if(t===yo.DOWNLOAD||t===yo.PIXELS)return on.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(t))}function DS(t,e,n){return"".concat(t[0],"_").concat(t[1],"_").concat(e,"_").concat(n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hs{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const es="if (isnan(x)) return x;",Oie="return x;",_S="return abs(x);",Fie="return (x >= 0.0) ? x : (exp(x) - 1.0);",Pie=es+"\n  return (x < 0.0) ? 0.0 : x;\n",Lie=es+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Fr="return x;",Mie="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zie="return x;",Bie="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Vie="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Wie="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Uie="return 1.0 / (1.0 + exp(-1.0 * x));";class Wr{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hie{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);const n=e.length,o=En("rc",n),s=qe(n),r=Eie(n,o),i=o.slice(-2),a=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(s," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(a,"));\n      }\n    ")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gie=RA,jie=1e-7,qie=1e-4,jh={};function Kie(t){return t in jh||(jh[t]={}),jh[t]}const Xie=j().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Yie=600;function Qie(){return j().global.screen==null?1024:j().global.screen.height*j().global.screen.width*window.devicePixelRatio*Yie/1024/1024}class qg extends My{nextDataId(){return qg.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!j().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof i0)n=e;else{const o=Ts(j().getNumber("WEBGL_VERSION"),e);n=new i0(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const o=Ts(j().getNumber("WEBGL_VERSION"));n=new i0(o),this.binaryCache=Kie(j().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Rie(this.gpgpu),this.numMBBeforeWarning=Qie(),this.texData=new eR(this,Ls())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,o,s,r,i){const a=this.makeTensorInfo(n,o),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,r]},l.texShape=[s,r];const c=Hh(n),u=new NS(c,!1,i),d=this.runWebGLProgram(u,[a],o,[[s,r]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,o){if((j().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||j().getBool("DEBUG"))&&this.checkNumericalProblems(e),o==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:o,values:e,usage:yo.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,o,s,r){if(j().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:o,dtype:s,values:n,usage:yo.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:o,dtype:s,complexTensorInfos:r,slice:i,shape:a,isPacked:l}=n;if(i!=null){let h;l?h=new Wr(a,Fr):h=new Hs(a,Fr);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(o!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return o;const c=this.activeTimers!=null;let u;c&&(u=Mn());let d;if(s==="complex64"){const h=this.readSync(r.real.dataId),f=this.readSync(r.imag.dataId);d=Cr(h,f)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Mn()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:o,shape:s,slice:r,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let p;l?p=new Wr(s,Fr):p=new Hs(s,Fr);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:i}],i),b=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),b}if(o!=null)return this.convertAndCacheOnCPU(e);if(j().getBool("DEBUG")&&!j().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&j().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(i!=="complex64"&&j().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...Vh(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],b=p[1];d=Cr(m,b)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=Q(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;ue(p,()=>p.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ls().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const o=this.texData.get(e),{values:s,shape:r,slice:i,dtype:a,isPacked:l,texture:c}=o;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let f;l?f=new Wr(r,Fr):f=new Hs(r,Fr);const p=this.runWebGLProgram(f,[{dataId:e,shape:r,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Ls().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const o=n.map(s=>ii(s));return Ne(e.shape,e.dtype,o)}catch(o){throw new Error("Failed to decode encoded string bytes into utf-8")}return Ne(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const o=e[n];if(!ese(o))throw j().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(o," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value ".concat(o," cannot be represented on this device."))}}getValuesFromTexture(e){const{shape:n,dtype:o,isPacked:s}=this.texData.get(e),r=Q(n);if(j().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Vh(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(h),p}const i=j().getBool("WEBGL_PACK")&&s===!0,a=i?Hh(n):n,l=i?new gre(a):new mre(a),c=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,o=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=o,s=!0):this.activeTimers.push(o),this.activeTimers=o,e();const r=ia(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=ia(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=w6(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:i[u],ms:c})).map(c=>"".concat(c.name,": ").concat(c.ms)).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Mn(),endMs:null}}endTimer(e){return j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Mn(),e)}async getQueryTime(e){if(j().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:o}=this.texData.get(e);return o!=null&&(this.disposeData(o.real.dataId,n),this.disposeData(o.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:o,texShape:s,usage:r,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(n,s,r,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Xie){return j().getBool("WEBGL_CPU_FORWARD")&&e.every(o=>this.texData.get(o.dataId).texture==null&&Q(o.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){xo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Gie(e.shape,n)}packedUnaryOp(e,n,o){const s=new Wr(e.shape,n),r=this.compileAndRun(s,[e],o);return Ls().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=rP(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(j().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,_S,e.dtype);const n=new Hs(e.shape,_S),o=this.compileAndRun(n,[e]);return Ls().makeTensorFromTensorInfo(o)}makeTensorInfo(e,n,o){let s;if(n==="string"&&o!=null&&o.length>0&&ju(o[0])){const r=o.map(i=>Jr(i));s=this.write(r,e,n)}else s=this.write(o,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,o){return Ls().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,o),this)}unpackTensor(e){const n=new Hie(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Tie(e.shape),o=!0;return this.runWebGLProgram(n,[e],e.dtype,null,o)}packedReshape(e,n){const o=[Ul(e.shape),...Hl(e.shape)],s={dtype:e.dtype,shape:o,dataId:e.dataId},r=[Ul(n),...Hl(n)],i=new lP(r,o),a=!0,l=[o],c=this.runWebGLProgram(i,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const o=this.texData.get(e),{isPacked:s,shape:r,dtype:i}=o;if(n!=null){const h=Q(r),f=n[0]*n[1]*4;I(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Hh(r);let l;s?l=new pre(a):l=new fre(a);const c=!0,u=[n!=null?n:Vh(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,u,c,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(e,n,o,s,r=!1,i){const a=this.makeTensorInfo(e.outputShape,o),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Du.DENSE){const g=i!=null?i:Vh(e.outputShape);l.texShape=g.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Q(a.shape)===0)return l.values=bn(a.dtype,0),a;const c=[],u=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(g.dataId);if(x.texture==null){if(!e.packedInputs&&Q(g.shape)<=j().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!x.isPacked!=!!e.packedInputs)g=x.isPacked?this.unpackTensor(g):this.packTensor(g),c.push(g),x=this.texData.get(g.dataId);else if(x.isPacked&&!Rp(x.shape,g.shape)){const v=g,y=g.shape;g.shape=x.shape,g=this.packedReshape(g,y),c.push(g),x=this.texData.get(g.dataId),v.shape=y}return{shape:g.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=hre(e,u,d),f=this.getAndSaveBinary(h,()=>ure(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),j().get("ENGINE_COMPILE_ONLY")||dre(this.gpgpu,f,u,d,s),c.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const b=j().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const g=Mn();g-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!j().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,o,s,r=!1){return o=o||n[0].dtype,this.runWebGLProgram(e,n,o,s,r)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(j().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=G(()=>{if(!j().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=j().getBool("DEBUG");j().set("DEBUG",!1);const n=this.abs(ze(1e-8)).dataSync()[0];if(j().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?jie:qie}uploadToGPU(e){const n=this.texData.get(e),{shape:o,dtype:s,values:r,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Mn());let d=n.texShape;if(d==null&&(d=xse(o,l),n.texShape=d),r!=null){const h=Hh(o);let f,p=d[1],m=d[0];const b=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!b)&&([p,m]=ic(d[0],d[1])),l?f=new xre(h,b):f=new NS(h,b);const g=b?[m,p]:d,x=this.makeTensorInfo(g,s),v=this.texData.get(x.dataId);b?v.usage=yo.PIXELS:v.usage=yo.UPLOAD,v.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),p,m,r);const y=[[m,p]],w=!0,$=this.runWebGLProgram(f,[x],s,y,w),k=this.texData.get($.dataId);n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,j().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(n.texture=k.texture,n.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(x),c&&(this.uploadWaitMs+=Mn()-u)}else{const h=this.acquireTexture(d,a,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const o=this.texData.get(e),{dtype:s}=o;return n!=null&&(o.values=Zie(n,s)),o.values}acquireTexture(e,n,o,s){if(this.numBytesInGPU+=this.computeBytes(e,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(r," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*op(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const o=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(r){throw r}});e.push(o)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await YA(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(qF(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:o,infLoc:s,nanLoc:r,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=ZF(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=o,e.infLoc=s,e.nanLoc=r,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,o){e.channels=e.channels||"RGBA";const{texture:s,height:r,width:i,channels:a}=e,l=Ls().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,o,r,i,a);return Ls().makeTensorFromDataId(c,n,o,l)}}qg.nextDataId=0;function Zie(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let o=0;o<n.length;++o)n[o]=Math.round(t[o]);return n}else throw new Error("Unknown dtype ".concat(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */jR()&&tA("webgl",()=>new qg,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class xa{constructor(e,n,o){this.variableNames=["A","B"],this.outputShape=Ie(n,o),this.enableShapeUniforms=yn(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oa="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class dc{constructor(e,n,o,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ie(n,o);const r=this.outputShape.length;this.enableShapeUniforms=yn(r);let i="";if(s)if(r===0||Q(this.outputShape)===1)i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const a=qe(r);if(i="\n          ".concat(a," coords = getOutputCoords();\n        "),r===1)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const l=En("coords",r);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(l[r-2]," + 1) >= outShape[").concat(r," - 2];\n            bool nextColOutOfBounds =\n              (").concat(l[r-1]," + 1) >= outShape[").concat(r," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(l[r-2]," + 1) >= ").concat(this.outputShape[r-2],";\n            bool nextColOutOfBounds =\n              (").concat(l[r-1]," + 1) >= ").concat(this.outputShape[r-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t){const{inputs:e,backend:n}=t,{x:o}=e;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}const Jie={kernelName:fd,backendName:"webgl",kernelFunc:uo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ii(t){const{inputs:e,backend:n}=t,{real:o,imag:s}=e,r=n.makeTensorInfo(o.shape,"complex64"),i=n.texData.get(r.dataId),a=uo({inputs:{x:o},backend:n}),l=uo({inputs:{x:s},backend:n});return i.complexTensorInfos={real:a,imag:l},r}const eae={kernelName:Zy,backendName:"webgl",kernelFunc:Ii};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cP="return (a < 0.) ? b * a : a;",uP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function tae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{alpha:r}=o,i=n.makeTensorInfo([],"float32",bi(r,"float32")),a=j().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dc(uP,s.shape,i.shape):new xa(cP,s.shape,i.shape),l=n.runWebGLProgram(a,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const nae={kernelName:Hm,backendName:"webgl",kernelFunc:tae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dP="return (a < 0.) ? b * a : a;",hP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function oae(t){const{inputs:e,backend:n}=t,{x:o,alpha:s}=e,r=j().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dc(hP,o.shape,s.shape):new xa(dP,o.shape,s.shape);return n.runWebGLProgram(r,[o,s],"float32")}const sae={kernelName:cg,backendName:"webgl",kernelFunc:oae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hc="if (isnan(x)) return x;";function Pe({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:o}){return({inputs:s,backend:r})=>{const{x:i}=s,a=r,l=o||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),h=n(d.values,l);return a.makeTensorInfo(i.shape,l,h)}const c=j().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Wr(i.shape,e):u=new Hs(i.shape,t),a.runWebGLProgram(u,[i],l)}}function dn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:s,dtype:r}){return({inputs:i,backend:a})=>{const{a:l,b:c}=i,u=a;if(o&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[b,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{const[y,w]=v,$={dataId:y.dataId,dtype:y.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:c.shape},C=new xa(t,l.shape,c.shape);return u.runWebGLProgram(C,[$,k],lo(y.dtype,w.dtype))}),x=Ii({inputs:{real:b,imag:g},backend:u});return u.disposeIntermediateTensorInfo(b),u.disposeIntermediateTensorInfo(g),x}const d=r||lo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,b=l.dtype==="string"?Ir(p):p,g=l.dtype==="string"?Ir(m):m,[x,v]=s(l.shape,c.shape,b,g,d),y=u.makeTensorInfo(v,d),w=u.texData.get(y.dataId);return w.values=x,y}const h=j().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new dc(e,l.shape,c.shape,n):f=new xa(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function _u(t,e=!1){if(t==="linear")return e?zie:Oie;if(t==="relu")return e?Vie:Pie;if(t==="elu")return e?Bie:Fie;if(t==="relu6")return e?Wie:Lie;if(t==="prelu")return e?hP:dP;if(t==="leakyrelu")return e?uP:cP;if(t==="sigmoid")return e?Uie:Mie;throw new Error("Activation ".concat(t," has not been implemented for the WebGL backend."))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fP{constructor(e,n,o,s=!1,r=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=yn(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=r?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",g="";a&&(l?b="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):c?b="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):b="vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),g="result = activation(result);");const x=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",y="rc.x";e[0]<n[0]?v="imod(rc.x, ".concat(e[0],")"):n[0]<e[0]&&(y="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(b,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(y,";\n        for (int i = 0; i < ").concat(d,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(m[0],");\n          result += (").concat(p[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(x,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OS={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class FS{constructor(e,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ie(n,o),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PS="return a * b;";function T$(t){const{inputs:e,backend:n}=t,{a:o,b:s}=e,r=lo(o.dtype,s.dtype);if(o.dtype==="complex64"){const a=n.texData.get(o.dataId),l=n.texData.get(s.dataId),c=new FS(OS.REAL,o.shape,s.shape),u=new FS(OS.IMAG,o.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:o.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=Ii({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([o,s])){const a=n.texData.get(o.dataId),l=n.texData.get(s.dataId),[c,u]=oie(o.shape,s.shape,a.values,l.values,r),d=n.makeTensorInfo(u,r),h=n.texData.get(d.dataId);return h.values=c,d}let i;return j().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new dc(PS,o.shape,s.shape):i=new xa(PS,o.shape,s.shape),n.runWebGLProgram(i,[o,s],r)}const rae={kernelName:$d,backendName:"webgl",kernelFunc:T$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t,e,n){const o=[Ul(t.shape),...Hl(t.shape)],s={dtype:t.dtype,shape:o,dataId:t.dataId},r=[Ul(e),...Hl(e)],i=new lP(r,o),a=!0,l=[o],c=n.runWebGLProgram(i,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{shape:r}=o,i=n,a=Q(s.shape),l=tR(r,a),c=Q(l);I(a===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(s.shape,") has ").concat(a," elements. The new shape and old ")+"shape must have the same number of elements.");const u=i.texData.get(s.dataId);return u.isPacked&&!Rp(s.shape,l)&&!(u.texture!==null&&Rp(u.shape,l))?iae(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const aae={kernelName:dg,backendName:"webgl",kernelFunc:ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LS{constructor(e,n){this.variableNames=["x"];const{windowSize:o,batchSize:s,inSize:r,outSize:i}=e;this.outputShape=[s,i];const a=Math.floor(o/4)*4,l=o%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c="sumValue += dot(values * ".concat(_l(d)?d.toPrecision(2):d,", ones);")}let u="";r%o>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(o,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(a,";\n        if (").concat(l===1,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(l===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(l===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lae{constructor(e,n){this.variableNames=["x"];const{windowSize:o,batchSize:s,inSize:r,outSize:i}=e;this.outputShape=[s,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(o/4)*4,d=o%4;let h="\n      if (".concat(n==="sum",") {\n        sumValue += dot(values, ones);\n      } else if (").concat(n==="prod",") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(l,"(values, minMaxValue);\n        if (").concat(n==="min"," || ").concat(n==="max",") {\n          minMaxValue = ").concat(l,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";n==="all"?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):n==="any"&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");let p="";r%o>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(a,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(o,";\n\n        vec4 minMaxValue = vec4(").concat(a,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(d===1,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(d===2,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(d===3,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],o=Ag(n);e.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return e}function Fa(t,e,n,o){const s=cae(t.shape);let r=t;for(let i=0;i<s.length;i++){const{inSize:a,windowSize:l,outSize:c}=s[i];let u,d;n==="mean"?u=i===0?new LS({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new LS({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new lae({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=r,r=o.runWebGLProgram(u,[r],e),d.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uae{constructor(e,n){this.variableNames=["A"];const o=new Array(e.length);for(let i=0;i<o.length;i++)o[i]=e[n[i]];this.outputShape=o,this.rank=o.length;const s=qe(this.rank),r=dae(n);this.userCode="\n    void main() {\n      ".concat(s," resRC = getOutputCoords();\n      setOutput(getA(").concat(r,"));\n    }\n    ")}}function dae(t){const e=t.length;if(e>6)throw Error("Transpose for rank ".concat(e," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(e);for(let s=0;s<t.length;s++)o[t[s]]=n[s];return o.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hae{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const o=new Array(e.length);for(let u=0;u<o.length;u++)o[u]=e[n[u]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const s=qe(this.rank),r=aP("rc",this.rank),i=new Array(this.rank);for(let u=0;u<n.length;u++)i[n[u]]=r[u];const a="vec2(".concat(i.slice(-2).join(),")"),l="++".concat(r[this.rank-1]," < ").concat(o[this.rank-1]),c="getChannel(getA(".concat(i.join(),"), ").concat(a,")");this.userCode="\n    void main() {\n      ".concat(s," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(l,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(r[this.rank-1],";\n      if(++").concat(r[this.rank-2]," < ").concat(o[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(l,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kg(t,e,n){const o=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hae(t.shape,e):new uae(t.shape,e);return n.runWebGLProgram(o,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t,e,n,o){const s=e,r=t.shape.length,i=Re(s,t.shape);let a=i;const l=bt(a,r),c=l!=null;let u=t;c&&(u=Kg(t,l,o),a=Et(a.length,r)),un("sum",a,r);const[d,h]=en(u.shape,a);let f=d;n&&(f=Ft(d,i));const p=Q(h),b=Q(t.shape)/p,g=ae({inputs:{x:u},attrs:{shape:[b,p]},backend:o}),x=_1(t.dtype),v=Fa(g,x,"sum",o),y=ae({inputs:{x:v},attrs:{shape:f},backend:o});return o.disposeIntermediateTensorInfo(g),o.disposeIntermediateTensorInfo(v),c&&o.disposeIntermediateTensorInfo(u),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xg(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o;return fae(s,r,i,n)}const pae={kernelName:bg,backendName:"webgl",kernelFunc:Xg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _n(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{perm:r}=o,i=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[r[u]];let c;if(i.shouldExecuteOnCPU([s])){const d=i.texData.get(s.dataId).values,h=S$(d,s.shape,s.dtype,r,l);c=i.makeTensorInfo(l,s.dtype);const f=i.texData.get(c.dataId);f.values=h}else c=Kg(s,r,i);return c}const mae={kernelName:yl,backendName:"webgl",kernelFunc:_n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pP=1e3;function Ap({a:t,b:e,transposeA:n,transposeB:o,backend:s,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=o?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],p=o?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),b=e.shape.slice(0,-2),g=Q(m),x=Q(b),y=Ie(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);I(d===h,()=>"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(e.shape," and transposeA=").concat(n)+" and transposeB=".concat(o," must match."));const w=n?[g,d,f]:[g,f,d],$=o?[x,p,h]:[x,h,p],k=ae({inputs:{x:t},backend:s,attrs:{shape:w}}),C=ae({inputs:{x:e},backend:s,attrs:{shape:$}}),E=[k,C],S=Math.max(g,x),T=n?k.shape[1]:k.shape[2],P=r!=null,U=i!=null,W=l==="leakyrelu",z=l!=null?_u(l,!0):null,B=P||U||W||z!=null;let q;if((f===1||p===1)&&T>pP&&B===!1){let A=k,D=C;n&&(A=_n({inputs:{x:k},backend:s,attrs:{perm:[0,2,1]}}),E.push(A)),o&&(D=_n({inputs:{x:C},backend:s,attrs:{perm:[0,2,1]}}),E.push(D));const V=p!==1,H=p===1;let K=A;V&&(K=ae({inputs:{x:A},backend:s,attrs:{shape:[S,T,1]}}),E.push(K));const ee=p===1?2:1;let J=D;H&&(J=ae({inputs:{x:D},backend:s,attrs:{shape:[S,1,T]}}),E.push(J));const ne=T$({inputs:{a:K,b:J},backend:s});q=Xg({inputs:{x:ne},backend:s,attrs:{axis:ee,keepDims:!0}}),E.push(ne)}else{const A=lo(t.dtype,e.dtype),D=new fP(w,$,[S,f,p],n,o,P,z,U,W),V=[k,C];if(r!=null&&V.push(r),U&&V.push(i),W){const H=s.makeTensorInfo([],"float32",bi(a,"float32"));V.push(H),E.push(H)}q=s.runWebGLProgram(D,V,A)}const R=ae({inputs:{x:q},backend:s,attrs:{shape:y}});E.push(q);for(const A of E)s.disposeIntermediateTensorInfo(A);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t){const{inputs:e,backend:n,attrs:o}=t,{a:s,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=o;return Ap({a:s,b:r,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const bae={kernelName:sp,backendName:"webgl",kernelFunc:gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MS="return abs(x);";function xae(t){const{inputs:e,backend:n}=t,{x:o}=e;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){const r=n.texData.get(o.dataId),i=rP(r.values);return n.makeTensorInfo(o.shape,o.dtype,i)}let s;return j().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Wr(o.shape,MS):s=new Hs(o.shape,MS),n.runWebGLProgram(s,[o],o.dtype)}const vae={kernelName:Cm,backendName:"webgl",kernelFunc:xae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yae=es+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",wae=Pe({opSnippet:yae}),$ae={kernelName:qu,backendName:"webgl",kernelFunc:wae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kae=es+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",Cae=Pe({opSnippet:kae}),Iae={kernelName:Ku,backendName:"webgl",kernelFunc:Cae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zS="return a + b;",Sae=dn({opSnippet:zS,packedOpSnippet:zS,supportsComplex:!0,cpuKernelImpl:Pre}),Eae={kernelName:ec,backendName:"webgl",kernelFunc:Sae};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tae{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((r,i)=>"T".concat(i));const o=[];this.variableNames.forEach(r=>{o.push("float v".concat(r," = get").concat(r,"AtOutCoords();"))});const s=this.variableNames.map(r=>"v".concat(r)).join(" + ");this.userCode="\n      void main() {\n        ".concat(o.join("\n        "),"\n\n        float result = ").concat(s,";\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nae{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((r,i)=>"T".concat(i));const o=[];this.variableNames.forEach(r=>{o.push("vec4 v".concat(r," = get").concat(r,"AtOutCoords();"))});const s=this.variableNames.map(r=>"v".concat(r)).join(" + ");this.userCode="\n      void main() {\n        ".concat(o.join("\n        "),"\n\n        vec4 result = ").concat(s,";\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(t){const{inputs:e,backend:n}=t,o=e;if(o.length===1)return uo({inputs:{x:o[0]},backend:n});if(o.length>j().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(o.length/2),c=hf({inputs:o.slice(0,l),backend:n}),u=hf({inputs:o.slice(l),backend:n});return hf({inputs:[c,u],backend:n})}const s=o.map(l=>l.dtype).reduce((l,c)=>lo(l,c)),r=o.map(l=>l.shape),a=j().getBool("WEBGL_PACK")?new Nae(o[0].shape,r):new Tae(o[0].shape,r);return n.runWebGLProgram(a,o,s)}const Rae={kernelName:Gy,backendName:"webgl",kernelFunc:hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o,a=s.shape.length,l=Re(r,s.shape);let c=l;const u=bt(c,a);let d=s;u!=null&&(d=_n({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Et(c.length,a)),un("all",c,a);const[h,f]=en(d.shape,c),p=Q(f),m=ae({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Fa(m,m.dtype,"all",n);let g;if(i){const x=Ft(h,l);g=ae({inputs:{x:b},backend:n,attrs:{shape:x}})}else g=ae({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Dae={kernelName:jy,backendName:"webgl",kernelFunc:Aae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o,a=s.shape.length,l=Re(r,s.shape);let c=l;const u=bt(c,a);let d=s;u!=null&&(d=_n({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Et(c.length,a)),un("any",c,a);const[h,f]=en(d.shape,c),p=Q(f),m=ae({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Fa(m,m.dtype,"any",n);let g;if(i){const x=Ft(h,l);g=ae({inputs:{x:b},backend:n,attrs:{shape:x}})}else g=ae({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Oae={kernelName:qy,backendName:"webgl",kernelFunc:_ae};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fae{constructor(e,n,o){this.variableNames=["A"];const{windowSize:s,batchSize:r,outSize:i}=e;o||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",l=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(s,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(s,"; i++) {\n          int inIdx = ").concat(l,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(a," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pae{constructor(e,n,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,I(e.length>2,()=>"Packed arg".concat(o.charAt(0).toUpperCase()+o.slice(1)," supports only inputs with rank above 2."));const r=e[e.length-1],i=Math.ceil(r/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=qe(l),u=En("coords",l);let d,h;if(i===1){h=l+1;const C=qe(h);d="\n        ".concat(C," sourceLocR = ").concat(C,"(").concat(u.join(),", 0);\n        ++").concat(u[l-1],";\n        ").concat(C," sourceLocG = ").concat(C,"(").concat(u.join(),", 0);\n        ++").concat(u[l-2],";\n        ").concat(C," sourceLocA = ").concat(C,"(").concat(u.join(),", 0);\n        --").concat(u[l-1],";\n        ").concat(C," sourceLocB = ").concat(C,"(").concat(u.join(),", 0);\n        --").concat(u[l-2],";")}else h=l,d="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(u[l-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(u[l-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(u[l-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(u[l-2],";");const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(C=>"int "+C),b=En("sourceLocR",h-1).concat("inIdx.r"),g=En("sourceLocG",h-1).concat("inIdx.g"),x=En("sourceLocB",h-1).concat("inIdx.b"),v=En("sourceLocA",h-1).concat("inIdx.a"),y=o==="max"?"greaterThan":"lessThan",w=s?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),$="vec4(\n            getAChannel(".concat(b.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),k=s?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(f.join(),"),\n                                          vec2(").concat(f.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(f.join(),"),\n                               vec2(").concat(f.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(u[l-1]," < ").concat(a[l-1]-1,";\n        bool hasNextRow = ").concat(u[l-2]," < ").concat(a[l-2]-1,";\n        ").concat(d,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat($,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat($,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(y,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mP(t,e,n,o=null){let s=e.shape[0],r=e.shape[1];o!=null&&(s=o.shape[0],r=o.shape[1]);const i=Ag(r),a={windowSize:i,inSize:r,batchSize:s,outSize:Math.ceil(r/i)},l=new Fae(a,n,o==null),c=[e];o!=null&&c.push(o);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=mP(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function gP(t,e,n,o=null){const s=o!=null?o.shape:e.shape,r=s[s.length-1],i=Ag(r),a=new Pae(s,i,n,o==null),l=o==null?[e]:[e,o],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=gP(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function bP(t,e,n,o){const s=[n];if(un("arg"+o.charAt(0).toUpperCase()+o.slice(1),s,e.shape.length),!j().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const r=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),r.push(l));const[c,u]=en(l.shape,s),d=Q(u),h=ae({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});r.push(h);const f=mP(t,h,o);r.push(f);const p=ae({inputs:{x:f},backend:t,attrs:{shape:c}});return r.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return gP(t,e,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r}=o;let i=Re(r,s.shape);const a=bt(i,s.shape.length);let l=s;const c=[];a!=null&&(l=_n({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Et(i.length,l.shape.length)),un("argMax",[i[0]],l.shape.length);const u=bP(n,l,i[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Mae={kernelName:Im,backendName:"webgl",kernelFunc:Lae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zae(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r}=o;let i=Re(r,s.shape);const a=bt(i,s.shape.length);let l=s;const c=[];a!=null&&(l=_n({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Et(i.length,l.shape.length)),un("argMin",[i[0]],l.shape.length);const u=bP(n,l,i[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Bae={kernelName:Sm,backendName:"webgl",kernelFunc:zae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vae=es+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Wae=Pe({opSnippet:Vae}),Uae={kernelName:Xu,backendName:"webgl",kernelFunc:Wae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hae=es+"return log(x + sqrt(x * x + 1.0));",Gae=Pe({opSnippet:Hae}),jae={kernelName:Yu,backendName:"webgl",kernelFunc:Gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qae=es+"\n  return atan(x);\n",Kae=Pe({opSnippet:qae}),Xae={kernelName:Qu,backendName:"webgl",kernelFunc:Kae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yae=E$+"\n  return atan(a, b);\n",Qae="\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oa+"\n  return result;\n",Zae=dn({opSnippet:Yae,packedOpSnippet:Qae}),Jae={kernelName:Ju,backendName:"webgl",kernelFunc:Zae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ele=es+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",tle=Pe({opSnippet:ele}),nle={kernelName:Zu,backendName:"webgl",kernelFunc:tle};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ou{constructor(e,n,o,s=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",b="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let x="0.0";if(m||(x="-1.0 / 1e-20"),o){const C=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(a,", ").concat(l,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(u,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(C," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(s?r?b:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}const v="max";let y="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,$=i%4,k="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(v,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              getValue(batch, xR, xC + 3 * ").concat(u,", d)\n            );\n\n            ").concat(k,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat($===1,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat($===2,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat($===3,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              initializationValue\n            );\n\n            ").concat(k,"\n          }\n        }\n        setOutput(").concat(y,");\n      }\n    ")}}class N${constructor(e,n,o,s=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,b=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg";let y="0.0";if(v||(y="-1.0 / 1e-20"),o){const S=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(a,", ").concat(l,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(b,", ").concat(g,", ").concat(x,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(u,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(S," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(s?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}const w="max";let $="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&($="avgValue / max(count, 1.0)");const k=Math.floor(i/4)*4,C=i%4,E="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(a,", ").concat(l,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(b,", ").concat(g,", ").concat(x,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(k,";\n            if (").concat(C===1,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(C===2,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(C===3,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n        }\n        setOutput(").concat($,");\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ole(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e;lh(s,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=o,c=1;I(vn(i,c),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(c,"'"));const u=Zo(s.shape,r,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Ve(u.inShape,u.outShape))return uo({inputs:{x:s},backend:n});const d=new Ou(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const sle={kernelName:Em,backendName:"webgl",kernelFunc:ole};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rle(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=o,u=[1,1,1],d=Nr(s.shape,r,i,u,a,l,c),h=new N$(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const ile={kernelName:Tm,backendName:"webgl",kernelFunc:rle};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ale{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,o=e.filterWidth,s=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*o);this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(d,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(a,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class lle{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,o=e.filterHeight,s=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,b=f-1-e.padInfo.left,g=1/(n*o*s);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(m,", ").concat(b,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cle(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,i=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=o,d=[1,1,1],h=Nr(i.shape,a,l,d,c,u),f=new lle(h);return n.runWebGLProgram(f,[s],i.dtype)}const ule={kernelName:Xy,backendName:"webgl",kernelFunc:cle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dle(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,i=r;lh([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=o,u=Zo(i.shape,a,l,1,c),d=new ale(u);return n.runWebGLProgram(d,[s],i.dtype)}const hle={kernelName:Ky,backendName:"webgl",kernelFunc:dle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fle(t){const{inputs:e,backend:n,attrs:o}=t,{a:s,b:r}=e,{transposeA:i,transposeB:a}=o;return Ap({a:s,b:r,transposeA:i,transposeB:a,backend:n})}const ple={kernelName:Nm,backendName:"webgl",kernelFunc:fle};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mle{constructor(e,n,o,s,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ie(e,n),Ie(e,o);let a="0.0";s!=null&&(Ie(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(Ie(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(a,";\n        float scale = ").concat(l,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gle{constructor(e,n,o,s,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ie(e,n),Ie(e,o);let a="vec4(0.0)";s!=null&&(Ie(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(Ie(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(a,";\n        vec4 scale = ").concat(l,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ble=({inputs:t,backend:e,attrs:n})=>{const{x:o,mean:s,variance:r,offset:i,scale:a}=t;I(s.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[o,s,r];let u=null;i!=null&&(u=i.shape,c.push(i));let d=null;a!=null&&(d=a.shape,c.push(a));const h=j().getBool("WEBGL_PACK_NORMALIZATION")?new gle(o.shape,s.shape,r.shape,u,d,l):new mle(o.shape,s.shape,r.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},xle={kernelName:Vm,backendName:"webgl",kernelFunc:ble};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vle{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=qe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const o=yle(this.rank);let s;const r=e.map((i,a)=>"sourceLoc.".concat(Jx[a]," = start[").concat(a,"] + coords.").concat(Jx[a],";"));s="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(s,"\n        setOutput(getSource(").concat(o,"));\n      }\n    ")}}const Jx=["x","y","z","w","u","v"];function yle(t){if(t===1)return"sourceLoc";if(t<=6)return Jx.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(t," is not yet supported"))}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wle{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=qe(this.rank),o=En("coords",this.rank),s=En("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":"vec2(".concat(s.slice(-2).join(),")"),i="getChannel(getSource(".concat(s.join(),"), ").concat(r,")"),a="\n      result.x = ".concat(i,";\n      if (++").concat(o[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(s[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(s[this.rank-1],";\n      }\n    "),l=this.rank===1?"":"\n      --".concat(o[this.rank-1],";\n      if (++").concat(o[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(s[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(o[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(s[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(e.map((u,d)=>"start[".concat(d,"]")).join(),");"):e.map((u,d)=>"".concat(s[d]," = ").concat(o[d]," + start[").concat(d,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(a,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $le(t,e,n,o){const s=o.texData.get(t.dataId),r=o.makeTensorInfo(n,t.dtype),i=o.texData.get(r.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=Cw(e,ve(t.shape));s.slice&&(a+=s.slice.flatOffset),i.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=o.dataRefCount.get(i.slice.origDataId)||1;return o.dataRefCount.set(i.slice.origDataId,l+1),r}function fc(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{begin:r,size:i}=o,[a,l]=Rg(s,r,i);if(ww(s,a,l),Q(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=pie(d.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=n.texData.get(s.dataId),u=kw(s.shape,a,l);if(c||!u){const d=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wle(l):new vle(l),h=[a];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),$le(s,a,l,n)}const kle={kernelName:gg,backendName:"webgl",kernelFunc:fc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cle=t=>{const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockShape:r,crops:i}=o;I(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((x,v)=>x*v),l=Xd(s.shape,r,a),c=Yd(l.length,r.length),u=Qd(s.shape,r,a),d=Nw(i,r.length),h=Rw(u,i,r.length),f=[],p=ae({inputs:{x:s},backend:n,attrs:{shape:l}}),m=_n({inputs:{x:p},backend:n,attrs:{perm:c}}),b=ae({inputs:{x:m},backend:n,attrs:{shape:u}}),g=fc({inputs:{x:b},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(b),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),g},Ile={kernelName:Rm,backendName:"webgl",kernelFunc:Cle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sle(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,weights:r}=e,{size:i}=o,a=n.readSync(s.dataId),l=n.readSync(r.dataId),c=sP(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}const Ele={kernelName:Yy,backendName:"webgl",kernelFunc:Sle};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tle="\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",Nle="\n  return float(int(a.r) & int(b.r));\n";function Rle(t){const{inputs:e,backend:n}=t,{a:o,b:s}=e,r=j().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=j().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,s])||i===1){const l=n.texData.get(o.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=Mre(o.shape,s.shape,l,c,o.dtype),h=n.makeTensorInfo(d,o.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let a;return r?a=new dc(Tle,o.shape,s.shape,!1):a=new xa(Nle,o.shape,s.shape),n.runWebGLProgram(a,[o,s],o.dtype)}const Ale={kernelName:Qy,backendName:"webgl",kernelFunc:Rle};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dle(t){const{inputs:e,backend:n}=t,{s0:o,s1:s}=e,r=n.readSync(o.dataId),i=n.readSync(s.dataId),a=Ie(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const _le={kernelName:aR,backendName:"webgl",kernelFunc:Dle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ole="return float(a != b);",xP=dn({opSnippet:Ole,cpuKernelImpl:rie,dtype:"bool"}),Fle={kernelName:sg,backendName:"webgl",kernelFunc:xP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uh(t){const{inputs:e,backend:n}=t,{input:o}=e,s=n.texData.get(o.dataId);return uo({inputs:{x:s.complexTensorInfos.real},backend:n})}const Ple={kernelName:$1,backendName:"webgl",kernelFunc:uh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lle="return float(int(x));";function Mle(t,e){const n=new Hs(t.shape,Lle),o=e.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ev(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{dtype:r}=o;if(r==="complex64"){if(s.dtype==="complex64")return uo({inputs:{x:s},backend:n});const i=Yt(s.shape),a=ev({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Ii({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const i=uh({inputs:{input:s},backend:n}),a=ev({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!nR(s.dtype,r)){const i=uo({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[a,l,c]=zre(i,s.shape,s.dtype,r);return n.makeTensorInfo(a,l,c)}if(r==="int32")return Mle(s,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",bn("bool",1)),l=xP({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error("Error in Cast: failed to cast ".concat(s.dtype," to ").concat(r))}const zle={kernelName:ed,backendName:"webgl",kernelFunc:ev};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BS="return ceil(x);",Ble=Pe({opSnippet:BS,packedOpSnippet:BS,cpuKernelImpl:Bre}),Vle={kernelName:td,backendName:"webgl",kernelFunc:Ble};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wle{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ule{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hle(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{clipValueMin:r,clipValueMax:i}=o;let a;j().getBool("WEBGL_PACK_CLIP")?a=new Ule(s.shape):a=new Wle(s.shape);const l=[[r],[i]];return n.runWebGLProgram(a,[s],s.dtype,l)}const Gle={kernelName:nd,backendName:"webgl",kernelFunc:Hle};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jle{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VS(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function qle(t){const{inputs:e,backend:n}=t,{x:o}=e,s=n.texData.get(o.dataId),r=new jle(o.shape),i=[VS(o,s.complexTensorInfos.real),VS(o,s.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const Kle={kernelName:Am,backendName:"webgl",kernelFunc:qle};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xle{constructor(e){this.outputShape=[],this.outputShape=Xs(e,1),this.variableNames=e.map((i,a)=>"T".concat(a));const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const o=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<n.length;i++){const a=n[i-1];o.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(a,"));"))}const s=n.length,r=n[n.length-1];o.push("else setOutput(getT".concat(s,"(yR, yC-").concat(r,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(o.join("\n        "),"\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yle{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xs(e,n);const o=this.outputShape,s=o.length,r=qe(s),i=En("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,b)=>"T".concat(b));const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),d=a.join();let h="if (".concat(c," < ").concat(l[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(u.join(),"));\n        }");for(let m=1;m<l.length;m++){const b=l[m-1];h+="\n        if (".concat(c," < ").concat(l[m],"  && ").concat(c," >= ").concat(l[m-1],") {\n          return getChannel(\n            getT").concat(m,"(").concat(qh(a,c,b),"),\n            vec2(").concat(qh(u,c,b),"));\n        }")}const f=l.length,p=l[l.length-1];h+="\n        return getChannel(\n          getT".concat(f,"(").concat(qh(a,c,p),"),\n          vec2(").concat(qh(u,c,p),"));"),this.userCode="\n      float getValue(".concat(a.map(m=>"int "+m),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(r," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[s-1]," = ").concat(i[s-1]," + 1;\n        if (").concat(i[s-1]," < ").concat(o[s-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[s-2]," = ").concat(i[s-2]," + 1;\n        if (").concat(i[s-2]," < ").concat(o[s-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[s-1]," = ").concat(i[s-1]," - 1;\n        if (").concat(i[s-2]," < ").concat(o[s-2]," &&\n            ").concat(i[s-1]," < ").concat(o[s-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}}function qh(t,e,n){const o=t.indexOf(e);return t.map((r,i)=>i===o?"".concat(r," - ").concat(n):r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yg(t){const{inputs:e,backend:n}=t,{input:o}=e,s=n.texData.get(o.dataId);return uo({inputs:{x:s.complexTensorInfos.imag},backend:n})}const Qle={kernelName:p1,backendName:"webgl",kernelFunc:Yg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zc(t,e,n){const o=t[0].dtype;if(o==="complex64"){const f=t.map(x=>uh({inputs:{input:x},backend:n})),p=t.map(x=>Yg({inputs:{input:x},backend:n})),m=zc(f,e,n),b=zc(p,e,n),g=Ii({inputs:{real:m,imag:b},backend:n});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),g}let s=n.shouldExecuteOnCPU(t);if(o==="string"&&(s=!0),s){const f=t.map(y=>{const $=[-1,Q(y.shape.slice(e))];return ae({inputs:{x:y},backend:n,attrs:{shape:$}})}),p=f.map(y=>({vals:n.readSync(y.dataId),shape:y.shape})),m=Xs(f.map(y=>y.shape),1),b=f[0].shape[0]===1,g=Vre(p,m,o,b),x=Xs(t.map(y=>y.shape),e),v=n.makeTensorInfo(x,o,g);return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const r=t.filter(f=>Q(f.shape)>0),i=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(r.length===1){const f=i?new Hs(t[0].shape,Fr):new Wr(t[0].shape,Fr);return n.runWebGLProgram(f,t,o)}const a=j().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const f=[];for(let m=0;m<r.length;m+=a){const b=r.slice(m,m+a);f.push(zc(b,e,n))}const p=zc(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(i){const f=new Yle(r.map(p=>p.shape),e);return n.runWebGLProgram(f,r,o)}const{tensors2D:l,outShape:c}=Zle(r,e,n),u=new Xle(l.map(f=>f.shape)),d=n.runWebGLProgram(u,l,o);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=ae({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function Zle(t,e,n){const o=Xs(t.map(r=>r.shape),e);return{tensors2D:t.map(r=>ae({inputs:{x:r},attrs:{shape:[-1,Q(r.shape.slice(e))]},backend:n})),outShape:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vP(t){const{inputs:e,backend:n,attrs:o}=t,{axis:s}=o,r=Re(s,e[0].shape)[0],i=e.map(c=>c.shape);Sw(i,r);const a=Xs(e.map(c=>c.shape),r);if(Q(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>Q(c.shape)>0);return l.length===1?uo({inputs:{x:l[0]},backend:n}):zc(l,r,n)}const Jle={kernelName:Dm,backendName:"webgl",kernelFunc:vP};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yP{constructor(e,n=!1,o=null,s=!1,r=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,b=e.dataFormat==="channelsLast",g=b?1:2,x=b?2:3,v=b?3:1;let y="",w="";o&&(s?y="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(o,"\n        }"):r?y="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(o,"\n        }"):y="\n          float activation(float x) {\n            ".concat(o,"\n          }\n        "),w="result = activation(result);");const $=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(y,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(x,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(u,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(b,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(m===1,") {\n\n              if (").concat(b,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(m===2,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(b,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(m===3,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(b,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat($,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}}class ece{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(i,", ").concat(a,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(l,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(u,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(m===1,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(m===2,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(m===3,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wP{constructor(e,n=!1,o=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let b=0;b<u;b++)h+="\n           vec4 xTexelC".concat(b*2,";\n           int xTexelC").concat(b*2,"Ready;\n           vec4 xTexelC").concat(b*2+1,";\n           int xTexelC").concat(b*2+1,"Ready;\n           vec4 xC").concat(b,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let b=0;b<u;b++)h+="\n           xTexelC".concat(b*2," = vec4(0.0);\n           xTexelC").concat(b*2,"Ready = 0;\n           xTexelC").concat(b*2+1," = vec4(0.0);\n           xTexelC").concat(b*2+1,"Ready = 0;\n           xC").concat(b," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let b=0;b<(d+1)/2;b++){const g=b*2;if(h+="\n           xC = xCCorner + ".concat(g*l,";\n           "),a===1){if(g<u&&(i%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),l===1&&g>0?h+="\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):h+="\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<u)){const x=i%2===0?zy(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(x,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),l>1?h+="\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):h+="\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):x===1?h+="\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):h+="\n                     xCOffset = xC + ".concat(x,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<u&&(i%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<u&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<u&&(h+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<u&&(h+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<u&&(h+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let f="",p="";o&&(s?f="vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(o,"\n         }"):r?f="vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(o,"\n         }"):f="vec4 activation(vec4 x) {\n           ".concat(o,"\n         }"),p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(f,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(m,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tce{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=yn(this.outputShape.length);const{dataFormat:o}=n,s=On(),r=o==="channelsLast",i=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(u,";\n\n          ").concat(l,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(a,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(u*2+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(u*2+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(s.output," = result;\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dp(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function $P({x:t,filter:e,convInfo:n,backend:o,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,c=o.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let b;const g=[];if(r!=null){const y=Dp(r.shape,f);y!=null&&(r=ae({inputs:{x:r},backend:o,attrs:{shape:y}}),g.push(r))}if(s!=null){const y=Dp(s.shape,f);y!=null&&(s=ae({inputs:{x:s},backend:o,attrs:{shape:y}}),g.push(s))}if(!((d===1||h===1)&&u>pP)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&Ve(c.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,y,n.inChannels],dtype:t.dtype},$=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,I(Rp(c.shape,w.shape),()=>"packed reshape ".concat(c.shape," to ").concat(w.shape," isn't free"));const k=ae({inputs:{x:e},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(k);const C=Ap({a:w,b:k,backend:o,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),E=o.texData.get(C.dataId);I(E.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=$,E.shape=n.outShape,b=uo({inputs:{x:C},backend:o}),b.shape=n.outShape,g.push(C)}else{const y=n.outHeight*n.outWidth,w=ae({inputs:{x:t},backend:o,attrs:{shape:f?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),$=ae({inputs:{x:e},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),k=Ap({a:f?w:$,b:f?$:w,transposeA:!f,transposeB:m,backend:o,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:i});b=ae({inputs:{x:k},backend:o,attrs:{shape:n.outShape}}),g.push(w),g.push($),g.push(k)}for(const y of g)o.disposeIntermediateTensorInfo(y);return b}function kP({x:t,filter:e,convInfo:n,backend:o,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*c*u,b=h*d,g=[n.batchSize,m,b],x=!0,v=!1,y=[];if(r!=null){const R=Dp(r.shape,p);R!=null&&(r=ae({inputs:{x:r},backend:o,attrs:{shape:R}}),y.push(r))}if(s!=null){const R=Dp(s.shape,p);R!=null&&(s=ae({inputs:{x:s},backend:o,attrs:{shape:R}}),y.push(s))}const w=ae({inputs:{x:e},backend:o,attrs:{shape:[1,m,Q(e.shape)/m]}});y.push(w);const $=new tce(g,n),k=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=o.runWebGLProgram($,[t],"float32",k),E=ae({inputs:{x:C},backend:o,attrs:{shape:g}});y.push(C),y.push(E);const S=s!=null,T=r!=null,P=a==="leakyrelu",U=a?_u(a,!0):null,W=new fP(p?E.shape:w.shape,p?w.shape:E.shape,p?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],x,v,S,U,T,P),z=p?[E,w]:[w,E];if(s&&z.push(s),T&&z.push(r),P){const R=o.makeTensorInfo([],"float32",bi(i,"float32"));z.push(R),y.push(R)}const B=o.runWebGLProgram(W,z,"float32"),q=ae({inputs:{x:B},backend:o,attrs:{shape:n.outShape}});y.push(B);for(const R of y)o.disposeIntermediateTensorInfo(R);return q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=o,d=Rr(l),h=cn(s.shape,r.shape,i,c,a,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=$P({x:s,filter:r,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&j().getBool("WEBGL_EXP_CONV")){const m=new wP(h),b=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[s,r],"float32",b)}else if(j().getBool("WEBGL_CONV_IM2COL"))f=kP({x:s,filter:r,convInfo:h,backend:n});else{const m=new yP(h);f=n.runWebGLProgram(m,[s,r],"float32")}const p=ae({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const oce={kernelName:_m,backendName:"webgl",kernelFunc:nce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sce{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,o=e.strideWidth,s=e.padInfo.top,r=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(s,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(o," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class rce{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,o=e.filterWidth,s=e.strideHeight,r=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i?1:2,u=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(u,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(o," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class ice{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,o=e.strideHeight,s=e.strideWidth,r=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(o," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(s," - ").concat(a,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class ace{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,o=e.filterHeight,s=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=o-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(c,", ").concat(u,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(o,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(o," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(s,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(s," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=o,d=Rr(l),h=cn(s.shape,u,i,1,a,c,!1,d),f=new sce(h);return n.runWebGLProgram(f,[s,r],"float32")}const cce={kernelName:Jy,backendName:"webgl",kernelFunc:lce};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uce{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=yn(this.outputShape.length);const n=e.filterHeight,o=e.filterWidth,s=n-1-e.padInfo.top,r=o-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(r,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            int wCPerm = ").concat(o," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dce(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=o,d=Rr(c),h=cn(i,r.shape,a,1,l,u,!1,d);if(j().getBool("WEBGL_PACK")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new uce(h);return n.runWebGLProgram(p,[s,r],"float32",f)}else{const f=new rce(h);return n.runWebGLProgram(f,[s,r],"float32")}}const hce={kernelName:Om,backendName:"webgl",kernelFunc:dce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dilations:l}=o,c=vi(s.shape,r.shape,i,l,a),u=new ece(c);return n.runWebGLProgram(u,[s,r],"float32")}const pce={kernelName:Fm,backendName:"webgl",kernelFunc:fce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,pad:a,filterShape:l}=o,c=vi(s.shape,l,i,1,a),u=new ice(c);return n.runWebGLProgram(u,[s,r],"float32")}const gce={kernelName:e1,backendName:"webgl",kernelFunc:mce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bce(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{pad:i,strides:a,inputShape:l}=o,c=vi(l,r.shape,a,1,i),u=new ace(c);return n.runWebGLProgram(u,[s,r],"float32")}const xce={kernelName:t1,backendName:"webgl",kernelFunc:bce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vce=hc+"\n  return cos(x);\n",yce="\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Oa,"\n  return result;\n"),wce=Pe({opSnippet:vce,packedOpSnippet:yce}),$ce={kernelName:od,backendName:"webgl",kernelFunc:wce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kce="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",Cce=Pe({opSnippet:kce}),Ice={kernelName:sd,backendName:"webgl",kernelFunc:Cce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sce{constructor(e,n,o,s,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,c]=e,[u]=n,[d,h]=o;this.outputShape=[u,d,h,c];const f=s==="bilinear"?1:0,[p,m]=["".concat(a-1,".0"),"".concat(l-1,".0")],[b,g,x]=d>1?["".concat((a-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,y,w]=h>1?["".concat((l-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(m," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(m)];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(y,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(w,";\n        if( in_x < 0.0 || in_x > ").concat(m," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(f," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ece=t=>{const{inputs:e,backend:n,attrs:o}=t,{image:s,boxes:r,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=o,u=new Sce(s.shape,r.shape,a,l,c);return n.runWebGLProgram(u,[s,r,i],"float32")},Tce={kernelName:o1,backendName:"webgl",kernelFunc:Ece};var Fu;(function(t){t.Prod="*",t.Sum="+"})(Fu||(Fu={}));class WS{constructor(e,n,o,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,i=this.op===Fu.Prod?"1.0":"0.0",a=o?i:"getX(".concat(US(r,"coords",this.op),")"),l=this.outputShape[this.outputShape.length-1];let c="",u="";o?(c=s?"end != ".concat(l-1):"end != 0",u=s?"end + 1":"end - 1"):(c=s?"end + pow2 < ".concat(l):"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(qe(r)," coords = getOutputCoords();\n        int end = ").concat(HS(r,"coords",this.op),";\n        float val = ").concat(a,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(u,";\n          ").concat(HS(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(US(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function US(t,e,n){if(t===1)return"".concat(e);if(t===2)return"".concat(e,".x, ").concat(e,".y");if(t===3)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z");if(t===4)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z, ").concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}function HS(t,e,n){if(t===1)return"".concat(e);if(t===2)return"".concat(e,".y");if(t===3)return"".concat(e,".z");if(t===4)return"".concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CP(t,e,n,o,s,r){const i=e.shape.length,a=bt([o],i);let l=e;a!=null&&(l=_n({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Et(1,i)[0];if(c!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(e.shape.length-1," ")+"but got axis=".concat(o));const u=l.shape[c];let d=uo({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new WS(t,l.shape,!1,r),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const h=new WS(t,l.shape,s,r),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=yi(a),f=_n({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,exclusive:i,reverse:a}=o;return CP(Fu.Prod,s,n,r,i,a)}const Rce={kernelName:n1,backendName:"webgl",kernelFunc:Nce};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ace(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,exclusive:i,reverse:a}=o;return CP(Fu.Sum,s,n,r,i,a)}const Dce={kernelName:Pm,backendName:"webgl",kernelFunc:Ace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,weights:r}=e,{size:i,binaryOutput:a}=o;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(r.dataId),u=sP(l,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(r),u=Lre(l,c,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(s.shape.length,"."))}const Oce={kernelName:s1,backendName:"webgl",kernelFunc:_ce};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fce{constructor(e,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=o,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockSize:r,dataFormat:i}=o,a=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],c=i==="NHWC"?s.shape[2]:s.shape[3],u=i==="NHWC"?s.shape[3]:s.shape[1],d=l*r,h=c*r,f=u/(r*r),p=i==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new Fce(p,r,i);return n.runWebGLProgram(m,[s],s.dtype)}const Lce={kernelName:r1,backendName:"webgl",kernelFunc:Pce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IP{constructor(e,n=!1,o=null,s=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";o&&(s?c="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(o,"\n        }"):r?c="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(o,"\n        }"):c="\n          float activation(float x) {\n            ".concat(o,"\n          }\n        "),u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(l,";\n        int q = d2 - d1 * ").concat(l,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SP{constructor(e,n=!1,o=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=yn(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<d;g++)f+="\n          vec4 xTexelC".concat(g*2,";\n          int xTexelC").concat(g*2,"Ready;\n          vec4 xTexelC").concat(g*2+1,";\n          int xTexelC").concat(g*2+1,"Ready;\n          vec4 xC").concat(g,";");f+="\n    for (int r = 0; r < ".concat(u,"; r++) {\n      ");for(let g=0;g<d;g++)f+="\n          xTexelC".concat(g*2," = vec4(0.0);\n          xTexelC").concat(g*2,"Ready = 0;\n          xTexelC").concat(g*2+1," = vec4(0.0);\n          xTexelC").concat(g*2+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){const x=g*2;if(f+="\n          xC = xCCorner + ".concat(x*c,";\n          "),l===1){if(x<d&&(a%2===1?(f+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                  xTexelC").concat(x," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(x,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(x,"Ready = 1;\n                }\n              "),c===1&&x>0?f+="\n                xC".concat(x," = vec4(xTexelC").concat(x-2,".zw, xTexelC").concat(x,".xy);\n                "):f+="\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(x," = vec4(previous.zw, xTexelC").concat(x,".xy);\n                  } else {\n                    xC").concat(x," = vec4(0.0, 0.0, xTexelC").concat(x,".xy);\n                  }\n                  ")):f+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                  xTexelC").concat(x," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(x,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(x,"Ready = 1;\n                }\n\n                xC").concat(x," = xTexelC").concat(x,";\n                "),x+1<d)){const v=a%2===0?zy(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(v,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                    xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(x+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(x+1,"Ready = 1;\n                  }\n                  "),c>1?f+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(x+1," = vec4(previous.zw, xTexelC").concat(x+1,".xy);\n                    } else {\n                     xC").concat(x+1," = vec4(0.0, 0.0, xTexelC").concat(x+1,".xy);\n                    }\n                    "):f+="\n                    xC".concat(x+1," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".xy);\n                    ")):v===1?f+="\n                    xC".concat(x+1," = xTexelC").concat(x,";\n                    "):f+="\n                    xCOffset = xC + ".concat(v,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                      xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(x+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(x+1,"Ready = 1;\n                    }\n\n                    xC").concat(x+1," = xTexelC").concat(x+1,";\n                    ")}}else x<d&&(a%2===1?(f+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                  xTexelC").concat(x," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(x,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(x,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                  xTexelC").concat(x+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(x+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(x+1,"Ready = 1;\n                }\n\n                xC").concat(x," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".zw);\n              "),x+1<d&&(f+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(x+1," = vec4(xTexelC").concat(x+1,".xy, final.xy);\n                "))):(f+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                  xTexelC").concat(x," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(x,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(x,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                  xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(x+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(x+1,"Ready = 1;\n                }\n\n                xC").concat(x," = vec4(\n                  xTexelC").concat(x,".xy, xTexelC").concat(x+1,".xy);\n              "),x+1<d&&(f+="\n                  xC".concat(x+1," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".zw);\n                "))));x<d&&(f+="\n            wTexel = getW(r, ".concat(x,", d1, q);\n            dotProd += xC").concat(x," * vec4(wTexel.xz, wTexel.xz);\n          "),x+1<d&&(f+="\n              wTexel = getW(r, ".concat(x+1,", d1, q);\n              dotProd += xC").concat(x+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}f+="\n    }\n  ",f+="\n      }\n    ";let p="",m="";o&&(s?p="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(o,"\n        }"):r?p="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(o,"\n        }"):p="vec4 activation(vec4 x) {\n          ".concat(o,"\n        }"),m="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(f,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(b,"\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=o;let u=l;u==null&&(u=[1,1]),I(vn(i,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(u,"'"));const d=cn(s.shape,r.shape,i,u,a,c,!0);let h;j().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new SP(d):h=new IP(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,r],"float32",f)}const zce={kernelName:Lm,backendName:"webgl",kernelFunc:Mce};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bce{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,o=e.strideWidth,s=e.padInfo.top,r=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(s,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(o," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Vce{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,o=e.filterWidth,s=e.strideHeight,r=e.strideWidth,i=n-1-e.padInfo.top,a=o-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(o," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(l,"; dm++) {\n              int d2 = d1 * ").concat(l," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,dy:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=o,d=cn(s.shape,u,i,a,l,c,!0),h=new Bce(d);return n.runWebGLProgram(h,[s,r],"float32")}const Uce={kernelName:i1,backendName:"webgl",kernelFunc:Wce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hce(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,filter:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=o,d=cn(u,r.shape,i,a,l,c,!0),h=new Vce(d);return n.runWebGLProgram(h,[s,r],"float32")}const Gce={kernelName:a1,backendName:"webgl",kernelFunc:Hce};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jce{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qce(t){const{inputs:e,backend:n}=t,{x:o}=e,s=[...o.shape,...o.shape],r=Q(o.shape),i=ae({inputs:{x:o},backend:n,attrs:{shape:[r]}}),a=new jce(r),l=n.runWebGLProgram(a,[i],i.dtype),c=ae({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const Kce={kernelName:lR,backendName:"webgl",kernelFunc:qce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xce{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:o,padInfo:s,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=s;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(a,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(l,"; w++) {\n              int wIn = wBeg + w * ").concat(u,";\n\n              if (wIn >= 0 && wIn < ").concat(o,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yce(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r}=e,{strides:i,pad:a,dilations:l}=o,c=Hd(s.shape,r.shape,i,a,"NHWC",l);let u;const d=new Xce(c);u=n.runWebGLProgram(d,[s,r],"float32");const h=ae({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const Qce={kernelName:Mm,backendName:"webgl",kernelFunc:Yce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zce(t){const{inputs:e,backend:n,attrs:o}=t,{equation:s}=o,r=e,{allDims:i,summedDims:a,idDims:l}=Mw(s,r.length);Bw(i.length,l,r);const{path:c,steps:u}=Vw(a,l),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const b of u[m]){const{permutationIndices:g,expandDims:x}=zw(f,l[b]);let v;Ww(g)?v=r[b]:(v=_n({inputs:{x:r[b]},backend:n,attrs:{perm:g}}),p.push(v));const y=v.shape.slice();for(let w=0;w<x.length;++w)y.splice(x[w],0,1);Ve(v.shape,y)||(v=ae({inputs:{x:v},backend:n,attrs:{shape:y}}),p.push(v)),h===null?h=v:(h=T$({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=Xg({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const Jce={kernelName:l1,backendName:"webgl",kernelFunc:Zce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eue="return (x >= 0.0) ? x : (exp(x) - 1.0);",tue="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",nue=Pe({opSnippet:eue,packedOpSnippet:tue}),oue={kernelName:id,backendName:"webgl",kernelFunc:nue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sue="return (b >= 0.0) ? a : a * (b + 1.0);",rue="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",iue=t=>{const{inputs:e,backend:n}=t,{dy:o,y:s}=e,r=j().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dc(rue,o.shape,s.shape):new xa(sue,o.shape,s.shape);return n.runWebGLProgram(r,[o,s],o.dtype)},aue={kernelName:c1,backendName:"webgl",kernelFunc:iue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lue="\n  return vec4(equal(a, b));\n",cue="return float(a == b);",uue=dn({opSnippet:cue,packedOpSnippet:lue,dtype:"bool",cpuKernelImpl:Wre}),due={kernelName:zm,backendName:"webgl",kernelFunc:uue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hue='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Aw,";\n  float a1 = ").concat(Dw,";\n  float a2 = ").concat(_w,";\n  float a3 = ").concat(Ow,";\n  float a4 = ").concat(Fw,";\n  float a5 = ").concat(Pw,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"),fue=Pe({opSnippet:hue}),pue={kernelName:ad,backendName:"webgl",kernelFunc:fue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mue=hc+"\n  return exp(x);\n",gue="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",EP=Pe({opSnippet:mue,packedOpSnippet:gue,cpuKernelImpl:Ure,dtype:"float32"}),bue={kernelName:ld,backendName:"webgl",kernelFunc:EP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tv(t){const{inputs:e,attrs:n,backend:o}=t,{dim:s}=n,{input:r}=e,i=r.shape.length,a=r.shape.slice();let l=s;return s<0&&(I(-(i+1)<=s,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),l=i+s+1),a.splice(l,0,1),ae({inputs:{x:r},backend:o,attrs:{shape:a}})}const xue={kernelName:Bm,backendName:"webgl",kernelFunc:tv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GS="return exp(x) - 1.0;",vue=Pe({opSnippet:GS,packedOpSnippet:GS,cpuKernelImpl:Hre}),yue={kernelName:cd,backendName:"webgl",kernelFunc:vue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jS{constructor(e,n,o){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const r=o?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=o?"".concat(s,".0"):"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));this.userCode="\n      const float exponentMultiplier = ".concat(r,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(a,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(s,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TP(t,e,n){const o=n.texData.get(t.dataId),s=Q(t.shape),r=t.shape[t.shape.length-1],i=s/r,a=ae({inputs:{x:t},backend:n,attrs:{shape:[i,r]}}),l=a.shape,c=new jS("real",l,e),u=new jS("imag",l,e),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:l},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=Ii({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=ae({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wue(t){const{inputs:e,backend:n}=t,{input:o}=e;return TP(o,!1,n)}const $ue={kernelName:u1,backendName:"webgl",kernelFunc:wue};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kue{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dh(t){const{backend:e,attrs:n}=t,{shape:o,value:s}=n;let{dtype:r}=n;if(r=r||Zl(s),r==="string"){const i=$t(r,Q(o));return i.fill(s),e.makeTensorInfo(o,r,i)}else{const i=new kue(o,s),a=[[s]];return e.runWebGLProgram(i,[],r,a)}}const Cue={kernelName:d1,backendName:"webgl",kernelFunc:dh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iue{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sue={kernelName:h1,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,o=e,s=new Iue(n.shape);return o.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qS="return floor(x);",Eue=Pe({opSnippet:qS,packedOpSnippet:qS,cpuKernelImpl:Gre}),Tue={kernelName:ud,backendName:"webgl",kernelFunc:Eue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",Rue="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",Aue=dn({opSnippet:Nue,packedOpSnippet:Rue,dtype:"int32"}),Due={kernelName:dd,backendName:"webgl",kernelFunc:Aue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ue{constructor(e){this.variableNames=["A"];const n=On(),[o,s]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(s,".0, ").concat(o,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oue{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=On(),[o,s]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(s,".0, ").concat(o,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fue={kernelName:$x,backendName:"webgl",kernelFunc:Pue};let Ba,a0=j().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Pue(t){const{inputs:e,backend:n,attrs:o}=t;let{pixels:s}=e;const{numChannels:r}=o,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,r];if(a||i){const m=j().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ba==null||m!==a0)&&(a0=m,Ba=document.createElement("canvas").getContext("2d",{willReadFrequently:a0})),Ba.canvas.width=l,Ba.canvas.height=c,Ba.drawImage(s,0,0,l,c),s=Ba.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=yo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=j().getBool("WEBGL_PACK")?new Oue(d):new _ue(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lue(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=o,m=Rr(u),b=cn(s.shape,r.shape,l,d,c,h,!1,m);let g;const x=[],v=i!=null,y=a!=null,w=f==="leakyrelu",$=()=>{const C=[s,r],E=(S,T)=>{if(T==="NCHW"&&S.shape.length===1&&S.shape[0]!==1){const P=ae({inputs:{x:S},backend:n,attrs:{shape:[S.shape[0],1,1]}});return x.push(P),P}return S};if(v&&C.push(E(i,u)),y&&C.push(E(a,u)),w){const S=n.makeTensorInfo([],"float32",bi(p,"float32"));C.push(S),x.push(S)}return C};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))g=$P({x:s,filter:r,convInfo:b,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(b.strideWidth<=2&&m==="channelsLast"&&j().getBool("WEBGL_EXP_CONV")){const C=f?_u(f,!0):null,E=new wP(b,v,C,y,w),S=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],T=$();g=n.runWebGLProgram(E,T,"float32",S)}else if(j().getBool("WEBGL_CONV_IM2COL"))g=kP({x:s,filter:r,convInfo:b,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const C=f?_u(f,!1):null,E=new yP(b,v,C,y,w),S=$();g=n.runWebGLProgram(E,S,"float32")}const k=ae({inputs:{x:g},backend:n,attrs:{shape:b.outShape}});return x.push(g),x.forEach(C=>n.disposeIntermediateTensorInfo(C)),k}const Mue={kernelName:rp,backendName:"webgl",kernelFunc:Lue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zue(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=o,p=[];let m=u;m==null&&(m=[1,1]),I(vn(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'"));const b=cn(s.shape,r.shape,l,m,c,d,!0),g=j().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,x=h?_u(h,g):null,v=[s,r],y=i!=null,w=a!=null,$=h==="leakyrelu";if(y&&v.push(i),w&&v.push(a),$){const S=n.makeTensorInfo([],"float32",bi(f,"float32"));v.push(S),p.push(S)}let k;g?k=new SP(b,y,x,w,$):k=new IP(b,y,x,w,$);const C=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],E=n.runWebGLProgram(k,v,"float32",C);return p.forEach(S=>n.disposeIntermediateTensorInfo(S)),E}const Bue={kernelName:ER,backendName:"webgl",kernelFunc:zue};class Vue{constructor(e,n,o,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=o;const r=qe(o.length);let i="\n    int index;";for(let a=0;a<this.sliceDim;a++)i+="\n          index = round(getIndices(coords[0], ".concat(a,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[a],";\n          flattenIndex += index * ").concat(this.strides[a],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wue(t){const{inputs:e,backend:n}=t,{params:o,indices:s}=e,r=s.shape,i=r[r.length-1],a=Q(o.shape),[l,c,u,d]=yw(o,s),h=ae({inputs:{x:s},backend:n,attrs:{shape:[c,i]}}),f=ae({inputs:{x:o},backend:n,attrs:{shape:[Q(o.shape)/u,u]}});if(n.shouldExecuteOnCPU([o,s])||o.dtype==="string"){const g=n.readSync(s.dataId),x=n.bufferSync(o),v=jre(g,x,o.dtype,c,i,u,d,o.shape,a);return n.makeTensorInfo(l,o.dtype,v.values)}const p=new Vue(i,d,[c,u],o.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),b=ae({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),b}const Uue={kernelName:cR,backendName:"webgl",kernelFunc:Wue};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hue{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const o=qe(this.rank),s=Gue(e);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(s,"));\n      }\n    ")}}function Gue(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let s=0;s<t.length;s++)s===2?o.push("index"):o.push("".concat(n[s]));return o.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NP(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,indices:r}=e,{axis:i,batchDims:a}=o,l=Re(i,s.shape)[0];if(j().get("DEBUG")){const x=n.readSync(r.dataId),v=s.shape[l];for(let y=0;y<x.length;++y){const w=x[y];I(w<=v-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(v-1,"]"))}}const c=Hw(s,r,l,a),u=Q(r.shape),d=[],h=ae({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=ae({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,r])||s.dtype==="string"){const x=n.bufferSync(f),v=n.bufferSync(h),y=qre(v,x,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,y.dtype,y.values)}const m=new Hue(h.shape,p),b=n.runWebGLProgram(m,[h,f],h.dtype);d.push(b);const g=ae({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const jue={kernelName:Wm,backendName:"webgl",kernelFunc:NP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const que="return float(a > b);",Kue="\n  return vec4(greaterThan(a, b));\n",Xue=dn({opSnippet:que,packedOpSnippet:Kue,cpuKernelImpl:Kre,dtype:"bool"}),Yue={kernelName:Um,backendName:"webgl",kernelFunc:Xue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Que="return float(a >= b);",Zue="\n  return vec4(greaterThanEqual(a, b));\n",Jue=dn({opSnippet:Que,packedOpSnippet:Zue,dtype:"bool",cpuKernelImpl:Xre}),ede={kernelName:hd,backendName:"webgl",kernelFunc:Jue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tde(t){const{inputs:e,backend:n}=t,{input:o}=e;return TP(o,!0,n)}const nde={kernelName:f1,backendName:"webgl",kernelFunc:tde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ode="return float(!isnan(x) && !isinf(x));",sde=Pe({opSnippet:ode,dtype:"bool"}),rde={kernelName:pd,backendName:"webgl",kernelFunc:sde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ide="return float(isinf(x));",ade=Pe({opSnippet:ide,dtype:"bool"}),lde={kernelName:md,backendName:"webgl",kernelFunc:ade};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cde="return float(isnan(x));",ude=Pe({opSnippet:cde,dtype:"bool"}),dde={kernelName:gd,backendName:"webgl",kernelFunc:ude};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hde="return float(a < b);",fde="\n  return vec4(lessThan(a, b));\n",pde=dn({opSnippet:hde,packedOpSnippet:fde,cpuKernelImpl:Yre,dtype:"bool"}),mde={kernelName:Gm,backendName:"webgl",kernelFunc:pde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gde="return float(a <= b);",bde="\n  return vec4(lessThanEqual(a, b));\n",xde=dn({opSnippet:gde,packedOpSnippet:bde,cpuKernelImpl:Qre,dtype:"bool"}),vde={kernelName:jm,backendName:"webgl",kernelFunc:xde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t){const{backend:e,attrs:n}=t,{start:o,stop:s,num:r}=n,i=Zre(o,s,r);return e.makeTensorInfo([i.length],"float32",i)}const wde={kernelName:uR,backendName:"webgl",kernelFunc:yde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $de=hc+"\n  return x < 0.0 ? 0./0. : log(x);\n",kde="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",Cde=Pe({opSnippet:$de,packedOpSnippet:kde,cpuKernelImpl:Jre}),Ide={kernelName:bd,backendName:"webgl",kernelFunc:Cde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sde=hc+"\n  return log(1.0 + x);\n",Ede=Pe({opSnippet:Sde}),Tde={kernelName:xd,backendName:"webgl",kernelFunc:Ede};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nde="return float(a >= 1.0 && b >= 1.0);",Rde="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",Ade=dn({opSnippet:Nde,packedOpSnippet:Rde,dtype:"bool"}),Dde={kernelName:qm,backendName:"webgl",kernelFunc:Ade};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _de="return float(!(x >= 1.0));",Ode=Pe({opSnippet:_de}),Fde={kernelName:Km,backendName:"webgl",kernelFunc:Ode};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pde="return float(a >= 1.0 || b >= 1.0);",Lde="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",Mde=dn({opSnippet:Pde,packedOpSnippet:Lde,dtype:"bool"}),zde={kernelName:Xm,backendName:"webgl",kernelFunc:Mde};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bde{constructor(e,n,o,s,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const c="float(".concat(o,") + float(").concat(s,") * sum");r===.5?l="inversesqrt(".concat(c,")"):r===1?l="1.0/(".concat(c,")"):l="exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(a,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(l,";\n        setOutput(val);\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vde{constructor(e,n,o,s,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const c="float(".concat(o,") + float(").concat(s,") * sum");r===.5?l="inversesqrt(".concat(c,")"):r===1?l="1.0/(".concat(c,")"):l="exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(a,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(l,";\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wde=t=>{const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{depthRadius:r,bias:i,alpha:a,beta:l}=o,c=j().getBool("WEBGL_PACK_NORMALIZATION")?new Vde(s.shape,r,i,a,l):new Bde(s.shape,r,i,a,l);return n.runWebGLProgram(c,[s],s.dtype)},Ude={kernelName:Ym,backendName:"webgl",kernelFunc:Wde};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hde{constructor(e,n,o,s,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=o,this.alpha=s,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(s,") * norm + float(").concat(o,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(s,")\n                * float(").concat(r,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gde=t=>{const{inputs:e,backend:n,attrs:o}=t,{x:s,y:r,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=o,d=new Hde(s.shape,a,l,c,u);return n.runWebGLProgram(d,[s,r,i],s.dtype)},jde={kernelName:m1,backendName:"webgl",kernelFunc:Gde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qde(t,e,n,o){const s=Q(e),i=Q(t.shape)/s,a=ae({inputs:{x:t},attrs:{shape:[i,s]},backend:o}),l=Fa(a,t.dtype,"max",o),c=ae({inputs:{x:l},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(a),o.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RP(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{reductionIndices:r,keepDims:i}=o,a=s.shape.length,l=Re(r,s.shape);let c=l;const u=bt(c,a),d=u!=null,h=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const v=n.texData.get(f.dataId).values,y=new Array(a);for(let k=0;k<y.length;k++)y[k]=s.shape[u[k]];const w=S$(v,s.shape,s.dtype,u,y);f=n.makeTensorInfo(y,s.dtype);const $=n.texData.get(f.dataId);$.values=w}else f=Kg(s,u,n);c=Et(c.length,a)}un("max",c,a);const[p,m]=en(f.shape,c);let b=p;i&&(b=Ft(p,l));let g;if(h){const v=n.texData.get(f.dataId).values,y=eie(v,Q(m),b,s.dtype);g=n.makeTensorInfo(b,s.dtype);const w=n.texData.get(g.dataId);w.values=y}else g=qde(f,m,b,n);return d&&n.disposeIntermediateTensorInfo(f),g}const Kde={kernelName:Qm,backendName:"webgl",kernelFunc:RP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xde=E$+"\n  return max(a, b);\n",Yde="\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oa+"\n  return result;\n",Qde=dn({opSnippet:Xde,packedOpSnippet:Yde,cpuKernelImpl:tie}),Zde={kernelName:vd,backendName:"webgl",kernelFunc:Qde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e;lh(s,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=o,c=1;I(vn(i,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(c,"'"));const u=Zo(s.shape,r,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Ve(u.inShape,u.outShape))return uo({inputs:{x:s},backend:n});const d=new Ou(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const ehe={kernelName:Zm,backendName:"webgl",kernelFunc:Jde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function the(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{filterSize:r,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=o,u=[1,1,1],d=Nr(s.shape,r,i,u,a,c,l),h=new N$(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const nhe={kernelName:Jm,backendName:"webgl",kernelFunc:the};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ohe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,o=e.strideWidth,s=e.dilationHeight,r=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=r-1-e.padInfo.top,l=i-1-e.padInfo.left,c=r*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(s,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class she{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,o=e.strideHeight,s=e.strideWidth,r=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=u-1-e.padInfo.left,p=l*c*u-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(h,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(u,";\n                wC += ").concat(a,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(u," +\n                  wR * ").concat(u," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rhe(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r}=e,i=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=o,d=[1,1,1],h=Nr(i.shape,a,l,d,c,u),f=new N$(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),m=new she(h),b=n.runWebGLProgram(m,[s,p],i.dtype);return n.disposeIntermediateTensorInfo(p),b}const ihe={kernelName:b1,backendName:"webgl",kernelFunc:rhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ahe(t){const{inputs:e,backend:n,attrs:o}=t,{dy:s,input:r,output:i}=e,a=r;lh([r,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=o,h=Zo(a.shape,l,c,1,u,d),f=!0,p=new Ou(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),b=new ohe(h),g=n.runWebGLProgram(b,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const lhe={kernelName:g1,backendName:"webgl",kernelFunc:ahe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t,e,n,o){let s=new Ou(n,"max",!1);const r=o.runWebGLProgram(s,[t],"float32");s=new Ou(n,"max",!0,!0,e);const i=o.runWebGLProgram(s,[t],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uhe={kernelName:dR,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:o}=t,{filterSize:s,strides:r,pad:i,includeBatchInIndex:a}=e,l=n;I(o.shape.length===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,"."));const c=[1,1];I(vn(r,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(c,"'"));const u=Zo(o.shape,s,r,c,i),[d,h]=che(o,a,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dhe(t,e,n,o){const s=Q(e),i=Q(t.shape)/s,a=ae({inputs:{x:t},attrs:{shape:[i,s]},backend:o}),l=Fa(a,"float32","mean",o),c=ae({inputs:{x:l},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(a),o.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hhe={kernelName:eg,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:o}=t,{keepDims:s,axis:r}=e,i=n,a=o.shape.length,l=Re(r,o.shape);let c=l;const u=bt(c,a),d=u!=null,h=i.shouldExecuteOnCPU([o]),f=[];let p=o;if(d){if(h){const y=i.texData.get(p.dataId).values,w=new Array(a);for(let C=0;C<w.length;C++)w[C]=o.shape[u[C]];const $=S$(y,o.shape,o.dtype,u,w);p=i.makeTensorInfo(w,o.dtype);const k=i.texData.get(p.dataId);k.values=$}else p=Kg(o,u,i);f.push(p),c=Et(c.length,a)}un("sum",c,a);const[m,b]=en(p.shape,c);let g=m;s&&(g=Ft(m,l));const x=dhe(p,b,g,i);for(const v of f)i.disposeIntermediateTensorInfo(v);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fhe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o,a=s.shape.length,l=Re(r,s.shape);let c=l;const u=bt(c,a);let d=s;u!=null&&(d=_n({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Et(c.length,s.shape.length)),un("min",c,a);const[h,f]=en(d.shape,c),p=Q(f),m=ae({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),b=Fa(m,m.dtype,"min",n);let g;if(i){const x=Ft(h,l);g=ae({inputs:{x:b},backend:n,attrs:{shape:x}})}else g=ae({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),u!=null&&n.disposeIntermediateTensorInfo(d),g}const phe={kernelName:tg,backendName:"webgl",kernelFunc:fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mhe=E$+"\n  return min(a, b);\n",ghe="\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Oa+"\n  return result;\n",bhe=dn({opSnippet:mhe,packedOpSnippet:ghe,cpuKernelImpl:nie}),xhe={kernelName:yd,backendName:"webgl",kernelFunc:bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vhe{constructor(e,n,o){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,r=qe(s),i=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=o==="reflect"?0:1;if(s===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ");return}this.userCode="\n      ".concat(r," start = ").concat(r,"(").concat(i,");\n      ").concat(r," end = ").concat(r,"(").concat(a,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(s,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(l,"));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yhe{constructor(e,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,r=qe(s),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=En("rc",s),c=En("source",s),u="".concat(l[s-1]," < ").concat(this.outputShape[s-1]),d=s===1?"source":"vec2(".concat(c.slice(-2).join(),")"),h=o==="reflect"?0:1;let f="";if(s===1){const p="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");f="\n        ".concat(r," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(l[s-1]," += 1;\n        if(").concat(u,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{const p="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");f="\n        ".concat(r," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(l[s-1]," += 1;\n        if(").concat(u,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(l[s-2]," += 1;\n        if(").concat(l[s-2]," < ").concat(this.outputShape[s-2],") {\n          ").concat(p,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(l[s-1]," += 1;\n          if(").concat(u,") {\n            ").concat(p,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(i,");\n      const ").concat(r," end = ").concat(r,"(").concat(a,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whe=({inputs:t,backend:e,attrs:n})=>{const{x:o}=t,{paddings:s,mode:r}=n,i=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yhe(o.shape,s,r):new vhe(o.shape,s,r);return e.runWebGLProgram(i,[o],o.dtype)},$he={kernelName:ng,backendName:"webgl",kernelFunc:whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const khe="if (b == 0.0) return NAN;\n  return mod(a, b);",Che="\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Oa+"\n  return result;\n",Ihe=dn({opSnippet:khe,packedOpSnippet:Che}),She={kernelName:wd,backendName:"webgl",kernelFunc:Ihe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ehe{constructor(e,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,o],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",Nhe="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",AP=dn({opSnippet:The,packedOpSnippet:Nhe,checkOutOfBounds:!0}),Rhe={kernelName:rd,backendName:"webgl",kernelFunc:AP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KS="return a - b;",DP=dn({opSnippet:KS,packedOpSnippet:KS,supportsComplex:!0,cpuKernelImpl:kie}),Ahe={kernelName:Ld,backendName:"webgl",kernelFunc:DP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _P(t){const{inputs:e,backend:n,attrs:o}=t,{logits:s}=e,{dim:r}=o,i=Re([r],s.shape),a=RP({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Ft(a.shape,i),c=ae({inputs:{x:a},backend:n,attrs:{shape:l}}),u=DP({inputs:{a:s,b:c},backend:n}),d=EP({inputs:{x:u},backend:n}),h=Xg({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=ae({inputs:{x:h},backend:n,attrs:{shape:l}}),p=AP({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const Dhe={kernelName:yg,backendName:"webgl",kernelFunc:_P};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _he(t){const{inputs:e,backend:n,attrs:o}=t,{logits:s}=e,{numSamples:r,seed:i,normalized:a}=o,l=a?s:_P({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new Ehe(c,u,r),h=[[i]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const Ohe={kernelName:hR,backendName:"webgl",kernelFunc:_he};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fhe=es+"\n  return -x;\n",Phe="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";function Lhe(t){const{inputs:e,backend:n}=t,{x:o}=e;if(n.shouldExecuteOnCPU([o])){const r=n.texData.get(o.dataId),[i,a]=sie(r.values,o.shape,o.dtype);return n.makeTensorInfo(a,o.dtype,i)}let s;return j().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Wr(o.shape,Phe):s=new Hs(o.shape,Fhe),n.runWebGLProgram(s,[o],o.dtype)}const Mhe={kernelName:og,backendName:"webgl",kernelFunc:Lhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe=pw;function Bhe(t){xo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=o,c=n.readSync(s.dataId),u=n.readSync(r.dataId),{selectedIndices:d}=zhe(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Vhe={kernelName:x1,backendName:"webgl",kernelFunc:Bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Whe=mw;function Uhe(t){xo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=o,u=n.readSync(s.dataId),d=n.readSync(r.dataId),{selectedIndices:h,validOutputs:f}=Whe(u,d,i,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Hhe={kernelName:v1,backendName:"webgl",kernelFunc:Uhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ghe=gw;function jhe(t){xo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:o}=t,{boxes:s,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=o,u=n.readSync(s.dataId),d=n.readSync(r.dataId),h=i,f=a,p=l,m=c,{selectedIndices:b,selectedScores:g}=Ghe(u,d,h,f,p,m);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const qhe={kernelName:y1,backendName:"webgl",kernelFunc:jhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Khe{constructor(e,n,o,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(s,"), float(").concat(o,"),\n                      float(index == coords.y)));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xhe=t=>{const{inputs:e,backend:n,attrs:o}=t,{indices:s}=e,{dtype:r,depth:i,onValue:a,offValue:l}=o,c=Q(s.shape),u=new Khe(c,i,a,l),d=ae({inputs:{x:s},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],r);n.disposeIntermediateTensorInfo(d);const f=[...s.shape,i],p=ae({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},Yhe={kernelName:ig,backendName:"webgl",kernelFunc:Xhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _p(t){const{inputs:e,backend:n}=t,{x:o}=e;if(o.dtype==="complex64"){const s=uh({inputs:{input:o},backend:n}),r=_p({inputs:{x:s},backend:n}),i=Yg({inputs:{input:o},backend:n}),a=_p({inputs:{x:i},backend:n}),l=Ii({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return dh({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}const Qhe={kernelName:kg,backendName:"webgl",kernelFunc:_p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(t){const{inputs:e,backend:n}=t,{x:o}=e;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){const s=uh({inputs:{input:o},backend:n}),r=OP({inputs:{x:s},backend:n}),i=Yg({inputs:{input:o},backend:n}),a=_p({inputs:{x:i},backend:n}),l=Ii({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return dh({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}const Zhe={kernelName:rg,backendName:"webgl",kernelFunc:OP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t){const{inputs:e,backend:n,attrs:o}=t,{axis:s}=o;if(e.length===1)return tv({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{By(r,u.shape,"All tensors passed to stack must have matching shapes"),I(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=tv({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=vP({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const efe={kernelName:ag,backendName:"webgl",kernelFunc:Jhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tfe{constructor(e,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,r=qe(s),i=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ");return}this.userCode="\n      ".concat(r," start = ").concat(r,"(").concat(i,");\n      ").concat(r," end = ").concat(r,"(").concat(a,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(l,"));\n        }\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nfe{constructor(e,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,b)=>m[0]+e[b]+m[1]);const s=e.length,r=qe(s),i=n.map(m=>m[0]).join(","),a=n.map((m,b)=>m[0]+e[b]).join(","),l=En("rc",s),c=En("source",s),u="".concat(l[s-1]," < ").concat(this.outputShape[s-1]),d=s===1?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(r," rc = outputLoc;"),"".concat(l[s-1]," += 1;\n       if(").concat(u,") {\n      "),s===1?"":"}\n       rc = outputLoc;\n       ".concat(l[s-2]," += 1;\n       if(").concat(l[s-2]," < ").concat(this.outputShape[s-2],") {"),s===1?"":"  ".concat(l[s-1]," += 1;\n         if(").concat(u,") {")],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,b=s===1?2:4;m<b;m++)p+="\n        ".concat(h[m],"\n        if (").concat(f,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");p+=s===1?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(i,");\n      const ").concat(r," end = ").concat(r,"(").concat(a,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FP=t=>{const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{paddings:r,constantValue:i}=o;if(Q(s.shape)===0){const c=r.map((u,d)=>u[0]+s.shape[d]+u[1]);return dh({backend:n,attrs:{shape:c,value:i,dtype:s.dtype}})}const a=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nfe(s.shape,r,i):new tfe(s.shape,r,i),l=[[i]];return n.runWebGLProgram(a,[s],s.dtype,l)},ofe={kernelName:lg,backendName:"webgl",kernelFunc:FP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sfe="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",rfe="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Oa+"\n  return result;\n",ife=dn({opSnippet:sfe,packedOpSnippet:rfe}),afe={kernelName:kd,backendName:"webgl",kernelFunc:ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lfe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{axis:r,keepDims:i}=o,a=s.shape.length,l=[],c=Re(r,s.shape);let u=c;const d=bt(u,a);let h=s;d!=null&&(h=_n({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Et(u.length,a),l.push(h)),un("prod",u,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:b,outDtype:g}=iie(h.shape,h.dtype,p,u);f=n.makeTensorInfo(b,g,m)}else{const[p,m]=en(h.shape,u),b=Q(m),g=ae({inputs:{x:h},backend:n,attrs:{shape:[-1,b]}}),x=_1(s.dtype),v=Fa(g,x,"prod",n);f=ae({inputs:{x:v},backend:n,attrs:{shape:p}}),l.push(g),l.push(v)}if(i){l.push(f);const p=Ft(f.shape,c);f=ae({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const cfe={kernelName:ug,backendName:"webgl",kernelFunc:lfe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ufe(t){const{inputs:e,backend:n,attrs:o}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:i}=e,{outputRaggedRank:a}=o,l=s.map(g=>n.readSync(g.dataId)),c=s.map(g=>g.shape),u=n.readSync(r.dataId),d=n.readSync(i.dataId),[h,f,p]=aie(l,c,u,r.shape,r.dtype,d,i.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),b=n.makeTensorInfo(p,r.dtype,f);return m.concat([b])}const dfe={kernelName:fR,backendName:"webgl",kernelFunc:ufe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfe(t){const{inputs:e,backend:n}=t,{starts:o,limits:s,deltas:r}=e,i=n.readSync(o.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=lie(i,o.shape,o.dtype,a,s.shape,l,r.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],o.dtype,u);return[d,h]}const ffe={kernelName:pR,backendName:"webgl",kernelFunc:hfe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t){const{inputs:e,backend:n,attrs:o}=t,{shape:s,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=o,c=n.readSync(s.dataId),u=n.readSync(r.dataId),d=n.readSync(i.dataId),h=a.map(b=>n.readSync(b.dataId)),f=a.map(b=>b.shape),[p,m]=cie(c,s.shape,u,r.shape,r.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,r.dtype,m)}const mfe={kernelName:mR,backendName:"webgl",kernelFunc:pfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PP=t=>{const{backend:e,attrs:n}=t,{start:o,stop:s,step:r,dtype:i}=n,a=uie(o,s,r,i);return e.makeTensorInfo([a.length],i,a)},gfe={kernelName:w1,backendName:"webgl",kernelFunc:PP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bfe="return 1.0 / x;",xfe=Pe({opSnippet:bfe}),vfe={kernelName:Cd,backendName:"webgl",kernelFunc:xfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yfe=es+"\n  return (x < 0.0) ? 0.0 : x;\n",wfe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",$fe=Pe({opSnippet:yfe,packedOpSnippet:wfe}),kfe={kernelName:Id,backendName:"webgl",kernelFunc:$fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cfe=es+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ife="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Sfe=Pe({opSnippet:Cfe,packedOpSnippet:Ife}),Efe={kernelName:Sd,backendName:"webgl",kernelFunc:Sfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tfe{constructor(e,n,o,s,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,o,c];const u=[s&&n>1?a-1:a,s&&o>1?l-1:l],d=[s&&n>1?n-1:n,s&&o>1?o-1:o];let h;r?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/d[0],",\n          ").concat(u[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nfe{constructor(e,n,o,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,o,c];const u=[s&&n>1?a-1:a,s&&o>1?l-1:l],d=[s&&n>1?n-1:n,s&&o>1?o-1:o];let h;r?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/d[0],",\n          ").concat(u[1]/d[1],",\n          ").concat(u[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(o-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rfe(t){const{inputs:e,backend:n,attrs:o}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:i,size:a}=o,[l,c]=a,u=j().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Nfe(s.shape,l,c,r,i):new Tfe(s.shape,l,c,r,i);return n.runWebGLProgram(u,[s],"float32")}const Afe={kernelName:fg,backendName:"webgl",kernelFunc:Rfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dfe{constructor(e,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,r]=n,[,i,a]=e,l=[o&&i>1?s-1:s,o&&a>1?r-1:r],c=[o&&i>1?i-1:i,o&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(u,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(f,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(s-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(r-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fe(t){const{inputs:e,backend:n,attrs:o}=t,{images:s,dy:r}=e,{alignCorners:i}=o,a=new Dfe(r.shape,s.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Ofe={kernelName:C1,backendName:"webgl",kernelFunc:_fe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ffe{constructor(e,n,o,s,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,o,c];const u=[s&&n>1?a-1:a,s&&o>1?l-1:l],d=[s&&n>1?n-1:n,s&&o>1?o-1:o],h=s?"0.5":"0.0";let f;r?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/d[0],",\n          ").concat(u[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pfe{constructor(e,n,o,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,o,c];const u=[s&&n>1?a-1:a,s&&o>1?l-1:l],d=[s&&n>1?n-1:n,s&&o>1?o-1:o],h=s?"0.5":"0.0";let f;r?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/d[0],",\n          ").concat(u[1]/d[1],",\n          ").concat(u[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(o-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lfe(t){const{inputs:e,backend:n,attrs:o}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:i,size:a}=o,[l,c]=a,u=j().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Pfe(s.shape,l,c,r,i):new Ffe(s.shape,l,c,r,i);return n.runWebGLProgram(u,[s],s.dtype)}const Mfe={kernelName:hg,backendName:"webgl",kernelFunc:Lfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zfe{constructor(e,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,r]=n,[,i,a]=e,l=[o&&i>1?s-1:s,o&&a>1?r-1:r],c=[o&&i>1?i-1:i,o&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(u,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(f,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(s,") - 1),\n                ").concat(o," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(o," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t){const{inputs:e,backend:n,attrs:o}=t,{images:s,dy:r}=e,{alignCorners:i}=o,a=new zfe(r.shape,s.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Vfe={kernelName:k1,backendName:"webgl",kernelFunc:Bfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wfe{constructor(e,n){this.variableNames=["x"];const o=e.length;if(o>4)throw new Error("WebGL backend: Reverse of rank-".concat(o," tensor is not yet supported"));if(this.outputShape=e,o===1){this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ");return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?"".concat(e[a]," - coords[").concat(a,"] - 1"):"coords[".concat(a,"]"),r=e.map((a,l)=>s(l)).join(","),i=qe(o);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ufe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const o=e.length;if(o>4)throw new Error("WebGL backend: Reverse of rank-".concat(o," tensor is not yet supported"));this.outputShape=e;const s=En("rc",o),r="".concat(s[o-1]," + 1 < ").concat(this.outputShape[o-1]),i="".concat(s[o-2]," + 1 < ").concat(this.outputShape[o-2]),a=qe(o);o===1?this.userCode="\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(l(s.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(c(s.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(u(s.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(d(s.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ");function l(p){return h(p)}function c(p){return p[o-1]="("+p[o-1]+" + 1)",h(p)}function u(p){return p[o-2]="("+p[o-2]+" + 1)",h(p)}function d(p){return p[o-1]="("+p[o-1]+" + 1)",p[o-2]="("+p[o-2]+" + 1)",h(p)}function h(p){const m=e.map((x,v)=>f(v,p)),b=m.join(","),g=m.slice(-2).join(",");return"getChannel(getX(".concat(b,"), vec2(").concat(g,"))")}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?"".concat(e[p]," - ").concat(m[p]," - 1"):"".concat(m[p])}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hfe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{dims:r}=o,i=s.shape.length,a=Re(r,s.shape);if(i===0)return uo({inputs:{x:s},backend:n});const l=j().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ufe(s.shape,a):new Wfe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const Gfe={kernelName:pg,backendName:"webgl",kernelFunc:Hfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jfe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const o=e[1],s=e[2];this.outputShape=e;let r="";typeof n=="number"?r="float outputValue = ".concat(n.toFixed(2),";"):r="\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(s," && coordY >= 0 && coordY < ").concat(o,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qfe={kernelName:A1,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:o}=t,{radians:s,fillValue:r,center:i}=e,a=n,l=new jfe(o.shape,r),[c,u]=Tw(i,o.shape[1],o.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[o],o.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kfe="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",Xfe=Pe({opSnippet:Kfe}),Yfe={kernelName:Ed,backendName:"webgl",kernelFunc:Xfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qfe="return inversesqrt(x);",Zfe=Pe({opSnippet:Qfe,cpuKernelImpl:die}),Jfe={kernelName:Td,backendName:"webgl",kernelFunc:Zfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R${constructor(e,n,o,s,r,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=qe(r.length),u=qe(i.length);let d="";o===1?d="i":o===2&&(d="i, j");const h="getIndices(".concat(d,")");let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p="getUpdates(".concat(f,")");let m="";l&&(m="coords[0], coords[1]");const b="getDefaultValue(".concat(m,")"),g=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(c," strides = ").concat(c,"(").concat(r,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(h,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(b,", sum, float(found)));\n        }\n      ")}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class epe{constructor(e,n,o,s,r,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=qe(r.length),u=qe(i.length);let d="";o===1?d="i":o===2&&(d="i, j");const h="getIndices(".concat(d,")");let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p="getUpdates(".concat(f,")");let m="";l&&(m="coords[0], coords[1]");const b="getDefaultValue(".concat(m,")"),g=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(c," strides = ").concat(c,"(").concat(r,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(h,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(x,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(p,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(b,", sum, found));\n        }\n      ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tpe(t){const{inputs:e,backend:n,attrs:o}=t,{indices:s,updates:r}=e,{shape:i}=o,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Na(r,s,i),h=[d/c,c];if(d===0)return n.makeTensorInfo(i,s.dtype);const f=ae({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=ae({inputs:{x:r},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;j().getBool("WEBGL_PACK")?b=new epe(l,a,f.shape.length,p.shape.length,u,h):b=new R$(l,a,f.shape.length,p.shape.length,u,h);const g=n.runWebGLProgram(b,[p,f,m],p.dtype),x=ae({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),x}const npe={kernelName:gR,backendName:"webgl",kernelFunc:tpe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ope{constructor(e,n,o,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,o];const r="while (left < right) {",i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),a=j().getNumber("WEBGL_VERSION")===2?r:i,l=s==="left"?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(a,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(l," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spe(t){const{inputs:e,backend:n,attrs:o}=t,{sortedSequence:s,values:r}=e,{side:i}=o,a=new ope(s.shape[0],s.shape[1],r.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,r],"int32",l)}const rpe={kernelName:xR,backendName:"webgl",kernelFunc:spe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ipe{constructor(e,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let s,r;if(o>4)throw Error("Where for rank ".concat(o," is not yet supported"));if(o===1)r="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push("".concat(a[u])),u<e&&l.push("".concat(a[u]));s=l.join(),r=c.join()}const i=qe(o);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(s,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ape(t){const{inputs:e,backend:n}=t,{condition:o,t:s,e:r}=e,i=new ipe(o.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[o,s,r],lo(s.dtype,r.dtype))}const lpe={kernelName:mg,backendName:"webgl",kernelFunc:ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cpe="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(Dg,";\n  float scale = ").concat(_g,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"),upe=Pe({opSnippet:cpe}),dpe={kernelName:Nd,backendName:"webgl",kernelFunc:upe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe=hc+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",fpe="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ppe=Pe({opSnippet:hpe,packedOpSnippet:fpe,cpuKernelImpl:fie}),mpe={kernelName:_d,backendName:"webgl",kernelFunc:ppe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gpe="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",bpe=Pe({opSnippet:gpe}),xpe={kernelName:Dd,backendName:"webgl",kernelFunc:bpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vpe=hc+"\n  return sin(x);\n",ype="\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Oa,"\n  return result;\n"),wpe=Pe({opSnippet:vpe,packedOpSnippet:ype}),$pe={kernelName:Rd,backendName:"webgl",kernelFunc:wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",Cpe=Pe({opSnippet:kpe}),Ipe={kernelName:Ad,backendName:"webgl",kernelFunc:Cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",Epe=Pe({opSnippet:Spe}),Tpe={kernelName:Od,backendName:"webgl",kernelFunc:Epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe=t=>{const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{blockShape:r,paddings:i}=o;I(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((g,x)=>g*x),l=[[0,0]];l.push(...i);for(let g=1+r.length;g<s.shape.length;++g)l.push([0,0]);const c=[],u=FP({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=Xd(u.shape,r,a,!1),h=Yd(d.length,r.length,!1),f=Qd(u.shape,r,a,!1),p=ae({inputs:{x:u},backend:n,attrs:{shape:d}}),m=_n({inputs:{x:p},backend:n,attrs:{perm:h}}),b=ae({inputs:{x:m},backend:n,attrs:{shape:f}});return c.push(u),c.push(p),c.push(m),c.forEach(g=>n.disposeIntermediateTensorInfo(g)),b},Rpe={kernelName:xg,backendName:"webgl",kernelFunc:Npe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ape(t){const{inputs:e,backend:n}=t,{indices:o,values:s,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n         ".concat(r.shape));if(o.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n         ".concat(o.shape));if(s.shape.length!==1)throw new Error("Values must be a vector, saw:\n         ".concat(s.shape));if(i.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const a=n.readSync(o.dataId),l=n.readSync(s.dataId),c=n.readSync(r.dataId),u=n.readSync(i.dataId)[0],[d,h,f,p,m]=mie(a,o.shape,o.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,o.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(b=>Number(b)))),n.makeTensorInfo([m.length],o.dtype,new Int32Array(m))]}const Dpe={kernelName:vR,backendName:"webgl",kernelFunc:Ape};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pe(t){const{inputs:e,backend:n}=t,{inputIndices:o,inputShape:s,newShape:r}=e;if(o.shape.length!==2)throw new Error("Input indices should be a matrix but received shape ".concat(o.shape));if(s.shape.length!==1)throw new Error("Input shape should be a vector but received shape ".concat(s.shape));if(r.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(r.shape));const i=Array.from(n.readSync(s.dataId)),a=n.readSync(o.dataId),l=Array.from(n.readSync(r.dataId)),[c,u,d]=gie(a,o.shape,o.dtype,i,l);return[n.makeTensorInfo(u,o.dtype,c),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const Ope={kernelName:yR,backendName:"webgl",kernelFunc:_pe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t){const{inputs:e,backend:n}=t,{data:o,indices:s,segmentIds:r}=e;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error("Indices should be a vector but received shape\n              ".concat(s.shape));if(r.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n              ".concat(r.shape));const i=n.readSync(o.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=iP(i,o.shape,o.dtype,a,l,!0);return n.makeTensorInfo(u,o.dtype,c)}const Ppe={kernelName:wR,backendName:"webgl",kernelFunc:Fpe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpe(t){const{inputs:e,backend:n}=t,{data:o,indices:s,segmentIds:r}=e;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error("Indices should be a vector but received shape\n             ".concat(s.shape));if(r.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n             ".concat(r.shape));const i=n.readSync(o.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=iP(i,o.shape,o.dtype,a,l);return n.makeTensorInfo(u,o.dtype,c)}const Mpe={kernelName:$R,backendName:"webgl",kernelFunc:Lpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpe(t){const{inputs:e,backend:n,attrs:o}=t,{sparseIndices:s,sparseValues:r,defaultValue:i}=e,{outputShape:a}=o,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Na(r,s,a),f=!1;if(r.dtype==="string"){const g=n.bufferSync(s),x=n.bufferSync(r),v=ii(n.readSync(i.dataId)[0]),y=hie(g,x,a,h,u,c,l,d,v,f);return n.makeTensorInfo(a,y.dtype,y.values)}const p=new R$(c,l,s.shape.length,r.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[r,s,i],r.dtype),b=ae({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),b}const Bpe={kernelName:kR,backendName:"webgl",kernelFunc:zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpe(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{numOrSizeSplits:r,axis:i}=o,a=Re(i,s.shape)[0],l=Uw(s,r,a),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=fc({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const Wpe={kernelName:vg,backendName:"webgl",kernelFunc:Vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XS="return sqrt(x);",Upe=Pe({opSnippet:XS,packedOpSnippet:XS,cpuKernelImpl:bie}),Hpe={kernelName:Fd,backendName:"webgl",kernelFunc:Upe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe="return x * x;",jpe=Pe({opSnippet:Gpe}),qpe={kernelName:I1,backendName:"webgl",kernelFunc:jpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YS="return (a - b) * (a - b);",Kpe=dn({opSnippet:YS,packedOpSnippet:YS}),Xpe={kernelName:Pd,backendName:"webgl",kernelFunc:Kpe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ype(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const r=n.readSync(s.dataId),i=Ir(r),a=xie(i,"string",o);return n.makeTensorInfo(s.shape,"string",a)}const Qpe={kernelName:S1,backendName:"webgl",kernelFunc:Ype};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zpe({inputs:t,attrs:e,backend:n}){const{x:o}=t,s=es+"\n    return x > 0.0 ? 1.0 : float(".concat(e.alpha,");\n  "),r=new Hs(o.shape,s);return n.runWebGLProgram(r,[o],o.dtype)}const Jpe={kernelName:Vd,backendName:"webgl",kernelFunc:Zpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eme{constructor(e,n,o){this.variableNames=["x"],this.outputShape=o;const s=o.length,r=qe(o.length),i=qe(o.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=o.map((c,u)=>(l++,o.length===1?"coords * strides[".concat(u,"] + begin[").concat(u,"]"):"coords[".concat(l-1,"] * strides[").concat(u,"] + begin[").concat(u,"]"))).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tme(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{begin:r,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=o,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:b,isSimpleSlice:g,begin:x,end:v,strides:y}=Iw(s.shape,r,i,a,l,c,u,d,h);let w;if(m)w=ae({inputs:{x:s},backend:n,attrs:{shape:p}});else if(b||g){I(s.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(s.shape.length));const k=$w(x,v,y),C=fc({inputs:{x:s},backend:n,attrs:{begin:x,size:k}});w=ae({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else if(n.shouldExecuteOnCPU([s])){const C=n.readSync(s.dataId),E=Ne(s.shape,s.dtype,C),S=vie(f,E,y,x);w=n.makeTensorInfo(p,s.dtype,S.values)}else{const C=new eme(x,y,f);w=n.runWebGLProgram(C,[s],s.dtype)}const $=ae({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),$}const nme={kernelName:E1,backendName:"webgl",kernelFunc:tme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ome(t){const{inputs:e,backend:n,attrs:o}=t,{separator:s,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=o,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[p,m]=yie(h,f,s,r,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const sme={kernelName:CR,backendName:"webgl",kernelFunc:ome};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t){const{inputs:e,backend:n,attrs:o}=t,{skipEmpty:s}=o,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(r.shape));if(i.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const a=n.readSync(r.dataId),l=n.readSync(i.dataId)[0],[c,u,d]=wie(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ime={kernelName:IR,backendName:"webgl",kernelFunc:rme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ame(t){const{inputs:e,backend:n,attrs:o}=t,{numBuckets:s}=o,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=$ie(i,s);return n.makeTensorInfo(r.shape,"int32",a)}const lme={kernelName:SR,backendName:"webgl",kernelFunc:ame};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme="return tan(x);",ume=Pe({opSnippet:cme}),dme={kernelName:Md,backendName:"webgl",kernelFunc:ume};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hme="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",fme=Pe({opSnippet:hme}),pme={kernelName:zd,backendName:"webgl",kernelFunc:fme};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mme(t){const{inputs:e,backend:n,attrs:o}=t,{tensor:s,indices:r,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Na(i,r,s.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,r.dtype);const f=ae({inputs:{x:r},backend:n,attrs:{shape:[l,a]}}),p=ae({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=ae({inputs:{x:s},backend:n,attrs:{shape:h}}),b=new R$(l,a,f.shape.length,p.shape.length,u,h,!1,!0),g=n.runWebGLProgram(b,[p,f,m],m.dtype),x=ae({inputs:{x:g},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),x}const gme={kernelName:bR,backendName:"webgl",kernelFunc:mme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bme{constructor(e,n){this.variableNames=["A"];const o=new Array(e.length);for(let i=0;i<o.length;i++)o[i]=e[i]*n[i];this.outputShape=o,this.rank=o.length;const s=qe(this.rank),r=xme(e);this.userCode="\n      void main() {\n        ".concat(s," resRC = getOutputCoords();\n        setOutput(getA(").concat(r,"));\n      }\n    ")}}function xme(t){const e=t.length;if(e>5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(e===1)return"imod(resRC, ".concat(t[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let s=0;s<t.length;s++)o.push("imod(".concat(n[s],", ").concat(t[s],")"));return o.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LP(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{reps:r}=o;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(h=>ii(h)):l,u=Ne(s.shape,s.dtype,c),d=Cie(u,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new bme(s.shape,r);return n.runWebGLProgram(i,[s],s.dtype)}const vme={kernelName:Bd,backendName:"webgl",kernelFunc:LP};class yme{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class wme{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ri(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function QS(t){let e=1;for(;e<t;)e*=2;return e}function $me(t){const{inputs:e,backend:n,attrs:o}=t,{x:s}=e,{k:r,sorted:i}=o,a=j().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=j().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||r>l){const S=n.readSync(s.dataId),[T,P]=Iie(S,c,s.dtype,r,i);return[n.makeTensorInfo(T.shape,T.dtype,T.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(r===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,dh({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(s):s,m=Q(c)/u,b=ae({inputs:{x:f},attrs:{shape:[m,u]},backend:n});h&&Ri(n,f);const g=QS(r),x=QS(u);let v=null;const y=()=>v===null?[b,b]:[b,v],w=(S,T,P)=>{const U=y(),W=new yme(P),B=[[u],[v===null?1:0],[Number.NEGATIVE_INFINITY],[S],[T]],q=v;v=n.runWebGLProgram(W,U,"int32",B),Ri(n,q)};for(let S=1;S<g;S*=2){const T=S*2;for(let P=S;P>=1;P/=2)w(T,P,[m,x])}for(let S=x;S>g;S/=2){const T=y(),P=new wme([m,S/2]),W=[[u],[v===null?1:0],[g]],z=v;v=n.runWebGLProgram(P,T,"int32",W),Ri(n,z);const B=g/2,q=B*2;for(let R=B;R>=1;R/=2)w(q,R,v.shape)}let $=v;v=fc({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,r]}}),Ri(n,$);let k=NP({inputs:{x:b,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Ri(n,b);const C=c.slice(0,-1);C.push(r),$=v,v=ae({inputs:{x:v},attrs:{shape:C},backend:n}),Ri(n,$);const E=k;return k=ae({inputs:{x:k},attrs:{shape:C},backend:n}),Ri(n,E),[k,v]}const kme={kernelName:T1,backendName:"webgl",kernelFunc:$me};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cme{constructor(e,n,o,s,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=o==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(l," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(l," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(l," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(a," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t){const{inputs:e,backend:n,attrs:o}=t,{image:s,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=o,[u,d,h,f]=s.shape,[p,m]=c!=null?c:[d,h],b=[u,p,m,f],g=new Cme(d,h,i,a,l,b);return n.runWebGLProgram(g,[s,r],"float32")}const Sme={kernelName:N1,backendName:"webgl",kernelFunc:Ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t){const{inputs:e,attrs:n,backend:o}=t,{axis:s}=n,{x:r}=e;lh(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=o.readSync(r.dataId),{outputValues:a,outputShape:l,indices:c}=Sie(i,s,r.shape,r.dtype);return[o.makeTensorInfo(l,r.dtype,a),o.makeTensorInfo([c.length],"int32",c)]}const Tme={kernelName:R1,backendName:"webgl",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nme(t){const{inputs:e,backend:n,attrs:o}=t,{value:s}=e;let{axis:r}=o;r<0&&(r+=s.shape.length);const i=s,a=i.shape.length,l=s.shape[r],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==r&&(c[u++]=i.shape[m]);const d=[],h=new Array(a).fill(0),f=i.shape.slice();f[r]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[r]=m;const b=fc({inputs:{x:i},backend:n,attrs:{begin:h,size:f}}),g=ae({inputs:{x:b},backend:n,attrs:{shape:c}});p[m]=g,d.push(b)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Rme={kernelName:wg,backendName:"webgl",kernelFunc:Nme};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ame{constructor(e,n){this.variableNames=["x","segmentIds"];const o=e.windowSize,s=e.batchSize,r=e.inSize,i=e.numSegments,a=i*Math.ceil(r/o);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(o/4)*4,d=o%4,h="\n        sumValue += dot(values, segFilter);\n    ";let f="";r%o>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));let p="";r%o>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(l,";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(o,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(d===1,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(h,"\n        } else if (").concat(d===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(h,"\n        } else if (").concat(d===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dme(t){const{inputs:e,backend:n,attrs:o}=t,{x:s,segmentIds:r}=e,{numSegments:i}=o,a=s.shape.length,l=[];let c=0;const u=bt([c],a);let d=s;u!=null&&(d=_n({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=Et(1,a)[0]);const h=vD(d.shape,c,i),f=Q([d.shape[c]]),p=ae({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=_1(s.dtype),b=(y,w,$,k,C)=>{const E=y.shape[0],S=y.shape[1],T=xD(S,C),P={windowSize:T,inSize:S,batchSize:E,numSegments:C},U=new Ame(P,w),W=n.compileAndRun(U,[y,$],k);if(l.push(W),W.shape[1]===C)return W;const z=PP({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),B=LP({inputs:{x:z},backend:n,attrs:{reps:[S/T]}});return l.push(z),l.push(B),b(W,w,B,k,C)},g=b(p,"unsortedSegmentSum",r,m,i),x=ae({inputs:{x:g},backend:n,attrs:{shape:h}});let v=x;if(u!=null){l.push(x);const y=yi(u);v=_n({inputs:{x:v},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const _me={kernelName:$g,backendName:"webgl",kernelFunc:Dme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ome=[bae,vae,$ae,Iae,Eae,Rae,Dae,Oae,Mae,Bae,Uae,jae,Xae,Jae,nle,sle,ile,ule,hle,ple,xle,Ile,Ele,Ale,_le,zle,Vle,Gle,eae,Kle,Jle,oce,cce,hce,pce,gce,xce,$ce,Ice,Tce,Rce,Dce,Oce,Lce,zce,Uce,Gce,Kce,Qce,Jce,oue,aue,due,pue,bue,xue,yue,$ue,Cue,Sue,Tue,Due,Fue,Mue,Bue,Uue,jue,Yue,ede,Jie,nde,Qle,rde,lde,dde,nae,mde,vde,wde,Ide,Tde,Dde,Fde,zde,Ude,jde,Kde,Zde,ehe,nhe,ihe,lhe,uhe,hhe,phe,xhe,$he,She,Ohe,rae,Mhe,Vhe,Hhe,qhe,Fle,Yhe,Zhe,efe,ofe,afe,sae,cfe,dfe,ffe,mfe,gfe,Ple,Rhe,vfe,kfe,Efe,aae,Afe,Ofe,Mfe,Vfe,Gfe,qfe,Yfe,Jfe,npe,rpe,lpe,dpe,mpe,xpe,$pe,Ipe,kle,Dhe,Tpe,Rpe,Dpe,Ope,Ppe,Mpe,Bpe,Wpe,Hpe,qpe,Xpe,Qpe,Jpe,nme,sme,ime,lme,Ahe,pae,dme,pme,gme,vme,kme,Sme,mae,Tme,Rme,_me,Qhe];for(const t of Ome)TR(t);const Fme=()=>{const[t,e]=pt.useState(void 0),[n,o]=pt.useState(void 0),[s,r]=pt.useState(null),[i,a]=pt.useState([]),[l,c]=pt.useState([]);pt.useEffect(()=>{async function h(){const f=await i_("/src/models/model.json");r(f);const m=await(await fetch("/src/models/categories.json")).json();a(m)}h()},[]);const u=async()=>{if(!s||!t)return;const h=new Image;h.src=t,await h.onload;const f=document.createElement("canvas");f.width=50,f.height=50;const p=f.getContext("2d");p&&p.drawImage(h,0,0,50,50);const b=VA(f).toFloat().div(ze(255)).expandDims(),x=await(await s.predict(b)).data(),v=Array.from(x).map((y,w)=>({confidence:y,label:i[w]})).sort((y,w)=>w.confidence-y.confidence).slice(0,3);console.log(v),c(v)},d=async()=>{const{Camera:h}=u6,f=await h.getPhoto({source:tp.Photos,resultType:np.Base64}),p="data:image/jpeg;base64,".concat(f.base64String);e(p),o(p),u()};return le.jsxs(Py,{children:[le.jsx(Qf,{children:le.jsx(Jf,{children:le.jsx(Zf,{children:"Photo Gallery"})})}),le.jsxs(Ay,{children:[le.jsxs(KN,{children:[le.jsx("img",{alt:"",src:n||"https://ionicframework.com/docs/img/demos/card-media.png"}),le.jsxs(jN,{children:[le.jsx(vH,{color:"danger",size:"small",onClick:()=>u(),children:"Predecir"}),le.jsx(qN,{children:"Categoria"})]}),le.jsx(GN,{children:l.length>0?l.map((h,f)=>le.jsxs("div",{children:[le.jsxs("p",{children:["Categora: ",h.label]}),le.jsxs("p",{children:["Confianza: ",(h.confidence*100).toFixed(2),"%"]})]},f)):le.jsx("p",{children:"No se han realizado predicciones an."})})]}),le.jsx(hx,{vertical:"bottom",horizontal:"center",slot:"fixed",children:le.jsx(uf,{onClick:()=>d(),children:le.jsx(ji,{icon:QN})})})]})]})};var nv;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"})(nv||(nv={}));var ZS;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(ZS||(ZS={}));const JS=Gu("Filesystem",{web:()=>Kt(()=>import("./web-75ccecae.js"),[]).then(t=>new t.FilesystemWeb)}),e2=Gu("Preferences",{web:()=>Kt(()=>import("./web-bdb962a1.js"),[]).then(t=>new t.PreferencesWeb)}),t2="photos";function Pme(){const[t,e]=pt.useState([]),[n,o]=pt.useState([]),[s,r]=pt.useState(null),[i,a]=pt.useState([]);pt.useEffect(()=>{async function h(){const f=await i_("/src/models/model.json");r(f);const m=await(await fetch("/src/models/categories.json")).json();a(m)}h()},[]);const l=async(h,f)=>{let p;oI("hybrid")?p=(await JS.readFile({path:h.path})).data:p=await Lme(h.webPath);const m=await JS.writeFile({path:f,data:p,directory:nv.Data});return oI("hybrid")?{filepath:m.uri,webviewPath:$u.convertFileSrc(m.uri)}:{filepath:f,webviewPath:h.webPath}};return{photos:t,takePhoto:async()=>{const h=await b6.getPhoto({resultType:np.Uri,source:tp.Camera,quality:100}),f=Date.now()+".jpeg",m=[await l(h,f),...t];e(m),e2.set({key:t2,value:JSON.stringify(m)})},deletePhoto:async h=>{const f=t.filter((p,m)=>m!==h);e(f),e2.set({key:t2,value:JSON.stringify(f)})},seleccionarFoto:async h=>{try{const f=new Image;f.src=h,await f.onload;const p=document.createElement("canvas");p.width=50,p.height=50;const m=p.getContext("2d");m&&m.drawImage(f,0,0,50,50);const g=VA(p).toFloat().div(ze(255)).expandDims();if(s){const v=await(await s.predict(g)).data(),y=Array.from(v).map((w,$)=>({confidence:w,label:i[$]})).sort((w,$)=>$.confidence-w.confidence).slice(0,3);console.log(y),o(y)}else console.error("El modelo no est disponible.")}catch(f){console.error("Error al procesar la imagen:",f)}},topPredictions:n}}async function Lme(t){const n=await(await fetch(t)).blob();return new Promise((o,s)=>{const r=new FileReader;r.onerror=s,r.onload=()=>{typeof r.result=="string"?o(r.result):s("method did not return a string")},r.readAsDataURL(n)})}const Mme=()=>{const{photos:t,takePhoto:e,deletePhoto:n,seleccionarFoto:o,topPredictions:s}=Pme();return le.jsxs(Py,{children:[le.jsx(Qf,{children:le.jsx(Jf,{children:le.jsx(Zf,{children:"Photo Gallery"})})}),le.jsxs(Ay,{children:[le.jsx(gH,{children:le.jsx(xH,{children:t.map((r,i)=>le.jsxs(mH,{size:"12",children:[le.jsxs(hx,{vertical:"top",horizontal:"end",children:[le.jsx(uf,{color:"danger",size:"small",onClick:()=>n(i),children:le.jsx(ji,{icon:s6})}),le.jsx(uf,{color:"success",size:"small",onClick:()=>o(r.webviewPath),children:le.jsx(ji,{icon:t6})})]}),le.jsx(bH,{src:r.webviewPath}),s.length>0&&le.jsxs(KN,{children:[le.jsx(jN,{children:le.jsx(qN,{children:"Prediccin"})}),le.jsx(GN,{children:s.length>0?s.map((a,l)=>le.jsxs("div",{children:[le.jsxs("p",{children:["Categora: ",a.label]}),le.jsxs("p",{children:["Confianza: ",(a.confidence*100).toFixed(2),"%"]})]},l)):le.jsx("p",{children:"No se han realizado predicciones an."})})]})]},r.filepath))})}),le.jsx(hx,{vertical:"bottom",horizontal:"center",slot:"fixed",children:le.jsx(uf,{onClick:()=>e(),children:le.jsx(ji,{icon:e6})})})]})]})};const zme=({name:t})=>le.jsxs("div",{className:"container",children:[le.jsx("strong",{children:t}),le.jsxs("p",{children:["Explore ",le.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components",children:"UI Components"})]})]});const Bme=()=>le.jsxs(Py,{children:[le.jsx(Qf,{children:le.jsx(Jf,{children:le.jsx(Zf,{children:"Tab 3"})})}),le.jsxs(Ay,{fullscreen:!0,children:[le.jsx(Qf,{collapse:"condense",children:le.jsx(Jf,{children:le.jsx(Zf,{size:"large",children:"Tab 3"})})}),le.jsx(zme,{name:"Tab 3 page"})]})]});WH();const Vme=()=>le.jsx(SH,{children:le.jsx(JH,{children:le.jsxs(MH,{children:[le.jsxs(px,{children:[le.jsx(Dc,{exact:!0,path:"/tab1",children:le.jsx(Fme,{})}),le.jsx(Dc,{exact:!0,path:"/tab2",children:le.jsx(Mme,{})}),le.jsx(Dc,{path:"/tab3",children:le.jsx(Bme,{})}),le.jsx(Dc,{exact:!0,path:"/",children:le.jsx(n4,{to:"/tab1"})})]}),le.jsxs(mx,{slot:"bottom",children:[le.jsxs(xl,{tab:"tab1",href:"/tab1",children:[le.jsx(ji,{"aria-hidden":"true",icon:QN}),le.jsx(Wb,{children:"Subir Foto"})]}),le.jsxs(xl,{tab:"tab2",href:"/tab2",children:[le.jsx(ji,{icon:n6}),le.jsx(Wb,{children:"Tomar Foto"})]}),le.jsxs(xl,{tab:"tab3",href:"/tab3",children:[le.jsx(ji,{"aria-hidden":"true",icon:o6}),le.jsx(Wb,{children:"Tab 3"})]})]})]})})});var Wme=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),MP=globalThis&&globalThis.__awaiter||function(t,e,n,o){function s(r){return r instanceof n?r:new n(function(i){i(r)})}return new(n||(n=Promise))(function(r,i){function a(u){try{c(o.next(u))}catch(d){i(d)}}function l(u){try{c(o.throw(u))}catch(d){i(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((o=o.apply(t,e||[])).next())})},zP=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},o,s,r,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(u){return l([c,u])}}function l(c){if(o)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(o=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){n.label=c[1];break}if(c[0]===6&&n.label<r[1]){n.label=r[1],r=c;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(c);break}r[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{o=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},n2=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var o=0,s=e.length,r;o<s;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Ume="ionicpwaelements",ff,BP,bo=!1,ov=!1,Sr=function(t,e){return function(){}},Hme=function(t,e){return function(){}},Gme="{visibility:hidden}.hydrated{visibility:inherit}",o2={},jme="http://www.w3.org/2000/svg",qme="http://www.w3.org/1999/xhtml",Kme=function(t){return t!=null},A$=function(t){return t=typeof t,t==="object"||t==="function"};function VP(t){var e,n,o;return(o=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&o!==void 0?o:void 0}var Xme=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=null,r=!1,i=!1,a=[],l=function(d){for(var h=0;h<d.length;h++)s=d[h],Array.isArray(s)?l(s):s!=null&&typeof s!="boolean"&&((r=typeof t!="function"&&!A$(s))&&(s=String(s)),r&&i?a[a.length-1].$text$+=s:a.push(r?sv(null,s):s),i=r)};if(l(n),e){var c=e.className||e.class;c&&(e.class=typeof c!="object"?c:Object.keys(c).filter(function(d){return c[d]}).join(" "))}var u=sv(t,null);return u.$attrs$=e,a.length>0&&(u.$children$=a),u},sv=function(t,e){var n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n},Yme={},Qme=function(t){return t&&t.$tag$===Yme},Zme=function(t,e){return t!=null&&!A$(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t},Jme=function(t){return Si(t).$hostElement$},bbe=function(t,e,n){var o=Jme(t);return{emit:function(s){return WP(o,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:s})}}},WP=function(t,e,n){var o=nn.ce(e,n);return t.dispatchEvent(o),o},s2=new WeakMap,ege=function(t,e,n){var o=Op.get(t);kge&&n?(o=o||new CSSStyleSheet,typeof o=="string"?o=e:o.replaceSync(e)):o=e,Op.set(t,o)},tge=function(t,e,n,o){var s,r=UP(e),i=Op.get(r);if(t=t.nodeType===11?t:bs,i)if(typeof i=="string"){t=t.head||t;var a=s2.get(t),l=void 0;if(a||s2.set(t,a=new Set),!a.has(r)){{l=bs.createElement("style"),l.innerHTML=i;var c=(s=nn.$nonce$)!==null&&s!==void 0?s:VP(bs);c!=null&&l.setAttribute("nonce",c),t.insertBefore(l,t.querySelector("link"))}a&&a.add(r)}}else t.adoptedStyleSheets.includes(i)||(t.adoptedStyleSheets=n2(n2([],t.adoptedStyleSheets,!0),[i],!1));return r},nge=function(t){var e=t.$cmpMeta$,n=t.$hostElement$,o=e.$flags$,s=Sr("attachStyles",e.$tagName$),r=tge(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);o&10&&(n["s-sc"]=r,n.classList.add(r+"-h")),s()},UP=function(t,e){return"sc-"+t.$tagName$},r2=function(t,e,n,o,s,r){if(n!==o){var i=a2(t,e),a=e.toLowerCase();if(e==="class"){var l=t.classList,c=i2(n),u=i2(o);l.remove.apply(l,c.filter(function(p){return p&&!u.includes(p)})),l.add.apply(l,u.filter(function(p){return p&&!c.includes(p)}))}else if(e==="style"){for(var d in n)(!o||o[d]==null)&&(d.includes("-")?t.style.removeProperty(d):t.style[d]="");for(var d in o)(!n||o[d]!==n[d])&&(d.includes("-")?t.style.setProperty(d,o[d]):t.style[d]=o[d])}else if(e==="ref")o&&o(t);else if(!i&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):a2(Zg,a)?e=a.slice(2):e=a[2]+e.slice(3),n&&nn.rel(t,e,n,!1),o&&nn.ael(t,e,o,!1);else{var h=A$(o);if((i||h&&o!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=o;else{var f=o==null?"":o;e==="list"?i=!1:(n==null||t[e]!=f)&&(t[e]=f)}}catch(p){}o==null||o===!1?(o!==!1||t.getAttribute(e)==="")&&t.removeAttribute(e):(!i||r&4||s)&&!h&&(o=o===!0?"":o,t.setAttribute(e,o))}}},oge=/\s/,i2=function(t){return t?t.split(oge):[]},HP=function(t,e,n,o){var s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||o2,i=e.$attrs$||o2;for(o in r)o in i||r2(s,o,r[o],void 0,n,e.$flags$);for(o in i)r2(s,o,r[o],i[o],n,e.$flags$)},D$=function(t,e,n,o){var s=e.$children$[n],r=0,i,a;if(s.$text$!==null)i=s.$elm$=bs.createTextNode(s.$text$);else{if(bo||(bo=s.$tag$==="svg"),i=s.$elm$=bs.createElementNS(bo?jme:qme,s.$tag$),bo&&s.$tag$==="foreignObject"&&(bo=!1),HP(null,s,bo),Kme(ff)&&i["s-si"]!==ff&&i.classList.add(i["s-si"]=ff),s.$children$)for(r=0;r<s.$children$.length;++r)a=D$(t,s,r),a&&i.appendChild(a);s.$tag$==="svg"?bo=!1:i.tagName==="foreignObject"&&(bo=!0)}return i},GP=function(t,e,n,o,s,r){var i=t,a;for(i.shadowRoot&&i.tagName===BP&&(i=i.shadowRoot);s<=r;++s)o[s]&&(a=D$(null,n,s),a&&(o[s].$elm$=a,i.insertBefore(a,e)))},jP=function(t,e,n){for(var o=e;o<=n;++o){var s=t[o];if(s){var r=s.$elm$;qP(s),r&&r.remove()}}},sge=function(t,e,n,o){for(var s=0,r=0,i=e.length-1,a=e[0],l=e[i],c=o.length-1,u=o[0],d=o[c],h;s<=i&&r<=c;)a==null?a=e[++s]:l==null?l=e[--i]:u==null?u=o[++r]:d==null?d=o[--c]:Kh(a,u)?(Bc(a,u),a=e[++s],u=o[++r]):Kh(l,d)?(Bc(l,d),l=e[--i],d=o[--c]):Kh(a,d)?(Bc(a,d),t.insertBefore(a.$elm$,l.$elm$.nextSibling),a=e[++s],d=o[--c]):Kh(l,u)?(Bc(l,u),t.insertBefore(l.$elm$,a.$elm$),l=e[--i],u=o[++r]):(h=D$(e&&e[r],n,r),u=o[++r],h&&a.$elm$.parentNode.insertBefore(h,a.$elm$));s>i?GP(t,o[c+1]==null?null:o[c+1].$elm$,n,o,r,c):r>c&&jP(e,s,i)},Kh=function(t,e){return t.$tag$===e.$tag$},Bc=function(t,e){var n=e.$elm$=t.$elm$,o=t.$children$,s=e.$children$,r=e.$tag$,i=e.$text$;i===null?(bo=r==="svg"?!0:r==="foreignObject"?!1:bo,HP(t,e,bo),o!==null&&s!==null?sge(n,o,e,s):s!==null?(t.$text$!==null&&(n.textContent=""),GP(n,null,e,s,0,s.length-1)):o!==null&&jP(o,0,o.length-1),bo&&r==="svg"&&(bo=!1)):t.$text$!==i&&(n.data=i)},qP=function(t){t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(qP)},rge=function(t,e){var n=t.$hostElement$,o=t.$vnode$||sv(null,null),s=Qme(e)?e:Xme(null,null,e);BP=n.tagName,s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=o.$elm$=n.shadowRoot||n,ff=n["s-sc"],Bc(o,s)},KP=function(t,e){e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(function(n){return t.$onRenderResolve$=n}))},Qg=function(t,e){if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}KP(t,t.$ancestorComponent$);var n=function(){return ige(t,e)};return Ige(n)},ige=function(t,e){var n=Sr("scheduleUpdate",t.$cmpMeta$.$tagName$),o=t.$lazyInstance$,s;return e&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map(function(r){var i=r[0],a=r[1];return _$(o,i,a)}),t.$queuedListeners$=void 0)),n(),age(s,function(){return cge(t,o,e)})},age=function(t,e){return lge(t)?t.then(e):e()},lge=function(t){return t instanceof Promise||t&&t.then&&typeof t.then=="function"},cge=function(t,e,n){return MP(void 0,void 0,void 0,function(){var o,s,r,i,a,l,c;return zP(this,function(u){return s=t.$hostElement$,r=Sr("update",t.$cmpMeta$.$tagName$),i=s["s-rc"],n&&nge(t),a=Sr("render",t.$cmpMeta$.$tagName$),uge(t,e),i&&(i.map(function(d){return d()}),s["s-rc"]=void 0),a(),r(),l=(o=s["s-p"])!==null&&o!==void 0?o:[],c=function(){return dge(t)},l.length===0?c():(Promise.all(l).then(c),t.$flags$|=4,l.length=0),[2]})})},uge=function(t,e,n){try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,rge(t,e)}catch(o){ms(o,t.$hostElement$)}return null},dge=function(t){t.$cmpMeta$.$tagName$;var e=t.$hostElement$,n=Sr(),o=t.$lazyInstance$,s=t.$ancestorComponent$;t.$flags$&64?n():(t.$flags$|=64,YP(e),_$(o,"componentDidLoad"),n(),t.$onReadyResolve$(e),s||XP()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&F$(function(){return Qg(t,!1)}),t.$flags$&=-517},xbe=function(t){{var e=Si(t),n=e.$hostElement$.isConnected;return n&&(e.$flags$&18)===2&&Qg(e,!1),n}},XP=function(t){YP(bs.documentElement),F$(function(){return WP(Zg,"appload",{detail:{namespace:Ume}})})},_$=function(t,e,n){if(t&&t[e])try{return t[e](n)}catch(o){ms(o)}},YP=function(t){return t.classList.add("hydrated")},hge=function(t,e){return Si(t).$instanceValues$.get(e)},fge=function(t,e,n,o){var s=Si(t),r=s.$instanceValues$.get(e),i=s.$flags$,a=s.$lazyInstance$;n=Zme(n,o.$members$[e][0]);var l=Number.isNaN(r)&&Number.isNaN(n),c=n!==r&&!l;(!(i&8)||r===void 0)&&c&&(s.$instanceValues$.set(e,n),a&&(i&18)===2&&Qg(s,!1))},QP=function(t,e,n){if(e.$members$){var o=Object.entries(e.$members$),s=t.prototype;if(o.map(function(i){var a=i[0],l=i[1][0];l&31||n&2&&l&32?Object.defineProperty(s,a,{get:function(){return hge(this,a)},set:function(c){fge(this,a,c,e)},configurable:!0,enumerable:!0}):n&1&&l&64&&Object.defineProperty(s,a,{value:function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=Si(this);return d.$onInstancePromise$.then(function(){var h;return(h=d.$lazyInstance$)[a].apply(h,c)})}})}),n&1){var r=new Map;s.attributeChangedCallback=function(i,a,l){var c=this;nn.jmp(function(){var u=r.get(i);if(c.hasOwnProperty(u))l=c[u],delete c[u];else if(s.hasOwnProperty(u)&&typeof c[u]=="number"&&c[u]==l)return;c[u]=l===null&&typeof c[u]=="boolean"?!1:l})},t.observedAttributes=o.filter(function(i){i[0];var a=i[1];return a[0]&15}).map(function(i){var a=i[0],l=i[1],c=l[1]||a;return r.set(c,a),c})}}return t},pge=function(t,e,n,o,s){return MP(void 0,void 0,void 0,function(){var r,i,a,l,c,u,d;return zP(this,function(h){switch(h.label){case 0:return e.$flags$&32?[3,3]:(e.$flags$|=32,s=$ge(n),s.then?(r=Hme(),[4,s]):[3,2]);case 1:s=h.sent(),r(),h.label=2;case 2:s.isProxied||(QP(s,n,2),s.isProxied=!0),i=Sr("createInstance",n.$tagName$),e.$flags$|=8;try{new s(e)}catch(f){ms(f)}e.$flags$&=-9,i(),s.style&&(a=s.style,l=UP(n),Op.has(l)||(c=Sr("registerStyles",n.$tagName$),ege(l,a,!!(n.$flags$&1)),c())),h.label=3;case 3:return u=e.$ancestorComponent$,d=function(){return Qg(e,!0)},u&&u["s-rc"]?u["s-rc"].push(d):d(),[2]}})})},mge=function(t){if(!(nn.$flags$&1)){var e=Si(t),n=e.$cmpMeta$,o=Sr("connectedCallback",n.$tagName$);if(e.$flags$&1)ZP(t,e,n.$listeners$);else{e.$flags$|=1;for(var s=t;s=s.parentNode||s.host;)if(s["s-p"]){KP(e,e.$ancestorComponent$=s);break}n.$members$&&Object.entries(n.$members$).map(function(r){var i=r[0],a=r[1][0];if(a&31&&t.hasOwnProperty(i)){var l=t[i];delete t[i],t[i]=l}}),pge(t,e,n)}o()}},gge=function(t){if(!(nn.$flags$&1)){var e=Si(t),n=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map(function(o){return o()}),e.$rmListeners$=void 0),_$(n,"disconnectedCallback")}},bge=function(t,e){e===void 0&&(e={});var n,o=Sr(),s=[],r=e.exclude||[],i=Zg.customElements,a=bs.head,l=a.querySelector("meta[charset]"),c=bs.createElement("style"),u=[],d,h=!0;Object.assign(nn,e),nn.$resourcesUrl$=new URL(e.resourcesUrl||"./",bs.baseURI).href,t.map(function(p){p[1].map(function(m){var b={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};b.$members$=m[2],b.$listeners$=m[3];var g=b.$tagName$,x=function(v){Wme(y,v);function y(w){var $=v.call(this,w)||this;return w=$,wge(w,b),b.$flags$&1&&w.attachShadow({mode:"open"}),$}return y.prototype.connectedCallback=function(){var w=this;d&&(clearTimeout(d),d=null),h?u.push(this):nn.jmp(function(){return mge(w)})},y.prototype.disconnectedCallback=function(){var w=this;nn.jmp(function(){return gge(w)})},y.prototype.componentOnReady=function(){return Si(this).$onReadyPromise$},y}(HTMLElement);b.$lazyBundleId$=p[0],!r.includes(g)&&!i.get(g)&&(s.push(g),i.define(g,QP(x,b,1)))})});{c.innerHTML=s+Gme,c.setAttribute("data-styles","");var f=(n=nn.$nonce$)!==null&&n!==void 0?n:VP(bs);f!=null&&c.setAttribute("nonce",f),a.insertBefore(c,l?l.nextSibling:a.firstChild)}h=!1,u.length?u.map(function(p){return p.connectedCallback()}):nn.jmp(function(){return d=setTimeout(XP,30)}),o()},ZP=function(t,e,n,o){n&&n.map(function(s){var r=s[0],i=s[1],a=s[2],l=vge(t,r),c=xge(e,a),u=yge(r);nn.ael(l,i,c,u),(e.$rmListeners$=e.$rmListeners$||[]).push(function(){return nn.rel(l,i,c,u)})})},xge=function(t,e){return function(n){try{t.$flags$&256?t.$lazyInstance$[e](n):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,n])}catch(o){ms(o)}}},vge=function(t,e){return e&16?bs.body:t},yge=function(t){return(t&2)!==0},O$=new WeakMap,Si=function(t){return O$.get(t)},vbe=function(t,e){return O$.set(e.$lazyInstance$=t,e)},wge=function(t,e){var n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise(function(o){return n.$onInstanceResolve$=o}),n.$onReadyPromise$=new Promise(function(o){return n.$onReadyResolve$=o}),t["s-p"]=[],t["s-rc"]=[],ZP(t,n,e.$listeners$),O$.set(t,n)},a2=function(t,e){return e in t},ms=function(t,e){return(0,console.error)(t,e)},l0=new Map,$ge=function(t,e,n){var o=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,r=l0.get(s);if(r)return r[o];if(!n||!BUILD.hotModuleReplacement){var i=function(a){return l0.set(s,a),a[o]};switch(s){case"pwa-action-sheet":return Kt(()=>import("./pwa-action-sheet.entry-d104c3f6.js"),[]).then(i,ms);case"pwa-camera-modal":return Kt(()=>import("./pwa-camera-modal.entry-3c33c809.js"),[]).then(i,ms);case"pwa-toast":return Kt(()=>import("./pwa-toast.entry-f10cf74a.js"),[]).then(i,ms);case"pwa-camera-modal-instance":return Kt(()=>import("./pwa-camera-modal-instance.entry-4fbb8968.js"),[]).then(i,ms);case"pwa-camera":return Kt(()=>import("./pwa-camera.entry-2312994b.js"),[]).then(i,ms)}}return Kt(()=>import("./".concat(s,".entry.js").concat("")),[]).then(function(a){return l0.set(s,a),a[o]},ms)},Op=new Map,Zg=typeof window<"u"?window:{},bs=Zg.document||{head:{}},nn={$flags$:0,$resourcesUrl$:"",jmp:function(t){return t()},raf:function(t){return requestAnimationFrame(t)},ael:function(t,e,n,o){return t.addEventListener(e,n,o)},rel:function(t,e,n,o){return t.removeEventListener(e,n,o)},ce:function(t,e){return new CustomEvent(t,e)}},JP=function(t){return Promise.resolve(t)},kge=function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1}(),l2=[],eL=[],Cge=function(t,e){return function(n){t.push(n),ov||(ov=!0,e&&nn.$flags$&4?F$(rv):nn.raf(rv))}},c2=function(t){for(var e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){ms(n)}t.length=0},rv=function(){c2(l2),c2(eL),(ov=l2.length>0)&&nn.raf(rv)},F$=function(t){return JP().then(t)},Ige=Cge(eL,!0),Sge=function(){return JP()},Ege=function(t,e){return typeof window>"u"?Promise.resolve():Sge().then(function(){return bge([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],e)})};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();Ege();const Tge=document.getElementById("root"),Nge=kT(Tge);Nge.render(le.jsx(Z.StrictMode,{children:le.jsx(Vme,{})}));export{tp as C,ZS as E,Yme as H,UV as K,JN as W,Dge as __vite_legacy_guard,sN as a,vu as b,bbe as c,Ob as d,qge as e,xbe as f,Jme as g,Xme as h,$V as i,yu as j,_ge as k,Oge as l,lx as m,Fge as n,lr as o,Pge as p,OC as q,vbe as r,Kge as s,Xge as t,pI as u,Ub as v,ri as w,cB as x,Lge as y,m6 as z};
